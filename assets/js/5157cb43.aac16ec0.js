"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[21636],{78321:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>x,frontMatter:()=>o,metadata:()=>l,toc:()=>i});var s=r(85893),n=r(11151);const o={displayed_sidebar:"English"},a="Deploy and Manage StarRocks with StarGo",l={id:"administration/stargo",title:"Deploy and Manage StarRocks with StarGo",description:"This topic describes how to deploy and manage StarRocks clusters with StarGo.",source:"@site/versioned_docs/version-2.5/administration/stargo.md",sourceDirName:"administration",slug:"/administration/stargo",permalink:"/docs/2.5/administration/stargo",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/edit/main/docs/administration/stargo.md",tags:[],version:"2.5",frontMatter:{displayed_sidebar:"English"},sidebar:"English",previous:{title:"Resource group",permalink:"/docs/2.5/administration/resource_group"},next:{title:"Configure a time zone",permalink:"/docs/2.5/administration/timezone"}},c={},i=[{value:"Install StarGo",id:"install-stargo",level:2},{value:"Deploy StarRocks cluster",id:"deploy-starrocks-cluster",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create configuration file",id:"create-configuration-file",level:3},{value:"Create deployment directory (Optional)",id:"create-deployment-directory-optional",level:3},{value:"Deploy StarRocks",id:"deploy-starrocks",level:3},{value:"View cluster information",id:"view-cluster-information",level:2},{value:"View the information of all clusters",id:"view-the-information-of-all-clusters",level:3},{value:"View the information of a specific cluster",id:"view-the-information-of-a-specific-cluster",level:3},{value:"Start cluster",id:"start-cluster",level:2},{value:"Start all nodes in a cluster",id:"start-all-nodes-in-a-cluster",level:3},{value:"Start nodes of a specific role",id:"start-nodes-of-a-specific-role",level:3},{value:"Start a specific node",id:"start-a-specific-node",level:3},{value:"Stop cluster",id:"stop-cluster",level:2},{value:"Stop all nodes in a cluster",id:"stop-all-nodes-in-a-cluster",level:3},{value:"Stop nodes of a specific role",id:"stop-nodes-of-a-specific-role",level:3},{value:"Stop a specific node",id:"stop-a-specific-node",level:3},{value:"Scale cluster out",id:"scale-cluster-out",level:2},{value:"Create configuration file",id:"create-configuration-file-1",level:3},{value:"Build SSH mutual authentication",id:"build-ssh-mutual-authentication",level:3},{value:"Create deployment directory (Optional)",id:"create-deployment-directory-optional-1",level:3},{value:"Scale the cluster out",id:"scale-the-cluster-out",level:3},{value:"Scale cluster in",id:"scale-cluster-in",level:2},{value:"Upgrade or downgrade the cluster",id:"upgrade-or-downgrade-the-cluster",level:2},{value:"Relevant commands",id:"relevant-commands",level:2}];function d(e){const t=Object.assign({h1:"h1",p:"p",h2:"h2",ul:"ul",li:"li",strong:"strong",blockquote:"blockquote",code:"code",pre:"pre",h3:"h3",a:"a",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,n.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"deploy-and-manage-starrocks-with-stargo",children:"Deploy and Manage StarRocks with StarGo"}),"\n",(0,s.jsx)(t.p,{children:"This topic describes how to deploy and manage StarRocks clusters with StarGo."}),"\n",(0,s.jsx)(t.p,{children:"StarGo is a command line tool for multiple StarRocks clusters management. You can easily deploy, check, upgrade, downgrade, start and stop multiple clusters through StarGo."}),"\n",(0,s.jsx)(t.h2,{id:"install-stargo",children:"Install StarGo"}),"\n",(0,s.jsx)(t.p,{children:"Download the following files to your central control node:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"sr-ctl"}),": The binary file of StarGo. You do not need to install it after downloading it."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"sr-c1.yaml"}),": The template for the deployment configuration file."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"repo.yaml"}),": The configuration file for the download path of StarRocks installer."]}),"\n"]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["Note\nYou can access ",(0,s.jsx)(t.code,{children:"http://cdn-thirdparty.starrocks.com"})," to get the corresponding installation index files and installers."]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"wget https://github.com/wangtianyi2004/starrocks-controller/raw/main/stargo-pkg.tar.gz\nwget https://github.com/wangtianyi2004/starrocks-controller/blob/main/sr-c1.yaml\nwget https://github.com/wangtianyi2004/starrocks-controller/blob/main/repo.yaml\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Grant ",(0,s.jsx)(t.strong,{children:"sr-ctl"})," access."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"chmod 751 sr-ctl\n"})}),"\n",(0,s.jsx)(t.h2,{id:"deploy-starrocks-cluster",children:"Deploy StarRocks cluster"}),"\n",(0,s.jsx)(t.p,{children:"You can deploy a StarRocks cluster with StarGo."}),"\n",(0,s.jsx)(t.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"The cluster to be deployed must have at least one central control node and three deployment nodes. All nodes can be deployed on one machine."}),"\n",(0,s.jsx)(t.li,{children:"You need to deploy StarGo on the central control node."}),"\n",(0,s.jsx)(t.li,{children:"You need to build mutual SSH authentication between the central control node and three deployment nodes."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The following example builds mutual authentication between central control node sr-dev@r0 and three deployment nodes starrocks@r1, starrocks@r2, and starrocks@r3."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"## Build the mutual authentication between sr-dev@r0 and starrocks@r1, 2, 3.\n[sr-dev@r0 ~]$ ssh-keygen\n[sr-dev@r0 ~]$ ssh-copy-id starrocks@r1\n[sr-dev@r0 ~]$ ssh-copy-id starrocks@r2\n[sr-dev@r0 ~]$ ssh-copy-id starrocks@r3\n\n## Verify the mutual authentication between sr-dev@r0 and starrocks@r1, 2, 3.\n[sr-dev@r0 ~]$ ssh starrocks@r1 date\n[sr-dev@r0 ~]$ ssh starrocks@r2 date\n[sr-dev@r0 ~]$ ssh starrocks@r3 date\n"})}),"\n",(0,s.jsx)(t.h3,{id:"create-configuration-file",children:"Create configuration file"}),"\n",(0,s.jsxs)(t.p,{children:["Create the StarRocks deployment topology file based on the following YAML template. See ",(0,s.jsx)(t.a,{href:"/docs/2.5/administration/Configuration",children:"Configuration"})," for detailed information."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'global:\n    user: "starrocks"   ## The current OS user.\n    ssh_port: 22\n\nfe_servers:\n  - host: 192.168.XX.XX\n    ssh_port: 22\n    http_port: 8030\n    rpc_port: 9020\n    query_port: 9030\n    edit_log_port: 9010\n    deploy_dir: StarRocks/fe\n    meta_dir: StarRocks/fe/meta\n    log_dir: StarRocks/fe/log\n    priority_networks: 192.168.XX.XX/24 # Specify the unique IP for current node when the machine has multiple IP addresses.\n    config:\n      sys_log_level: "INFO"\n  - host: 192.168.XX.XX\n    ssh_port: 22\n    http_port: 8030\n    rpc_port: 9020\n    query_port: 9030\n    edit_log_port: 9010\n    deploy_dir: StarRocks/fe\n    meta_dir: StarRocks/fe/meta\n    log_dir: StarRocks/fe/log\n    priority_networks: 192.168.XX.XX/24 # Specify the unique IP for current node when the machine has multiple IP addresses.\n    config:\n      sys_log_level: "INFO"\n  - host: 192.168.XX.XX\n    ssh_port: 22\n    http_port: 8030\n    rpc_port: 9020\n    query_port: 9030\n    edit_log_port: 9010\n    deploy_dir: StarRocks/fe\n    meta_dir: StarRocks/fe/meta\n    log_dir: StarRocks/fe/log\n    priority_networks: 192.168.XX.XX/24 # Specify the unique IP for current node when the machine has multiple IP addresses.\n    config:\n      sys_log_level: "INFO"\nbe_servers:\n  - host: 192.168.XX.XX\n    ssh_port: 22\n    be_port: 9060\n    webserver_port: 8040\n    heartbeat_service_port: 9050\n    brpc_port: 8060\n    deploy_dir : StarRocks/be\n    storage_dir: StarRocks/be/storage\n    log_dir: StarRocks/be/log\n    priority_networks: 192.168.XX.XX/24 # Specify the unique IP for current node when the machine has multiple IP addresses.\n    config:\n      create_tablet_worker_count: 3\n  - host: 192.168.XX.XX\n    ssh_port: 22\n    be_port: 9060\n    webserver_port: 8040\n    heartbeat_service_port: 9050\n    brpc_port: 8060\n    deploy_dir : StarRocks/be\n    storage_dir: StarRocks/be/storage\n    log_dir: StarRocks/be/log\n    priority_networks: 192.168.XX.XX/24 # Specify the unique IP for current node when the machine has multiple IP addresses.\n    config:\n      create_tablet_worker_count: 3\n  - host: 192.168.XX.XX\n    ssh_port: 22\n    be_port: 9060\n    webserver_port: 8040\n    heartbeat_service_port: 9050\n    brpc_port: 8060\n    deploy_dir : StarRocks/be\n    storage_dir: StarRocks/be/storage\n    log_dir: StarRocks/be/log\n    priority_networks: 192.168.XX.XX/24 # Specify the unique IP for current node when the machine has multiple IP addresses.\n    config:\n      create_tablet_worker_count: 3\n'})}),"\n",(0,s.jsx)(t.h3,{id:"create-deployment-directory-optional",children:"Create deployment directory (Optional)"}),"\n",(0,s.jsx)(t.p,{children:"If the paths under which StarRocks to be deployed does not exist, and you have the privilege to create such paths, you do not have create these paths, and StarGo will create them for you based on the configration file. If the the paths already exist, make sure you have the write access to them. You can also create necessary deployment directories on each node by running the following commands."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Create ",(0,s.jsx)(t.strong,{children:"meta"})," directory on FE nodes."]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"mkdir -p StarRocks/fe/meta\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Create ",(0,s.jsx)(t.strong,{children:"storage"})," directory on BE nodes."]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"mkdir -p StarRocks/be/storage\n"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["Caution\nMake sure the above paths are identical with the configuration items ",(0,s.jsx)(t.code,{children:"meta_dir"})," and ",(0,s.jsx)(t.code,{children:"storage_dir"})," in the configuration file."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"deploy-starrocks",children:"Deploy StarRocks"}),"\n",(0,s.jsx)(t.p,{children:"Deploy StarRocks cluster by running the following command."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster deploy <cluster_name> <version> <topology_file>\n"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Prameter"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"cluster_name"}),(0,s.jsx)(t.td,{children:"Name of the cluster to deploy."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"version"}),(0,s.jsx)(t.td,{children:"StarRocks version."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"topology_file"}),(0,s.jsx)(t.td,{children:"Name of the configuration file."})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"If the deployment is successful, the cluster will be started automatically. When beStatus and feStatus are true, the cluster is started successfully."}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[sr-dev@r0 ~]$ ./sr-ctl cluster deploy sr-c1 v2.0.1 sr-c1.yaml\n[20220301-234817  OUTPUT] Deploy cluster [clusterName = sr-c1, clusterVersion = v2.0.1, metaFile = sr-c1.yaml]\n[20220301-234836  OUTPUT] PRE CHECK DEPLOY ENV:\nPreCheck FE:\nIP                    ssh auth         meta dir                   deploy dir                 http port        rpc port         query port       edit log port\n--------------------  ---------------  -------------------------  -------------------------  ---------------  ---------------  ---------------  ---------------\n192.168.xx.xx         PASS             PASS                       PASS                       PASS             PASS             PASS             PASS\n192.168.xx.xx         PASS             PASS                       PASS                       PASS             PASS             PASS             PASS\n192.168.xx.xx         PASS             PASS                       PASS                       PASS             PASS             PASS             PASS\n\nPreCheck BE:\nIP                    ssh auth         storage dir                deploy dir                 webSer port      heartbeat port   brpc port        be port\n--------------------  ---------------  -------------------------  -------------------------  ---------------  ---------------  ---------------  ---------------\n192.168.xx.xx         PASS             PASS                       PASS                       PASS             PASS             PASS             PASS\n192.168.xx.xx         PASS             PASS                       PASS                       PASS             PASS             PASS             PASS\n192.168.xx.xx         PASS             PASS                       PASS                       PASS             PASS             PASS             PASS\n\n\n[20220301-234836  OUTPUT] PreCheck successfully. RESPECT\n[20220301-234836  OUTPUT] Create the deploy folder ...\n[20220301-234838  OUTPUT] Download StarRocks package & jdk ...\n[20220302-000515    INFO] The file starrocks-2.0.1-quickstart.tar.gz [1227406189] download successfully\n[20220302-000515  OUTPUT] Download done.\n[20220302-000515  OUTPUT] Decompress StarRocks pakcage & jdk ...\n[20220302-000520    INFO] The tar file /home/sr-dev/.starrocks-controller/download/starrocks-2.0.1-quickstart.tar.gz has been decompressed under /home/sr-dev/.starrocks-controller/download\n[20220302-000547    INFO] The tar file /home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1.tar.gz has been decompressed under /home/sr-dev/.starrocks-controller/download\n[20220302-000556    INFO] The tar file /home/sr-dev/.starrocks-controller/download/jdk-8u301-linux-x64.tar.gz has been decompressed under /home/sr-dev/.starrocks-controller/download\n[20220302-000556  OUTPUT] Distribute FE Dir ...\n[20220302-000603    INFO] Upload dir feSourceDir = [/home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1/fe] to feTargetDir = [StarRocks/fe] on FeHost = [192.168.xx.xx]\n[20220302-000615    INFO] Upload dir JDKSourceDir = [/home/sr-dev/.starrocks-controller/download/jdk1.8.0_301] to JDKTargetDir = [StarRocks/fe/jdk] on FeHost = [192.168.xx.xx]\n[20220302-000615    INFO] Modify JAVA_HOME: host = [192.168.xx.xx], filePath = [StarRocks/fe/bin/start_fe.sh]\n[20220302-000622    INFO] Upload dir feSourceDir = [/home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1/fe] to feTargetDir = [StarRocks/fe] on FeHost = [192.168.xx.xx]\n[20220302-000634    INFO] Upload dir JDKSourceDir = [/home/sr-dev/.starrocks-controller/download/jdk1.8.0_301] to JDKTargetDir = [StarRocks/fe/jdk] on FeHost = [192.168.xx.xx]\n[20220302-000634    INFO] Modify JAVA_HOME: host = [192.168.xx.xx], filePath = [StarRocks/fe/bin/start_fe.sh]\n[20220302-000640    INFO] Upload dir feSourceDir = [/home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1/fe] to feTargetDir = [StarRocks/fe] on FeHost = [192.168.xx.xx]\n[20220302-000652    INFO] Upload dir JDKSourceDir = [/home/sr-dev/.starrocks-controller/download/jdk1.8.0_301] to JDKTargetDir = [StarRocks/fe/jdk] on FeHost = [192.168.xx.xx]\n[20220302-000652    INFO] Modify JAVA_HOME: host = [192.168.xx.xx], filePath = [StarRocks/fe/bin/start_fe.sh]\n[20220302-000652  OUTPUT] Distribute BE Dir ...\n[20220302-000728    INFO] Upload dir BeSourceDir = [/home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1/be] to BeTargetDir = [StarRocks/be] on BeHost = [192.168.xx.xx]\n[20220302-000752    INFO] Upload dir BeSourceDir = [/home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1/be] to BeTargetDir = [StarRocks/be] on BeHost = [192.168.xx.xx]\n[20220302-000815    INFO] Upload dir BeSourceDir = [/home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1/be] to BeTargetDir = [StarRocks/be] on BeHost = [192.168.xx.xx]\n[20220302-000815  OUTPUT] Modify configuration for FE nodes & BE nodes ...\n############################################# START FE CLUSTER #############################################\n############################################# START FE CLUSTER #############################################\n[20220302-000816    INFO] Starting leader FE node [host = 192.168.xx.xx, editLogPort = 9010]\n[20220302-000836    INFO] The FE node start succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220302-000836    INFO] Starting follower FE node [host = 192.168.xx.xx, editLogPort = 9010]\n[20220302-000857    INFO] The FE node start succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220302-000857    INFO] Starting follower FE node [host = 192.168.xx.xx, editLogPort = 9010]\n[20220302-000918    INFO] The FE node start succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220302-000918    INFO] List all FE status:\n                                        feHost = 192.168.xx.xx       feQueryPort = 9030     feStatus = true\n                                        feHost = 192.168.xx.xx       feQueryPort = 9030     feStatus = true\n                                        feHost = 192.168.xx.xx       feQueryPort = 9030     feStatus = true\n\n############################################# START BE CLUSTER #############################################\n############################################# START BE CLUSTER #############################################\n[20220302-000918    INFO] Starting BE node [BeHost = 192.168.xx.xx HeartbeatServicePort = 9050]\n[20220302-000939    INFO] The BE node start succefully [host = 192.168.xx.xx, heartbeatServicePort = 9050]\n[20220302-000939    INFO] Starting BE node [BeHost = 192.168.xx.xx HeartbeatServicePort = 9050]\n[20220302-001000    INFO] The BE node start succefully [host = 192.168.xx.xx, heartbeatServicePort = 9050]\n[20220302-001000    INFO] Starting BE node [BeHost = 192.168.xx.xx HeartbeatServicePort = 9050]\n[20220302-001020    INFO] The BE node start succefully [host = 192.168.xx.xx, heartbeatServicePort = 9050]\n[20220302-001020  OUTPUT] List all BE status:\n                                        beHost = 192.168.xx.xx       beHeartbeatServicePort = 9050      beStatus = true\n                                        beHost = 192.168.xx.xx       beHeartbeatServicePort = 9050      beStatus = true\n                                        beHost = 192.168.xx.xx       beHeartbeatServicePort = 9050      beStatus = true\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You can test the cluster by ",(0,s.jsx)(t.a,{href:"#view-cluster-information",children:"viewing cluster information"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"You can also test it by connecting the cluster with MySQL client."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"mysql -h 127.0.0.1 -P9030 -uroot\n"})}),"\n",(0,s.jsx)(t.h2,{id:"view-cluster-information",children:"View cluster information"}),"\n",(0,s.jsx)(t.p,{children:"You can view the information of the cluster that StarGo manages."}),"\n",(0,s.jsx)(t.h3,{id:"view-the-information-of-all-clusters",children:"View the information of all clusters"}),"\n",(0,s.jsx)(t.p,{children:"View the information of all clusters by running the following command."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster list\n"})}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"[sr-dev@r0 ~]$ ./sr-ctl cluster list\n[20220302-001640  OUTPUT] List all clusters\nClusterName      User        CreateDate                 MetaPath                                                      PrivateKey\n---------------  ----------  -------------------------  ------------------------------------------------------------  --------------------------------------------------\nsr-c1            starrocks   2022-03-02 00:08:15        /home/sr-dev/.starrocks-controller/cluster/sr-c1              /home/sr-dev/.ssh/id_rsa\n"})}),"\n",(0,s.jsx)(t.h3,{id:"view-the-information-of-a-specific-cluster",children:"View the information of a specific cluster"}),"\n",(0,s.jsx)(t.p,{children:"View the information of a specific cluster by running the following command."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster display <cluster_name>\n"})}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[sr-dev@r0 ~]$ ./sr-ctl cluster display sr-c1\n[20220302-002310  OUTPUT] Display cluster [clusterName = sr-c1]\nclusterName = sr-c1\nID                          ROLE    HOST                  PORT             STAT        DATADIR                                             DEPLOYDIR\n--------------------------  ------  --------------------  ---------------  ----------  --------------------------------------------------  --------------------------------------------------\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          StarRocks/fe                                   /dataStarRocks/fe/meta\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          StarRocks/fe                                   /dataStarRocks/fe/meta\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          StarRocks/fe                                   /dataStarRocks/fe/meta\n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage\n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage\n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage\n"})}),"\n",(0,s.jsx)(t.h2,{id:"start-cluster",children:"Start cluster"}),"\n",(0,s.jsx)(t.p,{children:"You can start StarRocks clusters via StarGo."}),"\n",(0,s.jsx)(t.h3,{id:"start-all-nodes-in-a-cluster",children:"Start all nodes in a cluster"}),"\n",(0,s.jsx)(t.p,{children:"Start all nodes in a cluster by running the following command."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster start <cluster-name>\n"})}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[root@nd1 sr-controller]# ./sr-ctl cluster start sr-c1\n[20220303-190404  OUTPUT] Start cluster [clusterName = sr-c1]\n[20220303-190404    INFO] Starting FE node [FeHost = 192.168.xx.xx, EditLogPort = 9010]\n[20220303-190435    INFO] Starting FE node [FeHost = 192.168.xx.xx, EditLogPort = 9010]\n[20220303-190446    INFO] Starting FE node [FeHost = 192.168.xx.xx, EditLogPort = 9010]\n[20220303-190457    INFO] Starting BE node [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220303-190458    INFO] Starting BE node [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220303-190458    INFO] Starting BE node [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"start-nodes-of-a-specific-role",children:"Start nodes of a specific role"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Start all FE nodes in a cluster."}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster start <cluster_name> --role FE\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Start all BE nodes in a cluster."}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster start <cluster_name> --role BE\n"})}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[root@nd1 sr-controller]# ./sr-ctl cluster start sr-c1 --role FE\n[20220303-191529  OUTPUT] Start cluster [clusterName = sr-c1]\n[20220303-191529    INFO] Starting FE cluster ....\n[20220303-191529    INFO] Starting FE node [FeHost = 192.168.xx.xx, EditLogPort = 9010]\n[20220303-191600    INFO] Starting FE node [FeHost = 192.168.xx.xx, EditLogPort = 9010]\n[20220303-191610    INFO] Starting FE node [FeHost = 192.168.xx.xx, EditLogPort = 9010]\n\n[root@nd1 sr-controller]# ./sr-ctl cluster start sr-c1 --role BE\n[20220303-194215  OUTPUT] Start cluster [clusterName = sr-c1]\n[20220303-194215    INFO] Starting BE node [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220303-194216    INFO] Starting BE node [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220303-194217    INFO] Starting BE node [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220303-194217    INFO] Starting BE cluster ...\n"})}),"\n",(0,s.jsx)(t.h3,{id:"start-a-specific-node",children:"Start a specific node"}),"\n",(0,s.jsx)(t.p,{children:"Start a specific node in the cluster. Currently, only BE nodes are supported."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster start <cluster_name> --node <node_ID>\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You can check the ID of a specific node by ",(0,s.jsx)(t.a,{href:"#view-the-information-of-a-specific-cluster",children:"viewing the information of a specific cluster"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[root@nd1 sr-controller]# ./sr-ctl cluster start sr-c1 --node 192.168.xx.xx:9060\n[20220303-194714  OUTPUT] Start cluster [clusterName = sr-c1]\n[20220303-194714    INFO] Start BE node. [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n"})}),"\n",(0,s.jsx)(t.h2,{id:"stop-cluster",children:"Stop cluster"}),"\n",(0,s.jsx)(t.p,{children:"You can stop StarRocks clusters via StarGo."}),"\n",(0,s.jsx)(t.h3,{id:"stop-all-nodes-in-a-cluster",children:"Stop all nodes in a cluster"}),"\n",(0,s.jsx)(t.p,{children:"Stop all nodes in a cluster by running the following command."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster stop <cluster_name>\n"})}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster stop sr-c1\n[20220302-180140  OUTPUT] Stop cluster [clusterName = sr-c1]\n[20220302-180140  OUTPUT] Stop cluster sr-c1\n[20220302-180140    INFO] Waiting for stoping FE node [FeHost = 192.168.xx.xx]\n[20220302-180143  OUTPUT] The FE node stop succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220302-180143    INFO] Waiting for stoping FE node [FeHost = 192.168.xx.xx]\n[20220302-180145  OUTPUT] The FE node stop succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220302-180145    INFO] Waiting for stoping FE node [FeHost = 192.168.xx.xx]\n[20220302-180148  OUTPUT] The FE node stop succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220302-180148  OUTPUT] Stop cluster sr-c1\n[20220302-180148    INFO] Waiting for stoping BE node [BeHost = 192.168.xx.xx]\n[20220302-180148    INFO] The BE node stop succefully [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220302-180148    INFO] Waiting for stoping BE node [BeHost = 192.168.xx.xx]\n[20220302-180149    INFO] The BE node stop succefully [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220302-180149    INFO] Waiting for stoping BE node [BeHost = 192.168.xx.xx]\n[20220302-180149    INFO] The BE node stop succefully [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"stop-nodes-of-a-specific-role",children:"Stop nodes of a specific role"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Stop all FE nodes in a cluster."}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster stop <cluster_name> --role FE\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Stop all BE nodes in a cluster."}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster stop <cluster_name> --role BE\n"})}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster stop sr-c1 --role BE\n[20220302-180624  OUTPUT] Stop cluster [clusterName = sr-c1]\n[20220302-180624  OUTPUT] Stop cluster sr-c1\n[20220302-180624    INFO] Waiting for stoping BE node [BeHost = 192.168.xx.xx]\n[20220302-180624    INFO] The BE node stop succefully [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220302-180624    INFO] Waiting for stoping BE node [BeHost = 192.168.xx.xx]\n[20220302-180625    INFO] The BE node stop succefully [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220302-180625    INFO] Waiting for stoping BE node [BeHost = 192.168.xx.xx]\n[20220302-180625    INFO] The BE node stop succefully [BeHost = 192.168.xx.xx, HeartbeatServicePort = 9050]\n[20220302-180625    INFO] Stopping BE cluster ...\n\n###########################################################################\n\n[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster stop sr-c1 --role FE\n[20220302-180849  OUTPUT] Stop cluster [clusterName = sr-c1]\n[20220302-180849    INFO] Stopping FE cluster ....\n[20220302-180849  OUTPUT] Stop cluster sr-c1\n[20220302-180849    INFO] Waiting for stoping FE node [FeHost = 192.168.xx.xx]\n[20220302-180851  OUTPUT] The FE node stop succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220302-180851    INFO] Waiting for stoping FE node [FeHost = 192.168.xx.xx]\n[20220302-180854  OUTPUT] The FE node stop succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220302-180854    INFO] Waiting for stoping FE node [FeHost = 192.168.xx.xx]\n[20220302-180856  OUTPUT] The FE node stop succefully [host = 192.168.xx.xx, queryPort = 9030]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"stop-a-specific-node",children:"Stop a specific node"}),"\n",(0,s.jsx)(t.p,{children:"Stop a specific node in the cluster."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster stop <cluster_name> --node <node_ID>\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You can check the ID of a specific node by ",(0,s.jsx)(t.a,{href:"#view-the-information-of-a-specific-cluster",children:"viewing the information of a specific cluster"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[root@nd1 sr-controller]# ./sr-ctl cluster display sr-c1\n[20220303-185400  OUTPUT] Display cluster [clusterName = sr-c1]\nclusterName = sr-c1\n[20220303-185400    WARN] All FE nodes are down, please start FE node and display the cluster status again.\nID                          ROLE    HOST                  PORT             STAT        DATADIR                                             DEPLOYDIR\n--------------------------  ------  --------------------  ---------------  ----------  --------------------------------------------------  --------------------------------------------------\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        DOWN        StarRocks/fe                                   /dataStarRocks/fe/meta\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        DOWN        StarRocks/fe                                   /dataStarRocks/fe/meta\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        DOWN        StarRocks/fe                                   /dataStarRocks/fe/meta\n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        DOWN        StarRocks/be                                   /dataStarRocks/be/storage\n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        DOWN        StarRocks/be                                   /dataStarRocks/be/storage\n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        DOWN        StarRocks/be                                   /dataStarRocks/be/storage\n\n[root@nd1 sr-controller]# ./sr-ctl cluster stop sr-c1 --node 192.168.xx.xx:9060\n[20220303-185510  OUTPUT] Stop cluster [clusterName = sr-c1]\n[20220303-185510    INFO] Stopping BE node. [BeHost = 192.168.xx.xx]\n[20220303-185510    INFO] Waiting for stoping BE node [BeHost = 192.168.xx.xx]\n"})}),"\n",(0,s.jsx)(t.h2,{id:"scale-cluster-out",children:"Scale cluster out"}),"\n",(0,s.jsx)(t.p,{children:"You can scale a cluster out via StarGo."}),"\n",(0,s.jsx)(t.h3,{id:"create-configuration-file-1",children:"Create configuration file"}),"\n",(0,s.jsxs)(t.p,{children:["Create the scale-out task topology file based on the following template. You can specify the file to add FE and/or BE nodes based on your demand. See ",(0,s.jsx)(t.a,{href:"/docs/2.5/administration/Configuration",children:"Configuration"})," for detailed information."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'# Add an FE node.\nfe_servers:\n  - host: 192.168.xx.xx # The IP address of the new FE node.\n    ssh_port: 22\n    http_port: 8030\n    rpc_port: 9020\n    query_port: 9030\n    edit_log_port: 9010\n    deploy_dir: StarRocks/fe\n    meta_dir: StarRocks/fe/meta\n    log_dir: StarRocks/fe/log\n    priority_networks: 192.168.xx.xx/24 # Specify the unique IP for current node when the machine has multiple IP addresses.\n    config:\n      sys_log_level: "INFO"\n      sys_log_delete_age: "1d"\n\n# Add a BE node.\nbe_servers:\n  - host: 192.168.xx.xx # The IP address of the new BE node.\n    ssh_port: 22\n    be_port: 9060\n    webserver_port: 8040\n    heartbeat_service_port: 9050\n    brpc_port: 8060\n    deploy_dir : StarRocks/be\n    storage_dir: StarRocks/be/storage\n    log_dir: StarRocks/be/log\n    config:\n      create_tablet_worker_count: 3\n'})}),"\n",(0,s.jsx)(t.h3,{id:"build-ssh-mutual-authentication",children:"Build SSH mutual authentication"}),"\n",(0,s.jsxs)(t.p,{children:["If you are adding a new node to the cluster, you must build mutual authentication between the new node and the central control node. See ",(0,s.jsx)(t.a,{href:"#prerequisites",children:"Prerequisites"})," for detailed instruction."]}),"\n",(0,s.jsx)(t.h3,{id:"create-deployment-directory-optional-1",children:"Create deployment directory (Optional)"}),"\n",(0,s.jsx)(t.p,{children:"If the path under which the new node to be deployed does not exist, and you have the privilege to create such path, you do not have create these path, and StarGo will create them for you based on the configuration file. If the the paths already exist, make sure you have the write access to them. You can also create necessary deployment directories on each node by running the following commands."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Create ",(0,s.jsx)(t.strong,{children:"meta"})," directory on FE nodes."]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"mkdir -p StarRocks/fe/meta\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Create ",(0,s.jsx)(t.strong,{children:"storage"})," directory on BE nodes."]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"mkdir -p StarRocks/be/storage\n"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["Caution\nMake sure the above paths are identical with the configuration items ",(0,s.jsx)(t.code,{children:"meta_dir"})," and ",(0,s.jsx)(t.code,{children:"storage_dir"})," in the configuration file."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"scale-the-cluster-out",children:"Scale the cluster out"}),"\n",(0,s.jsx)(t.p,{children:"Scale the cluster out by running the following command."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster scale-out <cluster_name> <topology_file>\n"})}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"# Status of the cluster before scale-out.\n[root@nd1 sr-controller]# ./sr-ctl cluster display sr-test       \n[20220503-210047  OUTPUT] Display cluster [clusterName = sr-test]\nclusterName = sr-test\nclusterVerison = v2.0.1\nID                          ROLE    HOST                  PORT             STAT        DATADIR                                             DEPLOYDIR                                         \n--------------------------  ------  --------------------  ---------------  ----------  --------------------------------------------------  --------------------------------------------------\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          /opt/starrocks-test/fe                              /opt/starrocks-test/fe/meta                       \n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          /opt/starrocks-test/be                              /opt/starrocks-test/be/storage                    \n\n# Scale the cluster out.\n[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster scale-out sr-test sr-out.yaml\n[20220503-213725  OUTPUT] Scale out cluster. [ClusterName = sr-test]\n[20220503-213731  OUTPUT] PRE CHECK DEPLOY ENV:\nPreCheck FE:\nIP                    ssh auth         meta dir                        deploy dir                      http port        rpc port         query port       edit log port  \n--------------------  ---------------  ------------------------------  ------------------------------  ---------------  ---------------  ---------------  ---------------\n192.168.xx.xx         PASS             PASS                            PASS                            PASS             PASS             PASS             PASS           \n\nPreCheck BE:\nIP                    ssh auth         storage dir                     deploy dir                      webSer port      heartbeat port   brpc port        be port        \n--------------------  ---------------  ------------------------------  ------------------------------  ---------------  ---------------  ---------------  ---------------\n192.168.xx.xx         PASS             PASS                            PASS                            PASS             PASS             PASS             PASS           \n\n\n[20220503-213731  OUTPUT] PreCheck successfully. RESPECT\n[20220503-213731  OUTPUT] Create the deploy folder ...\n[20220503-213732  OUTPUT] Download StarRocks package & jdk ...\n[20220503-213732    INFO] The package has already exist [fileName = starrocks-2.0.1-quickstart.tar.gz, fileSize = 1227406189, fileModTime = 2022-05-03 17:32:03.478661923 +0800 CST]\n[20220503-213732  OUTPUT] Download done.\n[20220503-213732  OUTPUT] Decompress StarRocks pakage & jdk ...\n[20220503-213741    INFO] The tar file /home/sr-dev/.starrocks-controller/download/starrocks-2.0.1-quickstart.tar.gz has been decompressed under /home/sr-dev/.starrocks-controller/download\n[20220503-213837    INFO] The tar file /home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1.tar.gz has been decompressed under /home/sr-dev/.starrocks-controller/download\n[20220503-213837    INFO] The tar file /home/sr-dev/.starrocks-controller/download/jdk-8u301-linux-x64.tar.gz has been decompressed under /home/sr-dev/.starrocks-controller/download\n[20220503-213837  OUTPUT] Distribute FE Dir ...\n[20220503-213845    INFO] Upload dir feSourceDir = [/home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1/fe] to feTargetDir = [StarRocks/fe] on FeHost = [192.168.xx.xx]\n[20220503-213857    INFO] Upload dir JDKSourceDir = [/home/sr-dev/.starrocks-controller/download/jdk1.8.0_301] to JDKTargetDir = [StarRocks/fe/jdk] on FeHost = [192.168.xx.xx]\n[20220503-213857    INFO] Modify JAVA_HOME: host = [192.168.xx.xx], filePath = [StarRocks/fe/bin/start_fe.sh]\n[20220503-213857  OUTPUT] Distribute BE Dir ...\n[20220503-213924    INFO] Upload dir BeSourceDir = [/home/sr-dev/.starrocks-controller/download/StarRocks-2.0.1/be] to BeTargetDir = [StarRocks/be] on BeHost = [192.168.xx.xx]\n[20220503-213924  OUTPUT] Modify configuration for FE nodes & BE nodes ...\n############################################# SCALE OUT FE CLUSTER #############################################\n############################################# SCALE OUT FE CLUSTER #############################################\n[20220503-213925    INFO] Starting follower FE node [host = 192.168.xx.xx, editLogPort = 9010]\n[20220503-213945    INFO] The FE node start succefully [host = 192.168.xx.xx, queryPort = 9030]\n[20220503-213945    INFO] List all FE status:\n                                        feHost = 192.168.xx.xx       feQueryPort = 9030     feStatus = true\n\n############################################# START BE CLUSTER #############################################\n############################################# START BE CLUSTER #############################################\n[20220503-213945    INFO] Starting BE node [BeHost = 192.168.xx.xx HeartbeatServicePort = 9050]\n[20220503-214016    INFO] The BE node start succefully [host = 192.168.xx.xx, heartbeatServicePort = 9050]\n[20220503-214016  OUTPUT] List all BE status:\n                                        beHost = 192.168.xx.xx       beHeartbeatServicePort = 9050      beStatus = true\n\n# Status of the cluster after scale-out.\n[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster display sr-test \n[20220503-214302  OUTPUT] Display cluster [clusterName = sr-test]\nclusterName = sr-test\nclusterVerison = v2.0.1\nID                          ROLE    HOST                  PORT             STAT        DATADIR                                             DEPLOYDIR                                         \n--------------------------  ------  --------------------  ---------------  ----------  --------------------------------------------------  --------------------------------------------------\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          /opt/starrocks-test/fe                              /opt/starrocks-test/fe/meta                       \n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          StarRocks/fe                                   StarRocks/fe/meta                            \n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          /opt/starrocks-test/be                              /opt/starrocks-test/be/storage                    \n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   StarRocks/be/storage                         \n"})}),"\n",(0,s.jsx)(t.h2,{id:"scale-cluster-in",children:"Scale cluster in"}),"\n",(0,s.jsx)(t.p,{children:"Remove a node in the cluster by running the following command."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster scale-in <cluster_name> --node <node_id>\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You can check the ID of a specific node by ",(0,s.jsx)(t.a,{href:"#view-the-information-of-a-specific-cluster",children:"viewing the information of a specific cluster"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster display sr-c1\n[20220505-145649  OUTPUT] Display cluster [clusterName = sr-c1]\nclusterName = sr-c1\nclusterVerison = v2.0.1\nID                          ROLE    HOST                  PORT             STAT        DATADIR                                             DEPLOYDIR                                         \n--------------------------  ------  --------------------  ---------------  ----------  --------------------------------------------------  --------------------------------------------------\n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          StarRocks/fe                                   /dataStarRocks/fe/meta                           \n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          StarRocks/fe                                   /dataStarRocks/fe/meta                           \n192.168.xx.xx:9010          FE      192.168.xx.xx         9010/9030        UP          StarRocks/fe                                   /dataStarRocks/fe/meta                           \n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage                        \n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage                        \n192.168.xx.xx:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage                        \n[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster scale-in sr-c1 --node 192.168.88.83:9010\n[20220621-010553  OUTPUT] Scale in cluster [clusterName = sr-c1, nodeId = 192.168.88.83:9010]\n[20220621-010553    INFO] Waiting for stoping FE node [FeHost = 192.168.88.83]\n[20220621-010606  OUTPUT] Scale in FE node successfully. [clusterName = sr-c1, nodeId = 192.168.88.83:9010]\n\n[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster display sr-c1\n[20220621-010623  OUTPUT] Display cluster [clusterName = sr-c1]\nclusterName = sr-c1\nclusterVerison = \nID                          ROLE    HOST                  PORT             STAT        DATADIR                                             DEPLOYDIR                                         \n--------------------------  ------  --------------------  ---------------  ----------  --------------------------------------------------  --------------------------------------------------\n192.168.88.84:9010          FE      192.168.xx.xx         9010/9030        UP          StarRocks/fe                                   /dataStarRocks/fe/meta                           \n192.168.88.85:9010          FE      192.168.xx.xx         9010/9030        UP/L        StarRocks/fe                                   /dataStarRocks/fe/meta                           \n192.168.88.83:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage                        \n192.168.88.84:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage                        \n192.168.88.85:9060          BE      192.168.xx.xx         9060/9050        UP          StarRocks/be                                   /dataStarRocks/be/storage              \n"})}),"\n",(0,s.jsx)(t.h2,{id:"upgrade-or-downgrade-the-cluster",children:"Upgrade or downgrade the cluster"}),"\n",(0,s.jsx)(t.p,{children:"You can upgrade or downgrade a cluster via StarGo."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Upgrade a cluster."}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster upgrade <cluster_name>  <target_version>\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Downgrade a cluster."}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"./sr-ctl cluster downgrade <cluster_name>  <target_version>\n"})}),"\n",(0,s.jsx)(t.p,{children:"Example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-plain",metastring:"text",children:"[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster list\n[20220515-195827  OUTPUT] List all clusters\nClusterName      Version     User        CreateDate                 MetaPath                                                      PrivateKey                                        \n---------------  ----------  ----------  -------------------------  ------------------------------------------------------------  --------------------------------------------------\nsr-test2         v2.0.1      test222     2022-05-15 19:35:36        /home/sr-dev/.starrocks-controller/cluster/sr-test2           /home/sr-dev/.ssh/id_rsa                          \n[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster upgrade sr-test2 v2.1.3\n[20220515-200358  OUTPUT] List all clusters\nClusterName      Version     User        CreateDate                 MetaPath                                                      PrivateKey                                        \n---------------  ----------  ----------  -------------------------  ------------------------------------------------------------  --------------------------------------------------\nsr-test2         v2.1.3      test222     2022-05-15 20:03:01        /home/sr-dev/.starrocks-controller/cluster/sr-test2           /home/sr-dev/.ssh/id_rsa                          \n\n[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster downgrade sr-test2 v2.0.1 \n[sr-dev@nd1 sr-controller]$ ./sr-ctl cluster list\n[20220515-200915  OUTPUT] List all clusters\nClusterName      Version     User        CreateDate                 MetaPath                                                      PrivateKey                                        \n---------------  ----------  ----------  -------------------------  ------------------------------------------------------------  --------------------------------------------------\nsr-test2         v2.0.1      test222     2022-05-15 20:08:40        /home/sr-dev/.starrocks-controller/cluster/sr-test2           /home/sr-dev/.ssh/id_rsa                \n"})}),"\n",(0,s.jsx)(t.h2,{id:"relevant-commands",children:"Relevant commands"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Command"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"deploy"}),(0,s.jsx)(t.td,{children:"Deploy a cluster."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"start"}),(0,s.jsx)(t.td,{children:"Start a cluster."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"stop"}),(0,s.jsx)(t.td,{children:"Stop a cluster."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"scale-in"}),(0,s.jsx)(t.td,{children:"Scale in a cluster."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"scale-out"}),(0,s.jsx)(t.td,{children:"Scale out a cluster."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"upgrade"}),(0,s.jsx)(t.td,{children:"Upgrade a cluster."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"downgrade"}),(0,s.jsx)(t.td,{children:"Downgrade a cluster"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"display"}),(0,s.jsx)(t.td,{children:"View the information of a specific cluater."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"list"}),(0,s.jsx)(t.td,{children:"View all clusters."})]})]})]})]})}const x=function(e={}){const{wrapper:t}=Object.assign({},(0,n.ah)(),e.components);return t?(0,s.jsx)(t,Object.assign({},e,{children:(0,s.jsx)(d,e)})):d(e)}},11151:(e,t,r)=>{r.d(t,{Zo:()=>l,ah:()=>o});var s=r(67294);const n=s.createContext({});function o(e){const t=s.useContext(n);return s.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const a={};function l({components:e,children:t,disableParentContext:r}){let l;return l=r?"function"==typeof e?e({}):e||a:o(e),s.createElement(n.Provider,{value:l},t)}}}]);