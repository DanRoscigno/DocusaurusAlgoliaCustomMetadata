"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[9795],{30411:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var t=n(85893),r=n(11151);const a={displayed_sidebar:"English"},i="EXPORT",l={id:"sql-reference/sql-statements/data-manipulation/EXPORT",title:"EXPORT",description:"description",source:"@site/versioned_docs/version-2.1/sql-reference/sql-statements/data-manipulation/EXPORT.md",sourceDirName:"sql-reference/sql-statements/data-manipulation",slug:"/sql-reference/sql-statements/data-manipulation/EXPORT",permalink:"/docs/2.1/sql-reference/sql-statements/data-manipulation/EXPORT",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/edit/main/docs/sql-reference/sql-statements/data-manipulation/EXPORT.md",tags:[],version:"2.1",frontMatter:{displayed_sidebar:"English"},sidebar:"English",previous:{title:"DELETE",permalink:"/docs/2.1/sql-reference/sql-statements/data-manipulation/DELETE"},next:{title:"GROUP BY",permalink:"/docs/2.1/sql-reference/sql-statements/data-manipulation/GROUP_BY"}},o={},c=[{value:"description",id:"description",level:2},{value:"example",id:"example",level:2},{value:"keyword",id:"keyword",level:2}];function d(e){const s=Object.assign({h1:"h1",h2:"h2",p:"p",pre:"pre",code:"code",ol:"ol",li:"li"},(0,r.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"export",children:"EXPORT"}),"\n",(0,t.jsx)(s.h2,{id:"description",children:"description"}),"\n",(0,t.jsx)(s.p,{children:"This statement is used to export the data in a specified table to a specified location."}),"\n",(0,t.jsx)(s.p,{children:"This function is implemented by broker process. For different purpose storage systems, different brokers need to be deployed. Deployed brokers can be viewed through SHOW BROKER."}),"\n",(0,t.jsx)(s.p,{children:"This is an asynchronous operation, which returns if the task is submitted successfully. After execution, you can use the SHOW EXPORT command to check progress."}),"\n",(0,t.jsx)(s.p,{children:"Syntax:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"EXPORT TABLE table_name\n[PARTITION (p1[,p2])]\nTO export_path\n[opt_properties]\nbroker;\n"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"table_name"}),"\n",(0,t.jsx)(s.p,{children:"The name of the table to be exported. Currently, this system only supports the export of tables with engine as OLAP and mysql."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"partition"}),"\n",(0,t.jsx)(s.p,{children:"You can export certain specified partitions of the specified table."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"export_path"}),"\n",(0,t.jsx)(s.p,{children:"The export path. Currently, you cannot export to local, but to broker."}),"\n",(0,t.jsx)(s.p,{children:"If you need to export a directory, it must end with a slash. Otherwise, the part after the last slash will be identified as the prefix to the exported file."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"opt_properties"}),"\n",(0,t.jsx)(s.p,{children:"It is used to specify some special parameters."}),"\n",(0,t.jsx)(s.p,{children:"Syntax:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'[PROPERTIES ("key"="value", ...)]\n'})}),"\n",(0,t.jsx)(s.p,{children:"The following parameters can be specified:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-plain",metastring:"text",children:"column_separator: Specify the exported column separator, defaulting to t. \nline_delimiter: Specify the exported line separator, defaulting to\\n. \nexec_mem_limit: Export the upper limit of memory usage for a single BE node, defaulting to 2GB in bytes.\ntimeout\uff1aThe time-out for importing jobs, defaulting to 1 day in seconds.\ninclude_query_id: Whether the exported file name contains query id, defaulting to true.\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"broker"}),"\n",(0,t.jsx)(s.p,{children:"It is used to specify the broker to be used for the export."}),"\n",(0,t.jsx)(s.p,{children:"Syntax:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'WITH BROKER broker_name ("key"="value"[,...])\n'})}),"\n",(0,t.jsx)(s.p,{children:"Here you need to specify the specific broker name and the required broker properties."}),"\n",(0,t.jsxs)(s.p,{children:["For brokers corresponding to different storage systems, the input parameters are different. Specific parameters can be referred to: the required properties of broker in",(0,t.jsx)(s.code,{children:"help broker load"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"example",children:"example"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Export all data from the testTbl table to HDFS"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'EXPORT TABLE testTbl TO "hdfs://hdfs_host:port/a/b/c/" WITH BROKER "broker_name" ("username"="xxx", "password"="yyy");\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Export partitions p1 and p2 from the testTbl table to HDFS"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'EXPORT TABLE testTbl PARTITION (p1,p2) TO "hdfs://hdfs_host:port/a/b/c/" WITH BROKER "broker_name" ("username"="xxx", "password"="yyy");\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:'Export all data in the testTbl table to hdfs, using "," as column separator'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'EXPORT TABLE testTbl TO "hdfs://hdfs_host:port/a/b/c/" PROPERTIES ("column_separator"=",") WITH BROKER "broker_name" ("username"="xxx", "password"="yyy");\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:'Export all data in the testTbl table to hdfs, using Hive custom separator "\\x01" as column separator'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'EXPORT TABLE testTbl TO "hdfs://hdfs_host:port/a/b/c/" PROPERTIES ("column_separator"="\\\\x01") WITH BROKER "broker_name";\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Export all data in the testTbl table to hdfs, specifying the exported file prefix as testTbl_"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'EXPORT TABLE testTbl TO "hdfs://hdfs_host:port/a/b/c/testTbl_" WITH BROKER "broker_name";\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Export all data in the testTbl table to OSS"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'EXPORT TABLE testTbl TO "oss://oss-package/export/"\nWITH BROKER "broker_name"\n(\n"fs.oss.accessKeyId" = "xxx",\n"fs.oss.accessKeySecret" = "yyy",\n"fs.oss.endpoint" = "oss-cn-zhangjiakou-internal.aliyuncs.com"\n);\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Export all data in the testTbl table to COS"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'EXPORT TABLE testTbl TO "cosn://cos-package/export/"\nWITH BROKER "broker_name"\n(\n"fs.cosn.userinfo.secretId" = "xxx",\n"fs.cosn.userinfo.secretKey" = "yyy",\n"fs.cosn.bucket.endpoint_suffix" = "cos.ap-beijing.myqcloud.com"\n);\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Export all data in the testTbl table to S3"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'EXPORT TABLE testTbl TO "s3a://s3-package/export/"\nWITH BROKER "broker_name"\n(\n"fs.s3a.access.key" = "xxx",\n"fs.s3a.secret.key" = "yyy",\n"fs.s3a.endpoint" = "s3-ap-northeast-1.amazonaws.com"\n);\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"keyword",children:"keyword"}),"\n",(0,t.jsx)(s.p,{children:"EXPORT"})]})}const p=function(e={}){const{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(d,e)})):d(e)}},11151:(e,s,n)=>{n.d(s,{Zo:()=>l,ah:()=>a});var t=n(67294);const r=t.createContext({});function a(e){const s=t.useContext(r);return t.useMemo((()=>"function"==typeof e?e(s):{...s,...e}),[s,e])}const i={};function l({components:e,children:s,disableParentContext:n}){let l;return l=n?"function"==typeof e?e({}):e||i:a(e),t.createElement(r.Provider,{value:l},s)}}}]);