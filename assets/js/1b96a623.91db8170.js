"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[18391],{71944:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var t=r(85893),a=r(11151);const s={displayed_sidebar:"English"},i="SSB Flat-table Benchmarking",o={id:"benchmarking/SSB_Benchmarking",title:"SSB Flat-table Benchmarking",description:"Star schema benchmark (SSB) is designed to test basic performance metrics of OLAP database products. SSB uses a star schema test set that is widely applied in academia and industry. For more information, see the paper Star Schema Benchmark.",source:"@site/versioned_docs/version-2.1/benchmarking/SSB_Benchmarking.md",sourceDirName:"benchmarking",slug:"/benchmarking/SSB_Benchmarking",permalink:"/docs/2.1/benchmarking/SSB_Benchmarking",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/edit/main/docs/benchmarking/SSB_Benchmarking.md",tags:[],version:"2.1",frontMatter:{displayed_sidebar:"English"},sidebar:"English",previous:{title:"User Privilege",permalink:"/docs/2.1/administration/User_privilege"},next:{title:"TPC-H Benchmarking",permalink:"/docs/2.1/benchmarking/TPC-H_Benchmarking"}},l={},d=[{value:"1. Test Conclusion",id:"1-test-conclusion",level:2},{value:"2. Test Preparation",id:"2-test-preparation",level:2},{value:"2.1 Hardware Environment",id:"21-hardware-environment",level:3},{value:"2.2 Software Environment",id:"22-software-environment",level:3},{value:"3. Test Data and Results",id:"3-test-data-and-results",level:2},{value:"3.1 Test Data",id:"31-test-data",level:3},{value:"3.2 Test SQL",id:"32-test-sql",level:3},{value:"3.2.1 SQL for single-table test",id:"321-sql-for-single-table-test",level:4},{value:"3.2.2 SQL for single-table low-cardinality test",id:"322-sql-for-single-table-low-cardinality-test",level:4},{value:"3.3 Test Results",id:"33-test-results",level:3},{value:"4. Test Procedure",id:"4-test-procedure",level:2},{value:"4.1 Generate Data",id:"41-generate-data",level:3},{value:"4.2 Create Table Schema",id:"42-create-table-schema",level:3},{value:"4.3 Import Data",id:"43-import-data",level:3},{value:"4.4 Query Data",id:"44-query-data",level:3}];function c(e){const n=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",ul:"ul",li:"li",img:"img",h3:"h3",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",h4:"h4",pre:"pre",code:"code",ol:"ol"},(0,a.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"ssb-flat-table-benchmarking",children:"SSB Flat-table Benchmarking"}),"\n",(0,t.jsxs)(n.p,{children:["Star schema benchmark (SSB) is designed to test basic performance metrics of OLAP database products. SSB uses a star schema test set that is widely applied in academia and industry. For more information, see the paper ",(0,t.jsx)(n.a,{href:"https://www.cs.umb.edu/~poneil/StarSchemaB.PDF",children:"Star Schema Benchmark"}),".\nClickHouse flattens the star schema into a wide flat table and rewrites the SSB into a single-table benchmark. For more information, see ",(0,t.jsx)(n.a,{href:"https://clickhouse.tech/docs/en/getting-started/example-datasets/star-schema/",children:"Star schema benchmark of ClickHouse"}),".\nThis test compares the performance of StarRocks, Apache Druid, and ClickHouse against SSB single-table datasets and also compares the performance of StarRocks and ClickHouse in low-cardinality aggregation scenarios."]}),"\n",(0,t.jsx)(n.h2,{id:"1-test-conclusion",children:"1. Test Conclusion"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Among the 13 queries performed on SSB standard datasets, ClickHouse has a response time 1.7x that of StarRocks, and Apache Druid 2.2x that of StarRocks."}),"\n",(0,t.jsx)(n.li,{children:"StarRocks performs even better when the bitmap indexing and cache features are enabled, especially on Q2.2, Q2.3, and Q3.3. The overall performance is 2.2x that of ClickHouse and 2.9x that of Apache Druid."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"overall comparison",src:r(70376).Z+"",width:"750",height:"304"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"We also conduct tests on low-cardinality aggregation against standard datasets. ClickHouse has a query response time 2.26x that of StarRocks."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"comparison on low-cardinality field",src:r(25042).Z+"",width:"2250",height:"964"})}),"\n",(0,t.jsx)(n.p,{children:"In the SSB single-table test and low-cardinality aggregation test, three cloud hosts with a configuration of 16-core CPU and 64 GB of memory are used to test data at a scale of 600 million rows of data."}),"\n",(0,t.jsx)(n.h2,{id:"2-test-preparation",children:"2. Test Preparation"}),"\n",(0,t.jsx)(n.h3,{id:"21-hardware-environment",children:"2.1 Hardware Environment"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Machine"}),(0,t.jsx)(n.th,{children:"3 cloud hosts"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CPU"}),(0,t.jsx)(n.td,{children:"16-Core Intel (R) Xeon (R) Platinum 8269CY CPU @2.50GHz Cache size: 36608 KB"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Memory"}),(0,t.jsx)(n.td,{children:"64 GB"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Network bandwidth"}),(0,t.jsx)(n.td,{children:"5 Gbit/s"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Disk"}),(0,t.jsx)(n.td,{children:"ESSD"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"22-software-environment",children:"2.2 Software Environment"}),"\n",(0,t.jsx)(n.p,{children:"StarRocks, Apache Druid, and ClickHouse are deployed on hosts of the same configurations."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"StarRocks: three BE nodes and one FE node"}),"\n",(0,t.jsx)(n.li,{children:"ClickHouse: three nodes with distributed tables"}),"\n",(0,t.jsx)(n.li,{children:"Apache Druid has an additional 8-core master host deployed with Broker, Coordinator, Overlord, and Router. However, we will not pressure test  the master host and the impact is negligible. Historical and MiddleManager processes are hybrid deployed on hosts that have the same configuration as StarRocks and ClickHouse."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Kernel version: Linux 3.10.0-1127.13.1.el 7.x86_64"}),"\n",(0,t.jsx)(n.p,{children:"OS version: CentOS Linux release 7.8.2003"}),"\n",(0,t.jsx)(n.p,{children:"Software version: StarRocks Community Version 2.1, Apache Druid 0.20.1, ClickHouse 21.9"}),"\n",(0,t.jsx)(n.h2,{id:"3-test-data-and-results",children:"3. Test Data and Results"}),"\n",(0,t.jsx)(n.h3,{id:"31-test-data",children:"3.1 Test Data"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Table"}),(0,t.jsx)(n.th,{children:"Record"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"lineorder"}),(0,t.jsx)(n.td,{children:"600 million"}),(0,t.jsx)(n.td,{children:"Lineorder fact table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"customer"}),(0,t.jsx)(n.td,{children:"3 million"}),(0,t.jsx)(n.td,{children:"Customer dimension table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"part"}),(0,t.jsx)(n.td,{children:"1.4 million"}),(0,t.jsx)(n.td,{children:"Part dimension table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"supplier"}),(0,t.jsx)(n.td,{children:"200 thousand"}),(0,t.jsx)(n.td,{children:"Supplier dimension table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"dates"}),(0,t.jsx)(n.td,{children:"2,556"}),(0,t.jsx)(n.td,{children:"Date dimension table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"lineorder_flat"}),(0,t.jsx)(n.td,{children:"600 million"}),(0,t.jsx)(n.td,{children:"lineorder flat table"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"32-test-sql",children:"3.2 Test SQL"}),"\n",(0,t.jsx)(n.h4,{id:"321-sql-for-single-table-test",children:"3.2.1 SQL for single-table test"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:"--Q1.1 \nSELECT sum(lo_extendedprice * lo_discount) AS `revenue` \nFROM lineorder_flat \nWHERE lo_orderdate >= '1993-01-01' and lo_orderdate <= '1993-12-31' AND lo_discount BETWEEN 1 AND 3 AND lo_quantity < 25; \n \n--Q1.2 \nSELECT sum(lo_extendedprice * lo_discount) AS revenue FROM lineorder_flat  \nWHERE lo_orderdate >= '1994-01-01' and lo_orderdate <= '1994-01-31' AND lo_discount BETWEEN 4 AND 6 AND lo_quantity BETWEEN 26 AND 35; \n \n--Q1.3 \nSELECT sum(lo_extendedprice * lo_discount) AS revenue \nFROM lineorder_flat \nWHERE weekofyear(lo_orderdate) = 6 AND lo_orderdate >= '1994-01-01' and lo_orderdate <= '1994-12-31' \n AND lo_discount BETWEEN 5 AND 7 AND lo_quantity BETWEEN 26 AND 35; \n \n \n--Q2.1 \nSELECT sum(lo_revenue), year(lo_orderdate) AS year,  p_brand \nFROM lineorder_flat \nWHERE p_category = 'MFGR#12' AND s_region = 'AMERICA' \nGROUP BY year,  p_brand \nORDER BY year, p_brand; \n \n--Q2.2 \nSELECT \nsum(lo_revenue), year(lo_orderdate) AS year, p_brand \nFROM lineorder_flat \nWHERE p_brand >= 'MFGR#2221' AND p_brand <= 'MFGR#2228' AND s_region = 'ASIA' \nGROUP BY year,  p_brand \nORDER BY year, p_brand; \n  \n--Q2.3 \nSELECT sum(lo_revenue),  year(lo_orderdate) AS year, p_brand \nFROM lineorder_flat \nWHERE p_brand = 'MFGR#2239' AND s_region = 'EUROPE' \nGROUP BY  year,  p_brand \nORDER BY year, p_brand; \n \n \n--Q3.1 \nSELECT c_nation, s_nation,  year(lo_orderdate) AS year, sum(lo_revenue) AS revenue FROM lineorder_flat \nWHERE c_region = 'ASIA' AND s_region = 'ASIA' AND lo_orderdate  >= '1992-01-01' AND lo_orderdate   <= '1997-12-31' \nGROUP BY c_nation, s_nation, year \nORDER BY  year ASC, revenue DESC; \n \n--Q3.2 \nSELECT  c_city, s_city, year(lo_orderdate) AS year, sum(lo_revenue) AS revenue\nFROM lineorder_flat \nWHERE c_nation = 'UNITED STATES' AND s_nation = 'UNITED STATES' AND lo_orderdate  >= '1992-01-01' AND lo_orderdate <= '1997-12-31' \nGROUP BY c_city, s_city, year \nORDER BY year ASC, revenue DESC; \n \n--Q3.3 \nSELECT c_city, s_city, year(lo_orderdate) AS year, sum(lo_revenue) AS revenue \nFROM lineorder_flat \nWHERE c_city in ( 'UNITED KI1' ,'UNITED KI5') AND s_city in ( 'UNITED KI1' ,'UNITED KI5') AND lo_orderdate  >= '1992-01-01' AND lo_orderdate <= '1997-12-31' \nGROUP BY c_city, s_city, year \nORDER BY year ASC, revenue DESC; \n \n--Q3.4 \nSELECT c_city, s_city, year(lo_orderdate) AS year, sum(lo_revenue) AS revenue \nFROM lineorder_flat \nWHERE c_city in ('UNITED KI1', 'UNITED KI5') AND s_city in ( 'UNITED KI1',  'UNITED KI5') AND  lo_orderdate  >= '1997-12-01' AND lo_orderdate <= '1997-12-31' \nGROUP BY c_city,  s_city, year \nORDER BY year ASC, revenue DESC; \n \n \n--Q4.1 \nSELECT year(lo_orderdate) AS year, c_nation,  sum(lo_revenue - lo_supplycost) AS profit FROM lineorder_flat \nWHERE c_region = 'AMERICA' AND s_region = 'AMERICA' AND p_mfgr in ( 'MFGR#1' , 'MFGR#2') \nGROUP BY year, c_nation \nORDER BY year ASC, c_nation ASC; \n \n--Q4.2 \nSELECT year(lo_orderdate) AS year, \n    s_nation, p_category, sum(lo_revenue - lo_supplycost) AS profit \nFROM lineorder_flat \nWHERE c_region = 'AMERICA' AND s_region = 'AMERICA' AND lo_orderdate >= '1997-01-01' and lo_orderdate <= '1998-12-31' AND  p_mfgr in ( 'MFGR#1' , 'MFGR#2') \nGROUP BY year, s_nation,  p_category \nORDER BY  year ASC, s_nation ASC, p_category ASC; \n \n--Q4.3 \nSELECT year(lo_orderdate) AS year, s_city, p_brand, \n    sum(lo_revenue - lo_supplycost) AS profit \nFROM lineorder_flat \nWHERE s_nation = 'UNITED STATES' AND lo_orderdate >= '1997-01-01' and lo_orderdate <= '1998-12-31' AND p_category = 'MFGR#14' \nGROUP BY  year,  s_city, p_brand \nORDER BY year ASC,  s_city ASC,  p_brand ASC; \n"})}),"\n",(0,t.jsx)(n.h4,{id:"322-sql-for-single-table-low-cardinality-test",children:"3.2.2 SQL for single-table low-cardinality test"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:"--Q1\nselect count(*),lo_shipmode from lineorder_flat group by lo_shipmode;\n--Q2\nselect count(distinct lo_shipmode) from lineorder_flat;\n--Q3\nselect count(*),lo_shipmode,lo_orderpriority from lineorder_flat group by lo_shipmode,lo_orderpriority;\n--Q4\nselect count(*),lo_shipmode,lo_orderpriority from lineorder_flat group by lo_shipmode,lo_orderpriority,lo_shippriority;\n--Q5\nselect count(*),lo_shipmode,s_city from lineorder_flat group by lo_shipmode,s_city;\n--Q6\nselect count(*) from lineorder_flat group by c_city,s_city;\n--Q7\nselect count(*) from lineorder_flat group by lo_shipmode,lo_orderdate;\n--Q8\nselect count(*) from lineorder_flat group by lo_orderdate,s_nation,s_region;\n--Q9\nselect count(*) from lineorder_flat group by c_city,s_city,c_nation,s_nation;\n--Q10\nselect count(*) from (select count(*) from lineorder_flat group by lo_shipmode,lo_orderpriority,p_category,s_nation,c_nation) t;\n--Q11\nselect count(*) from (select count(*) from lineorder_flat_distributed group by lo_shipmode,lo_orderpriority,p_category,s_nation,c_nation,p_mfgr) t;\n--Q12\nselect count(*) from (select count(*) from lineorder_flat group by substr(lo_shipmode,2),lower(lo_orderpriority),p_category,s_nation,c_nation,s_region,p_mfgr) t;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"33-test-results",children:"3.3 Test Results"}),"\n",(0,t.jsx)(n.p,{children:"SSB flat-table tests"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"comparison",src:r(67538).Z+"",width:"1280",height:"692"})}),"\n",(0,t.jsx)(n.p,{children:"Low-cardinality aggregation tests"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"comparison",src:r(68573).Z+"",width:"1280",height:"820"})}),"\n",(0,t.jsx)(n.h2,{id:"4-test-procedure",children:"4. Test Procedure"}),"\n",(0,t.jsxs)(n.p,{children:["For more information about how to create a ClickHouse table and import data to the table, see ",(0,t.jsx)(n.a,{href:"https://clickhouse.tech/docs/en/getting-started/example-datasets/star-schema/",children:"ClickHouse official doc"}),". The following sections describe data generation and import procedures of StarRocks."]}),"\n",(0,t.jsx)(n.h3,{id:"41-generate-data",children:"4.1 Generate Data"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Download the ssb-poc toolkit and compile it."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Bash",children:"wget https://starrocks-public.oss-cn-zhangjiakou.aliyuncs.com/ssb-poc-0.10.0.zip\nunzip ssb-poc-0.10.0.zip\ncd ssb-poc-0.10.0\ncd ssb-poc\nmake && make install  \n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install all the related tools to the output directory."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Go to the output directory and generate data."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Bash",children:"cd output\nbin/gen-ssb.sh 100 data_dir\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"42-create-table-schema",children:"4.2 Create Table Schema"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Modify the configuration file conf/starrocks.conf and specify the cluster address."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Bash",children:"# for mysql cmd\nmysql_host: 192.168.1.1\nmysql_port: 9030\nmysql_user: root\nmysql_password:\ndatabase: ssb\n\n# cluster ports\n  http_port: 8030\n  be_heartbeat_port: 9050\n  broker_port: 8000\n\n# parallel_fragment_exec_instance_num \u8bbe\u7f6e\u5e76\u884c\u5ea6,\u5efa\u8bae\u662f\u6bcf\u4e2a\u96c6\u7fa4\u8282\u70b9\u903b\u8f91\u6838\u6570\u7684\u4e00\u534a,\u4ee5\u4e0b\u4ee58\u4e3a\u4f8b\n  parallel_num: 8\n...\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the following script to create a table:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:"# Test 100 GB data.\nbin/create_db_table.sh ddl_100\n"})}),"\n",(0,t.jsx)(n.p,{children:"Following is the statement for creating table lineorder_flat. The default bucket number has been specified. You can delete the table and re-plan the bucket number based on your cluster size and node configuration, which helps achieve better test results."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:'CREATE TABLE `lineorder_flat` (\n  `lo_orderdate` date NOT NULL COMMENT "",\n  `lo_orderkey` int(11) NOT NULL COMMENT "",\n  `lo_linenumber` tinyint(4) NOT NULL COMMENT "",\n  `lo_custkey` int(11) NOT NULL COMMENT "",\n  `lo_partkey` int(11) NOT NULL COMMENT "",\n  `lo_suppkey` int(11) NOT NULL COMMENT "",\n  `lo_orderpriority` varchar(100) NOT NULL COMMENT "",\n  `lo_shippriority` tinyint(4) NOT NULL COMMENT "",\n  `lo_quantity` tinyint(4) NOT NULL COMMENT "",\n  `lo_extendedprice` int(11) NOT NULL COMMENT "",\n  `lo_ordtotalprice` int(11) NOT NULL COMMENT "",\n  `lo_discount` tinyint(4) NOT NULL COMMENT "",\n  `lo_revenue` int(11) NOT NULL COMMENT "",\n  `lo_supplycost` int(11) NOT NULL COMMENT "",\n  `lo_tax` tinyint(4) NOT NULL COMMENT "",\n  `lo_commitdate` date NOT NULL COMMENT "",\n  `lo_shipmode` varchar(100) NOT NULL COMMENT "",\n  `c_name` varchar(100) NOT NULL COMMENT "",\n  `c_address` varchar(100) NOT NULL COMMENT "",\n  `c_city` varchar(100) NOT NULL COMMENT "",\n  `c_nation` varchar(100) NOT NULL COMMENT "",\n  `c_region` varchar(100) NOT NULL COMMENT "",\n  `c_phone` varchar(100) NOT NULL COMMENT "",\n  `c_mktsegment` varchar(100) NOT NULL COMMENT "",\n  `s_region` varchar(100) NOT NULL COMMENT "",\n  `s_nation` varchar(100) NOT NULL COMMENT "",\n  `s_city` varchar(100) NOT NULL COMMENT "",\n  `s_name` varchar(100) NOT NULL COMMENT "",\n  `s_address` varchar(100) NOT NULL COMMENT "",\n  `s_phone` varchar(100) NOT NULL COMMENT "",\n  `p_name` varchar(100) NOT NULL COMMENT "",\n  `p_mfgr` varchar(100) NOT NULL COMMENT "",\n  `p_category` varchar(100) NOT NULL COMMENT "",\n  `p_brand` varchar(100) NOT NULL COMMENT "",\n  `p_color` varchar(100) NOT NULL COMMENT "",\n  `p_type` varchar(100) NOT NULL COMMENT "",\n  `p_size` tinyint(4) NOT NULL COMMENT "",\n  `p_container` varchar(100) NOT NULL COMMENT ""\n) ENGINE=OLAP\nDUPLICATE KEY(`lo_orderdate`, `lo_orderkey`)\nCOMMENT "OLAP"\nPARTITION BY RANGE(`lo_orderdate`)\n(START ("1992-01-01") END ("1999-01-01") EVERY (INTERVAL 1 YEAR))\nDISTRIBUTED BY HASH(`lo_orderkey`) BUCKETS 48\nPROPERTIES (\n"replication_num" = "1",\n"in_memory" = "false",\n"storage_format" = "DEFAULT"\n);\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Modify page_cache parameters and restart the BE node."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:"  disable_storage_page_cache=false; -- Enable page_cache.\n  storage_page_cache_limit=4294967296; -- Specify page_cache_limit.\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you want to test the performance of StarRocks with bitmap indexing enabled, you can perform the following steps. If you want to test standard performance, skip this step and proceed with data loading."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Create bitmap indexes for all string columns."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:"#Create bitmap indexes for lo_orderpriority, lo_shipmode, c_name, c_address, c_city, c_nation, c_region, c_phone, c_mktsegment, s_region, s_nation, s_city, s_name, s_address, s_phone, p_name, p_mfgr, p_category, p_brand, p_color, p_type, p_container.\nCREATE INDEX bitmap_lo_orderpriority ON lineorder_flat (lo_orderpriority) USING BITMAP;\nCREATE INDEX bitmap_lo_shipmode ON lineorder_flat (lo_shipmode) USING BITMAP;\nCREATE INDEX bitmap_c_name ON lineorder_flat (c_name) USING BITMAP;\nCREATE INDEX bitmap_c_address ON lineorder_flat (c_address) USING BITMAP;\nCREATE INDEX bitmap_c_city ON lineorder_flat (c_city) USING BITMAP;\nCREATE INDEX bitmap_c_nation ON lineorder_flat (c_nation) USING BITMAP;\nCREATE INDEX bitmap_c_region ON lineorder_flat (c_region) USING BITMAP;\nCREATE INDEX bitmap_c_phone ON lineorder_flat (c_phone) USING BITMAP;\nCREATE INDEX bitmap_c_mktsegment ON lineorder_flat (c_mktsegment) USING BITMAP;\nCREATE INDEX bitmap_s_region ON lineorder_flat (s_region) USING BITMAP;\nCREATE INDEX bitmap_s_nation ON lineorder_flat (s_nation) USING BITMAP;\nCREATE INDEX bitmap_s_city ON lineorder_flat (s_city) USING BITMAP;\nCREATE INDEX bitmap_s_name ON lineorder_flat (s_name) USING BITMAP;\nCREATE INDEX bitmap_s_address ON lineorder_flat (s_address) USING BITMAP;\nCREATE INDEX bitmap_s_phone ON lineorder_flat (s_phone) USING BITMAP;\nCREATE INDEX bitmap_p_name ON lineorder_flat (p_name) USING BITMAP;\nCREATE INDEX bitmap_p_mfgr ON lineorder_flat (p_mfgr) USING BITMAP;\nCREATE INDEX bitmap_p_category ON lineorder_flat (p_category) USING BITMAP;\nCREATE INDEX bitmap_p_brand ON lineorder_flat (p_brand) USING BITMAP;\nCREATE INDEX bitmap_p_color ON lineorder_flat (p_color) USING BITMAP;\nCREATE INDEX bitmap_p_type ON lineorder_flat (p_type) USING BITMAP;\nCREATE INDEX bitmap_p_container ON lineorder_flat (p_container) USING BITMAP;\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Modify the following BE parameter and restart the BE node."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-SQL",children:"bitmap_max_filter_ratio=1000; \n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"43-import-data",children:"4.3 Import Data"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use Stream Load to import single-table data."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Bash",children:"bin/stream_load.sh data_dir\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Insert data into the flat table lineorder_flat."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Bash",children:"bin/flat_insert.sh \n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"44-query-data",children:"4.4 Query Data"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"SSB query"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Bash",children:"bin/benchmark.sh -p -d ssb\nbin/benchmark.sh -p -d ssb-flat\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Low-cardinality field query"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Bash",children:"bin/benchmark.sh -p -d ssb-low_cardinality\n"})}),"\n"]}),"\n"]})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(c,e)})):c(e)}},70376:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/7.1-1-880a2d630d9331a03f8b992476e20f7e.png"},25042:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/7.1-2-3e3e7d4e5632b8412b4ba8e6b9cd2854.png"},67538:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/7.1-3-ec996b7f5e741823f49ee816e6878b31.png"},68573:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/7.1-4-0e9a8695467f2902d57fbb3ea7508e7f.png"},11151:(e,n,r)=>{r.d(n,{Zo:()=>o,ah:()=>s});var t=r(67294);const a=t.createContext({});function s(e){const n=t.useContext(a);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const i={};function o({components:e,children:n,disableParentContext:r}){let o;return o=r?"function"==typeof e?e({}):e||i:s(e),t.createElement(a.Provider,{value:o},n)}}}]);