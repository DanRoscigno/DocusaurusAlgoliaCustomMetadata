"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[22463],{14269:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>o});var t=r(85893),n=r(11151);const i={},a="StarRocks version 2.4",c={id:"release_notes/release-2.4",title:"StarRocks version 2.4",description:"2.4.5",source:"@site/versioned_docs/version-3.1/release_notes/release-2.4.md",sourceDirName:"release_notes",slug:"/release_notes/release-2.4",permalink:"/docusaurusv3/docs/release_notes/release-2.4",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/tree/main/versioned_docs/version-3.1/release_notes/release-2.4.md",tags:[],version:"3.1",frontMatter:{},sidebar:"documentation",previous:{title:"StarRocks version 2.5",permalink:"/docusaurusv3/docs/release_notes/release-2.5"},next:{title:"StarRocks version 2.3",permalink:"/docusaurusv3/docs/release_notes/release-2.3"}},l={},o=[{value:"2.4.5",id:"245",level:2},{value:"Improvements",id:"improvements",level:3},{value:"Bug Fixes",id:"bug-fixes",level:3},{value:"2.4.4",id:"244",level:2},{value:"Improvements",id:"improvements-1",level:3},{value:"Bug Fixes",id:"bug-fixes-1",level:3},{value:"2.4.3",id:"243",level:2},{value:"Improvements",id:"improvements-2",level:3},{value:"Bug Fixes",id:"bug-fixes-2",level:3},{value:"Behavior Change",id:"behavior-change",level:3},{value:"2.4.2",id:"242",level:2},{value:"Improvement",id:"improvement",level:3},{value:"Bug Fixes",id:"bug-fixes-3",level:3},{value:"Behavior Change",id:"behavior-change-1",level:3},{value:"2.4.1",id:"241",level:2},{value:"New Features",id:"new-features",level:3},{value:"Improvements",id:"improvements-3",level:3},{value:"Bug Fixes",id:"bug-fixes-4",level:3},{value:"Behavior Change",id:"behavior-change-2",level:3},{value:"2.4.0",id:"240",level:2},{value:"New Features",id:"new-features-1",level:3},{value:"Improvements",id:"improvements-4",level:3},{value:"Bug Fixes",id:"bug-fixes-5",level:3},{value:"Behavior Change",id:"behavior-change-3",level:3},{value:"Others",id:"others",level:3}];function h(e){const s=Object.assign({h1:"h1",h2:"h2",p:"p",h3:"h3",ul:"ul",li:"li",a:"a",code:"code",strong:"strong"},(0,n.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"starrocks-version-24",children:"StarRocks version 2.4"}),"\n",(0,t.jsx)(s.h2,{id:"245",children:"2.4.5"}),"\n",(0,t.jsx)(s.p,{children:"Release date: April 21, 2023"}),"\n",(0,t.jsx)(s.h3,{id:"improvements",children:"Improvements"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Forbade the List Partition syntax because it may cause errors in upgrading metadata. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/15401",children:"#15401"})]}),"\n",(0,t.jsxs)(s.li,{children:["Supports BITMAP, HLL, and PERCENTILE types for materialized views. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/15731",children:"#15731"})]}),"\n",(0,t.jsxs)(s.li,{children:["Optimized the inference of ",(0,t.jsx)(s.code,{children:"storage_medium"}),". When BEs use both SSD and HDD as storage devices, if the property ",(0,t.jsx)(s.code,{children:"storage_cooldown_time"})," is specified, StarRocks sets ",(0,t.jsx)(s.code,{children:"storage_medium"})," to ",(0,t.jsx)(s.code,{children:"SSD"}),". Otherwise, StarRocks sets ",(0,t.jsx)(s.code,{children:"storage_medium"})," to ",(0,t.jsx)(s.code,{children:"HDD"}),". ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/18649",children:"#18649"})]}),"\n",(0,t.jsxs)(s.li,{children:["Optimized the accuracy of thread dump. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/16748",children:"#16748"})]}),"\n",(0,t.jsxs)(s.li,{children:["Optimized load efficiency by triggering metadata compaction before loading. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/19347",children:"#19347"})]}),"\n",(0,t.jsxs)(s.li,{children:["Optimized the Stream Load planner timeout. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/18992/files",children:"#18992"})]}),"\n",(0,t.jsxs)(s.li,{children:["Optimized the Unique key table performance by forbidding the collection of statistics from value columns. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/19563",children:"#19563"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"bug-fixes",children:"Bug Fixes"}),"\n",(0,t.jsx)(s.p,{children:"The following bugs are fixed:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["NPE is returned when an unsupported data type is used in CREATE TABLE. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/20999",children:"# 20999"})]}),"\n",(0,t.jsxs)(s.li,{children:["Wrong results are returned to queries using Broadcast Join with the short-circuit. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/20952",children:"#20952"})]}),"\n",(0,t.jsxs)(s.li,{children:["The disk occupation problem caused by the wrong data truncate logic. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/20590",children:"#20590"})]}),"\n",(0,t.jsxs)(s.li,{children:["The AuditLoader plugin can neither be installed nor deleted. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/20468",children:"#20468"})]}),"\n",(0,t.jsxs)(s.li,{children:["If an exception is thrown when a tablet is being scheduled, other tablets in the same batch will never be scheduled. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/20681",children:"#20681"})]}),"\n",(0,t.jsxs)(s.li,{children:["Unknown Error is returned when an unsupported SQL function is used in the creation of a synchronous materialized view. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/20348",children:"#20348"})]}),"\n",(0,t.jsxs)(s.li,{children:["Multiple COUNT DISTINCT calculations are incorrectly rewritten. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/19714",children:"#19714"})]}),"\n",(0,t.jsxs)(s.li,{children:["Wrong results are returned to queries on the tablet that is in compaction. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/20084",children:"#20084"})]}),"\n",(0,t.jsxs)(s.li,{children:["Wrong results are returned to queries with aggregation. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/19725",children:"#19725"})]}),"\n",(0,t.jsxs)(s.li,{children:["No error message is returned when loading NULL parquet data into NOT NULL columns. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/19885",children:"#19885"})]}),"\n",(0,t.jsxs)(s.li,{children:["The query concurrency metric decreases slowly when the concurrency limit of a resource group is continuously reached. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/19363",children:"#19363"})]}),"\n",(0,t.jsxs)(s.li,{children:["FE fails to start when replaying the ",(0,t.jsx)(s.code,{children:"InsertOverwriteJob"})," state change log. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/19061",children:"#19061"})]}),"\n",(0,t.jsxs)(s.li,{children:["The Primary Key table deadlock. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/18488",children:"#18488"})]}),"\n",(0,t.jsxs)(s.li,{children:["For Colocation tables, the replica status can be manually specified as ",(0,t.jsx)(s.code,{children:"bad"})," by using statements like ",(0,t.jsx)(s.code,{children:'ADMIN SET REPLICA STATUS PROPERTIES ("tablet_id" = "10003", "backend_id" = "10001", "status" = "bad");'}),". If the number of BEs is less than or equal to the number of replicas, the corrupted replica cannot be repaired. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/17876",children:"#17876"})]}),"\n",(0,t.jsxs)(s.li,{children:["Issues caused by ARRAY-related functions. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/18556",children:"#18556"})]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"244",children:"2.4.4"}),"\n",(0,t.jsx)(s.p,{children:"Release date: February 22, 2023"}),"\n",(0,t.jsx)(s.h3,{id:"improvements-1",children:"Improvements"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Supports fast cancellation of load. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/15514",children:"#15514"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/15398",children:"#15398"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/15969",children:"#15969"})]}),"\n",(0,t.jsxs)(s.li,{children:["Optimized the CPU usage of the compaction framework. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/11747",children:"#11747"})]}),"\n",(0,t.jsxs)(s.li,{children:["Supports cumulative compaction on tablets with missing versions. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17030",children:"#17030"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"bug-fixes-1",children:"Bug Fixes"}),"\n",(0,t.jsx)(s.p,{children:"The following bugs are fixed:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Excessive dynamic partitions are created when an invalid DATE value is specified. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17966",children:"#17966"})]}),"\n",(0,t.jsxs)(s.li,{children:["Failure to connect to Elasticsearch external tables with the default HTTPS port. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13726",children:"#13726"})]}),"\n",(0,t.jsxs)(s.li,{children:["BE failed to cancel a Stream Load transaction after the transaction times out. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/15738",children:"#15738"})]}),"\n",(0,t.jsxs)(s.li,{children:["Wrong query results are returned from a local shuffle aggregation on a single BE. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17845",children:"#17845"})]}),"\n",(0,t.jsxs)(s.li,{children:['Queries may fail with the error message "wait_for_version version: failed: apply stopped". ',(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17850",children:"#17848"})]}),"\n",(0,t.jsxs)(s.li,{children:["Wrong query results are returned because OLAP scan bucket expressions are not correctly cleared. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17666",children:"#17666"})]}),"\n",(0,t.jsxs)(s.li,{children:["The bucket number of dynamic partitioned tables in a Colocate Group cannot be modified and an error message is returned. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17418",children:"#17418"})]}),"\n",(0,t.jsxs)(s.li,{children:["When you connect to a non-Leader FE node and send the SQL statement ",(0,t.jsx)(s.code,{children:"USE <catalog_name>.<database_name>"}),", the non-Leader FE node forwards the SQL statement, with ",(0,t.jsx)(s.code,{children:"<catalog_name>"})," excluded, to the Leader FE node. As a result, the Leader FE node chooses to use the ",(0,t.jsx)(s.code,{children:"default_catalog"})," and eventually fails to find the specified database. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17302",children:"#17302"})]}),"\n",(0,t.jsxs)(s.li,{children:["Incorrect logic for the dictmapping check before rewriting. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17405",children:"#17405"})]}),"\n",(0,t.jsxs)(s.li,{children:["If an FE sends an occasional heartbeat to a BE, and the heartbeat connection times out, the FE considers the BE unavailable, leading to transaction failures on the BE. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/16386",children:"#16386"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"get_applied_rowsets"})," failed for queries on newly cloned tablets on a follower FE. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17192",children:"#17192"})]}),"\n",(0,t.jsxs)(s.li,{children:["NPE caused by executing ",(0,t.jsx)(s.code,{children:"SET variable = default"})," on a follower FE. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17549",children:"#17549"})]}),"\n",(0,t.jsxs)(s.li,{children:["Expressions in projection are not rewritten by the dictionary. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17558",children:"#17558"})]}),"\n",(0,t.jsxs)(s.li,{children:["Incorrect logic for creating dynamic partitions on weekly basis. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17163",children:"#17163"})]}),"\n",(0,t.jsxs)(s.li,{children:["Wrong query results are returned from a local shuffle. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17130",children:"#17130"})]}),"\n",(0,t.jsxs)(s.li,{children:["Incremental clones may fail. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/16930",children:"#16930"})]}),"\n",(0,t.jsxs)(s.li,{children:["In some cases, CBO may use incorrect logic to compare whether two operators are equivalent. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17199",children:"#17199"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/17227",children:"#17227"})]}),"\n",(0,t.jsxs)(s.li,{children:["Failed to access JuiceFS because the JuiceFS schema is not checked and resolved properly. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/16940",children:"#16940"})]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"243",children:"2.4.3"}),"\n",(0,t.jsx)(s.p,{children:"Release date: January 19, 2023"}),"\n",(0,t.jsx)(s.h3,{id:"improvements-2",children:"Improvements"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["StarRocks checks whether the corresponding database and table exist during an Analyze to prevent NPE. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14467",children:"#14467"})]}),"\n",(0,t.jsxs)(s.li,{children:["Columns with data types that are not supported are not materialized for queries on external tables. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13305",children:"#13305"})]}),"\n",(0,t.jsxs)(s.li,{children:["Adds Java version check for the FE start script ",(0,t.jsx)(s.strong,{children:"start_fe.sh"}),". ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14333",children:"#14333"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"bug-fixes-2",children:"Bug Fixes"}),"\n",(0,t.jsx)(s.p,{children:"The following bugs are fixed:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Stream Load may fail when timeout is not set. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/16241",children:"#16241"})]}),"\n",(0,t.jsxs)(s.li,{children:["BRPC Send crashes when memory usage is high. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/16046",children:"#16046"})]}),"\n",(0,t.jsxs)(s.li,{children:["StarRocks fails to load data in external tables from a StarRocks instance of an early version.  ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/16130",children:"#16130"})]}),"\n",(0,t.jsxs)(s.li,{children:["Materialized view Refresh failure may cause memory leak. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/16041",children:"#16041"})]}),"\n",(0,t.jsxs)(s.li,{children:["Schema Change hangs at the Publish stage. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/14148",children:"#14148"})]}),"\n",(0,t.jsxs)(s.li,{children:["Memory leak caused by a materialized view QeProcessorImpl issue. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/15699",children:"#15699"})]}),"\n",(0,t.jsxs)(s.li,{children:["The results of queries with ",(0,t.jsx)(s.code,{children:"limit"}),"  are inconsistent. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13574",children:"#13574"})]}),"\n",(0,t.jsxs)(s.li,{children:["Memory leak caused by INSERT. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14718",children:"#14718"})]}),"\n",(0,t.jsxs)(s.li,{children:["Primary Key tables executes Tablet Migration.",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13720",children:"#13720"})]}),"\n",(0,t.jsxs)(s.li,{children:["Broker Kerberos tickets timeout during Broker Load. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/16149",children:"#16149"})]}),"\n",(0,t.jsxs)(s.li,{children:["The ",(0,t.jsx)(s.code,{children:"nullable"})," information is inferred incorrectly in the view of a table. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/15744",children:"#15744"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"behavior-change",children:"Behavior Change"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Modified the default backlog of Thrift Listen to ",(0,t.jsx)(s.code,{children:"1024"}),". ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13911",children:"#13911"})]}),"\n",(0,t.jsxs)(s.li,{children:["Added SQL mode ",(0,t.jsx)(s.code,{children:"FORBID_INVALID_DATES"}),". This SQL mode is disabled by default. When it is enabled, StarRocks verifies the input of the DATE type, and returns an error when the input is invalid. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14143",children:"#14143"})]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"242",children:"2.4.2"}),"\n",(0,t.jsx)(s.p,{children:"Release date: December 14, 2022"}),"\n",(0,t.jsx)(s.h3,{id:"improvement",children:"Improvement"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Optimized the performance of Bucket Hint when a multitude of buckets exist. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13142",children:"#13142"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"bug-fixes-3",children:"Bug Fixes"}),"\n",(0,t.jsx)(s.p,{children:"The following bugs are fixed:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Flushing the Primary Key index may cause BE to crash. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14857",children:"#14857"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14819",children:"#14819"})]}),"\n",(0,t.jsxs)(s.li,{children:["Materialized view types cannot be correctly identified by ",(0,t.jsx)(s.code,{children:"SHOW FULL TABLES"}),". ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13954",children:"#13954"})]}),"\n",(0,t.jsxs)(s.li,{children:["Upgrading StarRocks v2.2 to v2.4 may cause BE to crash. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13795",children:"#13795"})]}),"\n",(0,t.jsxs)(s.li,{children:["Broker Load may cause BE to crash. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13973",children:"#13973"})]}),"\n",(0,t.jsxs)(s.li,{children:["The session variable ",(0,t.jsx)(s.code,{children:"statistic_collect_parallel"})," does not take effect. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14352",children:"#14352"})]}),"\n",(0,t.jsxs)(s.li,{children:["INSERT INTO may cause BE to crash. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14818",children:"#14818"})]}),"\n",(0,t.jsxs)(s.li,{children:["JAVA UDF may cause BE to crash. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13947",children:"#13947"})]}),"\n",(0,t.jsxs)(s.li,{children:["Cloning replicas during partial updates may cause BE to crash and fail to restart. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13683",children:"#13683"})]}),"\n",(0,t.jsxs)(s.li,{children:["Colocated Join may not take effect. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13561",children:"#13561"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"behavior-change-1",children:"Behavior Change"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Constrained the session variable ",(0,t.jsx)(s.code,{children:"query_timeout"})," with an upper limit of ",(0,t.jsx)(s.code,{children:"259200"})," and a lower limit of ",(0,t.jsx)(s.code,{children:"1"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Deprecated the FE parameter ",(0,t.jsx)(s.code,{children:"default_storage_medium"}),". The storage medium of a table is automatically inferred by the system. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/14394",children:"#14394"})]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"241",children:"2.4.1"}),"\n",(0,t.jsx)(s.p,{children:"Release date: November 14, 2022"}),"\n",(0,t.jsx)(s.h3,{id:"new-features",children:"New Features"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Supports non-equi joins - LEFT SEMI JOIN and ANTI JOIN. Optimized the JOIN function. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13019",children:"#13019"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"improvements-3",children:"Improvements"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Supports property ",(0,t.jsx)(s.code,{children:"aliveStatus"})," in ",(0,t.jsx)(s.code,{children:"HeartbeatResponse"}),". ",(0,t.jsx)(s.code,{children:"aliveStatus"})," indicates if a node is alive in the cluster. Mechanisms that judge the ",(0,t.jsx)(s.code,{children:"aliveStatus"})," are further optimized. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12713",children:"#12713"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Optimized the error message of Routine Load. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12155",children:"#12155"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"bug-fixes-4",children:"Bug Fixes"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["BE crashes after being upgraded from v2.4.0RC to v2.4.0. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13128",children:"#13128"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Late materialization causes incorrect results to queries on data lakes. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/13133",children:"#13133"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The get_json_int function throws exceptions. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12997",children:"#12997"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Data may be inconsistent after deletion from a PRIMARY KEY table with a persistent index.",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12719",children:"#12719"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["BE may crash during compaction on a PRIMARY KEY table. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12914",children:"#12914"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The json_object function returns incorrect results when its input contains an empty string. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/issues/13030",children:"#13030"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["BE crashes due to ",(0,t.jsx)(s.code,{children:"RuntimeFilter"}),". ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12807",children:"#12807"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["FE hangs due to excessive recursive computations in CBO. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12788",children:"#12788"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["BE may crash or report an error when exiting gracefully. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12852",children:"#12852"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Compaction crashes after data is deleted from a table with new columns added to it. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12907",children:"#12907"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Data may be inconsistent due to incorrect mechanisms in OLAP external table metadata synchronization. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12368",children:"#12368"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["When one BE crashes, the other BEs may execute relevant queries till timeout. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12954",children:"#12954"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"behavior-change-2",children:"Behavior Change"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["When parsing Hive external table fails, StarRocks throws error messages instead of converting relevant columns into NULL columns. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/12382",children:"#12382"})]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"240",children:"2.4.0"}),"\n",(0,t.jsx)(s.p,{children:"Release date: October 20, 2022"}),"\n",(0,t.jsx)(s.h3,{id:"new-features-1",children:"New Features"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Supports creating asynchronous materialized views based on multiple base tables to accelerate queries with JOIN operations. Asynchronous materialized views support all ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/table_design/table_types/",children:"table types"}),". For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/using_starrocks/Materialized_view",children:"Materialized View"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Supports overwriting data via INSERT OVERWRITE. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/loading/InsertInto",children:"Load data using INSERT"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["[Preview] Provides stateless Compute Nodes (CN) that can be horizontally scaled. You can use StarRocks Operator to deploy CN into your Kubernetes (K8s) cluster to achieve automatic horizontal scaling. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/deployment/sr_operator",children:"Deploy and manage CN on Kubernetes with StarRocks Operator"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Outer Join supports non-equi joins in which join items are related by comparison operators including ",(0,t.jsx)(s.code,{children:"<"}),", ",(0,t.jsx)(s.code,{children:"<="}),", ",(0,t.jsx)(s.code,{children:">"}),", ",(0,t.jsx)(s.code,{children:">="}),", and ",(0,t.jsx)(s.code,{children:"<>"}),". For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-statements/data-manipulation/SELECT",children:"SELECT"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Supports creating Iceberg catalogs and Hudi catalogs, which allow direct queries on data from Apache Iceberg and Apache Hudi. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/data_source/catalog/iceberg_catalog",children:"Iceberg catalog"})," and ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/data_source/catalog/hudi_catalog",children:"Hudi catalog"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Supports querying ARRAY-type columns from Apache Hive\u2122 tables in CSV format. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/data_source/External_table",children:"External table"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Supports viewing the schema of external data via DESC. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-statements/Utility/DESCRIBE",children:"DESC"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Supports granting a specific role or IMPERSONATE permission to a user via GRANT and revoking them via REVOKE, and supports executing an SQL statement with IMPERSONATE permission via  EXECUTE AS. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-statements/account-management/GRANT",children:"GRANT"}),", ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-statements/account-management/REVOKE",children:"REVOKE"}),", and ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-statements/account-management/EXECUTE%20AS",children:"EXECUTE AS"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Supports FDQN access: now you can use domain name or the combination of hostname and port as the unique identification of a BE or an FE node. This prevents access failures caused by changing IP addresses. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/administration/enable_fqdn",children:"Enable FQDN Access"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["flink-connector-starrocks supports Primary Key table partial update. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/loading/Flink-connector-starrocks",children:"Load data by using flink-connector-starrocks"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Provides the following new functions:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["array_contains_all: checks whether a specific array is a subset of another. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-functions/array-functions/array_contains_all",children:"array_contains_all"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["percentile_cont: calculates the percentile value with linear interpolation. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-functions/aggregate-functions/percentile_cont",children:"percentile_cont"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"improvements-4",children:"Improvements"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"The Primary Key table supports flushing VARCHAR-type primary key indexes to disks. From version 2.4.0, the Primary Key table supports the same data types for primary key indexes regardless of whether persistent primary key index is turned on or not."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Optimized the query performance on external tables."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Supports late materialization during queries on external tables in Parquet format to optimize the query performance on data lakes with small-scale filtering involved."}),"\n",(0,t.jsx)(s.li,{children:"Small I/O operations can be merged to reduce the delay for querying data lakes, thereby improving the query performance on external tables."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Optimized the performance of window functions."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Optimized the performance of Cross Join by supporting predicate pushdown."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Histograms are added to CBO statistics. Full statistics collection is further optimized. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/using_starrocks/Cost_based_optimizer",children:"Gather CBO statistics"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Adaptive multi-threading is enabled for tablet scanning to reduce the dependency of scanning performance on the tablet number. As a result, you can set the number of buckets more easily. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/table_design/Data_distribution#how-to-determine-the-number-of-buckets",children:"Determine the number of buckets"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Supports querying compressed TXT files in Apache Hive."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Adjusted the mechanisms of default PageCache size calculation and memory consistency check to avoid OOM issues during multi-instance deployments."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Improved the performance of large-size batch load on Primary Key tables up to two times by removing final_merge operations."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Supports a Stream Load transaction interface to implement two-phase commit (2PC) for transactions that are run to load data from external systems such as Apache Flink\xae and Apache Kafka\xae, improving the performance of highly concurrent stream loads."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Functions:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["You can use multiple COUNT(DISTINCT) in one statement. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-functions/aggregate-functions/count",children:"count"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Window functions min() and max() support sliding windows. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-functions/Window_function",children:"Window functions"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Optimized the performance of the window_funnel function. For more information, see ",(0,t.jsx)(s.a,{href:"/docusaurusv3/docs/sql-reference/sql-functions/aggregate-functions/window_funnel",children:"window_funnel"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"bug-fixes-5",children:"Bug Fixes"}),"\n",(0,t.jsx)(s.p,{children:"The following bugs are fixed:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["DECIMAL data types returned by DESC are different from those specified in the CREATE TABLE statement. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/7309",children:"#7309"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["FE metadata management issues that affect the stability of FEs. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/6685",children:"#6685"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/9445",children:"#9445"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/7974",children:"#7974"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/7455",children:"#7455"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Data load-related issues:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Broke Load fails when ARRAY columns are specified. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/9158",children:"#9158"})]}),"\n",(0,t.jsxs)(s.li,{children:["Replicas are inconsistent after data is loaded to a non-Duplicate Key table via Broker Load. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/8714",children:"#8714"})]}),"\n",(0,t.jsxs)(s.li,{children:["Executing ALTER ROUTINE LOAD raises NPE. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/7804",children:"#7804"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Data Lake analytics-related issues:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Queries on Parquet data in Hive external tables fail. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/7413",children:"#7413"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/7482",children:"#7482"})," ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/7624",children:"#7624"})]}),"\n",(0,t.jsxs)(s.li,{children:["Incorrect results are returned for queries with ",(0,t.jsx)(s.code,{children:"limit"})," clause on Elasticsearch external table. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/9226",children:"#9226"})]}),"\n",(0,t.jsxs)(s.li,{children:["An unknown error is raised during queries on an Apache Iceberg table with a complex data type. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/11298",children:"#11298"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Metadata is inconsistent between the Leader FE and Follower FE nodes. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/11215",children:"#11215"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["BE crashes when the size of BITMAP data exceeds 2 GB. ",(0,t.jsx)(s.a,{href:"https://github.com/StarRocks/starrocks/pull/11178",children:"#11178"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"behavior-change-3",children:"Behavior Change"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:['Page Cache is enabled by default ("disable_storage_page_cache" = "false"). The default cache size (',(0,t.jsx)(s.code,{children:"storage_page_cache_limit"}),") is 20% of the system memory."]}),"\n",(0,t.jsxs)(s.li,{children:["CBO is enabled by default. Deprecated the session variable ",(0,t.jsx)(s.code,{children:"enable_cbo"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Vectorized engine is enabled by default. Deprecated the session variable ",(0,t.jsx)(s.code,{children:"vectorized_engine_enable"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"others",children:"Others"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Announcing stable release of Resource Group."}),"\n",(0,t.jsx)(s.li,{children:"Announcing stable release of JSON data type and its related functions."}),"\n"]})]})}const d=function(e={}){const{wrapper:s}=Object.assign({},(0,n.ah)(),e.components);return s?(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(h,e)})):h(e)}},11151:(e,s,r)=>{r.d(s,{Zo:()=>c,ah:()=>i});var t=r(67294);const n=t.createContext({});function i(e){const s=t.useContext(n);return t.useMemo((()=>"function"==typeof e?e(s):{...s,...e}),[s,e])}const a={};function c({components:e,children:s,disableParentContext:r}){let c;return c=r?"function"==typeof e?e({}):e||a:i(e),t.createElement(n.Provider,{value:c},s)}}}]);