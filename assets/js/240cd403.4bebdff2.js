"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[72949],{70697:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var t=n(85893),a=n(11151);const r={displayed_sidebar:"English"},i="CREATE USER",c={id:"sql-reference/sql-statements/account-management/CREATE_USER",title:"CREATE USER",description:"Description",source:"@site/versioned_docs/version-3.0/sql-reference/sql-statements/account-management/CREATE_USER.md",sourceDirName:"sql-reference/sql-statements/account-management",slug:"/sql-reference/sql-statements/account-management/CREATE_USER",permalink:"/docs/3.0/sql-reference/sql-statements/account-management/CREATE_USER",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/edit/main/docs/sql-reference/sql-statements/account-management/CREATE_USER.md",tags:[],version:"3.0",frontMatter:{displayed_sidebar:"English"},sidebar:"English",previous:{title:"CREATE ROLE",permalink:"/docs/3.0/sql-reference/sql-statements/account-management/CREATE_ROLE"},next:{title:"DROP ROLE",permalink:"/docs/3.0/sql-reference/sql-statements/account-management/DROP_ROLE"}},l={},d=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Parameters",id:"parameters",level:2},{value:"Examples",id:"examples",level:2}];function o(e){const s=Object.assign({h1:"h1",h2:"h2",p:"p",h3:"h3",pre:"pre",code:"code",ul:"ul",li:"li",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td",blockquote:"blockquote"},(0,a.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"create-user",children:"CREATE USER"}),"\n",(0,t.jsx)(s.h2,{id:"description",children:"Description"}),"\n",(0,t.jsx)(s.p,{children:'Creates a StarRocks user. In StarRocks, a "user_identity" uniquely identifies a user.'}),"\n",(0,t.jsx)(s.h3,{id:"syntax",children:"Syntax"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"CREATE USER <user_identity> [auth_option] [DEFAULT ROLE <role_name>[, <role_name>, ...]]\n"})}),"\n",(0,t.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"user_identity"}),' consists of two parts, "user_name" and "host", in the format of ',(0,t.jsx)(s.code,{children:"username@'userhost'"}),'.  For the "host" part, you can use ',(0,t.jsx)(s.code,{children:"%"}),' for fuzzy match. If "host" is not specified, "%" is used by default, meaning that the user can connect to StarRocks from any host.']}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"auth_option"}),' specifies the authentication method. Currently, three authentication methods are supported: StarRocks native password, mysql_native_password, and "authentication_ldap_simple". StarRocks native password is the same as mysql_native_password in logic but slightly differs in syntax. One user identity can use only one authentication method.']}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"auth_option: {\n    IDENTIFIED BY 'auth_string'\n    IDENTIFIED WITH mysql_native_password BY 'auth_string'\n    IDENTIFIED WITH mysql_native_password AS 'auth_string'\n    IDENTIFIED WITH authentication_ldap_simple AS 'auth_string'\n    \n}\n"})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Authentication method"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Password for user creation"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Password for login"})})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Native password"}),(0,t.jsx)(s.td,{children:"Plaintext or ciphertext"}),(0,t.jsx)(s.td,{children:"Plaintext"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"mysql_native_password BY"})}),(0,t.jsx)(s.td,{children:"Plaintext"}),(0,t.jsx)(s.td,{children:"Plaintext"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"mysql_native_password WITH"})}),(0,t.jsx)(s.td,{children:"Ciphertext"}),(0,t.jsx)(s.td,{children:"Plaintext"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"authentication_ldap_simple"})}),(0,t.jsx)(s.td,{children:"Plaintext"}),(0,t.jsx)(s.td,{children:"Plaintext"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"Note: StarRocks encrypts users' passwords before storing them."}),"\n"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"DEFAULT ROLE <role_name>[, <role_name>, ...]"}),": If this parameter is specified, the roles are automatically assigned to the user and activated by default when the user logs in. If not specified, this user does not have any privileges. Make sure that all the roles that are specified already exist."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsxs)(s.p,{children:["Example 1: Create a user using a plaintext password with no host specified, which is equivalent to ",(0,t.jsx)(s.code,{children:"jack@'%'"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"CREATE USER 'jack' IDENTIFIED BY '123456';\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Example 2: Create a user using a plaintext password and allow the user to log in from  ",(0,t.jsx)(s.code,{children:"'172.10.1.10'"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"CREATE USER jack@'172.10.1.10' IDENTIFIED WITH mysql_native_password BY '123456';\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Example 3: Create a user with a cyphertext password and allow the user to log in from  ",(0,t.jsx)(s.code,{children:"'172.10.1.10'"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"CREATE USER jack@'172.10.1.10' IDENTIFIED BY PASSWORD '*6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9';\nCREATE USER jack@'172.10.1.10' IDENTIFIED WITH mysql_native_password AS '*6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9';\n"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"Note: You can get the encrypted password using the password() function."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Example 4: Create a user who is allowed to log in from a domain name 'example_domain'."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"CREATE USER 'jack'@['example_domain'] IDENTIFIED BY '123456';\n"})}),"\n",(0,t.jsx)(s.p,{children:"Example 5: Create a user that uses LDAP authentication."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"CREATE USER jack@'172.10.1.10' IDENTIFIED WITH authentication_ldap_simple;\n"})}),"\n",(0,t.jsx)(s.p,{children:"Example 6: Create a user that uses LDAP authentication and specify the distinguished name (DN) of the user in LDAP."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"CREATE USER jack@'172.10.1.10' IDENTIFIED WITH authentication_ldap_simple AS 'uid=jack,ou=company,dc=example,dc=com';\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Example 7: Create a user who is allowed to log in from the '192.168' subnet and set ",(0,t.jsx)(s.code,{children:"db_admin"})," and ",(0,t.jsx)(s.code,{children:"user_admin"})," as the default roles for the user."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-SQL",children:"CREATE USER 'jack'@'192.168.%' DEFAULT ROLE db_admin, user_admin;\n"})})]})}const h=function(e={}){const{wrapper:s}=Object.assign({},(0,a.ah)(),e.components);return s?(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(o,e)})):o(e)}},11151:(e,s,n)=>{n.d(s,{Zo:()=>c,ah:()=>r});var t=n(67294);const a=t.createContext({});function r(e){const s=t.useContext(a);return t.useMemo((()=>"function"==typeof e?e(s):{...s,...e}),[s,e])}const i={};function c({components:e,children:s,disableParentContext:n}){let c;return c=n?"function"==typeof e?e({}):e||i:r(e),t.createElement(a.Provider,{value:c},s)}}}]);