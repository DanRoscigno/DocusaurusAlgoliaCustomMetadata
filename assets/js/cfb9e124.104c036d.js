"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[41994],{72077:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var r=s(85893),t=s(11151);const i={},o="group_concat",c={id:"sql-reference/sql-functions/string-functions/group_concat",title:"group_concat",description:"Description",source:"@site/versioned_docs/version-3.0/sql-reference/sql-functions/string-functions/group_concat.md",sourceDirName:"sql-reference/sql-functions/string-functions",slug:"/sql-reference/sql-functions/string-functions/group_concat",permalink:"/doc/docs/3.0/sql-reference/sql-functions/string-functions/group_concat",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/tree/main/versioned_docs/version-3.0/sql-reference/sql-functions/string-functions/group_concat.md",tags:[],version:"3.0",frontMatter:{},sidebar:"Chinese31",previous:{title:"find_in_set",permalink:"/doc/docs/3.0/sql-reference/sql-functions/string-functions/find_in_set"},next:{title:"hex",permalink:"/doc/docs/3.0/sql-reference/sql-functions/string-functions/hex"}},a={},l=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return value",id:"return-value",level:2},{value:"Examples",id:"examples",level:2},{value:"keyword",id:"keyword",level:2}];function d(e){const n=Object.assign({h1:"h1",h2:"h2",p:"p",pre:"pre",code:"code",ul:"ul",li:"li"},(0,t.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"group_concat",children:"group_concat"}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(n.p,{children:"group_concat concatenates non-null values into one string from a group, with a separator argument, which is ',' by default if not specified."}),"\n",(0,r.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-SQL",children:"VARCHAR GROUP_CONCAT([DISTINCT] expr [,expr ...]\n             [ORDER BY {unsigned_integer | col_name | expr}\n                 [ASC | DESC] [,col_name ...]]\n             [SEPARATOR str_val])\n"})}),"\n",(0,r.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"expr"}),": the values to concatenate, ignoring null. It should be cast to VARCHAR. They can be optionally specified ",(0,r.jsx)(n.code,{children:"DISTINCT"})," to eliminate duplicate values. More ",(0,r.jsx)(n.code,{children:"expr"})," are concatenated directly, use ",(0,r.jsx)(n.code,{children:"concat()"})," or ",(0,r.jsx)(n.code,{children:"concat_ws"})," to specify formats."]}),"\n",(0,r.jsxs)(n.li,{children:["order-by items can be unsigned integers (identify ",(0,r.jsx)(n.code,{children:"expr"}),", starting from 1), column names or normal expressions. To sort in reverse order, add the DESC (descending) keyword to the name of the column you are sorting by in the ORDER BY clause. The default is ascending order; this may be specified explicitly using the ASC keyword"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"str_val"}),": the optional separator is used to concat non-null values from different rows. If it is not specified, ",(0,r.jsx)(n.code,{children:","})," (a comma) is used by default."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"return-value",children:"Return value"}),"\n",(0,r.jsx)(n.p,{children:"Returns a string value for each group, but returns NULL if there are no non-NULL values."}),"\n",(0,r.jsxs)(n.p,{children:["set ",(0,r.jsx)(n.code,{children:"group_concat_max_len"})," to limit the length of output string from a group, its default value is 1024, minimal value is 4."]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE `ss` (\n  `id` int(11) NULL COMMENT "",\n  `name` varchar(255) NULL COMMENT "",\n  `subject` varchar(255) NULL COMMENT "",\n  `score` int(11) NULL COMMENT ""\n) ENGINE=OLAP\nDUPLICATE KEY(`id`)\nDISTRIBUTED BY HASH(`id`) BUCKETS 4\nPROPERTIES (\n"replication_num" = "1"\n);\n\ninsert into ss values (1,"Tom","English",90);\ninsert into ss values (1,"Tom","Math",80);\ninsert into ss values (2,"Tom","English",NULL);\ninsert into ss values (2,"Tom",NULL,NULL);\ninsert into ss values (3,"May",NULL,NULL);\ninsert into ss values (3,"Ti","English",98);\ninsert into ss values (4,NULL,NULL,NULL);\ninsert into ss values (NULL,"Ti","Phy",98);\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"select id, group_concat(distinct name,subject order by score) as res from ss group by id order by id;\n+------+--------------------+\n| id   | res                |\n+------+--------------------+\n| NULL | TiPhy              |\n|    1 | TomMath,TomEnglish |\n|    2 | NULL               |\n|    3 | TiEnglish          |\n|    4 | NULL               |\n+------+--------------------+\n\nmysql> select id, group_concat(distinct concat(name,'-',subject) order by score) as res from ss group by id order by id;\n+------+----------------------+\n| id   | res                  |\n+------+----------------------+\n| NULL | Ti-Phy               |\n|    1 | Tom-Math,Tom-English |\n|    2 | NULL                 |\n|    3 | Ti-English           |\n|    4 | NULL                 |\n+------+----------------------+\n    \nselect group_concat(name) as res from ss;\n+---------------------------+\n| res                       |\n+---------------------------+\n| Tom,Tom,Ti,Tom,Tom,May,Ti |\n+---------------------------+\n\nselect group_concat(distinct name) as res from ss where id < 0;\n+------+\n| res  |\n+------+\n| NULL |\n+------+\n \nset group_concat_max_len = 6;\n\nselect id, group_concat(distinct name,subject order by score) as res from ss group by id order by id;\n+------+--------+\n| id   | res    |\n+------+--------+\n| NULL | TiPhy  |\n|    1 | TomMat |\n|    2 | NULL   |\n|    3 | TiEngl |\n|    4 | NULL   |\n+------+--------+\n"})}),"\n",(0,r.jsx)(n.h2,{id:"keyword",children:"keyword"}),"\n",(0,r.jsx)(n.p,{children:"GROUP_CONCAT,CONCAT,ARRAY_AGG"})]})}const u=function(e={}){const{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(d,e)})):d(e)}},11151:(e,n,s)=>{s.d(n,{Zo:()=>c,ah:()=>i});var r=s(67294);const t=r.createContext({});function i(e){const n=r.useContext(t);return r.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const o={};function c({components:e,children:n,disableParentContext:s}){let c;return c=s?"function"==typeof e?e({}):e||o:i(e),r.createElement(t.Provider,{value:c},n)}}}]);