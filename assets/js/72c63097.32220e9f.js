"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[19924],{18796:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var r=t(85893),o=t(11151);const s={displayed_sidebar:"English"},c="Deploy StarRocks with Docker",i={id:"quick_start/deploy_with_docker",title:"Deploy StarRocks with Docker",description:"This QuickStart tutorial guides you through the procedures to deploy StarRocks on your local machine with Docker. Before getting started, you can read StarRocks Architecture for more conceptual details.",source:"@site/versioned_docs/version-3.0/quick_start/deploy_with_docker.md",sourceDirName:"quick_start",slug:"/quick_start/deploy_with_docker",permalink:"/doc/docs/3.0/quick_start/deploy_with_docker",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/tree/main/versioned_docs/version-3.0/quick_start/deploy_with_docker.md",tags:[],version:"3.0",frontMatter:{displayed_sidebar:"English"},sidebar:"English",previous:{title:"Quick start: Deploy StarRocks with Docker",permalink:"/doc/docs/3.0/quick_start/deploy_in_docker"},next:{title:"Error Codes",permalink:"/doc/docs/3.0/reference/Error_code"}},a={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Download the StarRocks Docker image",id:"step-1-download-the-starrocks-docker-image",level:2},{value:"Step 2: Connect to StarRocks",id:"step-2-connect-to-starrocks",level:2},{value:"Stop and remove the Docker container",id:"stop-and-remove-the-docker-container",level:2},{value:"What to do next",id:"what-to-do-next",level:2}];function l(e){const n=Object.assign({h1:"h1",p:"p",a:"a",strong:"strong",blockquote:"blockquote",h2:"h2",ul:"ul",li:"li",pre:"pre",code:"code",div:"div"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"deploy-starrocks-with-docker",children:"Deploy StarRocks with Docker"}),"\n",(0,r.jsxs)(n.p,{children:["This QuickStart tutorial guides you through the procedures to deploy StarRocks on your local machine with Docker. Before getting started, you can read ",(0,r.jsx)(n.a,{href:"/doc/docs/3.0/introduction/Architecture",children:"StarRocks Architecture"})," for more conceptual details."]}),"\n",(0,r.jsxs)(n.p,{children:["By following these steps, you can deploy a simple StarRocks cluster with ",(0,r.jsx)(n.strong,{children:"one FE node"})," and ",(0,r.jsx)(n.strong,{children:"one BE node"}),". It can help you complete the upcoming QuickStart tutorials on ",(0,r.jsx)(n.a,{href:"/doc/docs/3.0/quick_start/Create_table",children:"creating a table"})," and ",(0,r.jsx)(n.a,{href:"/doc/docs/3.0/quick_start/Import_and_query",children:"loading and querying data"}),", and thereby acquaints you with the basic operations of StarRocks."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CAUTION"})}),"\n",(0,r.jsxs)(n.p,{children:["Deploying StarRocks with the Docker image used in this tutorial merely applies to the situation when you need to verify a DEMO with a small dataset. It is not recommended for a massive testing or production environment. To deploy a high-availability StarRocks cluster, see ",(0,r.jsx)(n.a,{href:"/doc/docs/3.0/deployment/deployment_overview",children:"Deployment overview"})," for other options that suit your scenarios."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before deploying StarRocks in Docker, make sure the following requirements are satisfied:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Hardware"})}),"\n",(0,r.jsx)(n.p,{children:"We recommend deploying StarRocks on a machine with 8 CPU cores and 16 GB of memory or more."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Software"})}),"\n",(0,r.jsx)(n.p,{children:"You must have the following software installed on your machine:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.docker.com/engine/install/",children:"Docker Engine"})," (17.06.0 or later)"]}),"\n",(0,r.jsx)(n.li,{children:"MySQL client (5.5 or later)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-1-download-the-starrocks-docker-image",children:"Step 1: Download the StarRocks Docker image"}),"\n",(0,r.jsxs)(n.p,{children:["Download a StarRocks Docker image from ",(0,r.jsx)(n.a,{href:"https://hub.docker.com/r/starrocks/allin1-ubuntu/tags",children:"StarRocks Docker Hub"}),". You can choose a specific version based on the tag of the image."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:"sudo docker run -p 9030:9030 -p 8030:8030 -p 8040:8040 \\\n    -itd registry.starrocks.io/starrocks/allin1-ubuntu\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"TROUBLESHOOTING"})}),"\n",(0,r.jsxs)(n.p,{children:['If any of the above ports on the host machine is occupied, the system prints "docker: Error response from daemon: driver failed programming external connectivity on endpoint tender_torvalds (): Bind for 0.0.0.0',(0,r.jsx)(n.div,{}),' failed: port is already allocated.". You can allocate available ports on the host machine by changing the ports preceding the colons (:) in the command.']}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can check if the container is created and running properly by running the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:"sudo docker ps\n"})}),"\n",(0,r.jsxs)(n.p,{children:["As shown below, if the ",(0,r.jsx)(n.code,{children:"STATUS"})," of your StarRocks containers is ",(0,r.jsx)(n.code,{children:"Up"}),", you have successfully deployed StarRocks in the Docker container."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Plain",children:'CONTAINER ID   IMAGE                                          COMMAND                  CREATED         STATUS                 PORTS                                                                                                                             NAMES\n8962368f9208   starrocks/allin1-ubuntu:branch-3.0-0afb97bbf   "/bin/sh -c ./start_\u2026"   4 minutes ago   Up 4 minutes           0.0.0.0:8037->8030/tcp, :::8037->8030/tcp, 0.0.0.0:8047->8040/tcp, :::8047->8040/tcp, 0.0.0.0:9037->9030/tcp, :::9037->9030/tcp   xxxxx\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-2-connect-to-starrocks",children:"Step 2: Connect to StarRocks"}),"\n",(0,r.jsx)(n.p,{children:"After StarRocks is deployed properly, you can connect to it via a MySQL client."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:'mysql -P9030 -h127.0.0.1 -uroot --prompt="StarRocks > "\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CAUTION"})}),"\n",(0,r.jsxs)(n.p,{children:["If you have allocated a different port for ",(0,r.jsx)(n.code,{children:"9030"})," in the ",(0,r.jsx)(n.code,{children:"docker run"})," command, you must replace ",(0,r.jsx)(n.code,{children:"9030"})," in the above command with the port you have allocated."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can check the status of the FE node by executing the following SQL:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-SQL",children:"SHOW PROC '/frontends'\\G\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Plain",children:"StarRocks > SHOW PROC '/frontends'\\G\n*************************** 1. row ***************************\n             Name: 8962368f9208_9010_1681370634632\n               IP: 8962368f9208\n      EditLogPort: 9010\n         HttpPort: 8030\n        QueryPort: 9030\n          RpcPort: 9020\n             Role: LEADER\n        ClusterId: 555505802\n             Join: true\n            Alive: true\nReplayedJournalId: 99\n    LastHeartbeat: 2023-04-13 07:28:50\n         IsHelper: true\n           ErrMsg: \n        StartTime: 2023-04-13 07:24:11\n          Version: BRANCH-3.0-0afb97bbf\n1 row in set (0.02 sec)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If the field ",(0,r.jsx)(n.code,{children:"Alive"})," is ",(0,r.jsx)(n.code,{children:"true"}),", this FE node is properly started and added to the cluster."]}),"\n",(0,r.jsxs)(n.li,{children:["If the field ",(0,r.jsx)(n.code,{children:"Role"})," is ",(0,r.jsx)(n.code,{children:"FOLLOWER"}),", this FE node is eligible to be elected as the Leader FE node."]}),"\n",(0,r.jsxs)(n.li,{children:["If the field ",(0,r.jsx)(n.code,{children:"Role"})," is ",(0,r.jsx)(n.code,{children:"LEADER"}),", this FE node is the Leader FE node."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can check the status of the BE node by executing the following SQL:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-SQL",children:"SHOW PROC '/backends'\\G\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Plain",children:'StarRocks > SHOW PROC \'/backends\'\\G\n*************************** 1. row ***************************\n            BackendId: 10004\n                   IP: 8962368f9208\n        HeartbeatPort: 9050\n               BePort: 9060\n             HttpPort: 8040\n             BrpcPort: 8060\n        LastStartTime: 2023-04-13 07:24:25\n        LastHeartbeat: 2023-04-13 07:29:05\n                Alive: true\n SystemDecommissioned: false\nClusterDecommissioned: false\n            TabletNum: 30\n     DataUsedCapacity: 0.000 \n        AvailCapacity: 527.437 GB\n        TotalCapacity: 1.968 TB\n              UsedPct: 73.83 %\n       MaxDiskUsedPct: 73.83 %\n               ErrMsg: \n              Version: BRANCH-3.0-0afb97bbf\n               Status: {"lastSuccessReportTabletsTime":"2023-04-13 07:28:26"}\n    DataTotalCapacity: 527.437 GB\n          DataUsedPct: 0.00 %\n             CpuCores: 16\n    NumRunningQueries: 0\n           MemUsedPct: 0.02 %\n           CpuUsedPct: 0.1 %\n1 row in set (0.00 sec)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["If the field ",(0,r.jsx)(n.code,{children:"Alive"})," is ",(0,r.jsx)(n.code,{children:"true"}),", this BE node is properly started and added to the cluster."]}),"\n",(0,r.jsx)(n.h2,{id:"stop-and-remove-the-docker-container",children:"Stop and remove the Docker container"}),"\n",(0,r.jsx)(n.p,{children:"After completing the whole QuickStart tutorial, you can stop and remove the container that hosts your StarRocks cluster with its container ID."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"NOTE"})}),"\n",(0,r.jsxs)(n.p,{children:["You can get the ",(0,r.jsx)(n.code,{children:"container_id"})," of your Docker container by running ",(0,r.jsx)(n.code,{children:"sudo docker ps"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Run the following command to stop the container:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:"# Replace <container_id> with the container ID of your StarRocks cluster.\nsudo docker stop <container_id>\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you do not need the container any longer, you can remove it by running the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:"# Replace <container_id> with the container ID of your StarRocks cluster.\nsudo docker rm <container_id>\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CAUTION"})}),"\n",(0,r.jsx)(n.p,{children:"The removal of the container is irreversible. Make sure you have a backup of the important data in the container before removing it."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"what-to-do-next",children:"What to do next"}),"\n",(0,r.jsxs)(n.p,{children:["Having deployed StarRocks, you can continue the QuickStart tutorials on ",(0,r.jsx)(n.a,{href:"/doc/docs/3.0/quick_start/Create_table",children:"creating a table"})," and ",(0,r.jsx)(n.a,{href:"/doc/docs/3.0/quick_start/Import_and_query",children:"loading and querying data"}),"."]}),"\n",(0,r.jsx)("img",{referrerpolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=f5ae0b2c-3578-4a40-9056-178e9837cfe0"})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(l,e)})):l(e)}},11151:(e,n,t)=>{t.d(n,{Zo:()=>i,ah:()=>s});var r=t(67294);const o=r.createContext({});function s(e){const n=r.useContext(o);return r.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const c={};function i({components:e,children:n,disableParentContext:t}){let i;return i=t?"function"==typeof e?e({}):e||c:s(e),r.createElement(o.Provider,{value:i},n)}}}]);