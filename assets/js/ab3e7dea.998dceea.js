"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[46284],{70654:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=n(85893),t=n(11151);const o={displayed_sidebar:"English"},i="CREATE REPOSITORY",c={id:"sql-reference/sql-statements/data-definition/CREATE_REPOSITORY",title:"CREATE REPOSITORY",description:"Description",source:"@site/versioned_docs/version-2.3/sql-reference/sql-statements/data-definition/CREATE_REPOSITORY.md",sourceDirName:"sql-reference/sql-statements/data-definition",slug:"/sql-reference/sql-statements/data-definition/CREATE_REPOSITORY",permalink:"/docs/2.3/sql-reference/sql-statements/data-definition/CREATE_REPOSITORY",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/edit/main/docs/sql-reference/sql-statements/data-definition/CREATE_REPOSITORY.md",tags:[],version:"2.3",frontMatter:{displayed_sidebar:"English"},sidebar:"English",previous:{title:"CREATE MATERIALIZED VIEW",permalink:"/docs/2.3/sql-reference/sql-statements/data-definition/CREATE_MATERIALIZED_VIEW"},next:{title:"CREATE RESOURCE",permalink:"/docs/2.3/sql-reference/sql-statements/data-definition/CREATE_RESOURCE"}},a={},d=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Examples",id:"examples",level:2}];function l(e){const s=Object.assign({h1:"h1",h2:"h2",p:"p",a:"a",blockquote:"blockquote",strong:"strong",pre:"pre",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",ul:"ul",li:"li"},(0,t.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"create-repository",children:"CREATE REPOSITORY"}),"\n",(0,r.jsx)(s.h2,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:["Creates a repository in a remote storage system that is used to store data snapshots for ",(0,r.jsx)(s.a,{href:"/docs/2.3/administration/Backup_and_restore",children:"Backup and restore data"}),"."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"CAUTION"})}),"\n",(0,r.jsx)(s.p,{children:"Only root user and superuser can create a repository."}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["For detailed instructions on deleting a repository, see ",(0,r.jsx)(s.a,{href:"/docs/2.3/sql-reference/sql-statements/data-definition/DROP_REPOSITORY",children:"DROP REPOSITORY"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"syntax",children:"Syntax"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-SQL",children:'CREATE [READ ONLY] REPOSITORY <repository_name>\nWITH BROKER <broker_name>\nON LOCATION "<repository_location>"\nPROPERTIES ("key"="value", ...)\n'})}),"\n",(0,r.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Parameter"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Description"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"READ ONLY"}),(0,r.jsx)(s.td,{children:"Create a read-only repository. Note that you can only restore data from a read-only repository. When creating the same repository for two clusters to migrate data, you can create a read-only warehouse for the new cluster and only grant it RESTORE permissions."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"broker_name"}),(0,r.jsx)(s.td,{children:"The name of the broker used to create the repository."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"repository_name"}),(0,r.jsx)(s.td,{children:"Repository name."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"repository_location"}),(0,r.jsx)(s.td,{children:"Location of the repository in the remote storage system."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"PROPERTIES"}),(0,r.jsxs)(s.td,{children:["Username/password or access key/endpoint to the remote storage system. See ",(0,r.jsx)(s.a,{href:"#examples",children:"Examples"})," for more instructions."]})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"PROPERTIES"}),":"]}),"\n",(0,r.jsx)(s.p,{children:"StarRocks Supports creating repository in HDFS, S3, OSS, and COS."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"HDFS:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:'"username": Username used to log in HDFS.'}),"\n",(0,r.jsx)(s.li,{children:'"password": Password used to log in HDFS.'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"S3:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:'"fs.s3a.access.key": Access Key used to log in S3.'}),"\n",(0,r.jsx)(s.li,{children:'"fs.s3a.secret.key": Secret Key used to log in S3.'}),"\n",(0,r.jsx)(s.li,{children:'"fs.s3a.endpoint": Endpoint of the S3 storage.'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"For OSS:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:'"fs.oss.accessKeyId": Access Key ID used to log in OSS.'}),"\n",(0,r.jsx)(s.li,{children:'"fs.oss.accessKeySecret": Access Key Secret used to log in OSS.'}),"\n",(0,r.jsx)(s.li,{children:'"fs.oss.endpoint": Endpoint of the OSS storage.'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"For COS:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:'"fs.cosn.userinfo.secretId": Secret ID used to log in COS.'}),"\n",(0,r.jsx)(s.li,{children:'"fs.cosn.userinfo.secretKey": Secret Key used to log in COS.'}),"\n",(0,r.jsx)(s.li,{children:'"fs.cosn.bucket.endpoint_suffix": COS endpoint suffix.'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(s.p,{children:["Example 1: creates a repository named ",(0,r.jsx)(s.code,{children:"oss_repo"})," using the remote storage directory ",(0,r.jsx)(s.code,{children:"oss://starRocks_backup"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-SQL",children:'CREATE REPOSITORY oss_repo\nWITH BROKER oss_broker\nON LOCATION "oss://starRocks_backup"\nPROPERTIES\n(\n    "fs.oss.accessKeyId" = "xxx",\n    "fs.oss.accessKeySecret" = "yyy",\n    "fs.oss.endpoint" = "oss-cn-beijing.aliyuncs.com"\n);\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Example 2: creates a read-only repository named ",(0,r.jsx)(s.code,{children:"oss_repo"})," using the remote storage directory ",(0,r.jsx)(s.code,{children:"oss://starRocks_backup"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-SQL",children:'CREATE READ ONLY REPOSITORY oss_repo\nWITH BROKER oss_broker\nON LOCATION "oss://starRocks_backup"\nPROPERTIES\n(\n    "fs.oss.accessKeyId" = "xxx",\n    "fs.oss.accessKeySecret" = "yyy",\n    "fs.oss.endpoint" = "oss-cn-beijing.aliyuncs.com"\n);\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Example 3: creates a repository named ",(0,r.jsx)(s.code,{children:"hdfs_repo"})," using the remote storage directory ",(0,r.jsx)(s.code,{children:"hdfs://hadoop-name-node:xxxxx/path/to/repo/"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-SQL",children:'CREATE REPOSITORY hdfs_repo\nWITH BROKER hdfs_broker\nON LOCATION "hdfs://hadoop-name-node:xxxxx/path/to/repo/"\nPROPERTIES\n(\n    "username" = "xxxx",\n    "password" = "yyyy"\n);\n'})})]})}const h=function(e={}){const{wrapper:s}=Object.assign({},(0,t.ah)(),e.components);return s?(0,r.jsx)(s,Object.assign({},e,{children:(0,r.jsx)(l,e)})):l(e)}},11151:(e,s,n)=>{n.d(s,{Zo:()=>c,ah:()=>o});var r=n(67294);const t=r.createContext({});function o(e){const s=r.useContext(t);return r.useMemo((()=>"function"==typeof e?e(s):{...s,...e}),[s,e])}const i={};function c({components:e,children:s,disableParentContext:n}){let c;return c=n?"function"==typeof e?e({}):e||i:o(e),r.createElement(t.Provider,{value:c},s)}}}]);