"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[4695],{39041:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>i});var l=n(85893),t=n(11151);const s={displayed_sidebar:"English"},r="Use catalogs to manage internal and external data",c={id:"data_source/Manage_data",title:"Use catalogs to manage internal and external data",description:"Catalogs are used to manage data. StarRocks 2.3 and later provide the following two types of catalogs:",source:"@site/versioned_docs/version-2.3/data_source/Manage_data.md",sourceDirName:"data_source",slug:"/data_source/Manage_data",permalink:"/docs/2.3/data_source/Manage_data",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/edit/main/docs/data_source/Manage_data.md",tags:[],version:"2.3",frontMatter:{displayed_sidebar:"English"},sidebar:"English",previous:{title:"External tables",permalink:"/docs/2.3/data_source/External_table"},next:{title:"Deployment",permalink:"/docs/2.3/faq/Deploy_faq"}},d={},i=[{value:"Create an external catalog",id:"create-an-external-catalog",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Examples",id:"examples",level:3},{value:"Query data",id:"query-data",level:2},{value:"Query internal data",id:"query-internal-data",level:3},{value:"Query external data",id:"query-external-data",level:3},{value:"Cross-catalog query",id:"cross-catalog-query",level:3},{value:"Examples",id:"examples-1",level:3},{value:"Query internal data",id:"query-internal-data-1",level:4},{value:"Query external data",id:"query-external-data-1",level:4},{value:"Cross-catalog query",id:"cross-catalog-query-1",level:4},{value:"Drop an external catalog",id:"drop-an-external-catalog",level:2},{value:"Syntax",id:"syntax-1",level:3},{value:"Examples",id:"examples-2",level:3}];function o(e){const a=Object.assign({h1:"h1",p:"p",ul:"ul",li:"li",strong:"strong",code:"code",h2:"h2",h3:"h3",pre:"pre",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",ol:"ol",h4:"h4"},(0,t.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.h1,{id:"use-catalogs-to-manage-internal-and-external-data",children:"Use catalogs to manage internal and external data"}),"\n",(0,l.jsx)(a.p,{children:"Catalogs are used to manage data. StarRocks 2.3 and later provide the following two types of catalogs:"}),"\n",(0,l.jsxs)(a.ul,{children:["\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:[(0,l.jsx)(a.strong,{children:"Internal catalog"}),": stores the databases and tables of StarRocks. You can use an internal catalog to manage internal data. For example, if you execute the CREATE DATABASE and CREATE TABLE statements to create a database and a table, they are stored in an internal catalog. Each StarRocks cluster has a default internal catalog whose name is ",(0,l.jsx)(a.code,{children:"default_catalog"}),". Currently, you cannot modify the name of the internal catalog or create a new internal catalog."]}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:[(0,l.jsx)(a.strong,{children:"External catalog"}),": is used to manage data in external sources. When you create an external catalog for an external source, you need to specify the access information of the external source. After the catalog is created, you can use it to query external data without the need to create external tables."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(a.h2,{id:"create-an-external-catalog",children:"Create an external catalog"}),"\n",(0,l.jsx)(a.h3,{id:"syntax",children:"Syntax"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:'CREATE EXTERNAL CATALOG <catalog_name> PROPERTIES ("key"="value", ...);\n'})}),"\n",(0,l.jsxs)(a.p,{children:["When you create an external catalog, you need to add configuration items in ",(0,l.jsx)(a.code,{children:"PROPERTIES"})," based on the external data source. For different external data sources, you need to add different configuration items. StarRocks 2.3 only supports creating an external catalog for Apache Hive\u2122. After the catalog is created, you can directly query all data in a Hive cluster without using external tables. Additionally, StarRocks only allows you to query tables in the catalog. It does not allow you to write data to tables in the catalog."]}),"\n",(0,l.jsx)(a.h3,{id:"examples",children:"Examples"}),"\n",(0,l.jsxs)(a.p,{children:["Create an external catalog named ",(0,l.jsx)(a.code,{children:"hive_catalog0"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:'CREATE EXTERNAL CATALOG hive_catalog0 \nPROPERTIES(\n  "type"="hive", \n  "hive.metastore.uris"="thrift://127.0.0.1:9083"\n);\n'})}),"\n",(0,l.jsx)(a.p,{children:"The following table describes the related parameters."}),"\n",(0,l.jsxs)(a.table,{children:[(0,l.jsx)(a.thead,{children:(0,l.jsxs)(a.tr,{children:[(0,l.jsx)(a.th,{children:(0,l.jsx)(a.strong,{children:"Parameter"})}),(0,l.jsx)(a.th,{children:(0,l.jsx)(a.strong,{children:"Description"})})]})}),(0,l.jsxs)(a.tbody,{children:[(0,l.jsxs)(a.tr,{children:[(0,l.jsx)(a.td,{children:"type"}),(0,l.jsxs)(a.td,{children:["The resource type. Set the value to ",(0,l.jsx)(a.code,{children:"hive"}),"."]})]}),(0,l.jsxs)(a.tr,{children:[(0,l.jsx)(a.td,{children:"hive.metastore.uris"}),(0,l.jsxs)(a.td,{children:["The URI of the Hive metastore. The parameter value is in the following format: ",(0,l.jsx)(a.code,{children:"thrift://< IP address of Hive metadata >:< port number >"}),". The port number defaults to 9083."]})]})]})]}),"\n",(0,l.jsx)(a.h2,{id:"query-data",children:"Query data"}),"\n",(0,l.jsx)(a.h3,{id:"query-internal-data",children:"Query internal data"}),"\n",(0,l.jsxs)(a.ol,{children:["\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["After logging in to StarRocks from the MySQL client, you connect to the ",(0,l.jsx)(a.code,{children:"default_catalog"})," by default."]}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Run the ",(0,l.jsx)(a.code,{children:"show databases"})," command or the ",(0,l.jsx)(a.code,{children:"show databases from default_catalog"})," command to view all internal databases in the current cluster."]}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Query data in ",(0,l.jsx)(a.code,{children:"default_catalog"})," by specifying a database name and a table name."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(a.h3,{id:"query-external-data",children:"Query external data"}),"\n",(0,l.jsxs)(a.ol,{children:["\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["After logging in to StarRocks from the MySQL client, you connect to the ",(0,l.jsx)(a.code,{children:"default_catalog"})," by default."]}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Run the ",(0,l.jsx)(a.code,{children:"show catalogs"})," command to view all existing catalogs and find the specific external catalog. Then, run the ",(0,l.jsx)(a.code,{children:"show databases from external_catalog"})," command to view all databases in the external catalog. For example, to view all databases in ",(0,l.jsx)(a.code,{children:"hive_table"}),", run ",(0,l.jsx)(a.code,{children:"show databases from hive_catalog"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Run the ",(0,l.jsx)(a.code,{children:"use external_catalog.database"})," command to switch the current session to the specific external catalog and database."]}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsx)(a.p,{children:"Query data in the database by specifying a table name."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(a.h3,{id:"cross-catalog-query",children:"Cross-catalog query"}),"\n",(0,l.jsxs)(a.p,{children:["If you want to perform a cross-catalog query, use the ",(0,l.jsx)(a.code,{children:"catalog_name.database_name"})," or ",(0,l.jsx)(a.code,{children:"catalog_name.database_name.table_name"})," format to reference data to be queried in your current catalog."]}),"\n",(0,l.jsx)(a.h3,{id:"examples-1",children:"Examples"}),"\n",(0,l.jsx)(a.h4,{id:"query-internal-data-1",children:"Query internal data"}),"\n",(0,l.jsxs)(a.p,{children:["For example, to query data in ",(0,l.jsx)(a.code,{children:"olap_db.olap_table"}),", perform the following steps:"]}),"\n",(0,l.jsxs)(a.ol,{children:["\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsx)(a.p,{children:"After you log in to StarRocks from the MySQL client, check all databases in the internal catalog of the current cluster."}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"show databases;\n"})}),"\n",(0,l.jsx)(a.p,{children:"or"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"SHOW DATABASES FROM default_catalog;\n"})}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Use ",(0,l.jsx)(a.code,{children:"olap_db"})," as the current database."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"USE olap_db;\n"})}),"\n",(0,l.jsx)(a.p,{children:"or"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"use default_catalog.olap_db;\n"})}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Query data from ",(0,l.jsx)(a.code,{children:"olap_table"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"SELECT * FROM olap_table limit 1;\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(a.h4,{id:"query-external-data-1",children:"Query external data"}),"\n",(0,l.jsxs)(a.p,{children:["For example, to query data in ",(0,l.jsx)(a.code,{children:"hive_catalog.hive_db.hive_table"}),", perform the following steps:"]}),"\n",(0,l.jsxs)(a.ol,{children:["\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsx)(a.p,{children:"After you log in to StarRocks from the MySQL client, check all catalogs in the current cluster."}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"show catalogs;\n"})}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["View databases in ",(0,l.jsx)(a.code,{children:"hive_table"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"show databases from hive_catalog;\n"})}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Switch the current session to ",(0,l.jsx)(a.code,{children:"hive_catalog.hive_db"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"USE hive_catalog.hive_db;\n"})}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Query data from ",(0,l.jsx)(a.code,{children:"hive_table"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"SELECT * FROM hive_table limit 1;\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(a.h4,{id:"cross-catalog-query-1",children:"Cross-catalog query"}),"\n",(0,l.jsxs)(a.ul,{children:["\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Query ",(0,l.jsx)(a.code,{children:"hive_table"})," in ",(0,l.jsx)(a.code,{children:"hive_table"})," when the current session is ",(0,l.jsx)(a.code,{children:"default_catalog.olap_db"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"SELECT * FROM hive_catalog.hive_db.hive_table;\n"})}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Query ",(0,l.jsx)(a.code,{children:"olap_table"})," in ",(0,l.jsx)(a.code,{children:"default_catalog"})," when the current session is ",(0,l.jsx)(a.code,{children:"hive_catalog.hive_db"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"SELECT * FROM default_catalog.olap_db.olap_table;\n"})}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Perform a JOIN query on ",(0,l.jsx)(a.code,{children:"hive_table"})," in ",(0,l.jsx)(a.code,{children:"hive_catalog"})," and ",(0,l.jsx)(a.code,{children:"olap_table"})," in ",(0,l.jsx)(a.code,{children:"default_catalog"})," when the current session is ",(0,l.jsx)(a.code,{children:"hive_catalog.hive_db"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"SELECT * FROM hive_table h JOIN default_catalog.olap_db.olap_table o WHERE h.id = o.id;\n"})}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsxs)(a.p,{children:["Perform a JOIN query on",(0,l.jsx)(a.code,{children:"hive_tab``le"})," in ",(0,l.jsx)(a.code,{children:"hive_catalog"})," and ",(0,l.jsx)(a.code,{children:"olap_table"})," in ",(0,l.jsx)(a.code,{children:"default_catalog"})," by using a JOIN clause when the current session is another catalog."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"SELECT * FROM hive_catalog.hive_db.hive_table h JOIN default_catalog.olap_db.olap_table o WHERE h.id = o.id;\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(a.h2,{id:"drop-an-external-catalog",children:"Drop an external catalog"}),"\n",(0,l.jsx)(a.h3,{id:"syntax-1",children:"Syntax"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"DROP EXTERNAL CATALOG <catalog_name>;\n"})}),"\n",(0,l.jsx)(a.h3,{id:"examples-2",children:"Examples"}),"\n",(0,l.jsxs)(a.p,{children:["Drop an external catalog named ",(0,l.jsx)(a.code,{children:"hive_catalog"}),"."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-SQL",children:"DROP EXTERNAL CATALOG hive_catalog;\n"})})]})}const h=function(e={}){const{wrapper:a}=Object.assign({},(0,t.ah)(),e.components);return a?(0,l.jsx)(a,Object.assign({},e,{children:(0,l.jsx)(o,e)})):o(e)}},11151:(e,a,n)=>{n.d(a,{Zo:()=>c,ah:()=>s});var l=n(67294);const t=l.createContext({});function s(e){const a=l.useContext(t);return l.useMemo((()=>"function"==typeof e?e(a):{...a,...e}),[a,e])}const r={};function c({components:e,children:a,disableParentContext:n}){let c;return c=n?"function"==typeof e?e({}):e||r:s(e),l.createElement(t.Provider,{value:c},a)}}}]);