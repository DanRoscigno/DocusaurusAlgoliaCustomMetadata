"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[73544],{62840:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>d,default:()=>x,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var l=s(85893),r=s(11151);const i={displayed_sidebar:"Chinese"},d="CREATE MATERIALIZED VIEW",c={id:"sql-reference/sql-statements/data-definition/CREATE_MATERIALIZED_VIEW",title:"CREATE MATERIALIZED VIEW",description:"\u529f\u80fd",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-3.0/sql-reference/sql-statements/data-definition/CREATE_MATERIALIZED_VIEW.md",sourceDirName:"sql-reference/sql-statements/data-definition",slug:"/sql-reference/sql-statements/data-definition/CREATE_MATERIALIZED_VIEW",permalink:"/doc/zh/docs/3.0/sql-reference/sql-statements/data-definition/CREATE_MATERIALIZED_VIEW",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/tree/main/versioned_docs/version-3.0/sql-reference/sql-statements/data-definition/CREATE_MATERIALIZED_VIEW.md",tags:[],version:"3.0",frontMatter:{displayed_sidebar:"Chinese"},sidebar:"Chinese",previous:{title:"CREATE INDEX",permalink:"/doc/zh/docs/3.0/sql-reference/sql-statements/data-definition/CREATE_INDEX"},next:{title:"CREATE REPOSITORY",permalink:"/doc/zh/docs/3.0/sql-reference/sql-statements/data-definition/CREATE_REPOSITORY"}},t={},h=[{value:"\u529f\u80fd",id:"\u529f\u80fd",level:2},{value:"\u540c\u6b65\u7269\u5316\u89c6\u56fe",id:"\u540c\u6b65\u7269\u5316\u89c6\u56fe",level:2},{value:"\u8bed\u6cd5",id:"\u8bed\u6cd5",level:3},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:3},{value:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u67e5\u8be2\u81ea\u52a8\u6539\u5199",id:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u67e5\u8be2\u81ea\u52a8\u6539\u5199",level:3},{value:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe",id:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe",level:2},{value:"\u8bed\u6cd5",id:"\u8bed\u6cd5-1",level:3},{value:"\u53c2\u6570",id:"\u53c2\u6570-1",level:3},{value:"\u67e5\u8be2\u5f02\u6b65\u7269\u5316\u89c6\u56fe",id:"\u67e5\u8be2\u5f02\u6b65\u7269\u5316\u89c6\u56fe",level:3},{value:"\u652f\u6301\u6570\u636e\u7c7b\u578b",id:"\u652f\u6301\u6570\u636e\u7c7b\u578b",level:3},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u793a\u4f8b",id:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u793a\u4f8b",level:3},{value:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u793a\u4f8b",id:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u793a\u4f8b",level:3},{value:"\u66f4\u591a\u64cd\u4f5c",id:"\u66f4\u591a\u64cd\u4f5c",level:2}];function a(n){const e=Object.assign({h1:"h1",h2:"h2",p:"p",a:"a",code:"code",blockquote:"blockquote",strong:"strong",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",h3:"h3",pre:"pre",ul:"ul",li:"li",ol:"ol"},(0,r.ah)(),n.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"create-materialized-view",children:"CREATE MATERIALIZED VIEW"}),"\n",(0,l.jsx)(e.h2,{id:"\u529f\u80fd",children:"\u529f\u80fd"}),"\n",(0,l.jsxs)(e.p,{children:["\u521b\u5efa\u7269\u5316\u89c6\u56fe\u3002\u5173\u4e8e\u7269\u5316\u89c6\u56fe\u9002\u7528\u7684\u573a\u666f\u8bf7\u53c2\u8003",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/using_starrocks/Materialized_view-single_table",children:"\u540c\u6b65\u7269\u5316\u89c6\u56fe"}),"\u548c",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/using_starrocks/Materialized_view",children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe"}),"\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u521b\u5efa\u7269\u5316\u89c6\u56fe\u662f\u4e00\u4e2a\u5f02\u6b65\u7684\u64cd\u4f5c\u3002\u8be5\u547d\u4ee4\u6267\u884c\u6210\u529f\u5373\u4ee3\u8868\u521b\u5efa\u7269\u5316\u89c6\u56fe\u7684\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_ALTER_MATERIALIZED_VIEW",children:"SHOW ALTER MATERIALIZED VIEW"})," \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u6570\u636e\u5e93\u4e2d\u540c\u6b65\u7269\u5316\u89c6\u56fe\u7684\u6784\u5efa\u72b6\u6001\uff0c\u6216\u901a\u8fc7\u67e5\u8be2 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/administration/information_schema",children:"Information Schema"})," \u4e2d\u7684\u5143\u6570\u636e\u8868 ",(0,l.jsx)(e.code,{children:"tasks"})," \u548c ",(0,l.jsx)(e.code,{children:"task_runs"})," \u6765\u67e5\u770b\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684\u6784\u5efa\u72b6\u6001\u3002"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"})}),"\n",(0,l.jsx)(e.p,{children:"\u53ea\u6709\u62e5\u6709\u57fa\u8868\u6240\u5728\u6570\u636e\u5e93\u7684 CREATE MATERIALIZED VIEW \u6743\u9650\u7684\u7528\u6237\u624d\u53ef\u4ee5\u521b\u5efa\u7269\u5316\u89c6\u56fe\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"StarRocks \u81ea v2.4 \u8d77\u652f\u6301\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u3002\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u4e0e\u5148\u524d\u7248\u672c\u4e2d\u7684\u540c\u6b65\u7269\u5316\u89c6\u56fe\u533a\u522b\u4e3b\u8981\u4f53\u73b0\u5728\u4ee5\u4e0b\u65b9\u9762\uff1a"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{}),(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:"\u5355\u8868\u805a\u5408"})}),(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:"\u591a\u8868\u5173\u8054"})}),(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:"\u67e5\u8be2\u6539\u5199"})}),(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:"\u5237\u65b0\u7b56\u7565"})}),(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:"\u57fa\u8868"})})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe"})}),(0,l.jsx)(e.td,{children:"\u662f"}),(0,l.jsx)(e.td,{children:"\u662f"}),(0,l.jsx)(e.td,{children:"\u662f"}),(0,l.jsx)(e.td,{children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"\u5f02\u6b65\u5237\u65b0"}),(0,l.jsx)("li",{children:"\u624b\u52a8\u5237\u65b0"})]})}),(0,l.jsxs)(e.td,{children:["\u652f\u6301\u591a\u8868\u6784\u5efa\u3002\u57fa\u8868\u53ef\u4ee5\u6765\u81ea\uff1a",(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Default Catalog"}),(0,l.jsx)("li",{children:"External Catalog\uff08v2.5\uff09"}),(0,l.jsx)("li",{children:"\u5df2\u6709\u5f02\u6b65\u7269\u5316\u89c6\u56fe\uff08v2.5\uff09"}),(0,l.jsx)("li",{children:"\u5df2\u6709\u89c6\u56fe\uff08v3.1\uff09"})]})]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\uff08Rollup\uff09"})}),(0,l.jsx)(e.td,{children:"\u4ec5\u90e8\u5206\u805a\u5408\u51fd\u6570"}),(0,l.jsx)(e.td,{children:"\u5426"}),(0,l.jsx)(e.td,{children:"\u662f"}),(0,l.jsx)(e.td,{children:"\u5bfc\u5165\u540c\u6b65\u5237\u65b0"}),(0,l.jsx)(e.td,{children:"\u4ec5\u652f\u6301\u57fa\u4e8e Default Catalog \u7684\u5355\u8868\u6784\u5efa"})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u540c\u6b65\u7269\u5316\u89c6\u56fe",children:"\u540c\u6b65\u7269\u5316\u89c6\u56fe"}),"\n",(0,l.jsx)(e.h3,{id:"\u8bed\u6cd5",children:"\u8bed\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'CREATE MATERIALIZED VIEW [IF NOT EXISTS] [database.]<mv_name>\n[COMMENT ""]\n[PROPERTIES ("key"="value", ...)]\nAS \n<query_statement>\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"mv_name"}),"\uff08\u5fc5\u586b\uff09"]}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u5316\u89c6\u56fe\u7684\u540d\u79f0\u3002\u547d\u540d\u8981\u6c42\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5fc5\u987b\u7531\u5b57\u6bcd\uff08a-z \u6216 A-Z\uff09\u3001\u6570\u5b57\uff080-9\uff09\u6216\u4e0b\u5212\u7ebf\uff08_\uff09\u7ec4\u6210\uff0c\u4e14\u53ea\u80fd\u4ee5\u5b57\u6bcd\u5f00\u5934\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u603b\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u89c6\u56fe\u540d\u5927\u5c0f\u5199\u654f\u611f\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"COMMENT"}),"\uff08\u9009\u586b\uff09"]}),"\n",(0,l.jsxs)(e.p,{children:["\u7269\u5316\u89c6\u56fe\u7684\u6ce8\u91ca\u3002\u6ce8\u610f\u5efa\u7acb\u7269\u5316\u89c6\u56fe\u65f6 ",(0,l.jsx)(e.code,{children:"COMMENT"})," \u5fc5\u987b\u5728 ",(0,l.jsx)(e.code,{children:"mv_name"})," \u4e4b\u540e\uff0c\u5426\u5219\u521b\u5efa\u5931\u8d25\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"query_statement"}),"\uff08\u5fc5\u586b\uff09"]}),"\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u7269\u5316\u89c6\u56fe\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u5176\u7ed3\u679c\u5373\u4e3a\u7269\u5316\u89c6\u56fe\u4e2d\u7684\u6570\u636e\u3002\u8bed\u6cd5\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"SELECT select_expr[, select_expr ...]\n[GROUP BY column_name[, column_name ...]]\n[ORDER BY column_name[, column_name ...]]\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"select_expr\uff08\u5fc5\u586b\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u6784\u5efa\u540c\u6b65\u7269\u5316\u89c6\u56fe\u7684\u67e5\u8be2\u8bed\u53e5\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5355\u5217\u6216\u805a\u5408\u5217\uff1a\u5f62\u5982 ",(0,l.jsx)(e.code,{children:"SELECT a, b, c FROM table_a"}),"\uff0c\u5176\u4e2d ",(0,l.jsx)(e.code,{children:"a"}),"\u3001",(0,l.jsx)(e.code,{children:"b"})," \u548c ",(0,l.jsx)(e.code,{children:"c"})," \u4e3a\u57fa\u8868\u7684\u5217\u540d\u3002\u5982\u679c\u60a8\u6ca1\u6709\u4e3a\u7269\u5316\u89c6\u56fe\u6307\u5b9a\u5217\u540d\uff0c\u90a3\u4e48 StarRocks \u81ea\u52a8\u4e3a\u8fd9\u4e9b\u5217\u547d\u540d\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u8868\u8fbe\u5f0f\uff1a\u5f62\u5982 ",(0,l.jsx)(e.code,{children:"SELECT a+1 AS x, b+2 AS y, c*c AS z FROM table_a"}),"\uff0c\u5176\u4e2d ",(0,l.jsx)(e.code,{children:"a+1"}),"\u3001",(0,l.jsx)(e.code,{children:"b+2"})," \u548c ",(0,l.jsx)(e.code,{children:"c*c"})," \u4e3a\u5305\u542b\u57fa\u8868\u5217\u540d\u7684\u8868\u8fbe\u5f0f\uff0c",(0,l.jsx)(e.code,{children:"x"}),"\u3001",(0,l.jsx)(e.code,{children:"y"})," \u548c ",(0,l.jsx)(e.code,{children:"z"})," \u4e3a\u7269\u5316\u89c6\u56fe\u7684\u5217\u540d\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8bf4\u660e"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8be5\u53c2\u6570\u81f3\u5c11\u9700\u5305\u542b\u4e00\u4e2a\u5355\u5217\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4ec5\u652f\u6301\u5728\u5355\u5217\u4e0a\u4f7f\u7528\u805a\u5408\u51fd\u6570\u3002\u4e0d\u652f\u6301\u5f62\u5982 ",(0,l.jsx)(e.code,{children:"sum(a+b)"})," \u5f62\u5f0f\u7684\u67e5\u8be2\u8bed\u53e5\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528\u805a\u5408\u51fd\u6570\u521b\u5efa\u540c\u6b65\u7269\u5316\u89c6\u56fe\u65f6\uff0c\u5fc5\u987b\u6307\u5b9a GROUP BY \u5b50\u53e5\uff0c\u5e76\u5728 ",(0,l.jsx)(e.code,{children:"select_expr"})," \u4e2d\u6307\u5b9a\u81f3\u5c11\u4e00\u4e2a GROUP BY \u5217\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4e0d\u652f\u6301 JOIN\u3001WHERE\u3001\u4ee5\u53ca GROUP BY \u7684 HAVING \u5b50\u53e5\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u4f7f\u7528 ALTER TABLE DROP COLUMN \u5220\u9664\u57fa\u8868\u4e2d\u7279\u5b9a\u5217\u65f6\uff0c\u9700\u8981\u4fdd\u8bc1\u8be5\u57fa\u8868\u6240\u6709\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4e2d\u4e0d\u5305\u542b\u88ab\u5220\u9664\u5217\uff0c\u5426\u5219\u65e0\u6cd5\u8fdb\u884c\u5220\u9664\u64cd\u4f5c\u3002\u5982\u679c\u5fc5\u987b\u5220\u9664\u8be5\u5217\uff0c\u5219\u9700\u8981\u5c06\u6240\u6709\u5305\u542b\u8be5\u5217\u7684\u540c\u6b65\u7269\u5316\u89c6\u56fe\u5220\u9664\uff0c\u7136\u540e\u8fdb\u884c\u5220\u9664\u5217\u64cd\u4f5c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u4e3a\u4e00\u5f20\u8868\u521b\u5efa\u8fc7\u591a\u7684\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4f1a\u5f71\u54cd\u5bfc\u5165\u7684\u6548\u7387\u3002\u5bfc\u5165\u6570\u636e\u65f6\uff0c\u540c\u6b65\u7269\u5316\u89c6\u56fe\u548c\u57fa\u8868\u6570\u636e\u5c06\u540c\u6b65\u66f4\u65b0\uff0c\u5982\u679c\u4e00\u5f20\u57fa\u8868\u5305\u542b n \u4e2a\u7269\u5316\u89c6\u56fe\uff0c\u5411\u57fa\u8868\u5bfc\u5165\u6570\u636e\u65f6\uff0c\u5176\u5bfc\u5165\u6548\u7387\u5927\u7ea6\u7b49\u540c\u4e8e\u5bfc\u5165 n \u5f20\u8868\uff0c\u6570\u636e\u5bfc\u5165\u7684\u901f\u5ea6\u4f1a\u53d8\u6162\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"GROUP BY\uff08\u9009\u586b\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u6784\u5efa\u7269\u5316\u89c6\u56fe\u67e5\u8be2\u8bed\u53e5\u7684\u5206\u7ec4\u5217\u3002\u5982\u4e0d\u6307\u5b9a\u8be5\u53c2\u6570\uff0c\u5219\u9ed8\u8ba4\u4e0d\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u7ec4\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"ORDER BY\uff08\u9009\u586b\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u6784\u5efa\u7269\u5316\u89c6\u56fe\u67e5\u8be2\u8bed\u53e5\u7684\u6392\u5e8f\u5217\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u6392\u5e8f\u5217\u7684\u58f0\u660e\u987a\u5e8f\u5fc5\u987b\u548c ",(0,l.jsx)(e.code,{children:"select_expr"})," \u4e2d\u5217\u58f0\u660e\u987a\u5e8f\u4e00\u81f4\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u67e5\u8be2\u8bed\u53e5\u4e2d\u5305\u542b\u5206\u7ec4\u5217\uff0c\u5219\u6392\u5e8f\u5217\u5fc5\u987b\u548c\u5206\u7ec4\u5217\u4e00\u81f4\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u4e0d\u6307\u5b9a\u6392\u5e8f\u5217\uff0c\u5219\u7cfb\u7edf\u6839\u636e\u4ee5\u4e0b\u89c4\u5219\u81ea\u52a8\u8865\u5145\u6392\u5e8f\u5217\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5982\u679c\u7269\u5316\u89c6\u56fe\u662f\u805a\u5408\u7c7b\u578b\uff0c\u5219\u6240\u6709\u7684\u5206\u7ec4\u5217\u81ea\u52a8\u8865\u5145\u4e3a\u6392\u5e8f\u5217\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5982\u679c\u7269\u5316\u89c6\u56fe\u662f\u975e\u805a\u5408\u7c7b\u578b\uff0c\u5219\u7cfb\u7edf\u6839\u636e\u524d\u7f00\u5217\u81ea\u52a8\u9009\u62e9\u6392\u5e8f\u5217\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u67e5\u8be2\u81ea\u52a8\u6539\u5199",children:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u67e5\u8be2\u81ea\u52a8\u6539\u5199"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u540c\u6b65\u7269\u5316\u89c6\u56fe\u67e5\u8be2\u65f6\uff0c\u539f\u59cb\u67e5\u8be2\u8bed\u53e5\u5c06\u4f1a\u88ab\u81ea\u52a8\u6539\u5199\u5e76\u7528\u4e8e\u67e5\u8be2\u7269\u5316\u89c6\u56fe\u4e2d\u4fdd\u5b58\u7684\u4e2d\u95f4\u7ed3\u679c\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u8868\u5c55\u793a\u4e86\u539f\u59cb\u67e5\u8be2\u805a\u5408\u51fd\u6570\u548c\u6784\u5efa\u540c\u6b65\u7269\u5316\u89c6\u56fe\u7528\u5230\u7684\u805a\u5408\u51fd\u6570\u7684\u5339\u914d\u5173\u7cfb\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u573a\u666f\u9009\u62e9\u5bf9\u5e94\u7684\u805a\u5408\u51fd\u6570\u6784\u5efa\u540c\u6b65\u7269\u5316\u89c6\u56fe\u3002"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:"\u539f\u59cb\u67e5\u8be2\u805a\u5408\u51fd\u6570"})}),(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:"\u7269\u5316\u89c6\u56fe\u6784\u5efa\u805a\u5408\u51fd\u6570"})})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"sum"}),(0,l.jsx)(e.td,{children:"sum"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"min"}),(0,l.jsx)(e.td,{children:"min"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"max"}),(0,l.jsx)(e.td,{children:"max"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"count"}),(0,l.jsx)(e.td,{children:"count"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"bitmap_union, bitmap_union_count, count(distinct)"}),(0,l.jsx)(e.td,{children:"bitmap_union"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"hll_raw_agg, hll_union_agg, ndv, approx_count_distinct"}),(0,l.jsx)(e.td,{children:"hll_union"})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe",children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe"}),"\n",(0,l.jsx)(e.h3,{id:"\u8bed\u6cd5-1",children:"\u8bed\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'CREATE MATERIALIZED VIEW [IF NOT EXISTS] [database.]<mv_name>\n[COMMENT ""]\n-- distribution_desc\n[DISTRIBUTED BY HASH(<bucket_key>[,<bucket_key2> ...]) [BUCKETS <bucket_number>]]\n-- refresh_desc\n[REFRESH \n-- refresh_moment\n    [IMMEDIATE | DEFERRED]\n-- refresh_scheme\n    [ASYNC [START (<start_time>)] [EVERY INTERVAL (<refresh_interval>)] | MANUAL]\n]\n-- partition_expression\n[PARTITION BY \n    {<date_column> | date_trunc(fmt, <date_column>)}\n]\n-- order_by_expression\n[ORDER BY (<sort_key>)]\n[PROPERTIES ("key"="value", ...)]\nAS \n<query_statement>\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u53c2\u6570-1",children:"\u53c2\u6570"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"mv_name"}),"\uff08\u5fc5\u586b\uff09"]}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u5316\u89c6\u56fe\u7684\u540d\u79f0\u3002\u547d\u540d\u8981\u6c42\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5fc5\u987b\u7531\u5b57\u6bcd\uff08a-z \u6216 A-Z\uff09\u3001\u6570\u5b57\uff080-9\uff09\u6216\u4e0b\u5212\u7ebf\uff08_\uff09\u7ec4\u6210\uff0c\u4e14\u53ea\u80fd\u4ee5\u5b57\u6bcd\u5f00\u5934\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u603b\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u89c6\u56fe\u540d\u5927\u5c0f\u5199\u654f\u611f\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"})}),"\n",(0,l.jsx)(e.p,{children:"\u540c\u4e00\u5f20\u57fa\u8868\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u5f02\u6b65\u7269\u5316\u89c6\u56fe\uff0c\u4f46\u540c\u4e00\u6570\u636e\u5e93\u5185\u7684\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u540d\u79f0\u4e0d\u53ef\u91cd\u590d\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"COMMENT"}),"\uff08\u9009\u586b\uff09"]}),"\n",(0,l.jsxs)(e.p,{children:["\u7269\u5316\u89c6\u56fe\u7684\u6ce8\u91ca\u3002\u6ce8\u610f\u5efa\u7acb\u7269\u5316\u89c6\u56fe\u65f6 ",(0,l.jsx)(e.code,{children:"COMMENT"})," \u5fc5\u987b\u5728 ",(0,l.jsx)(e.code,{children:"mv_name"})," \u4e4b\u540e\uff0c\u5426\u5219\u521b\u5efa\u5931\u8d25\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"distribution_desc"}),"\uff08\u9009\u586b\uff09"]}),"\n",(0,l.jsx)(e.p,{children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684\u5206\u6876\u65b9\u5f0f\uff0c\u5305\u62ec\u54c8\u5e0c\u5206\u6876\u548c\u968f\u673a\u5206\u6876\uff08\u81ea 2.5.7 \u7248\u672c\u8d77\uff09\u3002\u5982\u4e0d\u6307\u5b9a\u8be5\u53c2\u6570\uff0cStarRocks \u4f7f\u7528\u968f\u673a\u5206\u6876\u65b9\u5f0f\uff0c\u5e76\u81ea\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf\u3002"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8bf4\u660e"})}),"\n",(0,l.jsxs)(e.p,{children:["\u521b\u5efa\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u65f6\u5fc5\u987b\u81f3\u5c11\u6307\u5b9a ",(0,l.jsx)(e.code,{children:"distribution_desc"})," \u548c ",(0,l.jsx)(e.code,{children:"refresh_scheme"})," \u5176\u4e2d\u4e4b\u4e00\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u54c8\u5e0c\u5206\u6876"}),"\uff1a"]}),"\n",(0,l.jsx)(e.p,{children:"\u8bed\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"DISTRIBUTED BY HASH (<bucket_key1>[,<bucket_key2> ...]) [BUCKETS <bucket_number>]\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/table_design/Data_distribution#%E5%88%86%E6%A1%B6",children:"\u5206\u6876"}),"\u3002"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8bf4\u660e"})}),"\n",(0,l.jsxs)(e.p,{children:["\u81ea 2.5.7 \u7248\u672c\u8d77\uff0cStarRocks \u652f\u6301\u5728\u5efa\u8868\u548c\u65b0\u589e\u5206\u533a\u65f6\u81ea\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf (BUCKETS)\uff0c\u60a8\u65e0\u9700\u624b\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/table_design/Data_distribution#%E7%A1%AE%E5%AE%9A%E5%88%86%E6%A1%B6%E6%95%B0%E9%87%8F",children:"\u786e\u5b9a\u5206\u6876\u6570\u91cf"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u968f\u673a\u5206\u6876"}),"\uff1a"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u679c\u60a8\u9009\u62e9\u968f\u673a\u5206\u6876\u65b9\u5f0f\uff0c\u5e76\u4e14\u81ea\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf\uff0c\u5219\u65e0\u9700\u6307\u5b9a ",(0,l.jsx)(e.code,{children:"distribution_desc"}),"\u3002\u5982\u679c\u60a8\u9700\u8981\u624b\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8bed\u6cd5\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"DISTRIBUTED BY RANDOM BUCKETS <bucket_number>\n"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"})}),"\n",(0,l.jsx)(e.p,{children:"\u91c7\u7528\u968f\u673a\u5206\u6876\u65b9\u5f0f\u7684\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u4e0d\u652f\u6301\u8bbe\u7f6e Colocation Group\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/table_design/Data_distribution#%E9%9A%8F%E6%9C%BA%E5%88%86%E6%A1%B6%E8%87%AA-31",children:"\u968f\u673a\u5206\u6876"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"refresh_moment"}),"\uff08\u9009\u586b\uff09"]}),"\n",(0,l.jsxs)(e.p,{children:["\u7269\u5316\u89c6\u56fe\u7684\u5237\u65b0\u65f6\u523b\u3002\u9ed8\u8ba4\u503c\uff1a",(0,l.jsx)(e.code,{children:"IMMEDIATE"}),"\u3002\u6709\u6548\u503c\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"IMMEDIATE"}),"\uff1a\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u521b\u5efa\u6210\u529f\u540e\u7acb\u5373\u5237\u65b0\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"DEFERRED"}),"\uff1a\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u521b\u5efa\u6210\u529f\u540e\u4e0d\u8fdb\u884c\u5237\u65b0\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u8c03\u7528\u6216\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\u89e6\u53d1\u5237\u65b0\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"refresh_scheme"}),"\uff08\u9009\u586b\uff09"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8bf4\u660e"})}),"\n",(0,l.jsxs)(e.p,{children:["\u521b\u5efa\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u65f6\u5fc5\u987b\u81f3\u5c11\u6307\u5b9a ",(0,l.jsx)(e.code,{children:"distribution_desc"})," \u548c ",(0,l.jsx)(e.code,{children:"refresh_scheme"})," \u5176\u4e2d\u4e4b\u4e00\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u5316\u89c6\u56fe\u7684\u5237\u65b0\u65b9\u5f0f\u3002\u8be5\u53c2\u6570\u652f\u6301\u5982\u4e0b\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"ASYNC"}),"\uff1a\u5f02\u6b65\u5237\u65b0\u6a21\u5f0f\u3002\u6bcf\u5f53\u57fa\u8868\u6570\u636e\u53d1\u751f\u53d8\u5316\uff0c\u7269\u5316\u89c6\u56fe\u5c06\u6839\u636e\u9884\u5b9a\u4e49\u7684\u5237\u65b0\u95f4\u9694\u81ea\u52a8\u8fdb\u884c\u5237\u65b0\u3002\u60a8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6307\u5b9a\u5237\u65b0\u5f00\u59cb\u65f6\u95f4 ",(0,l.jsx)(e.code,{children:"START('yyyy-MM-dd hh:mm:ss')"})," \u548c\u5237\u65b0\u95f4\u9694  ",(0,l.jsx)(e.code,{children:"EVERY (interval n day/hour/minute/second)"}),"\u3002\u5237\u65b0\u95f4\u9694\u4ec5\u652f\u6301\uff1a",(0,l.jsx)(e.code,{children:"DAY"}),"\u3001",(0,l.jsx)(e.code,{children:"HOUR"}),"\u3001",(0,l.jsx)(e.code,{children:"MINUTE"})," \u4ee5\u53ca ",(0,l.jsx)(e.code,{children:"SECOND"}),"\u3002\u4f8b\u5982\uff1a",(0,l.jsx)(e.code,{children:"ASYNC START ('2023-09-12 16:30:25') EVERY (INTERVAL 5 MINUTE)"}),"\u3002\u5982\u4e0d\u6307\u5b9a\u5237\u65b0\u95f4\u9694\uff0c\u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c ",(0,l.jsx)(e.code,{children:"10 MINUTE"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"MANUAL"}),"\uff1a\u624b\u52a8\u5237\u65b0\u6a21\u5f0f\u3002\u7269\u5316\u89c6\u56fe\u4e0d\u4f1a\u81ea\u52a8\u5237\u65b0\u3002\u5237\u65b0\u4efb\u52a1\u53ea\u80fd\u7531\u7528\u6237\u624b\u52a8\u89e6\u53d1\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u4e0d\u6307\u5b9a\u8be5\u53c2\u6570\uff0c\u5219\u9ed8\u8ba4\u4f7f\u7528 MANUAL \u65b9\u5f0f\u3002"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"partition_expression"}),"\uff08\u9009\u586b\uff09"]}),"\n",(0,l.jsx)(e.p,{children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684\u5206\u533a\u8868\u8fbe\u5f0f\u3002\u76ee\u524d\u4ec5\u652f\u6301\u5728\u521b\u5efa\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u65f6\u4f7f\u7528\u4e00\u4e2a\u5206\u533a\u8868\u8fbe\u5f0f\u3002"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"})}),"\n",(0,l.jsx)(e.p,{children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u6682\u4e0d\u652f\u6301\u4f7f\u7528 List \u5206\u533a\u7b56\u7565\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u53c2\u6570\u652f\u6301\u5982\u4e0b\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"date_column"}),"\uff1a\u7528\u4e8e\u5206\u533a\u7684\u5217\u7684\u540d\u79f0\u3002\u5f62\u5982 ",(0,l.jsx)(e.code,{children:"PARTITION BY dt"}),"\uff0c\u8868\u793a\u6309\u7167 ",(0,l.jsx)(e.code,{children:"dt"})," \u5217\u8fdb\u884c\u5206\u533a\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["date_trunc \u51fd\u6570\uff1a\u5f62\u5982 ",(0,l.jsx)(e.code,{children:'PARTITION BY date_trunc("MONTH", dt)'}),"\uff0c\u8868\u793a\u5c06 ",(0,l.jsx)(e.code,{children:"dt"})," \u5217\u622a\u65ad\u81f3\u4ee5\u6708\u4e3a\u5355\u4f4d\u8fdb\u884c\u5206\u533a\u3002date_trunc \u51fd\u6570\u652f\u6301\u622a\u65ad\u7684\u5355\u4f4d\u5305\u62ec ",(0,l.jsx)(e.code,{children:"YEAR"}),"\u3001",(0,l.jsx)(e.code,{children:"MONTH"}),"\u3001",(0,l.jsx)(e.code,{children:"DAY"}),"\u3001",(0,l.jsx)(e.code,{children:"HOUR"})," \u4ee5\u53ca ",(0,l.jsx)(e.code,{children:"MINUTE"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u4e0d\u6307\u5b9a\u8be5\u53c2\u6570\uff0c\u5219\u9ed8\u8ba4\u7269\u5316\u89c6\u56fe\u4e3a\u65e0\u5206\u533a\u3002"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"order_by_expression"}),"\uff08\u9009\u586b\uff09"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684\u6392\u5e8f\u952e\u3002\u5982\u4e0d\u6307\u5b9a\u8be5\u53c2\u6570\uff0cStarRocks \u4ece SELECT \u5217\u4e2d\u9009\u62e9\u90e8\u5206\u524d\u7f00\u4f5c\u4e3a\u6392\u5e8f\u952e\uff0c\u4f8b\u5982\uff1a",(0,l.jsx)(e.code,{children:"select a, b, c, d"})," \u4e2d, \u6392\u5e8f\u5217\u53ef\u80fd\u4e3a ",(0,l.jsx)(e.code,{children:"a"})," \u548c ",(0,l.jsx)(e.code,{children:"b"}),"\u3002\u6b64\u53c2\u6570\u81ea StarRocks 3.0 \u8d77\u652f\u6301\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"PROPERTIES"}),"\uff08\u9009\u586b\uff09"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684\u5c5e\u6027\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/sql-reference/sql-statements/data-definition/ALTER_MATERIALIZED_VIEW",children:"ALTER MATERIALIZED VIEW"})," \u4fee\u6539\u5df2\u6709\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684\u5c5e\u6027\u3002"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"replication_num"}),"\uff1a\u521b\u5efa\u7269\u5316\u89c6\u56fe\u526f\u672c\u6570\u91cf\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"storage_medium"}),"\uff1a\u5b58\u50a8\u4ecb\u8d28\u7c7b\u578b\u3002\u6709\u6548\u503c\uff1a",(0,l.jsx)(e.code,{children:"HDD"})," \u548c ",(0,l.jsx)(e.code,{children:"SSD"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"partition_ttl_number"}),"\uff1a\u9700\u8981\u4fdd\u7559\u7684\u6700\u8fd1\u7684\u7269\u5316\u89c6\u56fe\u5206\u533a\u6570\u91cf\u3002\u5bf9\u4e8e\u5206\u533a\u5f00\u59cb\u65f6\u95f4\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4\u7684\u5206\u533a\uff0c\u5f53\u6570\u91cf\u8d85\u8fc7\u8be5\u503c\u4e4b\u540e\uff0c\u591a\u4f59\u7684\u5206\u533a\u5c06\u4f1a\u88ab\u5220\u9664\u3002StarRocks \u5c06\u6839\u636e FE \u914d\u7f6e\u9879 ",(0,l.jsx)(e.code,{children:"dynamic_partition_check_interval_seconds"})," \u4e2d\u7684\u65f6\u95f4\u95f4\u9694\u5b9a\u671f\u68c0\u67e5\u7269\u5316\u89c6\u56fe\u5206\u533a\uff0c\u5e76\u81ea\u52a8\u5220\u9664\u8fc7\u671f\u5206\u533a\u3002\u5728",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/table_design/dynamic_partitioning",children:"\u52a8\u6001\u5206\u533a"}),"\u573a\u666f\u4e0b\uff0c\u63d0\u524d\u521b\u5efa\u7684\u672a\u6765\u5206\u533a\u5c06\u4e0d\u4f1a\u88ab\u7eb3\u5165 TTL \u8003\u8651\u3002\u9ed8\u8ba4\u503c\uff1a",(0,l.jsx)(e.code,{children:"-1"}),"\u3002\u5f53\u503c\u4e3a ",(0,l.jsx)(e.code,{children:"-1"})," \u65f6\uff0c\u5c06\u4fdd\u7559\u7269\u5316\u89c6\u56fe\u6240\u6709\u5206\u533a\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"partition_refresh_number"}),"\uff1a\u5355\u6b21\u5237\u65b0\u4e2d\uff0c\u6700\u591a\u5237\u65b0\u7684\u5206\u533a\u6570\u91cf\u3002\u5982\u679c\u9700\u8981\u5237\u65b0\u7684\u5206\u533a\u6570\u91cf\u8d85\u8fc7\u8be5\u503c\uff0cStarRocks \u5c06\u62c6\u5206\u8fd9\u6b21\u5237\u65b0\u4efb\u52a1\uff0c\u5e76\u5206\u6279\u5b8c\u6210\u3002\u4ec5\u5f53\u524d\u4e00\u6279\u5206\u533a\u5237\u65b0\u6210\u529f\u65f6\uff0cStarRocks \u4f1a\u7ee7\u7eed\u5237\u65b0\u4e0b\u4e00\u6279\u5206\u533a\uff0c\u76f4\u81f3\u6240\u6709\u5206\u533a\u5237\u65b0\u5b8c\u6210\u3002\u5982\u679c\u5176\u4e2d\u6709\u5206\u533a\u5237\u65b0\u5931\u8d25\uff0c\u5c06\u4e0d\u4f1a\u4ea7\u751f\u540e\u7eed\u7684\u5237\u65b0\u4efb\u52a1\u3002\u9ed8\u8ba4\u503c\uff1a",(0,l.jsx)(e.code,{children:"-1"}),"\u3002\u5f53\u503c\u4e3a ",(0,l.jsx)(e.code,{children:"-1"})," \u65f6\uff0c\u5c06\u4e0d\u4f1a\u62c6\u5206\u5237\u65b0\u4efb\u52a1\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"excluded_trigger_tables"}),"\uff1a\u5728\u6b64\u9879\u5c5e\u6027\u4e2d\u5217\u51fa\u7684\u57fa\u8868\uff0c\u5176\u6570\u636e\u4ea7\u751f\u53d8\u5316\u65f6\u4e0d\u4f1a\u89e6\u53d1\u5bf9\u5e94\u7269\u5316\u89c6\u56fe\u81ea\u52a8\u5237\u65b0\u3002\u8be5\u53c2\u6570\u4ec5\u9488\u5bf9\u5bfc\u5165\u89e6\u53d1\u5f0f\u5237\u65b0\uff0c\u901a\u5e38\u9700\u8981\u4e0e\u5c5e\u6027 ",(0,l.jsx)(e.code,{children:"auto_refresh_partitions_limit"})," \u642d\u914d\u4f7f\u7528\u3002\u5f62\u5f0f\uff1a",(0,l.jsx)(e.code,{children:"[db_name.]table_name"}),"\u3002\u9ed8\u8ba4\u503c\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002\u5f53\u503c\u4e3a\u7a7a\u5b57\u7b26\u4e32\u65f6\uff0c\u4efb\u610f\u7684\u57fa\u8868\u6570\u636e\u53d8\u5316\u90fd\u5c06\u89e6\u53d1\u5bf9\u5e94\u7269\u5316\u89c6\u56fe\u5237\u65b0\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"auto_refresh_partitions_limit"}),"\uff1a\u5f53\u89e6\u53d1\u7269\u5316\u89c6\u56fe\u5237\u65b0\u65f6\uff0c\u9700\u8981\u5237\u65b0\u7684\u6700\u8fd1\u7684\u7269\u5316\u89c6\u56fe\u5206\u533a\u6570\u91cf\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u5c5e\u6027\u9650\u5236\u5237\u65b0\u7684\u8303\u56f4\uff0c\u964d\u4f4e\u5237\u65b0\u4ee3\u4ef7\uff0c\u4f46\u56e0\u4e3a\u4ec5\u6709\u90e8\u5206\u5206\u533a\u5237\u65b0\uff0c\u6709\u53ef\u80fd\u5bfc\u81f4\u7269\u5316\u89c6\u56fe\u6570\u636e\u4e0e\u57fa\u8868\u65e0\u6cd5\u4fdd\u6301\u4e00\u81f4\u3002\u9ed8\u8ba4\u503c\uff1a",(0,l.jsx)(e.code,{children:"-1"}),"\u3002\u5f53\u53c2\u6570\u503c\u4e3a ",(0,l.jsx)(e.code,{children:"-1"})," \u65f6\uff0cStarRocks \u5c06\u5237\u65b0\u6240\u6709\u5206\u533a\u3002\u5f53\u53c2\u6570\u503c\u4e3a\u6b63\u6574\u6570 N \u65f6\uff0cStarRocks \u4f1a\u5c06\u5df2\u5b58\u5728\u7684\u5206\u533a\u6309\u65f6\u95f4\u5148\u540e\u6392\u5e8f\uff0c\u5e76\u4ece\u6700\u8fd1\u5206\u533a\u5f00\u59cb\u5237\u65b0 N \u4e2a\u5206\u533a\u3002\u5982\u679c\u5206\u533a\u6570\u4e0d\u8db3 N\uff0c\u5219\u5237\u65b0\u6240\u6709\u5df2\u5b58\u5728\u7684\u5206\u533a\u3002\u5982\u679c\u60a8\u7684\u52a8\u6001\u5206\u533a\u7269\u5316\u89c6\u56fe\u4e2d\u5b58\u5728\u9884\u521b\u5efa\u7684\u672a\u6765\u65f6\u6bb5\u52a8\u6001\u5206\u533a\uff0cStarRocks \u4f1a\u4f18\u5148\u5237\u65b0\u8fd9\u4e9b\u672a\u6765\u65f6\u6bb5\u7684\u5206\u533a\uff0c\u7136\u540e\u5237\u65b0\u5df2\u6709\u7684\u5206\u533a\u3002\u56e0\u6b64\u8bbe\u5b9a\u6b64\u53c2\u6570\u65f6\u8bf7\u786e\u4fdd\u5df2\u4e3a\u9884\u521b\u5efa\u7684\u672a\u6765\u65f6\u6bb5\u52a8\u6001\u5206\u533a\u4fdd\u7559\u4f59\u91cf\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"mv_rewrite_staleness_second"}),"\uff1a\u5982\u679c\u5f53\u524d\u7269\u5316\u89c6\u56fe\u7684\u4e0a\u4e00\u6b21\u5237\u65b0\u5728\u6b64\u5c5e\u6027\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u5185\uff0c\u5219\u6b64\u7269\u5316\u89c6\u56fe\u53ef\u76f4\u63a5\u7528\u4e8e\u67e5\u8be2\u91cd\u5199\uff0c\u65e0\u8bba\u57fa\u8868\u6570\u636e\u662f\u5426\u66f4\u65b0\u3002\u5982\u679c\u4e0a\u4e00\u6b21\u5237\u65b0\u65f6\u95f4\u65e9\u4e8e\u6b64\u5c5e\u6027\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\uff0cStarRocks \u901a\u8fc7\u68c0\u67e5\u57fa\u8868\u6570\u636e\u662f\u5426\u53d8\u66f4\u51b3\u5b9a\u8be5\u7269\u5316\u89c6\u56fe\u80fd\u5426\u7528\u4e8e\u67e5\u8be2\u91cd\u5199\u3002\u5355\u4f4d\uff1a\u79d2\u3002\u8be5\u5c5e\u6027\u81ea v3.0 \u8d77\u652f\u6301\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"colocate_with"}),"\uff1a\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684 Colocation Group\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/using_starrocks/Colocate_join",children:"Colocate Join"}),"\u3002\u8be5\u5c5e\u6027\u81ea v3.0 \u8d77\u652f\u6301\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"unique_constraints"})," \u548c ",(0,l.jsx)(e.code,{children:"foreign_key_constraints"}),"\uff1a\u521b\u5efa View Delta Join \u67e5\u8be2\u6539\u5199\u7684\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u65f6\u7684 Unique Key \u7ea6\u675f\u548c\u5916\u952e\u7ea6\u675f\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/using_starrocks/Materialized_view#%E5%9F%BA%E4%BA%8E-view-delta-join-%E5%9C%BA%E6%99%AF%E6%94%B9%E5%86%99%E6%9F%A5%E8%AF%A2",children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe - \u57fa\u4e8e View Delta Join \u573a\u666f\u6539\u5199\u67e5\u8be2"}),"\u3002\u8be5\u5c5e\u6027\u81ea v3.0 \u8d77\u652f\u6301\u3002"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"})}),"\n",(0,l.jsx)(e.p,{children:"Unique Key \u7ea6\u675f\u548c\u5916\u952e\u7ea6\u675f\u4ec5\u7528\u4e8e\u67e5\u8be2\u91cd\u5199\u3002\u5bfc\u5165\u6570\u636e\u65f6\uff0c\u4e0d\u4fdd\u8bc1\u8fdb\u884c\u5916\u952e\u7ea6\u675f\u6821\u9a8c\u3002\u60a8\u5fc5\u987b\u786e\u4fdd\u5bfc\u5165\u7684\u6570\u636e\u6ee1\u8db3\u7ea6\u675f\u6761\u4ef6\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"query_statement"}),"\uff08\u5fc5\u586b\uff09"]}),"\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u5176\u7ed3\u679c\u5373\u4e3a\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u4e2d\u7684\u6570\u636e\u3002"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"})}),"\n",(0,l.jsx)(e.p,{children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u6682\u4e0d\u652f\u6301\u57fa\u4e8e\u4f7f\u7528 List \u5206\u533a\u7684\u57fa\u8868\u521b\u5efa\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u67e5\u8be2\u5f02\u6b65\u7269\u5316\u89c6\u56fe",children:"\u67e5\u8be2\u5f02\u6b65\u7269\u5316\u89c6\u56fe"}),"\n",(0,l.jsxs)(e.p,{children:["\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u672c\u8d28\u662f\u4e00\u5f20\u5b9e\u4f53\u8868\u3002\u60a8\u53ef\u4ee5\u5c06\u5176\u4f5c\u4e3a\u666e\u901a\u8868\u8fdb\u884c\u4efb\u4f55",(0,l.jsx)(e.strong,{children:"\u9664\u76f4\u63a5\u5bfc\u5165\u6570\u636e"}),"\u4ee5\u5916\u7684\u64cd\u4f5c\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u652f\u6301\u6570\u636e\u7c7b\u578b",children:"\u652f\u6301\u6570\u636e\u7c7b\u578b"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u57fa\u4e8e StarRocks \u5185\u90e8\u6570\u636e\u76ee\u5f55\uff08Default Catalog\uff09\u521b\u5efa\u7684\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u652f\u6301\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"DATE"}),"\n",(0,l.jsx)(e.li,{children:"DATETIME"}),"\n",(0,l.jsx)(e.li,{children:"CHAR"}),"\n",(0,l.jsx)(e.li,{children:"VARCHAR"}),"\n",(0,l.jsx)(e.li,{children:"BOOLEAN"}),"\n",(0,l.jsx)(e.li,{children:"TINYINT"}),"\n",(0,l.jsx)(e.li,{children:"SMALLINT"}),"\n",(0,l.jsx)(e.li,{children:"INT"}),"\n",(0,l.jsx)(e.li,{children:"BIGINT"}),"\n",(0,l.jsx)(e.li,{children:"LARGEINT"}),"\n",(0,l.jsx)(e.li,{children:"FLOAT"}),"\n",(0,l.jsx)(e.li,{children:"DOUBLE"}),"\n",(0,l.jsx)(e.li,{children:"DECIMAL"}),"\n",(0,l.jsx)(e.li,{children:"ARRAY"}),"\n",(0,l.jsx)(e.li,{children:"JSON"}),"\n",(0,l.jsx)(e.li,{children:"BITMAP"}),"\n",(0,l.jsx)(e.li,{children:"HLL"}),"\n",(0,l.jsx)(e.li,{children:"PERCENTILE"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8bf4\u660e"})}),"\n",(0,l.jsx)(e.p,{children:"\u81ea v2.4.5 \u8d77\u652f\u6301 BITMAP\u3001HLL \u4ee5\u53ca PERCENTILE\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u57fa\u4e8e StarRocks \u5916\u90e8\u6570\u636e\u76ee\u5f55\uff08External Catalog\uff09\u521b\u5efa\u7684\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u652f\u6301\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Hive Catalog"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"INT/INTEGER"}),"\n",(0,l.jsx)(e.li,{children:"BIGINT"}),"\n",(0,l.jsx)(e.li,{children:"TIMESTAMP"}),"\n",(0,l.jsx)(e.li,{children:"STRING"}),"\n",(0,l.jsx)(e.li,{children:"VARCHAR"}),"\n",(0,l.jsx)(e.li,{children:"CHAR"}),"\n",(0,l.jsx)(e.li,{children:"DOUBLE"}),"\n",(0,l.jsx)(e.li,{children:"FLOAT"}),"\n",(0,l.jsx)(e.li,{children:"DECIMAL"}),"\n",(0,l.jsx)(e.li,{children:"ARRAY"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Hudi Catalog"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"BOOLEAN"}),"\n",(0,l.jsx)(e.li,{children:"INT"}),"\n",(0,l.jsx)(e.li,{children:"DATE"}),"\n",(0,l.jsx)(e.li,{children:"TimeMillis/TimeMicros"}),"\n",(0,l.jsx)(e.li,{children:"TimestampMillis/TimestampMicros"}),"\n",(0,l.jsx)(e.li,{children:"LONG"}),"\n",(0,l.jsx)(e.li,{children:"FLOAT"}),"\n",(0,l.jsx)(e.li,{children:"DOUBLE"}),"\n",(0,l.jsx)(e.li,{children:"STRING"}),"\n",(0,l.jsx)(e.li,{children:"ARRAY"}),"\n",(0,l.jsx)(e.li,{children:"DECIMAL"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Iceberg Catalog"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"BOOLEAN"}),"\n",(0,l.jsx)(e.li,{children:"INT"}),"\n",(0,l.jsx)(e.li,{children:"LONG"}),"\n",(0,l.jsx)(e.li,{children:"FLOAT"}),"\n",(0,l.jsx)(e.li,{children:"DOUBLE"}),"\n",(0,l.jsx)(e.li,{children:"DECIMAL(P, S)"}),"\n",(0,l.jsx)(e.li,{children:"DATE"}),"\n",(0,l.jsx)(e.li,{children:"TIME"}),"\n",(0,l.jsx)(e.li,{children:"TIMESTAMP"}),"\n",(0,l.jsx)(e.li,{children:"STRING"}),"\n",(0,l.jsx)(e.li,{children:"UUID"}),"\n",(0,l.jsx)(e.li,{children:"FIXED(L)"}),"\n",(0,l.jsx)(e.li,{children:"BINARY"}),"\n",(0,l.jsx)(e.li,{children:"LIST"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5f53\u524d\u7248\u672c\u6682\u65f6\u4e0d\u652f\u6301\u540c\u65f6\u521b\u5efa\u591a\u4e2a\u7269\u5316\u89c6\u56fe\u3002\u4ec5\u5f53\u5f53\u524d\u521b\u5efa\u4efb\u52a1\u5b8c\u6210\u65f6\uff0c\u65b9\u53ef\u6267\u884c\u4e0b\u4e00\u4e2a\u521b\u5efa\u4efb\u52a1\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5173\u4e8e\u540c\u6b65\u7269\u5316\u89c6\u56fe\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4ec5\u652f\u6301\u5355\u5217\u805a\u5408\u51fd\u6570\uff0c\u4e0d\u652f\u6301\u5f62\u5982 ",(0,l.jsx)(e.code,{children:"sum(a+b)"})," \u7684\u67e5\u8be2\u8bed\u53e5\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4ec5\u652f\u6301\u5bf9\u540c\u4e00\u5217\u6570\u636e\u4f7f\u7528\u4e00\u79cd\u805a\u5408\u51fd\u6570\uff0c\u4e0d\u652f\u6301\u5f62\u5982 ",(0,l.jsx)(e.code,{children:"select sum(a), min(a) from table"})," \u7684\u67e5\u8be2\u8bed\u53e5\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4e2d\u4f7f\u7528\u805a\u5408\u51fd\u6570\u9700\u8981\u4e0e GROUP BY \u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u4e14 SELECT \u7684\u5217\u4e2d\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u5206\u7ec4\u5217\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u521b\u5efa\u8bed\u53e5\u4e0d\u652f\u6301 JOIN\u3001WHERE \u4ee5\u53ca GROUP BY \u7684 HAVING \u5b50\u53e5\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u4f7f\u7528 ALTER TABLE DROP COLUMN \u5220\u9664\u57fa\u8868\u4e2d\u7279\u5b9a\u5217\u65f6\uff0c\u9700\u8981\u4fdd\u8bc1\u8be5\u57fa\u8868\u6240\u6709\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4e2d\u4e0d\u5305\u542b\u88ab\u5220\u9664\u5217\uff0c\u5426\u5219\u65e0\u6cd5\u8fdb\u884c\u5220\u9664\u64cd\u4f5c\u3002\u5982\u679c\u5fc5\u987b\u5220\u9664\u8be5\u5217\uff0c\u5219\u9700\u8981\u5c06\u6240\u6709\u5305\u542b\u8be5\u5217\u7684\u540c\u6b65\u7269\u5316\u89c6\u56fe\u5220\u9664\uff0c\u7136\u540e\u8fdb\u884c\u5220\u9664\u5217\u64cd\u4f5c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u4e3a\u4e00\u5f20\u8868\u521b\u5efa\u8fc7\u591a\u7684\u540c\u6b65\u7269\u5316\u89c6\u56fe\u4f1a\u5f71\u54cd\u5bfc\u5165\u7684\u6548\u7387\u3002\u5bfc\u5165\u6570\u636e\u65f6\uff0c\u540c\u6b65\u7269\u5316\u89c6\u56fe\u548c\u57fa\u8868\u6570\u636e\u5c06\u540c\u6b65\u66f4\u65b0\uff0c\u5982\u679c\u4e00\u5f20\u57fa\u8868\u5305\u542b n \u4e2a\u7269\u5316\u89c6\u56fe\uff0c\u5411\u57fa\u8868\u5bfc\u5165\u6570\u636e\u65f6\uff0c\u5176\u5bfc\u5165\u6548\u7387\u5927\u7ea6\u7b49\u540c\u4e8e\u5bfc\u5165 n \u5f20\u8868\uff0c\u6570\u636e\u5bfc\u5165\u7684\u901f\u5ea6\u4f1a\u53d8\u6162\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5173\u4e8e\u5d4c\u5957\u5f02\u6b65\u7269\u5316\u89c6\u56fe\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6bcf\u4e2a\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u7684\u5237\u65b0\u65b9\u5f0f\u4ec5\u5f71\u54cd\u5f53\u524d\u7269\u5316\u89c6\u56fe\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5f53\u524d StarRocks \u4e0d\u5bf9\u5d4c\u5957\u5c42\u6570\u8fdb\u884c\u9650\u5236\u3002\u751f\u4ea7\u73af\u5883\u4e2d\u5efa\u8bae\u5d4c\u5957\u5c42\u6570\u4e0d\u8d85\u8fc7\u4e09\u5c42\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5173\u4e8e\u5916\u90e8\u6570\u636e\u76ee\u5f55\u5f02\u6b65\u7269\u5316\u89c6\u56fe\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5916\u90e8\u6570\u636e\u76ee\u5f55\u7269\u5316\u89c6\u56fe\u4ec5\u652f\u6301\u5f02\u6b65\u5b9a\u65f6\u5237\u65b0\u548c\u624b\u52a8\u5237\u65b0\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u7269\u5316\u89c6\u56fe\u4e2d\u7684\u6570\u636e\u4e0d\u4fdd\u8bc1\u4e0e\u5916\u90e8\u6570\u636e\u76ee\u5f55\u7684\u6570\u636e\u5f3a\u4e00\u81f4\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u76ee\u524d\u6682\u4e0d\u652f\u6301\u57fa\u4e8e\u8d44\u6e90\uff08Resource\uff09\u6784\u5efa\u7269\u5316\u89c6\u56fe\u3002"}),"\n",(0,l.jsx)(e.li,{children:"StarRocks \u76ee\u524d\u65e0\u6cd5\u611f\u77e5\u5916\u90e8\u6570\u636e\u76ee\u5f55\u57fa\u8868\u6570\u636e\u662f\u5426\u53d1\u751f\u53d8\u52a8\uff0c\u6240\u4ee5\u6bcf\u6b21\u5237\u65b0\u4f1a\u9ed8\u8ba4\u5237\u65b0\u6240\u6709\u5206\u533a\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u5237\u65b0\u65b9\u5f0f\u6307\u5b9a\u5237\u65b0\u90e8\u5206\u5206\u533a\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(e.h3,{id:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u793a\u4f8b",children:"\u540c\u6b65\u7269\u5316\u89c6\u56fe\u793a\u4f8b"}),"\n",(0,l.jsx)(e.p,{children:"\u57fa\u8868\u7ed3\u6784\u4e3a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"mysql> desc duplicate_table;\n+-------+--------+------+------+---------+-------+\n| Field | Type   | Null | Key  | Default | Extra |\n+-------+--------+------+------+---------+-------+\n| k1    | INT    | Yes  | true | N/A     |       |\n| k2    | INT    | Yes  | true | N/A     |       |\n| k3    | BIGINT | Yes  | true | N/A     |       |\n| k4    | BIGINT | Yes  | true | N/A     |       |\n+-------+--------+------+------+---------+-------+\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u4ec5\u5305\u542b\u539f\u59cb\u8868 \uff08k1\uff0ck2\uff09\u5217\u7684\u7269\u5316\u89c6\u56fe\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"create materialized view k1_k2 as\nselect k1, k2 from duplicate_table;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u5316\u89c6\u56fe\u7684 schema \u5982\u4e0b\u56fe\uff0c\u7269\u5316\u89c6\u56fe\u4ec5\u5305\u542b\u4e24\u5217 k1\u3001k2 \u4e14\u4e0d\u5e26\u4efb\u4f55\u805a\u5408\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"+-----------------+-------+--------+------+------+---------+-------+\n| IndexName       | Field | Type   | Null | Key  | Default | Extra |\n+-----------------+-------+--------+------+------+---------+-------+\n| k1_k2           | k1    | INT    | Yes  | true | N/A     |       |\n|                 | k2    | INT    | Yes  | true | N/A     |       |\n+-----------------+-------+--------+------+------+---------+-------+\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u4ee5 k2 \u4e3a\u6392\u5e8f\u5217\u7684\u7269\u5316\u89c6\u56fe\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"create materialized view k2_order as\nselect k2, k1 from duplicate_table order by k2;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u5316\u89c6\u56fe\u7684 schema \u5982\u4e0b\u56fe\uff0c\u7269\u5316\u89c6\u56fe\u4ec5\u5305\u542b\u4e24\u5217 k2\u3001k1\uff0c\u5176\u4e2d k2 \u5217\u4e3a\u6392\u5e8f\u5217\uff0c\u4e0d\u5e26\u4efb\u4f55\u805a\u5408\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"+-----------------+-------+--------+------+-------+---------+-------+\n| IndexName       | Field | Type   | Null | Key   | Default | Extra |\n+-----------------+-------+--------+------+-------+---------+-------+\n| k2_order        | k2    | INT    | Yes  | true  | N/A     |       |\n|                 | k1    | INT    | Yes  | false | N/A     | NONE  |\n+-----------------+-------+--------+------+-------+---------+-------+\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u4ee5 k1\uff0ck2 \u5206\u7ec4\uff0ck3 \u5217\u4e3a SUM \u805a\u5408\u7684\u7269\u5316\u89c6\u56fe\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"create materialized view k1_k2_sumk3 as\nselect k1, k2, sum(k3) from duplicate_table group by k1, k2;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u5316\u89c6\u56fe\u7684 schema \u5982\u4e0b\u56fe\uff0c\u7269\u5316\u89c6\u56fe\u5305\u542b\u4e24\u5217 k1\u3001k2\uff0csum(k3) \u5176\u4e2d k1\u3001k2 \u4e3a\u5206\u7ec4\u5217\uff0csum(k3) \u4e3a\u6839\u636e k1\u3001k2 \u5206\u7ec4\u540e\u7684 k3 \u5217\u7684\u6c42\u548c\u503c\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u7531\u4e8e\u7269\u5316\u89c6\u56fe\u6ca1\u6709\u58f0\u660e\u6392\u5e8f\u5217\uff0c\u4e14\u7269\u5316\u89c6\u56fe\u5e26\u805a\u5408\u6570\u636e\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u8865\u5145\u5206\u7ec4\u5217 k1\u3001k2 \u4e3a\u6392\u5e8f\u5217\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"+-----------------+-------+--------+------+-------+---------+-------+\n| IndexName       | Field | Type   | Null | Key   | Default | Extra |\n+-----------------+-------+--------+------+-------+---------+-------+\n| k1_k2_sumk3     | k1    | INT    | Yes  | true  | N/A     |       |\n|                 | k2    | INT    | Yes  | true  | N/A     |       |\n|                 | k3    | BIGINT | Yes  | false | N/A     | SUM   |\n+-----------------+-------+--------+------+-------+---------+-------+\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u53bb\u9664\u91cd\u590d\u884c\u7684\u7269\u5316\u89c6\u56fe\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"create materialized view deduplicate as\nselect k1, k2, k3, k4 from duplicate_table group by k1, k2, k3, k4;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u5316\u89c6\u56fe schema \u5982\u4e0b\u56fe\uff0c\u7269\u5316\u89c6\u56fe\u5305\u542b k1\u3001k2\u3001k3\u3001k4 \u5217\uff0c\u4e14\u4e0d\u5b58\u5728\u91cd\u590d\u884c\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"+-----------------+-------+--------+------+-------+---------+-------+\n| IndexName       | Field | Type   | Null | Key   | Default | Extra |\n+-----------------+-------+--------+------+-------+---------+-------+\n| deduplicate     | k1    | INT    | Yes  | true  | N/A     |       |\n|                 | k2    | INT    | Yes  | true  | N/A     |       |\n|                 | k3    | BIGINT | Yes  | true  | N/A     |       |\n|                 | k4    | BIGINT | Yes  | true  | N/A     |       |\n+-----------------+-------+--------+------+-------+---------+-------+\n\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u4e0d\u58f0\u660e\u6392\u5e8f\u5217\u7684\u975e\u805a\u5408\u578b\u7269\u5316\u89c6\u56fe\u3002"}),"\n",(0,l.jsx)(e.p,{children:"all_type_table \u7684 schema \u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"+-------+--------------+------+-------+---------+-------+\n| Field | Type         | Null | Key   | Default | Extra |\n+-------+--------------+------+-------+---------+-------+\n| k1    | TINYINT      | Yes  | true  | N/A     |       |\n| k2    | SMALLINT     | Yes  | true  | N/A     |       |\n| k3    | INT          | Yes  | true  | N/A     |       |\n| k4    | BIGINT       | Yes  | true  | N/A     |       |\n| k5    | DECIMAL(9,0) | Yes  | true  | N/A     |       |\n| k6    | DOUBLE       | Yes  | false | N/A     | NONE  |\n| k7    | VARCHAR(20)  | Yes  | false | N/A     | NONE  |\n+-------+--------------+------+-------+---------+-------+\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u5316\u89c6\u56fe\u5305\u542b k3\u3001k4\u3001k5\u3001k6\u3001k7 \u5217\uff0c\u4e14\u4e0d\u58f0\u660e\u6392\u5e8f\u5217\uff0c\u5219\u521b\u5efa\u8bed\u53e5\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"create materialized view mv_1 as\nselect k3, k4, k5, k6, k7 from all_type_table;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7cfb\u7edf\u9ed8\u8ba4\u8865\u5145\u7684\u6392\u5e8f\u5217\u4e3a k3\u3001k4\u3001k5 \u4e09\u5217\u3002\u8fd9\u4e09\u5217\u7c7b\u578b\u7684\u5b57\u8282\u6570\u4e4b\u548c\u4e3a 4(INT) + 8(BIGINT) + 16(DECIMAL) = 28 < 36\u3002\u6240\u4ee5\u8865\u5145\u7684\u662f\u8fd9\u4e09\u5217\u4f5c\u4e3a\u6392\u5e8f\u5217\u3002\n\u7269\u5316\u89c6\u56fe\u7684 schema \u5982\u4e0b\uff0c\u53ef\u4ee5\u770b\u5230\u5176\u4e2d k3\u3001k4\u3001k5 \u5217\u7684 key \u5b57\u6bb5\u4e3a true\uff0c\u4e5f\u5c31\u662f\u6392\u5e8f\u5217\u3002k6\u3001k7 \u5217\u7684 key \u5b57\u6bb5\u4e3a false\uff0c\u4e5f\u5c31\u662f\u975e\u6392\u5e8f\u5217\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"+----------------+-------+--------------+------+-------+---------+-------+\n| IndexName      | Field | Type         | Null | Key   | Default | Extra |\n+----------------+-------+--------------+------+-------+---------+-------+\n| mv_1           | k3    | INT          | Yes  | true  | N/A     |       |\n|                | k4    | BIGINT       | Yes  | true  | N/A     |       |\n|                | k5    | DECIMAL(9,0) | Yes  | true  | N/A     |       |\n|                | k6    | DOUBLE       | Yes  | false | N/A     | NONE  |\n|                | k7    | VARCHAR(20)  | Yes  | false | N/A     | NONE  |\n+----------------+-------+--------------+------+-------+---------+-------+\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u793a\u4f8b",children:"\u5f02\u6b65\u7269\u5316\u89c6\u56fe\u793a\u4f8b"}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5\u4e0b\u793a\u4f8b\u57fa\u4e8e\u4e0b\u5217\u57fa\u8868\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'CREATE TABLE `lineorder` (\n  `lo_orderkey` int(11) NOT NULL COMMENT "",\n  `lo_linenumber` int(11) NOT NULL COMMENT "",\n  `lo_custkey` int(11) NOT NULL COMMENT "",\n  `lo_partkey` int(11) NOT NULL COMMENT "",\n  `lo_suppkey` int(11) NOT NULL COMMENT "",\n  `lo_orderdate` int(11) NOT NULL COMMENT "",\n  `lo_orderpriority` varchar(16) NOT NULL COMMENT "",\n  `lo_shippriority` int(11) NOT NULL COMMENT "",\n  `lo_quantity` int(11) NOT NULL COMMENT "",\n  `lo_extendedprice` int(11) NOT NULL COMMENT "",\n  `lo_ordtotalprice` int(11) NOT NULL COMMENT "",\n  `lo_discount` int(11) NOT NULL COMMENT "",\n  `lo_revenue` int(11) NOT NULL COMMENT "",\n  `lo_supplycost` int(11) NOT NULL COMMENT "",\n  `lo_tax` int(11) NOT NULL COMMENT "",\n  `lo_commitdate` int(11) NOT NULL COMMENT "",\n  `lo_shipmode` varchar(11) NOT NULL COMMENT ""\n) ENGINE=OLAP\nDUPLICATE KEY(`lo_orderkey`)\nCOMMENT "OLAP"\nPARTITION BY RANGE(`lo_orderdate`)\n(PARTITION p1 VALUES [("-2147483648"), ("19930101")),\nPARTITION p2 VALUES [("19930101"), ("19940101")),\nPARTITION p3 VALUES [("19940101"), ("19950101")),\nPARTITION p4 VALUES [("19950101"), ("19960101")),\nPARTITION p5 VALUES [("19960101"), ("19970101")),\nPARTITION p6 VALUES [("19970101"), ("19980101")),\nPARTITION p7 VALUES [("19980101"), ("19990101")))\nDISTRIBUTED BY HASH(`lo_orderkey`);\n\nCREATE TABLE IF NOT EXISTS `customer` (\n  `c_custkey` int(11) NOT NULL COMMENT "",\n  `c_name` varchar(26) NOT NULL COMMENT "",\n  `c_address` varchar(41) NOT NULL COMMENT "",\n  `c_city` varchar(11) NOT NULL COMMENT "",\n  `c_nation` varchar(16) NOT NULL COMMENT "",\n  `c_region` varchar(13) NOT NULL COMMENT "",\n  `c_phone` varchar(16) NOT NULL COMMENT "",\n  `c_mktsegment` varchar(11) NOT NULL COMMENT ""\n) ENGINE=OLAP\nDUPLICATE KEY(`c_custkey`)\nCOMMENT "OLAP"\nDISTRIBUTED BY HASH(`c_custkey`);\n\nCREATE TABLE IF NOT EXISTS `dates` (\n  `d_datekey` int(11) NOT NULL COMMENT "",\n  `d_date` varchar(20) NOT NULL COMMENT "",\n  `d_dayofweek` varchar(10) NOT NULL COMMENT "",\n  `d_month` varchar(11) NOT NULL COMMENT "",\n  `d_year` int(11) NOT NULL COMMENT "",\n  `d_yearmonthnum` int(11) NOT NULL COMMENT "",\n  `d_yearmonth` varchar(9) NOT NULL COMMENT "",\n  `d_daynuminweek` int(11) NOT NULL COMMENT "",\n  `d_daynuminmonth` int(11) NOT NULL COMMENT "",\n  `d_daynuminyear` int(11) NOT NULL COMMENT "",\n  `d_monthnuminyear` int(11) NOT NULL COMMENT "",\n  `d_weeknuminyear` int(11) NOT NULL COMMENT "",\n  `d_sellingseason` varchar(14) NOT NULL COMMENT "",\n  `d_lastdayinweekfl` int(11) NOT NULL COMMENT "",\n  `d_lastdayinmonthfl` int(11) NOT NULL COMMENT "",\n  `d_holidayfl` int(11) NOT NULL COMMENT "",\n  `d_weekdayfl` int(11) NOT NULL COMMENT ""\n) ENGINE=OLAP\nDUPLICATE KEY(`d_datekey`)\nCOMMENT "OLAP"\nDISTRIBUTED BY HASH(`d_datekey`);\n\nCREATE TABLE IF NOT EXISTS `supplier` (\n  `s_suppkey` int(11) NOT NULL COMMENT "",\n  `s_name` varchar(26) NOT NULL COMMENT "",\n  `s_address` varchar(26) NOT NULL COMMENT "",\n  `s_city` varchar(11) NOT NULL COMMENT "",\n  `s_nation` varchar(16) NOT NULL COMMENT "",\n  `s_region` varchar(13) NOT NULL COMMENT "",\n  `s_phone` varchar(16) NOT NULL COMMENT ""\n) ENGINE=OLAP\nDUPLICATE KEY(`s_suppkey`)\nCOMMENT "OLAP"\nDISTRIBUTED BY HASH(`s_suppkey`);\n\nCREATE TABLE IF NOT EXISTS `part` (\n  `p_partkey` int(11) NOT NULL COMMENT "",\n  `p_name` varchar(23) NOT NULL COMMENT "",\n  `p_mfgr` varchar(7) NOT NULL COMMENT "",\n  `p_category` varchar(8) NOT NULL COMMENT "",\n  `p_brand` varchar(10) NOT NULL COMMENT "",\n  `p_color` varchar(12) NOT NULL COMMENT "",\n  `p_type` varchar(26) NOT NULL COMMENT "",\n  `p_size` int(11) NOT NULL COMMENT "",\n  `p_container` varchar(11) NOT NULL COMMENT ""\n) ENGINE=OLAP\nDUPLICATE KEY(`p_partkey`)\nCOMMENT "OLAP"\nDISTRIBUTED BY HASH(`p_partkey`);\n\ncreate table orders ( \n    dt date NOT NULL, \n    order_id bigint NOT NULL, \n    user_id int NOT NULL, \n    merchant_id int NOT NULL, \n    good_id int NOT NULL, \n    good_name string NOT NULL, \n    price int NOT NULL, \n    cnt int NOT NULL, \n    revenue int NOT NULL, \n    state tinyint NOT NULL \n) \nPRIMARY KEY (dt, order_id) \nPARTITION BY RANGE(`dt`) \n( PARTITION p20210820 VALUES [(\'2021-08-20\'), (\'2021-08-21\')), \nPARTITION p20210821 VALUES [(\'2021-08-21\'), (\'2021-08-22\')) ) \nDISTRIBUTED BY HASH(order_id)\nPROPERTIES (\n    "replication_num" = "3", \n    "enable_persistent_index" = "true"\n);\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b\u4e00\uff1a\u4ece\u6e90\u8868\u521b\u5efa\u975e\u5206\u533a\u7269\u5316\u89c6\u56fe"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"CREATE MATERIALIZED VIEW lo_mv1\nDISTRIBUTED BY HASH(`lo_orderkey`)\nREFRESH ASYNC\nAS\nselect\n    lo_orderkey, \n    lo_custkey, \n    sum(lo_quantity) as total_quantity, \n    sum(lo_revenue) as total_revenue, \n    count(lo_shipmode) as shipmode_count\nfrom lineorder \ngroup by lo_orderkey, lo_custkey \norder by lo_orderkey;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b\u4e8c\uff1a\u4ece\u6e90\u8868\u521b\u5efa\u5206\u533a\u7269\u5316\u89c6\u56fe"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"CREATE MATERIALIZED VIEW lo_mv2\nPARTITION BY `lo_orderdate`\nDISTRIBUTED BY HASH(`lo_orderkey`)\nREFRESH ASYNC START('2023-07-01 10:00:00') EVERY (interval 1 day)\nAS\nselect\n    lo_orderkey,\n    lo_orderdate,\n    lo_custkey, \n    sum(lo_quantity) as total_quantity, \n    sum(lo_revenue) as total_revenue, \n    count(lo_shipmode) as shipmode_count\nfrom lineorder \ngroup by lo_orderkey, lo_orderdate, lo_custkey\norder by lo_orderkey;\n\n# \u4f7f\u7528 date_trunc \u51fd\u6570\u5c06 `dt` \u5217\u622a\u65ad\u81f3\u4ee5\u6708\u4e3a\u5355\u4f4d\u8fdb\u884c\u5206\u533a\u3002\nCREATE MATERIALIZED VIEW order_mv1\nPARTITION BY date_trunc('month', `dt`)\nDISTRIBUTED BY HASH(`order_id`)\nREFRESH ASYNC START('2023-07-01 10:00:00') EVERY (interval 1 day)\nAS\nselect\n    dt,\n    order_id,\n    user_id,\n    sum(cnt) as total_cnt,\n    sum(revenue) as total_revenue, \n    count(state) as state_count\nfrom orders\ngroup by dt, order_id, user_id;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b\u4e09\uff1a\u521b\u5efa\u5f02\u6b65\u7269\u5316\u89c6\u56fe"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"CREATE MATERIALIZED VIEW flat_lineorder\nDISTRIBUTED BY HASH(`lo_orderkey`)\nREFRESH MANUAL\nAS\nSELECT\n    l.LO_ORDERKEY AS LO_ORDERKEY,\n    l.LO_LINENUMBER AS LO_LINENUMBER,\n    l.LO_CUSTKEY AS LO_CUSTKEY,\n    l.LO_PARTKEY AS LO_PARTKEY,\n    l.LO_SUPPKEY AS LO_SUPPKEY,\n    l.LO_ORDERDATE AS LO_ORDERDATE,\n    l.LO_ORDERPRIORITY AS LO_ORDERPRIORITY,\n    l.LO_SHIPPRIORITY AS LO_SHIPPRIORITY,\n    l.LO_QUANTITY AS LO_QUANTITY,\n    l.LO_EXTENDEDPRICE AS LO_EXTENDEDPRICE,\n    l.LO_ORDTOTALPRICE AS LO_ORDTOTALPRICE,\n    l.LO_DISCOUNT AS LO_DISCOUNT,\n    l.LO_REVENUE AS LO_REVENUE,\n    l.LO_SUPPLYCOST AS LO_SUPPLYCOST,\n    l.LO_TAX AS LO_TAX,\n    l.LO_COMMITDATE AS LO_COMMITDATE,\n    l.LO_SHIPMODE AS LO_SHIPMODE,\n    c.C_NAME AS C_NAME,\n    c.C_ADDRESS AS C_ADDRESS,\n    c.C_CITY AS C_CITY,\n    c.C_NATION AS C_NATION,\n    c.C_REGION AS C_REGION,\n    c.C_PHONE AS C_PHONE,\n    c.C_MKTSEGMENT AS C_MKTSEGMENT,\n    s.S_NAME AS S_NAME,\n    s.S_ADDRESS AS S_ADDRESS,\n    s.S_CITY AS S_CITY,\n    s.S_NATION AS S_NATION,\n    s.S_REGION AS S_REGION,\n    s.S_PHONE AS S_PHONE,\n    p.P_NAME AS P_NAME,\n    p.P_MFGR AS P_MFGR,\n    p.P_CATEGORY AS P_CATEGORY,\n    p.P_BRAND AS P_BRAND,\n    p.P_COLOR AS P_COLOR,\n    p.P_TYPE AS P_TYPE,\n    p.P_SIZE AS P_SIZE,\n    p.P_CONTAINER AS P_CONTAINER FROM lineorder AS l \nINNER JOIN customer AS c ON c.C_CUSTKEY = l.LO_CUSTKEY\nINNER JOIN supplier AS s ON s.S_SUPPKEY = l.LO_SUPPKEY\nINNER JOIN part AS p ON p.P_PARTKEY = l.LO_PARTKEY;\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u66f4\u591a\u64cd\u4f5c",children:"\u66f4\u591a\u64cd\u4f5c"}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u8981\u521b\u5efa\u903b\u8f91\u89c6\u56fe\uff0c\u8bf7\u53c2\u89c1 ",(0,l.jsx)(e.a,{href:"/doc/zh/docs/3.0/sql-reference/sql-statements/data-definition/CREATE_VIEW",children:"CREATE VIEW"}),"\u3002"]})]})}const x=function(n={}){const{wrapper:e}=Object.assign({},(0,r.ah)(),n.components);return e?(0,l.jsx)(e,Object.assign({},n,{children:(0,l.jsx)(a,n)})):a(n)}},11151:(n,e,s)=>{s.d(e,{Zo:()=>c,ah:()=>i});var l=s(67294);const r=l.createContext({});function i(n){const e=l.useContext(r);return l.useMemo((()=>"function"==typeof n?n(e):{...e,...n}),[e,n])}const d={};function c({components:n,children:e,disableParentContext:s}){let c;return c=s?"function"==typeof n?n({}):n||d:i(n),l.createElement(r.Provider,{value:c},e)}}}]);