"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[3850],{33507:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>t,frontMatter:()=>l,metadata:()=>i,toc:()=>o});var d=s(85893),c=s(11151);const l={displayed_sidebar:"Chinese31"},r="\u901a\u8fc7\u5bfc\u5165\u5b9e\u73b0\u6570\u636e\u53d8\u66f4",i={id:"loading/Load_to_Primary_Key_tables",title:"\u901a\u8fc7\u5bfc\u5165\u5b9e\u73b0\u6570\u636e\u53d8\u66f4",description:"StarRocks \u7684\u4e3b\u952e\u6a21\u578b\u652f\u6301\u901a\u8fc7 Stream Load\u3001Broker Load \u6216 Routine Load \u5bfc\u5165\u4f5c\u4e1a\uff0c\u5bf9 StarRocks \u8868\u8fdb\u884c\u6570\u636e\u53d8\u66f4\uff0c\u5305\u62ec\u63d2\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u6570\u636e\u3002\u4e0d\u652f\u6301\u901a\u8fc7 Spark Load \u5bfc\u5165\u4f5c\u4e1a\u6216 INSERT \u8bed\u53e5\u5bf9 StarRocks \u8868\u8fdb\u884c\u6570\u636e\u53d8\u66f4\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-3.1/loading/Load_to_Primary_Key_tables.md",sourceDirName:"loading",slug:"/loading/Load_to_Primary_Key_tables",permalink:"/doc/zh/docs/loading/Load_to_Primary_Key_tables",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/starrocks/tree/main/versioned_docs/version-3.1/loading/Load_to_Primary_Key_tables.md",tags:[],version:"3.1",frontMatter:{displayed_sidebar:"Chinese31"},sidebar:"Chinese31",previous:{title:"\u4ece Apache Flink\xae \u6301\u7eed\u5bfc\u5165",permalink:"/doc/zh/docs/loading/Flink-connector-starrocks"},next:{title:"\u5bfc\u5165\u8fc7\u7a0b\u4e2d\u5b9e\u73b0\u6570\u636e\u8f6c\u6362",permalink:"/doc/zh/docs/loading/Etl_in_loading"}},a={},o=[{value:"\u5185\u90e8\u5b9e\u73b0",id:"\u5185\u90e8\u5b9e\u73b0",level:2},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e",level:2},{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:2},{value:"Broker Load",id:"broker-load",level:3},{value:"Routine Load",id:"routine-load",level:3},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c",level:2},{value:"UPSERT",id:"upsert",level:3},{value:"\u6570\u636e\u6837\u4f8b",id:"\u6570\u636e\u6837\u4f8b",level:4},{value:"\u5bfc\u5165\u6570\u636e",id:"\u5bfc\u5165\u6570\u636e",level:4},{value:"\u67e5\u8be2\u6570\u636e",id:"\u67e5\u8be2\u6570\u636e",level:4},{value:"DELETE",id:"delete",level:3},{value:"\u6570\u636e\u6837\u4f8b",id:"\u6570\u636e\u6837\u4f8b-1",level:4},{value:"\u5bfc\u5165\u6570\u636e",id:"\u5bfc\u5165\u6570\u636e-1",level:4},{value:"\u67e5\u8be2\u6570\u636e",id:"\u67e5\u8be2\u6570\u636e-1",level:4},{value:"UPSERT \u548c DELETE",id:"upsert-\u548c-delete",level:3},{value:"\u6570\u636e\u6837\u4f8b",id:"\u6570\u636e\u6837\u4f8b-2",level:4},{value:"\u5bfc\u5165\u6570\u636e",id:"\u5bfc\u5165\u6570\u636e-2",level:4},{value:"\u67e5\u8be2\u6570\u636e",id:"\u67e5\u8be2\u6570\u636e-2",level:4},{value:"\u90e8\u5206\u66f4\u65b0",id:"\u90e8\u5206\u66f4\u65b0",level:2},{value:"\u6570\u636e\u6837\u4f8b",id:"\u6570\u636e\u6837\u4f8b-3",level:3},{value:"\u5bfc\u5165\u6570\u636e",id:"\u5bfc\u5165\u6570\u636e-3",level:3},{value:"\u67e5\u8be2\u6570\u636e",id:"\u67e5\u8be2\u6570\u636e-3",level:3},{value:"\u6761\u4ef6\u66f4\u65b0",id:"\u6761\u4ef6\u66f4\u65b0",level:2},{value:"\u6570\u636e\u6837\u4f8b",id:"\u6570\u636e\u6837\u4f8b-4",level:3},{value:"\u5bfc\u5165\u6570\u636e",id:"\u5bfc\u5165\u6570\u636e-4",level:3},{value:"\u67e5\u8be2\u6570\u636e",id:"\u67e5\u8be2\u6570\u636e-4",level:3}];function h(e){const n=Object.assign({h1:"h1",p:"p",a:"a",blockquote:"blockquote",strong:"strong",h2:"h2",code:"code",ul:"ul",li:"li",h3:"h3",h4:"h4",ol:"ol",pre:"pre"},(0,c.ah)(),e.components);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"\u901a\u8fc7\u5bfc\u5165\u5b9e\u73b0\u6570\u636e\u53d8\u66f4",children:"\u901a\u8fc7\u5bfc\u5165\u5b9e\u73b0\u6570\u636e\u53d8\u66f4"}),"\n",(0,d.jsxs)(n.p,{children:["StarRocks \u7684",(0,d.jsx)(n.a,{href:"/doc/zh/docs/table_design/table_types/primary_key_table",children:"\u4e3b\u952e\u6a21\u578b"}),"\u652f\u6301\u901a\u8fc7 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/sql-reference/sql-statements/data-manipulation/STREAM_LOAD",children:"Stream Load"}),"\u3001",(0,d.jsx)(n.a,{href:"/doc/zh/docs/sql-reference/sql-statements/data-manipulation/BROKER_LOAD",children:"Broker Load"})," \u6216 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/sql-reference/sql-statements/data-manipulation/CREATE_ROUTINE_LOAD",children:"Routine Load"})," \u5bfc\u5165\u4f5c\u4e1a\uff0c\u5bf9 StarRocks \u8868\u8fdb\u884c\u6570\u636e\u53d8\u66f4\uff0c\u5305\u62ec\u63d2\u5165\u3001\u66f4\u65b0\u548c\u5220\u9664\u6570\u636e\u3002\u4e0d\u652f\u6301\u901a\u8fc7 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/loading/SparkLoad",children:"Spark Load"})," \u5bfc\u5165\u4f5c\u4e1a\u6216 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/sql-reference/sql-statements/data-manipulation/SPARK_LOAD",children:"INSERT"})," \u8bed\u53e5\u5bf9 StarRocks \u8868\u8fdb\u884c\u6570\u636e\u53d8\u66f4\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"StarRocks \u8fd8\u652f\u6301\u90e8\u5206\u66f4\u65b0 (Partial Update) \u548c\u6761\u4ef6\u66f4\u65b0 (Conditional Update)\u3002"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u6ce8\u610f"})}),"\n",(0,d.jsxs)(n.p,{children:["\u5bfc\u5165\u64cd\u4f5c\u9700\u8981\u76ee\u6807\u8868\u7684 INSERT \u6743\u9650\u3002\u5982\u679c\u60a8\u7684\u7528\u6237\u8d26\u53f7\u6ca1\u6709 INSERT \u6743\u9650\uff0c\u8bf7\u53c2\u8003 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/sql-reference/sql-statements/account-management/GRANT",children:"GRANT"})," \u7ed9\u7528\u6237\u8d4b\u6743\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"\u672c\u6587\u4ee5 CSV \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6\u4e3a\u4f8b\u4ecb\u7ecd\u5982\u4f55\u901a\u8fc7\u5bfc\u5165\u5b9e\u73b0\u6570\u636e\u53d8\u66f4\u3002\u5177\u4f53\u652f\u6301\u7684\u6570\u636e\u6587\u4ef6\u7c7b\u578b\uff0c\u8ddf\u60a8\u9009\u62e9\u7684\u5bfc\u5165\u65b9\u5f0f\u6709\u5173\u3002"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsx)(n.p,{children:"\u5bf9\u4e8e CSV \u683c\u5f0f\u7684\u6570\u636e\uff0cStarRocks \u652f\u6301\u8bbe\u7f6e\u957f\u5ea6\u6700\u5927\u4e0d\u8d85\u8fc7 50 \u4e2a\u5b57\u8282\u7684 UTF-8 \u7f16\u7801\u5b57\u7b26\u4e32\u4f5c\u4e3a\u5217\u5206\u9694\u7b26\uff0c\u5305\u62ec\u5e38\u89c1\u7684\u9017\u53f7 (,)\u3001Tab \u548c Pipe (|)\u3002"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u5185\u90e8\u5b9e\u73b0",children:"\u5185\u90e8\u5b9e\u73b0"}),"\n",(0,d.jsx)(n.p,{children:"StarRocks \u7684\u4e3b\u952e\u6a21\u578b\u76ee\u524d\u652f\u6301 UPSERT \u548c DELETE \u64cd\u4f5c\uff0c\u4e0d\u652f\u6301\u533a\u5206 INSERT \u548c UPDATE \u64cd\u4f5c\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["\u5728\u521b\u5efa\u5bfc\u5165\u4f5c\u4e1a\u65f6\uff0cStarRocks \u652f\u6301\u5728\u5bfc\u5165\u4f5c\u4e1a\u7684\u521b\u5efa\u8bed\u53e5\u6216\u547d\u4ee4\u4e2d\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff0c\u7528\u4e8e\u6307\u5b9a\u64cd\u4f5c\u7c7b\u578b\u3002"]}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4e0d\u9700\u8981\u5728\u521b\u5efa StarRocks \u8868\u65f6\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5217\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["\u4e0d\u540c\u7684\u5bfc\u5165\u65b9\u5f0f\uff0c\u5b9a\u4e49 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u7684\u65b9\u6cd5\u4e5f\u4e0d\u76f8\u540c\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u5982\u679c\u4f7f\u7528 Stream Load \u5bfc\u5165\u65b9\u5f0f\uff0c\u9700\u8981\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"columns"})," \u53c2\u6570\u6765\u5b9a\u4e49 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u5982\u679c\u4f7f\u7528 Broker Load \u5bfc\u5165\u65b9\u5f0f\uff0c\u9700\u8981\u901a\u8fc7 SET \u5b50\u53e5\u6765\u5b9a\u4e49 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u5982\u679c\u4f7f\u7528 Routine Load \u5bfc\u5165\u65b9\u5f0f\uff0c\u9700\u8981\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"COLUMNS"})," \u53c2\u6570\u6765\u5b9a\u4e49 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["\u6839\u636e\u8981\u505a\u7684\u6570\u636e\u53d8\u66f4\u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u6dfb\u52a0\u6216\u8005\u4e0d\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u3002\u4e0d\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u7684\u8bdd\uff0c\u9ed8\u8ba4\u4e3a UPSERT \u64cd\u4f5c\u3002\u4e3b\u8981\u6d89\u53ca\u7684\u6570\u636e\u53d8\u66f4\u64cd\u4f5c\u573a\u666f\u5982\u4e0b\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u5f53\u6570\u636e\u6587\u4ef6\u53ea\u6d89\u53ca UPSERT \u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u4e0d\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u5f53\u6570\u636e\u6587\u4ef6\u53ea\u6d89\u53ca DELETE \u64cd\u4f5c\u65f6\uff0c\u5fc5\u987b\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff0c\u5e76\u4e14\u6307\u5b9a\u64cd\u4f5c\u7c7b\u578b\u4e3a DELETE\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u5f53\u6570\u636e\u6587\u4ef6\u4e2d\u540c\u65f6\u5305\u542b UPSERT \u548c DELETE \u64cd\u4f5c\u65f6\uff0c\u5fc5\u987b\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff0c\u5e76\u4e14\u786e\u4fdd\u6570\u636e\u6587\u4ef6\u4e2d\u5305\u542b\u4e00\u4e2a\u4ee3\u8868\u64cd\u4f5c\u7c7b\u578b\u7684\u5217\uff0c\u53d6\u503c\u4e3a ",(0,d.jsx)(n.code,{children:"0"})," \u6216 ",(0,d.jsx)(n.code,{children:"1"}),"\u3002\u5176\u4e2d\uff0c\u53d6\u503c\u4e3a ",(0,d.jsx)(n.code,{children:"0"})," \u65f6\u4ee3\u8868 UPSERT \u64cd\u4f5c\uff0c\u53d6\u503c\u4e3a ",(0,d.jsx)(n.code,{children:"1"})," \u65f6\u4ee3\u8868 DELETE \u64cd\u4f5c\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u4f7f\u7528\u8bf4\u660e",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u5fc5\u987b\u786e\u4fdd\u5f85\u5bfc\u5165\u7684\u6570\u636e\u6587\u4ef6\u4e2d\u6bcf\u4e00\u884c\u7684\u5217\u6570\u90fd\u76f8\u540c\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u6240\u66f4\u65b0\u7684\u5217\u5fc5\u987b\u5305\u542b\u4e3b\u952e\u5217\u3002"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u524d\u63d0\u6761\u4ef6",children:"\u524d\u63d0\u6761\u4ef6"}),"\n",(0,d.jsx)(n.h3,{id:"broker-load",children:"Broker Load"}),"\n",(0,d.jsxs)(n.p,{children:["\u53c2\u89c1",(0,d.jsx)(n.a,{href:"/doc/zh/docs/loading/hdfs_load",children:"\u4ece HDFS \u5bfc\u5165"}),"\u6216",(0,d.jsx)(n.a,{href:"/doc/zh/docs/loading/cloud_storage_load",children:"\u4ece\u4e91\u5b58\u50a8\u5bfc\u5165"}),"\u4e2d\u7684\u201c\u80cc\u666f\u4fe1\u606f\u201d\u5c0f\u8282\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"routine-load",children:"Routine Load"}),"\n",(0,d.jsxs)(n.p,{children:["\u5982\u679c\u4f7f\u7528 Routine Load \u5bfc\u5165\u6570\u636e\uff0c\u5fc5\u987b\u786e\u4fdd\u60a8\u7684 Apache Kafka\xae \u96c6\u7fa4\u5df2\u521b\u5efa Topic\u3002\u672c\u6587\u5047\u8bbe\u60a8\u5df2\u90e8\u7f72\u56db\u4e2a Topic\uff0c\u5206\u522b\u4e3a ",(0,d.jsx)(n.code,{children:"topic1"}),"\u3001",(0,d.jsx)(n.code,{children:"topic2"}),"\u3001",(0,d.jsx)(n.code,{children:"topic3"})," \u548c ",(0,d.jsx)(n.code,{children:"topic4"}),"\u3002"]}),"\n",(0,d.jsx)(n.h2,{id:"\u57fa\u672c\u64cd\u4f5c",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,d.jsxs)(n.p,{children:["\u4e0b\u9762\u901a\u8fc7\u51e0\u4e2a\u793a\u4f8b\u6765\u5c55\u793a\u5177\u4f53\u7684\u5bfc\u5165\u64cd\u4f5c\u3002\u6709\u5173\u4f7f\u7528 Stream Load\u3001Broker Load \u548c Routine Load \u5bfc\u5165\u6570\u636e\u7684\u8be6\u7ec6\u8bed\u6cd5\u548c\u53c2\u6570\u4ecb\u7ecd\uff0c\u8bf7\u53c2\u89c1 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/sql-reference/sql-statements/data-manipulation/STREAM_LOAD",children:"STREAM LOAD"}),"\u3001",(0,d.jsx)(n.a,{href:"/doc/zh/docs/sql-reference/sql-statements/data-manipulation/BROKER_LOAD",children:"BROKER LOAD"})," \u548c ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/sql-reference/sql-statements/data-manipulation/CREATE_ROUTINE_LOAD",children:"CREATE ROUTINE LOAD"}),"\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"upsert",children:"UPSERT"}),"\n",(0,d.jsxs)(n.p,{children:["\u5f53\u6570\u636e\u6587\u4ef6\u53ea\u6d89\u53ca UPSERT \u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u4e0d\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u53ef\u4ee5\u6307\u5b9a ",(0,d.jsx)(n.code,{children:"__op"})," \u4e3a UPSERT \u64cd\u4f5c\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u4e0d\u505a\u4efb\u4f55\u6307\u5b9a\uff0cStarRocks \u9ed8\u8ba4\u5bfc\u5165\u4e3a UPSERT \u64cd\u4f5c\u3002"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u6570\u636e\u6837\u4f8b",children:"\u6570\u636e\u6837\u4f8b"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907\u6570\u636e\u6587\u4ef6\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a CSV \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6 ",(0,d.jsx)(n.code,{children:"example1.csv"}),"\u3002\u6587\u4ef6\u5305\u542b\u4e09\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7528\u6237\u59d3\u540d\u548c\u7528\u6237\u5f97\u5206\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Plain",children:"101,Lily,100\n102,Rose,100\n"})}),"\n",(0,d.jsxs)(n.p,{children:["b. \u628a ",(0,d.jsx)(n.code,{children:"example1.csv"})," \u6587\u4ef6\u4e2d\u7684\u6570\u636e\u4e0a\u4f20\u5230 Kafka \u96c6\u7fa4\u7684 ",(0,d.jsx)(n.code,{children:"topic1"})," \u4e2d\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907 StarRocks \u8868\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u6570\u636e\u5e93 ",(0,d.jsx)(n.code,{children:"test_db"})," \u4e2d\u521b\u5efa\u4e00\u5f20\u540d\u4e3a ",(0,d.jsx)(n.code,{children:"table1"})," \u7684\u4e3b\u952e\u6a21\u578b\u8868\u3002\u8868\u5305\u542b ",(0,d.jsx)(n.code,{children:"id"}),"\u3001",(0,d.jsx)(n.code,{children:"name"})," \u548c ",(0,d.jsx)(n.code,{children:"score"})," \u4e09\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7528\u6237\u540d\u79f0\u548c\u7528\u6237\u5f97\u5206\uff0c\u4e3b\u952e\u4e3a ",(0,d.jsx)(n.code,{children:"id"})," \u5217\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE TABLE `table1`\n(\n    `id` int(11) NOT NULL COMMENT "\u7528\u6237 ID",\n    `name` varchar(65533) NOT NULL COMMENT "\u7528\u6237\u59d3\u540d",\n    `score` int(11) NOT NULL COMMENT "\u7528\u6237\u5f97\u5206"\n)\nENGINE=OLAP\nPRIMARY KEY(`id`)\nDISTRIBUTED BY HASH(`id`);\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u81ea 2.5.7 \u7248\u672c\u8d77\uff0cStarRocks \u652f\u6301\u5728\u5efa\u8868\u548c\u65b0\u589e\u5206\u533a\u65f6\u81ea\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf (BUCKETS)\uff0c\u60a8\u65e0\u9700\u624b\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/table_design/Data_distribution#%E7%A1%AE%E5%AE%9A%E5%88%86%E6%A1%B6%E6%95%B0%E9%87%8F",children:"\u786e\u5b9a\u5206\u6876\u6570\u91cf"}),"\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["b. \u5411 ",(0,d.jsx)(n.code,{children:"table1"})," \u8868\u4e2d\u63d2\u5165\u4e00\u6761\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"INSERT INTO table1 VALUES\n    (101, 'Lily',80);\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u5bfc\u5165\u6570\u636e",children:"\u5bfc\u5165\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u901a\u8fc7\u5bfc\u5165\uff0c\u628a ",(0,d.jsx)(n.code,{children:"example1.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"})," \u7684\u6570\u636e\u66f4\u65b0\u5230 ",(0,d.jsx)(n.code,{children:"table1"})," \u8868\u4e2d\uff0c\u5e76\u4e14\u628a ",(0,d.jsx)(n.code,{children:"example1.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"102"})," \u7684\u6570\u636e\u63d2\u5165\u5230 ",(0,d.jsx)(n.code,{children:"table1"})," \u8868\u4e2d\u3002"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Stream Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u4e0d\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Bash",children:'curl --location-trusted -u <username>:<password> \\\n    -H "Expect:100-continue" \\\n    -H "label:label1" \\\n    -H "column_separator:," \\\n    -T example1.csv -XPUT \\\n    http://<fe_host>:<fe_http_port>/api/test_db/table1/_stream_load\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Bash",children:'curl --location-trusted -u <username>:<password> \\\n    -H "Expect:100-continue" \\\n    -H "label:label2" \\\n    -H "column_separator:," \\\n    -H "columns:__op =\'upsert\'" \\\n    -T example1.csv -XPUT \\\n    http://<fe_host>:<fe_http_port>/api/test_db/table1/_stream_load\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Broker Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u4e0d\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'LOAD LABEL test_db.label1\n(\n    data infile("hdfs://<hdfs_host>:<hdfs_port>/example1.csv")\n    into table table1\n    columns terminated by ","\n    format as "csv"\n)\nwith broker\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'LOAD LABEL test_db.label2\n(\n    data infile("hdfs://<hdfs_host>:<hdfs_port>/example1.csv")\n    into table table1\n    columns terminated by ","\n    format as "csv"\n    set (__op = \'upsert\')\n)\nwith broker\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Routine Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u4e0d\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE ROUTINE LOAD test_db.table1 ON table1\nCOLUMNS TERMINATED BY ",",\nCOLUMNS (id, name, score)\nPROPERTIES\n(\n    "desired_concurrent_number" = "3",\n    "max_batch_interval" = "20",\n    "max_batch_rows"= "250000",\n    "max_error_number" = "1000"\n)\nFROM KAFKA\n(\n    "kafka_broker_list" ="<kafka_broker_host>:<kafka_broker_port>",\n    "kafka_topic" = "test1",\n    "property.kafka_default_offsets" ="OFFSET_BEGINNING"\n);\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE ROUTINE LOAD test_db.table1 ON table1\nCOLUMNS TERMINATED BY ",",\nCOLUMNS (id, name, score, __op =\'upsert\')\nPROPERTIES\n(\n    "desired_concurrent_number" = "3",\n    "max_batch_interval" = "20",\n    "max_batch_rows"= "250000",\n    "max_error_number" = "1000"\n)\nFROM KAFKA\n(\n    "kafka_broker_list" ="<kafka_broker_host>:<kafka_broker_port>",\n    "kafka_topic" = "test1",\n    "property.kafka_default_offsets" ="OFFSET_BEGINNING"\n);\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u67e5\u8be2\u6570\u636e",children:"\u67e5\u8be2\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u5bfc\u5165\u5b8c\u6210\u540e\uff0c\u67e5\u8be2 ",(0,d.jsx)(n.code,{children:"table1"})," \u8868\u7684\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM table1;\n+------+------+-------+\n| id   | name | score |\n+------+------+-------+\n|  101 | Lily |   100 |\n|  102 | Rose |   100 |\n+------+------+-------+\n2 rows in set (0.02 sec)\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4ece\u67e5\u8be2\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\uff0c",(0,d.jsx)(n.code,{children:"example1.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"})," \u7684\u6570\u636e\u5df2\u7ecf\u66f4\u65b0\u5230 ",(0,d.jsx)(n.code,{children:"table1"})," \u8868\u4e2d\uff0c\u5e76\u4e14 ",(0,d.jsx)(n.code,{children:"example1.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"102"})," \u7684\u6570\u636e\u5df2\u7ecf\u63d2\u5165\u5230 ",(0,d.jsx)(n.code,{children:"table1"})," \u8868\u4e2d\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"delete",children:"DELETE"}),"\n",(0,d.jsxs)(n.p,{children:["\u5f53\u6570\u636e\u6587\u4ef6\u53ea\u6d89\u53ca DELETE \u64cd\u4f5c\u65f6\uff0c\u5fc5\u987b\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff0c\u5e76\u4e14\u6307\u5b9a\u64cd\u4f5c\u7c7b\u578b\u4e3a DELETE\u3002"]}),"\n",(0,d.jsx)(n.h4,{id:"\u6570\u636e\u6837\u4f8b-1",children:"\u6570\u636e\u6837\u4f8b"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907\u6570\u636e\u6587\u4ef6\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a CSV \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6 ",(0,d.jsx)(n.code,{children:"example2.csv"}),"\u3002\u6587\u4ef6\u5305\u542b\u4e09\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7528\u6237\u59d3\u540d\u548c\u7528\u6237\u5f97\u5206\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Plain",children:"101,Jack,100\n"})}),"\n",(0,d.jsxs)(n.p,{children:["b. \u628a ",(0,d.jsx)(n.code,{children:"example2.csv"})," \u6587\u4ef6\u4e2d\u7684\u6570\u636e\u4e0a\u4f20\u5230 Kafka \u96c6\u7fa4\u7684 ",(0,d.jsx)(n.code,{children:"topic2"})," \u4e2d\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907 StarRocks \u8868\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u6570\u636e\u5e93 ",(0,d.jsx)(n.code,{children:"test_db"})," \u4e2d\u521b\u5efa\u4e00\u5f20\u540d\u4e3a ",(0,d.jsx)(n.code,{children:"table2"})," \u7684\u4e3b\u952e\u6a21\u578b\u8868\u3002\u8868\u5305\u542b ",(0,d.jsx)(n.code,{children:"id"}),"\u3001",(0,d.jsx)(n.code,{children:"name"})," \u548c ",(0,d.jsx)(n.code,{children:"score"})," \u4e09\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7528\u6237\u540d\u79f0\u548c\u7528\u6237\u5f97\u5206\uff0c\u4e3b\u952e\u4e3a ",(0,d.jsx)(n.code,{children:"id"})," \u5217\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE TABLE `table2`\n(\n    `id` int(11) NOT NULL COMMENT "\u7528\u6237 ID",\n    `name` varchar(65533) NOT NULL COMMENT "\u7528\u6237\u59d3\u540d",\n    `score` int(11) NOT NULL COMMENT "\u7528\u6237\u5f97\u5206"\n)\nENGINE=OLAP\nPRIMARY KEY(`id`)\nDISTRIBUTED BY HASH(`id`);\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u81ea 2.5.7 \u7248\u672c\u8d77\uff0cStarRocks \u652f\u6301\u5728\u5efa\u8868\u548c\u65b0\u589e\u5206\u533a\u65f6\u81ea\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf (BUCKETS)\uff0c\u60a8\u65e0\u9700\u624b\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/table_design/Data_distribution#%E7%A1%AE%E5%AE%9A%E5%88%86%E6%A1%B6%E6%95%B0%E9%87%8F",children:"\u786e\u5b9a\u5206\u6876\u6570\u91cf"}),"\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["b. \u5411 ",(0,d.jsx)(n.code,{children:"table2"})," \u8868\u4e2d\u63d2\u5165\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"INSERT INTO table2 VALUES\n    (101, 'Jack', 100),\n    (102, 'Bob', 90);\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u5bfc\u5165\u6570\u636e-1",children:"\u5bfc\u5165\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u901a\u8fc7\u5bfc\u5165\uff0c\u628a ",(0,d.jsx)(n.code,{children:"example2.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"})," \u7684\u6570\u636e\u4ece ",(0,d.jsx)(n.code,{children:"table2"})," \u8868\u4e2d\u5220\u9664\u3002"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Stream Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Bash",children:'curl --location-trusted -u <username>:<password> \\\n    -H "Expect:100-continue" \\\n    -H "label:label3" \\\n    -H "column_separator:," \\\n    -H "columns:__op=\'delete\'" \\\n    -T example2.csv -XPUT \\\n    http://<fe_host>:<fe_http_port>/api/test_db/table2/_stream_load\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Broker Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'LOAD LABEL test_db.label3\n(\n    data infile("hdfs://<hdfs_host>:<hdfs_port>/example2.csv")\n    into table table2\n    columns terminated by ","\n    format as "csv"\n    set (__op = \'delete\')\n)\nwith broker  \n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Routine Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE ROUTINE LOAD test_db.table2 ON table2\nCOLUMNS(id, name, score, __op = \'delete\')\nPROPERTIES\n(\n    "desired_concurrent_number" = "3",\n    "max_batch_interval" = "20",\n    "max_batch_rows"= "250000",\n    "max_error_number" = "1000"\n)\nFROM KAFKA\n(\n    "kafka_broker_list" ="<kafka_broker_host>:<kafka_broker_port>",\n    "kafka_topic" = "test2",\n    "property.kafka_default_offsets" ="OFFSET_BEGINNING"\n);\n'})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u67e5\u8be2\u6570\u636e-1",children:"\u67e5\u8be2\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u5bfc\u5165\u5b8c\u6210\u540e\uff0c\u67e5\u8be2 ",(0,d.jsx)(n.code,{children:"table2"})," \u8868\u7684\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM table2;\n+------+------+-------+\n| id   | name | score |\n+------+------+-------+\n|  102 | Bob  |    90 |\n+------+------+-------+\n1 row in set (0.00 sec)\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4ece\u67e5\u8be2\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\uff0c",(0,d.jsx)(n.code,{children:"example2.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"})," \u7684\u6570\u636e\u5df2\u7ecf\u4ece ",(0,d.jsx)(n.code,{children:"table2"})," \u8868\u4e2d\u5220\u9664\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"upsert-\u548c-delete",children:"UPSERT \u548c DELETE"}),"\n",(0,d.jsxs)(n.p,{children:["\u5f53\u6570\u636e\u6587\u4ef6\u4e2d\u540c\u65f6\u5305\u542b UPSERT \u548c DELETE \u64cd\u4f5c\u65f6\uff0c\u5fc5\u987b\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\uff0c\u5e76\u4e14\u786e\u4fdd\u6570\u636e\u6587\u4ef6\u4e2d\u5305\u542b\u4e00\u4e2a\u4ee3\u8868\u64cd\u4f5c\u7c7b\u578b\u7684\u5217\uff0c\u53d6\u503c\u4e3a ",(0,d.jsx)(n.code,{children:"0"})," \u6216 ",(0,d.jsx)(n.code,{children:"1"}),"\u3002\u5176\u4e2d\uff0c\u53d6\u503c\u4e3a ",(0,d.jsx)(n.code,{children:"0"})," \u65f6\u4ee3\u8868 UPSERT \u64cd\u4f5c\uff0c\u53d6\u503c\u4e3a ",(0,d.jsx)(n.code,{children:"1"})," \u65f6\u4ee3\u8868 DELETE \u64cd\u4f5c\u3002"]}),"\n",(0,d.jsx)(n.h4,{id:"\u6570\u636e\u6837\u4f8b-2",children:"\u6570\u636e\u6837\u4f8b"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907\u6570\u636e\u6587\u4ef6\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a CSV \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6 ",(0,d.jsx)(n.code,{children:"example3.csv"}),"\u3002\u6587\u4ef6\u5305\u542b\u56db\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7528\u6237\u59d3\u540d\u3001\u7528\u6237\u5f97\u5206\u548c\u64cd\u4f5c\u7c7b\u578b\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Plain",children:"101,Tom,100,1\n102,Sam,70,0\n103,Stan,80,0\n"})}),"\n",(0,d.jsxs)(n.p,{children:["b. \u628a ",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d\u7684\u6570\u636e\u4e0a\u4f20\u5230 Kafka \u96c6\u7fa4\u7684 ",(0,d.jsx)(n.code,{children:"topic3"})," \u4e2d\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907 StarRocks \u8868\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u6570\u636e\u5e93 ",(0,d.jsx)(n.code,{children:"test_db"})," \u4e2d\u521b\u5efa\u4e00\u5f20\u540d\u4e3a ",(0,d.jsx)(n.code,{children:"table3"})," \u7684\u4e3b\u952e\u6a21\u578b\u8868\u3002\u8868\u5305\u542b ",(0,d.jsx)(n.code,{children:"id"}),"\u3001",(0,d.jsx)(n.code,{children:"name"})," \u548c ",(0,d.jsx)(n.code,{children:"score"})," \u4e09\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7528\u6237\u540d\u79f0\u548c\u7528\u6237\u5f97\u5206\uff0c\u4e3b\u952e\u4e3a ",(0,d.jsx)(n.code,{children:"id"})," \u5217\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE TABLE `table3`\n(\n    `id` int(11) NOT NULL COMMENT "\u7528\u6237 ID",\n    `name` varchar(65533) NOT NULL COMMENT "\u7528\u6237\u59d3\u540d",\n    `score` int(11) NOT NULL COMMENT "\u7528\u6237\u5f97\u5206"\n)\nENGINE=OLAP\nPRIMARY KEY(`id`)\nDISTRIBUTED BY HASH(`id`);\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u81ea 2.5.7 \u7248\u672c\u8d77\uff0cStarRocks \u652f\u6301\u5728\u5efa\u8868\u548c\u65b0\u589e\u5206\u533a\u65f6\u81ea\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf (BUCKETS)\uff0c\u60a8\u65e0\u9700\u624b\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/table_design/Data_distribution#%E7%A1%AE%E5%AE%9A%E5%88%86%E6%A1%B6%E6%95%B0%E9%87%8F",children:"\u786e\u5b9a\u5206\u6876\u6570\u91cf"}),"\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["b. \u5411 ",(0,d.jsx)(n.code,{children:"table3"})," \u8868\u4e2d\u63d2\u5165\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"INSERT INTO table3 VALUES\n    (101, 'Tom', 100),\n    (102, 'Sam', 90);\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u5bfc\u5165\u6570\u636e-2",children:"\u5bfc\u5165\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u901a\u8fc7\u5bfc\u5165\uff0c\u628a ",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"})," \u7684\u6570\u636e\u4ece ",(0,d.jsx)(n.code,{children:"table3"})," \u8868\u4e2d\u5220\u9664\uff0c\u628a ",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"102"})," \u7684\u6570\u636e\u66f4\u65b0\u5230 ",(0,d.jsx)(n.code,{children:"table3"})," \u8868\uff0c\u5e76\u4e14\u628a ",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"103"})," \u7684\u6570\u636e\u63d2\u5165\u5230 ",(0,d.jsx)(n.code,{children:"table3"})," \u8868\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Stream Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Bash",children:'curl --location-trusted -u <username>:<password> \\\n    -H "Expect:100-continue" \\\n    -H "label:label4" \\\n    -H "column_separator:," \\\n    -H "columns: id, name, score, temp, __op = temp" \\\n    -T example3.csv -XPUT \\\n    http://<fe_host>:<fe_http_port>/api/test_db/table3/_stream_load\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u901a\u8fc7 ",(0,d.jsx)(n.code,{children:"columns"})," \u53c2\u6570\u628a ",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d\u4ee3\u8868\u7ec4\u522b\u4ee3\u7801\u7684\u7b2c\u56db\u5217\u4e34\u65f6\u547d\u540d\u4e3a ",(0,d.jsx)(n.code,{children:"temp"}),"\uff0c\u7136\u540e\u5b9a\u4e49 ",(0,d.jsx)(n.code,{children:"__op"})," \u5b57\u6bb5\u7b49\u4e8e\u4e34\u65f6\u547d\u540d\u7684 ",(0,d.jsx)(n.code,{children:"temp"})," \u5217\u3002\u8fd9\u6837\uff0cStarRocks \u53ef\u4ee5\u6839\u636e ",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d\u7b2c\u56db\u5217\u7684\u53d6\u503c\u662f ",(0,d.jsx)(n.code,{children:"0"})," \u8fd8\u662f ",(0,d.jsx)(n.code,{children:"1"})," \u6765\u786e\u5b9a\u6267\u884c UPSERT \u8fd8\u662f DELETE \u64cd\u4f5c\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Broker Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Bash",children:'LOAD LABEL test_db.label4\n(\n    data infile("hdfs://<hdfs_host>:<hdfs_port>/example1.csv")\n    into table table1\n    columns terminated by ","\n    format as "csv"\n    (id, name, score, temp)\n    set (__op=temp)\n)\nwith broker\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Routine Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE ROUTINE LOAD test_db.table3 ON table3\nCOLUMNS(id, name, score, temp, __op = temp)\nPROPERTIES\n(\n    "desired_concurrent_number" = "3",\n    "max_batch_interval" = "20",\n    "max_batch_rows"= "250000",\n    "max_error_number" = "1000"\n)\nFROM KAFKA\n(\n    "kafka_broker_list" = "<kafka_broker_host>:<kafka_broker_port>",\n    "kafka_topic" = "test3",\n    "property.kafka_default_offsets" = "OFFSET_BEGINNING"\n);\n'})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u67e5\u8be2\u6570\u636e-2",children:"\u67e5\u8be2\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u5bfc\u5165\u5b8c\u6210\u540e\uff0c\u67e5\u8be2 ",(0,d.jsx)(n.code,{children:"table3"})," \u8868\u7684\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM table3;\n+------+------+-------+\n| id   | name | score |\n+------+------+-------+\n|  102 | Sam  |    70 |\n|  103 | Stan |    80 |\n+------+------+-------+\n2 rows in set (0.01 sec)\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4ece\u67e5\u8be2\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\uff0c",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"})," \u7684\u6570\u636e\u5df2\u7ecf\u4ece ",(0,d.jsx)(n.code,{children:"table3"})," \u8868\u4e2d\u5220\u9664\uff0c",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"102"})," \u7684\u6570\u636e\u5df2\u7ecf\u66f4\u65b0\u5230 ",(0,d.jsx)(n.code,{children:"table3"})," \u8868\u4e2d\uff0c\u5e76\u4e14 ",(0,d.jsx)(n.code,{children:"example3.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"103"})," \u7684\u6570\u636e\u5df2\u7ecf\u63d2\u5165\u5230 ",(0,d.jsx)(n.code,{children:"table3"})," \u8868\u4e2d\u3002"]}),"\n",(0,d.jsx)(n.h2,{id:"\u90e8\u5206\u66f4\u65b0",children:"\u90e8\u5206\u66f4\u65b0"}),"\n",(0,d.jsx)(n.p,{children:"\u81ea StarRocks v2.2 \u8d77\uff0c\u4e3b\u952e\u6a21\u578b\u8868\u652f\u6301\u90e8\u5206\u66f4\u65b0 (Partial Update)\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u53ea\u66f4\u65b0\u90e8\u5206\u6307\u5b9a\u7684\u5217\u3002\u8fd9\u91cc\u4ee5 CSV \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6\u4e3a\u4f8b\u8fdb\u884c\u8bf4\u660e\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u6570\u636e\u6837\u4f8b-3",children:"\u6570\u636e\u6837\u4f8b"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907\u6570\u636e\u6587\u4ef6\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a CSV \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6 ",(0,d.jsx)(n.code,{children:"example4.csv"}),"\u3002\u6587\u4ef6\u5305\u542b\u4e24\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID \u548c\u7528\u6237\u59d3\u540d\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Plain",children:"101,Lily\n102,Rose\n103,Alice\n"})}),"\n",(0,d.jsxs)(n.p,{children:["b. \u628a ",(0,d.jsx)(n.code,{children:"example4.csv"})," \u6587\u4ef6\u4e2d\u7684\u6570\u636e\u4e0a\u4f20\u5230 Kafka \u96c6\u7fa4\u7684 ",(0,d.jsx)(n.code,{children:"topic4"})," \u4e2d\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907 StarRocks \u8868\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u6570\u636e\u5e93 ",(0,d.jsx)(n.code,{children:"test_db"})," \u4e2d\u521b\u5efa\u4e00\u5f20\u540d\u4e3a ",(0,d.jsx)(n.code,{children:"table4"})," \u7684\u4e3b\u952e\u6a21\u578b\u8868\u3002\u8868\u5305\u542b ",(0,d.jsx)(n.code,{children:"id"}),"\u3001",(0,d.jsx)(n.code,{children:"name"})," \u548c ",(0,d.jsx)(n.code,{children:"score"})," \u4e09\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7528\u6237\u540d\u79f0\u548c\u7528\u6237\u5f97\u5206\uff0c\u4e3b\u952e\u4e3a ",(0,d.jsx)(n.code,{children:"id"})," \u5217\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE TABLE `table4`\n(\n    `id` int(11) NOT NULL COMMENT "\u7528\u6237 ID",\n    `name` varchar(65533) NOT NULL COMMENT "\u7528\u6237\u59d3\u540d",\n    `score` int(11) NOT NULL COMMENT "\u7528\u6237\u5f97\u5206"\n)\nENGINE=OLAP\nPRIMARY KEY(`id`)\nDISTRIBUTED BY HASH(`id`);\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u81ea 2.5.7 \u7248\u672c\u8d77\uff0cStarRocks \u652f\u6301\u5728\u5efa\u8868\u548c\u65b0\u589e\u5206\u533a\u65f6\u81ea\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf (BUCKETS)\uff0c\u60a8\u65e0\u9700\u624b\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/table_design/Data_distribution#%E7%A1%AE%E5%AE%9A%E5%88%86%E6%A1%B6%E6%95%B0%E9%87%8F",children:"\u786e\u5b9a\u5206\u6876\u6570\u91cf"}),"\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["b. \u5411 ",(0,d.jsx)(n.code,{children:"table4"})," \u8868\u4e2d\u63d2\u5165\u4e00\u6761\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"INSERT INTO table4 VALUES\n    (101, 'Tom',80);\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u5bfc\u5165\u6570\u636e-3",children:"\u5bfc\u5165\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u901a\u8fc7\u5bfc\u5165\uff0c\u628a ",(0,d.jsx)(n.code,{children:"example4.csv"})," \u91cc\u7684\u4e24\u5217\u6570\u636e\u66f4\u65b0\u5230 ",(0,d.jsx)(n.code,{children:"table4"})," \u8868\u7684 ",(0,d.jsx)(n.code,{children:"id"})," \u548c ",(0,d.jsx)(n.code,{children:"name"})," \u4e24\u5217\u3002"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Stream Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Bash",children:'curl --location-trusted -u <username>:<password> \\\n    -H "Expect:100-continue" \\\n    -H "label:label7" -H "column_separator:," \\\n    -H "partial_update:true" \\\n    -H "columns:id,name" \\\n    -T example4.csv -XPUT \\\n    http://<fe_host>:<fe_http_port>/api/test_db/table4/_stream_load\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4f7f\u7528 Stream Load \u5bfc\u5165\u6570\u636e\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e ",(0,d.jsx)(n.code,{children:"partial_update"})," \u4e3a ",(0,d.jsx)(n.code,{children:"true"}),"\uff0c\u4ee5\u5f00\u542f\u90e8\u5206\u66f4\u65b0\u7279\u6027\u3002\u53e6\u5916\uff0c\u8fd8\u9700\u8981\u5728 ",(0,d.jsx)(n.code,{children:"columns"})," \u4e2d\u58f0\u660e\u5f85\u66f4\u65b0\u6570\u636e\u7684\u5217\u7684\u540d\u79f0\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Broker Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'LOAD LABEL test_db.table4\n(\n    data infile("hdfs://<hdfs_host>:<hdfs_port>/example4.csv")\n    into table table4\n    format as "csv"\n    (id, name)\n)\nwith broker\nproperties\n(\n    "partial_update" = "true"\n);\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4f7f\u7528 Broker Load \u5bfc\u5165\u6570\u636e\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e ",(0,d.jsx)(n.code,{children:"partial_update"})," \u4e3a ",(0,d.jsx)(n.code,{children:"true"}),"\uff0c\u4ee5\u5f00\u542f\u90e8\u5206\u66f4\u65b0\u7279\u6027\u3002\u53e6\u5916\uff0c\u8fd8\u9700\u8981\u5728 ",(0,d.jsx)(n.code,{children:"column_list"})," \u4e2d\u58f0\u660e\u5f85\u66f4\u65b0\u6570\u636e\u7684\u5217\u7684\u540d\u79f0\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Routine Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE ROUTINE LOAD test_db.table4 on table4\nCOLUMNS (id, name),\nCOLUMNS TERMINATED BY \',\'\nPROPERTIES\n(\n    "partial_update" = "true"\n)\nFROM KAFKA\n(\n    "kafka_broker_list" ="<kafka_broker_host>:<kafka_broker_port>",\n    "kafka_topic" = "test4",\n    "property.kafka_default_offsets" ="OFFSET_BEGINNING"\n);\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4f7f\u7528 Routine Load \u5bfc\u5165\u6570\u636e\u65f6\uff0c\u9700\u8981\u8bbe\u7f6e ",(0,d.jsx)(n.code,{children:"partial_update"})," \u4e3a ",(0,d.jsx)(n.code,{children:"true"}),"\uff0c\u4ee5\u5f00\u542f\u90e8\u5206\u66f4\u65b0\u7279\u6027\u3002\u53e6\u5916\uff0c\u8fd8\u9700\u8981\u5728 ",(0,d.jsx)(n.code,{children:"COLUMNS"})," \u4e2d\u58f0\u660e\u5f85\u66f4\u65b0\u6570\u636e\u7684\u5217\u7684\u540d\u79f0\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u67e5\u8be2\u6570\u636e-3",children:"\u67e5\u8be2\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u5bfc\u5165\u5b8c\u6210\u540e\uff0c\u67e5\u8be2 ",(0,d.jsx)(n.code,{children:"table4"})," \u8868\u7684\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM table4;\n+------+-------+-------+\n| id   | name  | score |\n+------+-------+-------+\n|  102 | Rose  |     0 |\n|  101 | Lily  |    80 |\n|  103 | Alice |     0 |\n+------+-------+-------+\n3 rows in set (0.01 sec)\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4ece\u67e5\u8be2\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\uff0c",(0,d.jsx)(n.code,{children:"example4.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"})," \u7684\u6570\u636e\u5df2\u7ecf\u66f4\u65b0\u5230 ",(0,d.jsx)(n.code,{children:"table4"})," \u8868\u4e2d\uff0c\u5e76\u4e14 ",(0,d.jsx)(n.code,{children:"example4.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"102"})," \u548c ",(0,d.jsx)(n.code,{children:"103"})," \u7684\u6570\u636e\u5df2\u7ecf\u63d2\u5165\u5230 ",(0,d.jsx)(n.code,{children:"table4"})," \u8868\u4e2d\u3002"]}),"\n",(0,d.jsx)(n.h2,{id:"\u6761\u4ef6\u66f4\u65b0",children:"\u6761\u4ef6\u66f4\u65b0"}),"\n",(0,d.jsx)(n.p,{children:"\u81ea StarRocks v2.5 \u8d77\uff0c\u4e3b\u952e\u6a21\u578b\u8868\u652f\u6301\u6761\u4ef6\u66f4\u65b0 (Conditional Update)\u3002\u60a8\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e00\u975e\u4e3b\u952e\u5217\u4e3a\u66f4\u65b0\u6761\u4ef6\uff0c\u8fd9\u6837\u53ea\u6709\u5f53\u5bfc\u5165\u7684\u6570\u636e\u4e2d\u8be5\u5217\u7684\u503c\u5927\u4e8e\u7b49\u4e8e\u5f53\u524d\u503c\u7684\u65f6\u5019\uff0c\u66f4\u65b0\u624d\u4f1a\u751f\u6548\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u6761\u4ef6\u66f4\u65b0\u529f\u80fd\u7528\u4e8e\u89e3\u51b3\u6570\u636e\u4e71\u5e8f\u7684\u95ee\u9898\u3002\u5982\u679c\u4e0a\u6e38\u6570\u636e\u53d1\u751f\u4e71\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528\u6761\u4ef6\u66f4\u65b0\u529f\u80fd\u4fdd\u8bc1\u65b0\u7684\u6570\u636e\u4e0d\u88ab\u8001\u7684\u6570\u636e\u8986\u76d6\u3002"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u4e0d\u652f\u6301\u7ed9\u540c\u4e00\u6279\u5bfc\u5165\u7684\u6570\u636e\u6307\u5b9a\u4e0d\u540c\u7684\u6761\u4ef6\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u4e0d\u652f\u6301\u5220\u9664\u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u4e0d\u652f\u6301\u540c\u90e8\u5206\u66f4\u65b0\u4e00\u5e76\u4f7f\u7528\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u5f53\u524d\u4ec5 Stream Load \u548c Routine Load \u652f\u6301\u6761\u4ef6\u66f4\u65b0\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u6570\u636e\u6837\u4f8b-4",children:"\u6570\u636e\u6837\u4f8b"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907\u6570\u636e\u6587\u4ef6\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a CSV \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6 ",(0,d.jsx)(n.code,{children:"example5.csv"}),"\u3002\u6587\u4ef6\u5305\u542b\u4e09\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7248\u672c\u53f7\u548c\u7528\u6237\u5f97\u5206\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Plain",children:"101,1,100\n102,3,100\n"})}),"\n",(0,d.jsxs)(n.p,{children:["b. \u628a ",(0,d.jsx)(n.code,{children:"example5.csv"})," \u6587\u4ef6\u4e2d\u7684\u6570\u636e\u4e0a\u4f20\u5230 Kafka \u96c6\u7fa4\u7684 ",(0,d.jsx)(n.code,{children:"topic5"})," \u4e2d\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907 StarRocks \u8868\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["a. \u5728\u6570\u636e\u5e93 ",(0,d.jsx)(n.code,{children:"test_db"})," \u4e2d\u521b\u5efa\u4e00\u5f20\u540d\u4e3a ",(0,d.jsx)(n.code,{children:"table5"})," \u7684\u4e3b\u952e\u6a21\u578b\u8868\u3002\u8868\u5305\u542b ",(0,d.jsx)(n.code,{children:"id"}),"\u3001",(0,d.jsx)(n.code,{children:"version"})," \u548c ",(0,d.jsx)(n.code,{children:"score"})," \u4e09\u5217\uff0c\u5206\u522b\u4ee3\u8868\u7528\u6237 ID\u3001\u7248\u672c\u53f7\u548c\u7528\u6237\u5f97\u5206\uff0c\u4e3b\u952e\u4e3a ",(0,d.jsx)(n.code,{children:"id"})," \u5217\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE TABLE `table5`\n(\n    `id` int(11) NOT NULL COMMENT "\u7528\u6237 ID", \n    `version` int NOT NULL COMMENT "\u7248\u672c\u53f7",\n    `score` int(11) NOT NULL COMMENT "\u7528\u6237\u5f97\u5206"\n)\nENGINE=OLAP\nPRIMARY KEY(`id`) DISTRIBUTED BY HASH(`id`);\n'})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,d.jsxs)(n.p,{children:["\u81ea 2.5.7 \u7248\u672c\u8d77\uff0cStarRocks \u652f\u6301\u5728\u5efa\u8868\u548c\u65b0\u589e\u5206\u533a\u65f6\u81ea\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf (BUCKETS)\uff0c\u60a8\u65e0\u9700\u624b\u52a8\u8bbe\u7f6e\u5206\u6876\u6570\u91cf\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 ",(0,d.jsx)(n.a,{href:"/doc/zh/docs/table_design/Data_distribution#%E7%A1%AE%E5%AE%9A%E5%88%86%E6%A1%B6%E6%95%B0%E9%87%8F",children:"\u786e\u5b9a\u5206\u6876\u6570\u91cf"}),"\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["b. \u5411 ",(0,d.jsx)(n.code,{children:"table5"})," \u8868\u4e2d\u63d2\u5165\u4e24\u6761\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"INSERT INTO table5 VALUES\n    (101, 2, 80),\n    (102, 2, 90);\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u5bfc\u5165\u6570\u636e-4",children:"\u5bfc\u5165\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u901a\u8fc7\u5bfc\u5165\uff0c\u628a ",(0,d.jsx)(n.code,{children:"example5.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"}),"\u3001",(0,d.jsx)(n.code,{children:"102"})," \u7684\u6570\u636e\u66f4\u65b0\u5230 ",(0,d.jsx)(n.code,{children:"table5"})," \u8868\u4e2d\uff0c\u6307\u5b9a ",(0,d.jsx)(n.code,{children:"merge_condition"})," \u4e3a ",(0,d.jsx)(n.code,{children:"version"})," \u5217\uff0c\u8868\u793a\u53ea\u6709\u5f53\u5bfc\u5165\u7684\u6570\u636e\u4e2d ",(0,d.jsx)(n.code,{children:"verion"})," \u5927\u4e8e\u7b49\u4e8e ",(0,d.jsx)(n.code,{children:"table5"})," \u4e2d\u5bf9\u5e94\u884c\u7684",(0,d.jsx)(n.code,{children:"version"})," \u503c\u65f6\uff0c\u66f4\u65b0\u624d\u4f1a\u751f\u6548\u3002"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Stream Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-Bash",children:'curl --location-trusted -u <username>:<password> \\\n    -H "Expect:100-continue" \\\n    -H "label:label10" \\\n    -H "column_separator:," \\\n    -H "merge_condition:version" \\\n    -T example5.csv -XPUT \\\n    http://<fe_host>:<fe_http_port>/api/test_db/table5/_stream_load\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7 Routine Load \u5bfc\u5165\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:'CREATE ROUTINE LOAD test_db.table5 on table5\nCOLUMNS (id, version, score),\nCOLUMNS TERMINATED BY \',\'\nPROPERTIES\n(\n    "merge_condition" = "version"\n)\nFROM KAFKA\n(\n    "kafka_broker_list" ="<kafka_broker_host>:<kafka_broker_port>",\n    "kafka_topic" = "topic5",\n    "property.kafka_default_offsets" ="OFFSET_BEGINNING"\n);\n'})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u67e5\u8be2\u6570\u636e-4",children:"\u67e5\u8be2\u6570\u636e"}),"\n",(0,d.jsxs)(n.p,{children:["\u5bfc\u5165\u5b8c\u6210\u540e\uff0c\u67e5\u8be2 ",(0,d.jsx)(n.code,{children:"table5"})," \u8868\u7684\u6570\u636e\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM table5;\n+------+------+-------+\n| id   | version | score |\n+------+------+-------+\n|  101 |       2 |   80 |\n|  102 |       3 |  100 |\n+------+------+-------+\n2 rows in set (0.02 sec)\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4ece\u67e5\u8be2\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\uff0c",(0,d.jsx)(n.code,{children:"example5.csv"})," \u6587\u4ef6\u4e2d ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"101"})," \u7684\u6570\u636e\u5e76\u6ca1\u6709\u88ab\u66f4\u65b0\uff0c\u800c ",(0,d.jsx)(n.code,{children:"id"})," \u4e3a ",(0,d.jsx)(n.code,{children:"102"})," \u5df2\u7ecf\u88ab\u66f4\u65b0\u3002"]})]})}const t=function(e={}){const{wrapper:n}=Object.assign({},(0,c.ah)(),e.components);return n?(0,d.jsx)(n,Object.assign({},e,{children:(0,d.jsx)(h,e)})):h(e)}},11151:(e,n,s)=>{s.d(n,{Zo:()=>i,ah:()=>l});var d=s(67294);const c=d.createContext({});function l(e){const n=d.useContext(c);return d.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const r={};function i({components:e,children:n,disableParentContext:s}){let i;return i=s?"function"==typeof e?e({}):e||r:l(e),d.createElement(c.Provider,{value:i},n)}}}]);