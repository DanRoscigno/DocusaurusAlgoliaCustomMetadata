"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[75109],{22690:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>o,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var t=r(85893),i=r(11151);const s={displayed_sidebar:"Chinese"},l="\u4ece Apache Flink\xae \u6301\u7eed\u5bfc\u5165",c={id:"loading/Flink-connector-starrocks",title:"\u4ece Apache Flink\xae \u6301\u7eed\u5bfc\u5165",description:"\u529f\u80fd\u7b80\u4ecb",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.3/loading/Flink-connector-starrocks.md",sourceDirName:"loading",slug:"/loading/Flink-connector-starrocks",permalink:"/zh/docs/2.3/loading/Flink-connector-starrocks",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/docs.zh-cn/edit/main/loading/Flink-connector-starrocks.md",tags:[],version:"2.3",frontMatter:{displayed_sidebar:"Chinese"},sidebar:"Chinese",previous:{title:"\u5bfc\u5165\u8fc7\u7a0b\u4e2d\u5b9e\u73b0\u6570\u636e\u8f6c\u6362",permalink:"/zh/docs/2.3/loading/Etl_in_loading"},next:{title:"\u4ece MySQL \u5b9e\u65f6\u540c\u6b65",permalink:"/zh/docs/2.3/loading/Flink_cdc_load"}},d={},a=[{value:"\u529f\u80fd\u7b80\u4ecb",id:"\u529f\u80fd\u7b80\u4ecb",level:2},{value:"\u652f\u6301\u7684\u6570\u636e\u6e90",id:"\u652f\u6301\u7684\u6570\u636e\u6e90",level:2},{value:"\u64cd\u4f5c\u6b65\u9aa4",id:"\u64cd\u4f5c\u6b65\u9aa4",level:2},{value:"\u6b65\u9aa4\u4e00\uff1a\u6dfb\u52a0 pom \u4f9d\u8d56",id:"\u6b65\u9aa4\u4e00\u6dfb\u52a0-pom-\u4f9d\u8d56",level:3},{value:"\u6b65\u9aa4\u4e8c\uff1a\u8c03\u7528 flink-connector-starrocks",id:"\u6b65\u9aa4\u4e8c\u8c03\u7528-flink-connector-starrocks",level:3},{value:"\u53c2\u6570\u8bf4\u660e",id:"\u53c2\u6570\u8bf4\u660e",level:2},{value:"Flink \u4e0e StarRocks \u7684\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb",id:"flink-\u4e0e-starrocks-\u7684\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb",level:2},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2},{value:"\u5bfc\u5165\u6570\u636e\u53ef\u89c2\u6d4b\u6307\u6807",id:"\u5bfc\u5165\u6570\u636e\u53ef\u89c2\u6d4b\u6307\u6807",level:2}];function h(n){const e=Object.assign({h1:"h1",h2:"h2",p:"p",a:"a",ul:"ul",li:"li",h3:"h3",code:"code",pre:"pre",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",strong:"strong",div:"div",blockquote:"blockquote"},(0,i.ah)(),n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"\u4ece-apache-flink-\u6301\u7eed\u5bfc\u5165",children:"\u4ece Apache Flink\xae \u6301\u7eed\u5bfc\u5165"}),"\n",(0,t.jsx)(e.h2,{id:"\u529f\u80fd\u7b80\u4ecb",children:"\u529f\u80fd\u7b80\u4ecb"}),"\n",(0,t.jsxs)(e.p,{children:["StarRocks \u63d0\u4f9b flink-connector-starrocks\uff0c\u5bfc\u5165\u6570\u636e\u81f3 StarRocks\uff0c\u76f8\u6bd4\u4e8e Flink \u5b98\u65b9\u63d0\u4f9b\u7684 flink-connector-jdbc\uff0c\u5bfc\u5165\u6027\u80fd\u66f4\u4f73\u3002\r\nflink-connector-starrocks \u7684\u5185\u90e8\u5b9e\u73b0\u662f\u901a\u8fc7\u7f13\u5b58\u5e76\u6279\u91cf\u7531 ",(0,t.jsx)(e.a,{href:"/zh/docs/2.3/loading/StreamLoad",children:"Stream Load"})," \u5bfc\u5165\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"\u652f\u6301\u7684\u6570\u636e\u6e90",children:"\u652f\u6301\u7684\u6570\u636e\u6e90"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"CSV"}),"\n",(0,t.jsx)(e.li,{children:"JSON"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u64cd\u4f5c\u6b65\u9aa4",children:"\u64cd\u4f5c\u6b65\u9aa4"}),"\n",(0,t.jsx)(e.h3,{id:"\u6b65\u9aa4\u4e00\u6dfb\u52a0-pom-\u4f9d\u8d56",children:"\u6b65\u9aa4\u4e00\uff1a\u6dfb\u52a0 pom \u4f9d\u8d56"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:"https://github.com/StarRocks/flink-connector-starrocks",children:"\u6e90\u7801\u5730\u5740"})}),"\n",(0,t.jsxs)(e.p,{children:["\u5c06\u4ee5\u4e0b\u5185\u5bb9\u52a0\u5165",(0,t.jsx)(e.code,{children:"pom.xml"}),":"]}),"\n",(0,t.jsxs)(e.p,{children:["\u70b9\u51fb ",(0,t.jsx)(e.a,{href:"https://search.maven.org/search?q=g:com.starrocks",children:"\u7248\u672c\u4fe1\u606f"})," \u67e5\u770b\u9875\u9762Latest Version\u4fe1\u606f\uff0c\u66ff\u6362\u4e0b\u9762x.x.x\u5185\u5bb9"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-Plain",metastring:"text",children:"<dependency>\r\n    <groupId>com.starrocks</groupId>\r\n    <artifactId>flink-connector-starrocks</artifactId>\r\n    \x3c!-- for flink-1.14 --\x3e\r\n    <version>x.x.x_flink-1.14_2.11</version>\r\n    <version>x.x.x_flink-1.14_2.12</version>\r\n    \x3c!-- for flink-1.13 --\x3e\r\n    <version>x.x.x_flink-1.13_2.11</version>\r\n    <version>x.x.x_flink-1.13_2.12</version>\r\n    \x3c!-- for flink-1.12 --\x3e\r\n    <version>x.x.x_flink-1.12_2.11</version>\r\n    <version>x.x.x_flink-1.12_2.12</version>\r\n    \x3c!-- for flink-1.11 --\x3e\r\n    <version>x.x.x_flink-1.11_2.11</version>\r\n    <version>x.x.x_flink-1.11_2.12</version>\r\n</dependency>\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u6b65\u9aa4\u4e8c\u8c03\u7528-flink-connector-starrocks",children:"\u6b65\u9aa4\u4e8c\uff1a\u8c03\u7528 flink-connector-starrocks"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u5982\u60a8\u4f7f\u7528 Flink DataStream API\uff0c\u5219\u9700\u8981\u53c2\u8003\u5982\u4e0b\u547d\u4ee4\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-scala",children:'// -------- \u539f\u59cb\u6570\u636e\u4e3a json \u683c\u5f0f --------\r\nfromElements(new String[]{\r\n    "{\\"score\\": \\"99\\", \\"name\\": \\"stephen\\"}",\r\n    "{\\"score\\": \\"100\\", \\"name\\": \\"lebron\\"}"\r\n}).addSink(\r\n    StarRocksSink.sink(\r\n        // the sink options\r\n        StarRocksSinkOptions.builder()\r\n            .withProperty("jdbc-url", "jdbc:mysql://fe1_ip:query_port,fe2_ip:query_port,fe3_ip:query_port,xxxxx")\r\n            .withProperty("load-url", "fe1_ip:http_port;fe2_ip:http_port;fe3_ip:http_port")\r\n            .withProperty("username", "xxx")\r\n            .withProperty("password", "xxx")\r\n            .withProperty("table-name", "xxx")\r\n            .withProperty("database-name", "xxx")\r\n            .withProperty("sink.properties.format", "json")\r\n            .withProperty("sink.properties.strip_outer_array", "true")\r\n            // \u8bbe\u7f6e\u5e76\u884c\u5ea6\uff0c\u591a\u5e76\u884c\u5ea6\u60c5\u51b5\u4e0b\u9700\u8981\u8003\u8651\u5982\u4f55\u4fdd\u8bc1\u6570\u636e\u6709\u5e8f\u6027\r\n            .withProperty("sink.parallelism", "1")\r\n            .build()\r\n    )\r\n);\r\n\r\n// -------- \u539f\u59cb\u6570\u636e\u4e3a CSV \u683c\u5f0f --------\r\nclass RowData {\r\n    public int score;\r\n    public String name;\r\n    public RowData(int score, String name) {\r\n        ......\r\n    }\r\n}\r\nfromElements(\r\n    new RowData[]{\r\n        new RowData(99, "stephen"),\r\n        new RowData(100, "lebron")\r\n    }\r\n).addSink(\r\n    StarRocksSink.sink(\r\n        // the table structure\r\n        TableSchema.builder()\r\n            .field("score", DataTypes.INT())\r\n            .field("name", DataTypes.VARCHAR(20))\r\n            .build(),\r\n        // the sink options\r\n        StarRocksSinkOptions.builder()\r\n            .withProperty("jdbc-url", "jdbc:mysql://fe1_ip:query_port,fe2_ip:query_port,fe3_ip:query_port?xxxxx")\r\n            .withProperty("load-url", "fe1_ip:http_port;fe2_ip:http_port;fe3_ip:http_port")\r\n            .withProperty("username", "xxx")\r\n            .withProperty("password", "xxx")\r\n            .withProperty("table-name", "xxx")\r\n            .withProperty("database-name", "xxx")\r\n            .withProperty("sink.properties.column_separator", "\\\\x01")\r\n            .withProperty("sink.properties.row_delimiter", "\\\\x02")\r\n            .build(),\r\n        // set the slots with streamRowData\r\n        (slots, streamRowData) -> {\r\n            slots[0] = streamRowData.score;\r\n            slots[1] = streamRowData.name;\r\n        }\r\n    )\r\n);\n'})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u5982\u60a8\u4f7f\u7528 Flink Table API\uff0c\u5219\u9700\u8981\u53c2\u8003\u5982\u4e0b\u547d\u4ee4\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-scala",children:"// -------- \u539f\u59cb\u6570\u636e\u4e3a CSV \u683c\u5f0f --------\r\n// create a table with `structure` and `properties`\r\n// Needed: Add `com.starrocks.connector.flink.table.StarRocksDynamicTableSinkFactory`\r\n//         to: `src/main/resources/META-INF/services/org.apache.flink.table.factories.Factory`\r\ntEnv.executeSql(\r\n    \"CREATE TABLE USER_RESULT(\" +\r\n        \"name VARCHAR,\" +\r\n        \"score BIGINT\" +\r\n    \") WITH ( \" +\r\n        \"'connector' = 'starrocks',\" +\r\n        \"'jdbc-url'='jdbc:mysql://fe1_ip:query_port,fe2_ip:query_port,fe3_ip:query_port,xxxxx',\" +\r\n        \"'load-url'='fe1_ip:http_port;fe2_ip:http_port;fe3_ip:http_port',\" +\r\n        \"'database-name' = 'xxx',\" +\r\n        \"'table-name' = 'xxx',\" +\r\n        \"'username' = 'xxx',\" +\r\n        \"'password' = 'xxx',\" +\r\n        \"'sink.buffer-flush.max-rows' = '1000000',\" +\r\n        \"'sink.buffer-flush.max-bytes' = '300000000',\" +\r\n        \"'sink.buffer-flush.interval-ms' = '5000',\" +\r\n        \"'sink.properties.column_separator' = '\\\\x01',\" +\r\n        \"'sink.properties.row_delimiter' = '\\\\x02',\" +\r\n        \"'sink.max-retries' = '3'\" +\r\n        \"'sink.properties.*' = 'xxx'\" + // stream load properties like `'sink.properties.columns' = 'k1, v1'`\r\n    \")\"\r\n);\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u53c2\u6570\u8bf4\u660e",children:"\u53c2\u6570\u8bf4\u660e"}),"\n",(0,t.jsx)(e.p,{children:"\u5176\u4e2dSink\u9009\u9879\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{align:"center",children:"Option"}),(0,t.jsx)(e.th,{align:"center",children:"Required"}),(0,t.jsx)(e.th,{align:"center",children:"Default"}),(0,t.jsx)(e.th,{align:"center",children:"Type"}),(0,t.jsx)(e.th,{align:"center",children:"Description"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"connector"}),(0,t.jsx)(e.td,{align:"center",children:"YES"}),(0,t.jsx)(e.td,{align:"center",children:"NONE"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsx)(e.td,{align:"center",children:(0,t.jsx)(e.strong,{children:"starrocks"})})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"jdbc-url"}),(0,t.jsx)(e.td,{align:"center",children:"YES"}),(0,t.jsx)(e.td,{align:"center",children:"NONE"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsx)(e.td,{align:"center",children:"this will be used to execute queries in starrocks."})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"load-url"}),(0,t.jsx)(e.td,{align:"center",children:"YES"}),(0,t.jsx)(e.td,{align:"center",children:"NONE"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:[(0,t.jsxs)(e.strong,{children:["fe_ip",(0,t.jsx)(e.div,{}),";fe_ip",(0,t.jsx)(e.div,{})]})," separated with '",(0,t.jsx)(e.strong,{children:";"}),"', which would be used to do the batch sinking."]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"database-name"}),(0,t.jsx)(e.td,{align:"center",children:"YES"}),(0,t.jsx)(e.td,{align:"center",children:"NONE"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsx)(e.td,{align:"center",children:"starrocks database name"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"table-name"}),(0,t.jsx)(e.td,{align:"center",children:"YES"}),(0,t.jsx)(e.td,{align:"center",children:"NONE"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsx)(e.td,{align:"center",children:"starrocks table name"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"username"}),(0,t.jsx)(e.td,{align:"center",children:"YES"}),(0,t.jsx)(e.td,{align:"center",children:"NONE"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsx)(e.td,{align:"center",children:"starrocks connecting username"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"password"}),(0,t.jsx)(e.td,{align:"center",children:"YES"}),(0,t.jsx)(e.td,{align:"center",children:"NONE"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsx)(e.td,{align:"center",children:"starrocks connecting password"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.semantic"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:(0,t.jsx)(e.strong,{children:"at-least-once"})}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:[(0,t.jsx)(e.strong,{children:"at-least-once"})," or ",(0,t.jsx)(e.strong,{children:"exactly-once"}),"(",(0,t.jsx)(e.strong,{children:"flush at checkpoint only"})," and options like ",(0,t.jsx)(e.strong,{children:"sink.buffer-flush."}),"* won't work either)."]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.buffer-flush.max-bytes"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:"94371840(90M)"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:["the max batching size of the serialized data, range: ",(0,t.jsx)(e.strong,{children:"[64MB, 10GB]"}),"."]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.buffer-flush.max-rows"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:"500000"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:["the max batching rows, range: ",(0,t.jsx)(e.strong,{children:"[64,000, 5000,000]"}),"."]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.buffer-flush.interval-ms"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:"300000"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:["the flushing time interval, range: ",(0,t.jsx)(e.strong,{children:"[1000ms, 3600000ms]"}),"."]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.max-retries"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:"3"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:["max retry times of the stream load request, range: ",(0,t.jsx)(e.strong,{children:"[0, 10]"}),"."]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.connect.timeout-ms"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:"1000"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:["Timeout in millisecond for connecting to the ",(0,t.jsx)(e.code,{children:"load-url"}),", range: ",(0,t.jsx)(e.strong,{children:"[100, 60000]"}),"."]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.properties.format"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:"CSV"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:["The file format of data loaded into starrocks. Valid values: ",(0,t.jsx)(e.strong,{children:"CSV"})," and ",(0,t.jsx)(e.strong,{children:"JSON"}),". Default value: ",(0,t.jsx)(e.strong,{children:"CSV"}),"."]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.properties.*"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:"NONE"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsxs)(e.td,{align:"center",children:["the stream load properties like ",(0,t.jsx)(e.strong,{children:"'sink.properties.columns' = 'k1, k2, k3'"}),",details in ",(0,t.jsx)(e.a,{href:"/zh/docs/2.3/sql-reference/sql-statements/data-manipulation/STREAM_LOAD",children:"STREAM LOAD"}),"\u3002"]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"sink.properties.ignore_json_size"}),(0,t.jsx)(e.td,{align:"center",children:"NO"}),(0,t.jsx)(e.td,{align:"center",children:"false"}),(0,t.jsx)(e.td,{align:"center",children:"String"}),(0,t.jsx)(e.td,{align:"center",children:"ignore the batching size (100MB) of json data"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"flink-\u4e0e-starrocks-\u7684\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb",children:"Flink \u4e0e StarRocks \u7684\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{align:"center",children:"Flink type"}),(0,t.jsx)(e.th,{align:"center",children:"StarRocks type"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"BOOLEAN"}),(0,t.jsx)(e.td,{align:"center",children:"BOOLEAN"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"TINYINT"}),(0,t.jsx)(e.td,{align:"center",children:"TINYINT"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"SMALLINT"}),(0,t.jsx)(e.td,{align:"center",children:"SMALLINT"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"INTEGER"}),(0,t.jsx)(e.td,{align:"center",children:"INTEGER"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"BIGINT"}),(0,t.jsx)(e.td,{align:"center",children:"BIGINT"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"FLOAT"}),(0,t.jsx)(e.td,{align:"center",children:"FLOAT"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"DOUBLE"}),(0,t.jsx)(e.td,{align:"center",children:"DOUBLE"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"DECIMAL"}),(0,t.jsx)(e.td,{align:"center",children:"DECIMAL"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"BINARY"}),(0,t.jsx)(e.td,{align:"center",children:"INT"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"CHAR"}),(0,t.jsx)(e.td,{align:"center",children:"STRING"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"VARCHAR"}),(0,t.jsx)(e.td,{align:"center",children:"STRING"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"STRING"}),(0,t.jsx)(e.td,{align:"center",children:"STRING"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"DATE"}),(0,t.jsx)(e.td,{align:"center",children:"DATE"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"TIMESTAMP_WITHOUT_TIME_ZONE(N)"}),(0,t.jsx)(e.td,{align:"center",children:"DATETIME"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"TIMESTAMP_WITH_LOCAL_TIME_ZONE(N)"}),(0,t.jsx)(e.td,{align:"center",children:"DATETIME"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"ARRAY<T>"}),(0,t.jsx)(e.td,{align:"center",children:"ARRAY<T>"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"MAP<KT,VT>"}),(0,t.jsx)(e.td,{align:"center",children:"JSON STRING"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"ROW<arg T...>"}),(0,t.jsx)(e.td,{align:"center",children:"JSON STRING"})]})]})]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a\u5f53\u524d\u4e0d\u652f\u6301 Flink \u7684 BYTES\u3001VARBINARY\u3001TIME\u3001INTERVAL\u3001MULTISET\u3001RAW\uff0c\u5177\u4f53\u53ef\u53c2\u8003 ",(0,t.jsx)(e.a,{href:"https://nightlies.apache.org/flink/flink-docs-master/docs/dev/table/types/",children:"Flink \u6570\u636e\u7c7b\u578b"}),"\u3002"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u652f\u6301exactly-once\u7684\u6570\u636esink\u4fdd\u8bc1\uff0c\u9700\u8981\u5916\u90e8\u7cfb\u7edf\u7684 two phase commit \u673a\u5236\u3002\u7531\u4e8e StarRocks \u65e0\u6b64\u673a\u5236\uff0c\u6211\u4eec\u9700\u8981\u4f9d\u8d56flink\u7684checkpoint-interval\u5728\u6bcf\u6b21checkpoint\u65f6\u4fdd\u5b58\u6279\u6570\u636e\u4ee5\u53ca\u5176label\uff0c\u5728checkpoint\u5b8c\u6210\u540e\u7684\u7b2c\u4e00\u6b21invoke\u4e2d\u963b\u585eflush\u6240\u6709\u7f13\u5b58\u5728state\u5f53\u4e2d\u7684\u6570\u636e\uff0c\u4ee5\u6b64\u8fbe\u5230\u7cbe\u51c6\u4e00\u6b21\u3002\u4f46\u5982\u679cStarRocks\u6302\u6389\u4e86\uff0c\u4f1a\u5bfc\u81f4\u7528\u6237\u7684flink sink stream \u7b97\u5b50\u957f\u65f6\u95f4\u963b\u585e\uff0c\u5e76\u5f15\u8d77flink\u7684\u76d1\u63a7\u62a5\u8b66\u6216\u5f3a\u5236kill\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u9ed8\u8ba4\u4f7f\u7528csv\u683c\u5f0f\u8fdb\u884c\u5bfc\u5165\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a",(0,t.jsx)(e.code,{children:"'sink.properties.row_delimiter' = '\\\\x02'"}),"\uff08\u6b64\u53c2\u6570\u81ea StarRocks-1.15.0 \u5f00\u59cb\u652f\u6301\uff09\u4e0e",(0,t.jsx)(e.code,{children:"'sink.properties.column_separator' = '\\\\x01'"}),"\u6765\u81ea\u5b9a\u4e49\u884c\u5206\u9694\u7b26\u4e0e\u5217\u5206\u9694\u7b26\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u5982\u679c\u9047\u5230\u5bfc\u5165\u505c\u6b62\u7684 \u60c5\u51b5\uff0c\u8bf7\u5c1d\u8bd5\u589e\u52a0flink\u4efb\u52a1\u7684\u5185\u5b58\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u5982\u679c\u4ee3\u7801\u8fd0\u884c\u6b63\u5e38\u4e14\u80fd\u63a5\u6536\u5230\u6570\u636e\uff0c\u4f46\u662f\u5199\u5165\u4e0d\u6210\u529f\u65f6\u8bf7\u786e\u8ba4\u5f53\u524d\u673a\u5668\u80fd\u8bbf\u95eeBE\u7684http_port\u7aef\u53e3\uff0c\u8fd9\u91cc\u6307\u80fdping\u901a\u96c6\u7fa4show backends\u663e\u793a\u7684ip",(0,t.jsx)(e.div,{}),"\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5982\u679c\u4e00\u53f0\u673a\u5668\u6709\u5916\u7f51\u548c\u5185\u7f51ip\uff0c\u4e14FE/BE\u7684http_port\u5747\u53ef\u901a\u8fc7\u5916\u7f51ip",(0,t.jsx)(e.div,{}),"\u8bbf\u95ee\uff0c\u96c6\u7fa4\u91cc\u7ed1\u5b9a\u7684ip\u4e3a\u5185\u7f51ip\uff0c\u4efb\u52a1\u91ccloadurl\u5199\u7684FE\u5916\u7f51ip",(0,t.jsx)(e.div,{}),"\uff0cFE\u4f1a\u5c06\u5199\u5165\u4efb\u52a1\u8f6c\u53d1\u7ed9BE\u5185\u7f51ip",(0,t.jsx)(e.div,{}),"\uff0c\u8fd9\u65f6\u5982\u679cClient\u673a\u5668ping\u4e0d\u901aBE\u7684\u5185\u7f51ip\u5c31\u4f1a\u5199\u5165\u5931\u8d25\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u5bfc\u5165\u6570\u636e\u53ef\u89c2\u6d4b\u6307\u6807",children:"\u5bfc\u5165\u6570\u636e\u53ef\u89c2\u6d4b\u6307\u6807"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{align:"center",children:"Name"}),(0,t.jsx)(e.th,{align:"center",children:"Type"}),(0,t.jsx)(e.th,{align:"center",children:"Description"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"totalFlushBytes"}),(0,t.jsx)(e.td,{align:"center",children:"counter"}),(0,t.jsx)(e.td,{align:"center",children:"successfully flushed bytes."})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"totalFlushRows"}),(0,t.jsx)(e.td,{align:"center",children:"counter"}),(0,t.jsx)(e.td,{align:"center",children:"successfully flushed rows."})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"totalFlushSucceededTimes"}),(0,t.jsx)(e.td,{align:"center",children:"counter"}),(0,t.jsx)(e.td,{align:"center",children:"number of times that the data-batch been successfully flushed."})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{align:"center",children:"totalFlushFailedTimes"}),(0,t.jsx)(e.td,{align:"center",children:"counter"}),(0,t.jsx)(e.td,{align:"center",children:"number of times that the flushing been failed."})]})]})]}),"\n",(0,t.jsx)(e.p,{children:"flink-connector-starrocks \u5bfc\u5165\u5e95\u5c42\u8c03\u7528\u7684 Stream Load\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5728 flink \u65e5\u5fd7\u4e2d\u67e5\u770b\u5bfc\u5165\u72b6\u6001"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u65e5\u5fd7\u4e2d\u5982\u679c\u6709 ",(0,t.jsx)(e.code,{children:"http://$fe:${http_port}/api/$db/$tbl/_stream_load"})," \u751f\u6210\uff0c\u8868\u793a\u6210\u529f\u89e6\u53d1\u4e86 Stream Load \u4efb\u52a1\uff0c\u4efb\u52a1\u7ed3\u679c\u4e5f\u4f1a\u6253\u5370\u5728 flink \u65e5\u5fd7\u4e2d\uff0c\u8fd4\u56de\u503c\u53ef\u53c2\u8003 ",(0,t.jsx)(e.a,{href:"/zh/docs/2.3/loading/StreamLoad#%E5%88%9B%E5%BB%BA%E5%AF%BC%E5%85%A5%E4%BD%9C%E4%B8%9A",children:"Stream Load \u4efb\u52a1\u72b6\u6001"}),"\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u65e5\u5fd7\u4e2d\u5982\u679c\u6ca1\u6709\u4e0a\u8ff0\u4fe1\u606f\uff0c\u8bf7\u5728\u8bba\u575b\u63d0\u95ee ",(0,t.jsx)(e.a,{href:"https://forum.starrocks.com/",children:"StarRocks \u8bba\u575b"}),"\uff0c\u6211\u4eec\u4f1a\u53ca\u65f6\u8ddf\u8fdb\u3002"]}),"\n"]}),"\n"]})]})}const o=function(n={}){const{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(h,n)})):h(n)}},11151:(n,e,r)=>{r.d(e,{Zo:()=>c,ah:()=>s});var t=r(67294);const i=t.createContext({});function s(n){const e=t.useContext(i);return t.useMemo((()=>"function"==typeof n?n(e):{...e,...n}),[e,n])}const l={};function c({components:n,children:e,disableParentContext:r}){let c;return c=r?"function"==typeof n?n({}):n||l:s(n),t.createElement(i.Provider,{value:c},e)}}}]);