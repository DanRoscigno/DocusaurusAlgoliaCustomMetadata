"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[42533],{93158:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>o,frontMatter:()=>l,metadata:()=>c,toc:()=>h});var i=s(85893),r=s(11151);const l={displayed_sidebar:"Chinese"},d="\u96c6\u7fa4\u7ba1\u7406",c={id:"administration/Cluster_administration",title:"\u96c6\u7fa4\u7ba1\u7406",description:"StarRocks \u96c6\u7fa4\u63d0\u4f9b\u670d\u52a1\u8fc7\u7a0b\u4e2d\uff0c\u6709\u5347\u7ea7\u7b49\u9700\u8981\u542f\u505c\u7684\u64cd\u4f5c\uff0c\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u96c6\u7fa4\u65e5\u5e38\u7ba1\u7406\u7684\u5e38\u7528\u64cd\u4f5c\u6b65\u9aa4\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.2/administration/Cluster_administration.md",sourceDirName:"administration",slug:"/administration/Cluster_administration",permalink:"/zh/docs/2.2/administration/Cluster_administration",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/docs.zh-cn/edit/main/administration/Cluster_administration.md",tags:[],version:"2.2",frontMatter:{displayed_sidebar:"Chinese"},sidebar:"Chinese",previous:{title:"dev-env image \u4f7f\u7528\u8bf4\u660e",permalink:"/zh/docs/2.2/administration/Build_in_docker"},next:{title:"\u53c2\u6570\u914d\u7f6e",permalink:"/zh/docs/2.2/administration/Configuration"}},t={},h=[{value:"\u96c6\u7fa4\u542f\u505c",id:"\u96c6\u7fa4\u542f\u505c",level:2},{value:"FE \u542f\u52a8",id:"fe-\u542f\u52a8",level:3},{value:"BE \u542f\u52a8",id:"be-\u542f\u52a8",level:3},{value:"\u786e\u8ba4\u96c6\u7fa4\u5065\u5eb7\u72b6\u6001",id:"\u786e\u8ba4\u96c6\u7fa4\u5065\u5eb7\u72b6\u6001",level:3},{value:"\u96c6\u7fa4\u5347\u7ea7",id:"\u96c6\u7fa4\u5347\u7ea7",level:2},{value:"\u5347\u7ea7 BE \u524d\u7684\u51c6\u5907",id:"\u5347\u7ea7-be-\u524d\u7684\u51c6\u5907",level:3},{value:"\u6d4b\u8bd5 BE \u5347\u7ea7\u7684\u6b63\u786e\u6027",id:"\u6d4b\u8bd5-be-\u5347\u7ea7\u7684\u6b63\u786e\u6027",level:3},{value:"\u5347\u7ea7",id:"\u5347\u7ea7",level:3},{value:"BE \u5347\u7ea7",id:"be-\u5347\u7ea7",level:4},{value:"FE \u5347\u7ea7",id:"fe-\u5347\u7ea7",level:4},{value:"Broker \u5347\u7ea7",id:"broker-\u5347\u7ea7",level:4},{value:"\u56de\u6eda\u65b9\u6848",id:"\u56de\u6eda\u65b9\u6848",level:2},{value:"\u56de\u6eda\u51c6\u5907",id:"\u56de\u6eda\u51c6\u5907",level:3},{value:"\u56de\u6eda BE \u8282\u70b9\u524d\u7684\u51c6\u5907",id:"\u56de\u6eda-be-\u8282\u70b9\u524d\u7684\u51c6\u5907",level:3},{value:"\u56de\u6eda",id:"\u56de\u6eda",level:3},{value:"FE \u56de\u6eda",id:"fe-\u56de\u6eda",level:4},{value:"BE \u56de\u6eda",id:"be-\u56de\u6eda",level:4},{value:"Broker \u56de\u6eda",id:"broker-\u56de\u6eda",level:4},{value:"StarRocks 2.0 \u7070\u5ea6\u5347\u7ea7\u81f3 2.1 \u7684\u6ce8\u610f\u4e8b\u9879",id:"starrocks-20-\u7070\u5ea6\u5347\u7ea7\u81f3-21-\u7684\u6ce8\u610f\u4e8b\u9879",level:3},{value:"\u6b63\u786e\u6027\u9a8c\u8bc1",id:"\u6b63\u786e\u6027\u9a8c\u8bc1",level:2},{value:"\u6d4b\u8bd5 BE \u5347\u7ea7\u7684\u6b63\u786e\u6027",id:"\u6d4b\u8bd5-be-\u5347\u7ea7\u7684\u6b63\u786e\u6027-1",level:3},{value:"\u6d4b\u8bd5 FE \u5347\u7ea7\u7684\u6b63\u786e\u6027",id:"\u6d4b\u8bd5-fe-\u5347\u7ea7\u7684\u6b63\u786e\u6027",level:3}];function a(e){const n=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",em:"em",strong:"strong",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",ol:"ol",li:"li",ul:"ul",pre:"pre",h4:"h4",blockquote:"blockquote"},(0,r.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"\u96c6\u7fa4\u7ba1\u7406",children:"\u96c6\u7fa4\u7ba1\u7406"}),"\n",(0,i.jsx)(n.p,{children:"StarRocks \u96c6\u7fa4\u63d0\u4f9b\u670d\u52a1\u8fc7\u7a0b\u4e2d\uff0c\u6709\u5347\u7ea7\u7b49\u9700\u8981\u542f\u505c\u7684\u64cd\u4f5c\uff0c\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u96c6\u7fa4\u65e5\u5e38\u7ba1\u7406\u7684\u5e38\u7528\u64cd\u4f5c\u6b65\u9aa4\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u96c6\u7fa4\u542f\u505c",children:"\u96c6\u7fa4\u542f\u505c"}),"\n",(0,i.jsx)(n.p,{children:"\u542f\u52a8\u670d\u52a1\u4e4b\u524d\u9700\u8981\u4fdd\u8bc1\u914d\u7f6e\u6587\u4ef6\u6ee1\u8db3\u8981\u6c42\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"fe-\u542f\u52a8",children:"FE \u542f\u52a8"}),"\n",(0,i.jsx)(n.p,{children:"FE \u542f\u52a8\u524d\u9700\u8981\u91cd\u70b9\u5173\u6ce8\u7684\u914d\u7f6e\u9879\u6709\uff1a\u5143\u6570\u636e\u653e\u7f6e\u76ee\u5f55(meta_dir)\u3001\u901a\u4fe1\u7aef\u53e3\u3002"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"meta_dir"})}),"\uff1a\u63cf\u8ff0 FE \u5b58\u50a8\u5143\u6570\u636e\u7684\u76ee\u5f55\uff0c\u9700\u8981\u63d0\u524d\u521b\u5efa\u597d\u76f8\u5e94\u76ee\u5f55\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a ",(0,i.jsx)(n.code,{children:"meta_dir = ${STARROCKS_HOME}/meta"}),", \u82e5\u81ea\u5b9a\u4e49 meta_dir \u5b58\u50a8\u4f4d\u7f6e\uff0c\u5219\u5728 ",(0,i.jsx)(n.code,{children:"fe/conf/fe.conf"})," \u4e2d\u58f0\u660e\u81ea\u5b9a\u4e49\u8def\u5f84\u5373\u53ef\u3002\u7531\u4e8e FE \u7684\u5143\u6570\u636e\u662f\u6574\u4e2a\u7cfb\u7edf\u7684\u5143\u6570\u636e\uff0c\u5341\u5206\u5173\u952e\uff0c\u5efa\u8bae\u4e0d\u8981\u548c\u5176\u4ed6\u8fdb\u7a0b\u6df7\u5e03\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"FE \u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\u6709\u56db\u4e2a:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7aef\u53e3\u540d\u79f0"}),(0,i.jsx)(n.th,{children:"\u9ed8\u8ba4\u7aef\u53e3"}),(0,i.jsx)(n.th,{children:"\u4f5c\u7528"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"http_port"}),(0,i.jsx)(n.td,{children:"8030"}),(0,i.jsx)(n.td,{children:"FE \u4e0a\u7684 http server \u7aef\u53e3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"rpc_port"}),(0,i.jsx)(n.td,{children:"9020"}),(0,i.jsx)(n.td,{children:"FE \u4e0a\u7684 thrift server \u7aef\u53e3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"query_port"}),(0,i.jsx)(n.td,{children:"9030"}),(0,i.jsx)(n.td,{children:"FE \u4e0a\u7684 mysql server \u7aef\u53e3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"edit_log_port"}),(0,i.jsx)(n.td,{children:"9010"}),(0,i.jsx)(n.td,{children:"FE Group(Master, Follower, Observer)\u4e4b\u95f4\u901a\u4fe1\u7528\u7684\u7aef\u53e3"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"FE \u8fdb\u7a0b\u7684\u542f\u52a8\u65b9\u5f0f\u5341\u5206\u7b80\u5355\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u8fdb\u5165 FE \u8fdb\u7a0b\u7684\u90e8\u7f72\u76ee\u5f55"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u8fd0\u884c ",(0,i.jsx)(n.code,{children:"sh bin/start_fe.sh --daemon"})," \u542f\u52a8\u670d\u52a1"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"FE \u4e3a\u4e86\u4fdd\u8bc1\u9ad8\u53ef\u7528\uff0c\u4f1a\u90e8\u7f72\u591a\u4e2a\u8282\u70b9\u3002\u7ebf\u4e0a\u5178\u578b\u7684\u90e8\u7f72\u65b9\u5f0f\u662f 3 \u4e2a FE(1 Master + 2 Follower)\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u591a\u8282\u70b9\u542f\u52a8\u7684\u65f6\u5019\uff0c\u9700\u8981\u9010\u53f0\u542f\u52a8 Follower\u3002\u5982\u679c\u662f\u96c6\u7fa4\u5347\u7ea7\uff0c\u53ef\u4ee5\u5148\u5347\u7ea7 Follower \u8282\u70b9\uff0c\u6700\u540e\u5347\u7ea7 Master\uff08\u6b64\u4e3e\u76ee\u7684\u662f\u5982\u679c Follower \u5347\u7ea7\u51fa\u9519\u53ef\u4ee5\u63d0\u524d\u53d1\u73b0\u95ee\u9898\uff0c\u4ece\u800c\u4e0d\u5f71\u54cd\u96c6\u7fa4\u67e5\u8be2\u529f\u80fd\uff09, \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5f53\u62e5\u6709\u591a\u6570 Follower \u65f6\uff0c\u96c6\u7fa4\u9700\u8981\u5b58\u6d3b\u534a\u6570\u4ee5\u4e0a\u7684 Follower \u624d\u53ef\u4ee5\u9009\u4e3e\u51fa Master\uff0c\u4ece\u800c\u63d0\u4f9b\u67e5\u8be2\u670d\u52a1\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4efb\u4f55\u4e00\u53f0 FE \u7684\u542f\u52a8\uff0c\u90fd\u5efa\u8bae\u8fdb\u884c\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u67e5\u8be2\u7684\u65b9\u5f0f\u4e88\u4ee5\u9a8c\u8bc1\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"be-\u542f\u52a8",children:"BE \u542f\u52a8"}),"\n",(0,i.jsx)(n.p,{children:"BE \u542f\u52a8\u524d\u9700\u8981\u91cd\u70b9\u5173\u6ce8\u7684\u914d\u7f6e\u9879\u6709\uff1a\u6570\u636e\u653e\u7f6e\u76ee\u5f55(storage_root_path)\u3001\u901a\u4fe1\u7aef\u53e3\u3002"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"storage_root_path"})})," \u63cf\u8ff0 BE \u653e\u7f6e\u5b58\u50a8\u6587\u4ef6\u7684\u5730\u65b9\uff0c\u9700\u8981\u4e8b\u5148\u521b\u5efa\u597d\u76f8\u5e94\u76ee\u5f55\uff0c\u5efa\u8bae\u6bcf\u4e2a\u78c1\u76d8\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"BE \u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\u6709\u56db\u4e2a:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7aef\u53e3\u540d\u79f0"}),(0,i.jsx)(n.th,{children:"\u9ed8\u8ba4\u7aef\u53e3"}),(0,i.jsx)(n.th,{children:"\u4f5c\u7528"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"be_port"}),(0,i.jsx)(n.td,{children:"9060"}),(0,i.jsx)(n.td,{children:"BE \u4e0a thrift server \u7684\u7aef\u53e3\uff0c\u7528\u4e8e\u63a5\u6536\u6765\u81ea FE \u7684\u8bf7\u6c42"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"webserver_port"}),(0,i.jsx)(n.td,{children:"8040"}),(0,i.jsx)(n.td,{children:"BE \u4e0a\u7684 http server \u7684\u7aef\u53e3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"heartbeat_service_port"}),(0,i.jsx)(n.td,{children:"9050"}),(0,i.jsx)(n.td,{children:"BE \u4e0a\u5fc3\u8df3\u670d\u52a1\u7aef\u53e3\uff08thrift\uff09\uff0c\u7528\u4e8e\u63a5\u6536\u6765\u81ea FE \u7684\u5fc3\u8df3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"brpc_port"}),(0,i.jsx)(n.td,{children:"8060"}),(0,i.jsx)(n.td,{children:"BE \u4e0a\u7684 brpc \u7aef\u53e3\uff0c\u7528\u4e8e BE \u4e4b\u95f4\u901a\u8baf"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u786e\u8ba4\u96c6\u7fa4\u5065\u5eb7\u72b6\u6001",children:"\u786e\u8ba4\u96c6\u7fa4\u5065\u5eb7\u72b6\u6001"}),"\n",(0,i.jsx)(n.p,{children:"BE \u548c FE \u542f\u52a8\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u68c0\u67e5\u8fdb\u7a0b\u72b6\u6001\uff0c\u4ee5\u786e\u5b9a\u670d\u52a1\u6b63\u5e38\u542f\u52a8\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8fd0\u884c ",(0,i.jsx)(n.code,{children:"http://be_host:be_http_port/api/health"})," \xa0\u786e\u8ba4 BE \u542f\u52a8\u72b6\u6001\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"http://<be_host>:<be_http_port>/api/health\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u8fd0\u884c ",(0,i.jsx)(n.code,{children:"http://fe_host:fe_http_port/api/bootstrap"})," \u786e\u8ba4 FE \u542f\u52a8\u72b6\u6001\u3002"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8fd4\u56de ",(0,i.jsx)(n.code,{children:'{"status": "OK", "msg": "Success"}'})," \u8868\u793a\u542f\u52a8\u6b63\u5e38\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"http://<fe_host>:<fe_http_port>/api/bootstrap\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u8fdb\u5165 FE \u76ee\u5f55 \u8fd0\u884c ",(0,i.jsx)(n.code,{children:"sh bin/stop_fe.sh"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u8fdb\u5165 BE \u76ee\u5f55 \u8fd0\u884c ",(0,i.jsx)(n.code,{children:"sh bin/stop_be.sh"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u96c6\u7fa4\u5347\u7ea7",children:"\u96c6\u7fa4\u5347\u7ea7"}),"\n",(0,i.jsxs)(n.p,{children:["StarRocks \u53ef\u4ee5\u901a\u8fc7\u6eda\u52a8\u5347\u7ea7\u7684\u65b9\u5f0f\uff0c\u5e73\u6ed1\u8fdb\u884c\u5347\u7ea7\u3002",(0,i.jsx)(n.strong,{children:"\u5347\u7ea7\u987a\u5e8f\u662f\u5148\u5347\u7ea7 BE\uff0c\u518d\u5347\u7ea7 FE"}),"\u3002StarRocks \u4fdd\u8bc1 BE \u540e\u5411\u517c\u5bb9 FE\u3002\u5347\u7ea7\u7684\u8fc7\u7a0b\u53ef\u4ee5\u5206\u4e3a\uff1a\u6d4b\u8bd5\u5347\u7ea7\u7684\u6b63\u786e\u6027\uff0c\u6eda\u52a8\u5347\u7ea7\uff0c\u89c2\u5bdf\u670d\u52a1\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u5347\u7ea7-be-\u524d\u7684\u51c6\u5907",children:"\u5347\u7ea7 BE \u524d\u7684\u51c6\u5907"}),"\n",(0,i.jsx)(n.p,{children:"\u4e3a\u4e86\u907f\u514d BE \u91cd\u542f\u671f\u95f4\u4e0d\u5fc5\u8981\u7684 Tablet \u4fee\u590d\uff0c\u8fdb\u800c\u5f71\u54cd\u5347\u7ea7\u540e\u7684\u96c6\u7fa4\u6027\u80fd\uff0c\u5efa\u8bae\u5728\u5347\u7ea7\u524d\u5148\u5728 FE Leader \u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4ee5\u7981\u7528 Tablet \u8c03\u5ea6\u529f\u80fd\uff0c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'admin set frontend config ("max_scheduling_tablets"="0");\nadmin set frontend config ("disable_balance"="true");\nadmin set frontend config ("disable_colocate_balance"="true");\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728",(0,i.jsx)(n.strong,{children:"\u6240\u6709"})," BE \u91cd\u542f\u5347\u7ea7\u5b8c\u6210\u540e\uff0c\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"show backends"})," \u547d\u4ee4\u786e\u8ba4\u6240\u6709 BE \u7684 ",(0,i.jsx)(n.code,{children:"Alive"})," \u72b6\u6001\u4e3a ",(0,i.jsx)(n.code,{children:"true"})," \u540e\uff0c\u542f\u7528 Tablet \u8c03\u5ea6\u529f\u80fd\uff0c"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'admin set frontend config ("max_scheduling_tablets"="2000");\nadmin set frontend config ("disable_balance"="false");\nadmin set frontend config ("disable_colocate_balance"="false");\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u6d4b\u8bd5-be-\u5347\u7ea7\u7684\u6b63\u786e\u6027",children:"\u6d4b\u8bd5 BE \u5347\u7ea7\u7684\u6b63\u786e\u6027"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5728\u5b8c\u6210\u6570\u636e\u6b63\u786e\u6027\u9a8c\u8bc1\u540e\uff0c\u5c06 BE \u548c FE \u65b0\u7248\u672c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u5206\u53d1\u5230\u5404\u81ea\u76ee\u5f55\u4e0b\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5c0f\u7248\u672c\u5347\u7ea7\uff08\u4f8b 2.0.x \u5347\u7ea7\u5230 2.0.x\uff09\uff0cBE \u53ea\u9700\u5347\u7ea7 starrocks_be\uff1bFE \u53ea\u9700\u5347\u7ea7 starrocks-fe.jar\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5927\u7248\u672c\u5347\u7ea7\uff08\u4f8b 2.0.x \u5347\u7ea7\u5230 2.x.x\uff09\uff0c\u5219\u9700\u8981\u66ff\u6362 FE\u3001BE \u7684 bin \u548c lib \u6587\u4ef6\u5939\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u5347\u7ea7",children:"\u5347\u7ea7"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u786e\u8ba4\u65b0\u7248\u672c\u7684\u6587\u4ef6\u66ff\u6362\u5b8c\u6210\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u9010\u53f0\u91cd\u542f BE \u540e\uff0c\u518d\u9010\u53f0\u91cd\u542f FE\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u786e\u8ba4\u524d\u4e00\u4e2a\u5b9e\u4f8b\u542f\u52a8\u6210\u529f\u540e\uff0c\u518d\u91cd\u542f\u4e0b\u4e00\u4e2a\u5b9e\u4f8b\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"be-\u5347\u7ea7",children:"BE \u5347\u7ea7"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cd be_work_dir\nsh bin/stop_be.sh\nmv lib lib.bak \nmv bin bin.bak\ncp -r /tmp/StarRocks-SE-x.x.x/be/lib  .   \ncp -r /tmp/StarRocks-SE-x.x.x/be/bin  .  \nsh bin/start_be.sh --daemon\nps aux | grep starrocks_be\n"})}),"\n",(0,i.jsx)(n.h4,{id:"fe-\u5347\u7ea7",children:"FE \u5347\u7ea7"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cd fe_work_dir\nsh bin/stop_fe.sh\nmv lib lib.bak \nmv bin bin.bak\ncp -r /tmp/StarRocks-SE-x.x.x/fe/lib  .   \ncp -r /tmp/StarRocks-SE-x.x.x/fe/bin  .\nsh bin/start_fe.sh --daemon\nps aux | grep StarRocksFE\n"})}),"\n",(0,i.jsx)(n.h4,{id:"broker-\u5347\u7ea7",children:"Broker \u5347\u7ea7"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cd broker_work_dir \nmv lib lib.bak \nmv bin bin.bak\ncp -r /tmp/StarRocks-SE-x.x.x/apache_hdfs_broker/lib  .   \ncp -r /tmp/StarRocks-SE-x.x.x/apache_hdfs_broker/bin  .\nsh bin/stop_broker.sh\nsh bin/start_broker.sh --daemon\nps aux | grep broker\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7279\u522b\u6ce8\u610f\uff1a"}),"\n",(0,i.jsx)(n.p,{children:"BE\u3001FE \u542f\u52a8\u987a\u5e8f\u4e0d\u80fd\u98a0\u5012\u3002\u56e0\u4e3a\u5982\u679c\u5347\u7ea7\u5bfc\u81f4\u65b0\u65e7 FE\u3001BE \u4e0d\u517c\u5bb9\uff0c\u4ece\u65b0 FE \u53d1\u51fa\u7684\u547d\u4ee4\u53ef\u80fd\u4f1a\u5bfc\u81f4\u65e7\u7684 BE \u6302\u6389\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u56de\u6eda\u65b9\u6848",children:"\u56de\u6eda\u65b9\u6848"}),"\n",(0,i.jsxs)(n.p,{children:["StarRocks \u5404\u7248\u672c\uff08\u5305\u540d\u4e3a StarRocks-xx \u7684\u7248\u672c\uff09\u4e4b\u95f4\u90fd\u662f\u652f\u6301\u56de\u6eda\u64cd\u4f5c\u7684\uff0c\u56de\u6eda\u64cd\u4f5c\u4e0e\u5347\u7ea7\u64cd\u4f5c\u4e00\u81f4\uff0c\u987a\u5e8f\u76f8\u53cd\u3002",(0,i.jsx)(n.strong,{children:"\u56de\u6eda\u987a\u5e8f\u662f\u5148\u56de\u6eda FE\uff0c\u518d\u56de\u6eda BE"})," \u3002\u5f53\u5347\u7ea7\u540e\u53d1\u73b0\u51fa\u73b0\u5f02\u5e38\u72b6\u51b5\uff0c\u4e0d\u7b26\u5408\u9884\u671f\uff0c\u60f3\u5feb\u901f\u6062\u590d\u670d\u52a1\u7684\uff0c\u53ef\u4ee5\u6309\u7167\u4e0b\u8ff0\u64cd\u4f5c\u56de\u6eda\u7248\u672c\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u56de\u6eda\u51c6\u5907",children:"\u56de\u6eda\u51c6\u5907"}),"\n",(0,i.jsx)(n.h3,{id:"\u56de\u6eda-be-\u8282\u70b9\u524d\u7684\u51c6\u5907",children:"\u56de\u6eda BE \u8282\u70b9\u524d\u7684\u51c6\u5907"}),"\n",(0,i.jsx)(n.p,{children:"\u4e3a\u4e86\u907f\u514d BE \u91cd\u542f\u671f\u95f4\u4e0d\u5fc5\u8981\u7684 Tablet \u4fee\u590d\uff0c\u8fdb\u800c\u5f71\u54cd\u56de\u6eda\u540e\u7684\u96c6\u7fa4\u6027\u80fd\uff0c\u5efa\u8bae\u5728\u56de\u6eda\u524d\u5148\u5728 FE Leader \u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4ee5\u7981\u7528 Tablet \u8c03\u5ea6\u529f\u80fd\uff0c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'admin set frontend config ("max_scheduling_tablets"="0");\nadmin set frontend config ("disable_balance"="true");\nadmin set frontend config ("disable_colocate_balance"="true");\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728",(0,i.jsx)(n.strong,{children:"\u6240\u6709"})," BE \u91cd\u542f\u56de\u6eda\u5b8c\u6210\u540e\uff0c\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"show backends"})," \u547d\u4ee4\u786e\u8ba4\u6240\u6709 BE \u7684 ",(0,i.jsx)(n.code,{children:"Alive"})," \u72b6\u6001\u4e3a ",(0,i.jsx)(n.code,{children:"true"})," \u540e\uff0c\u542f\u7528 Tablet \u8c03\u5ea6\u529f\u80fd\uff0c"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'admin set frontend config ("max_scheduling_tablets"="2000");\nadmin set frontend config ("disable_balance"="false");\nadmin set frontend config ("disable_colocate_balance"="false");\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5c0f\u7248\u672c\u56de\u6eda\uff08\u4f8b 2.0.x \u56de\u6eda\u81f3 2.0.x\uff09\uff0cBE \u53ea\u9700\u66ff\u6362 starrocks_be\uff1bFE \u53ea\u9700\u66ff\u6362 starrocks-fe.jar\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5927\u7248\u672c\u56de\u6eda\uff08\u4f8b 2.x.x \u56de\u6eda\u81f3 2.0.x\uff09\uff0c\u5219\u9700\u8981\u66ff\u6362 FE\u3001BE \u7684 bin \u548c lib \u6587\u4ef6\u5939\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u56de\u6eda",children:"\u56de\u6eda"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u786e\u8ba4\u6587\u4ef6\u66ff\u6362\u5b8c\u6210\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u9010\u53f0\u91cd\u542f FE \u540e\uff0c\u518d\u9010\u53f0\u91cd\u542f BE\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u786e\u8ba4\u524d\u4e00\u4e2a\u5b9e\u4f8b\u542f\u52a8\u6210\u529f\u540e\uff0c\u518d\u91cd\u542f\u4e0b\u4e00\u4e2a\u5b9e\u4f8b\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"fe-\u56de\u6eda",children:"FE \u56de\u6eda"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cd fe_work_dir \nmv lib libtmp.bak \nmv bin bintmp.bak \nmv lib.bak lib   \nmv bin.bak bin \nsh bin/stop_fe.sh\nsh bin/start_fe.sh --daemon\nps aux | grep StarRocksFE\n"})}),"\n",(0,i.jsx)(n.h4,{id:"be-\u56de\u6eda",children:"BE \u56de\u6eda"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cd be_work_dir \nmv lib libtmp.bak \nmv bin bintmp.bak \nmv lib.bak lib\nmv bin.bak bin\nsh bin/stop_be.sh\nsh bin/start_be.sh --daemon\nps aux | grep starrocks_be\n"})}),"\n",(0,i.jsx)(n.h4,{id:"broker-\u56de\u6eda",children:"Broker \u56de\u6eda"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cd broker_work_dir \nmv lib libtmp.bak \nmv bin bintmp.bak\nmv lib.bak lib\nmv bin.bak bin\nsh bin/stop_broker.sh\nsh bin/start_broker.sh --daemon\nps aux | grep broker\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7279\u522b\u6ce8\u610f\uff1a"}),"\n",(0,i.jsx)(n.p,{children:"BE\u3001FE \u56de\u6eda\u987a\u5e8f\u4e0d\u80fd\u98a0\u5012\u3002\u56e0\u4e3a\u5982\u679c\u56de\u6eda\u5bfc\u81f4\u65b0\u65e7 FE\u3001BE \u4e0d\u517c\u5bb9\uff0c\u4ece\u9ad8\u7248\u672c FE \u53d1\u51fa\u7684\u547d\u4ee4\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4f4e\u7248\u672c\u7684 BE \u6302\u6389\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"starrocks-20-\u7070\u5ea6\u5347\u7ea7\u81f3-21-\u7684\u6ce8\u610f\u4e8b\u9879",children:"StarRocks 2.0 \u7070\u5ea6\u5347\u7ea7\u81f3 2.1 \u7684\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u9700\u8981\u5c06 StarRocks 2.0 \u7070\u5ea6\u5347\u7ea7\u81f3 2.1\uff0c\u5219\u9700\u8981\u63d0\u524d\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\uff0c\u786e\u4fdd\u6240\u6709 BE \u8282\u70b9\u7684 chunk size\uff08\u5373 BE \u8282\u70b9\u5728\u6bcf\u4e2a\u6279\u6b21\u4e2d\u5904\u7406\u6570\u636e\u7684\u884c\u6570\uff09\u4e00\u81f4\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u6240\u6709 BE \u8282\u70b9\u7684\u914d\u7f6e\u9879 ",(0,i.jsx)(n.code,{children:"vector_chunk_size"})," \u662f 4096\uff08\u9ed8\u8ba4\u503c\u4e3a 4096\uff0c\u5355\u4f4d\u4e3a\u884c\uff09\u3002","\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["\u60a8\u9700\u8981\u5728 BE \u8282\u70b9\u7684\u914d\u7f6e\u6587\u4ef6 be.conf \u4e2d\u8bbe\u7f6e\u914d\u7f6e\u9879 ",(0,i.jsx)(n.code,{children:"vector_chunk_size"}),"\u3002\u914d\u7f6e\u9879\u8bbe\u7f6e\u540e\u4e14\u9700\u8981\u91cd\u542f\u624d\u80fd\u751f\u6548\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["FE \u8282\u70b9\u7684\u5168\u5c40\u53d8\u91cf ",(0,i.jsx)(n.code,{children:"batch_size"})," \u5c0f\u4e8e\u6216\u7b49\u4e8e 4096 \uff08\u9ed8\u8ba4\u503c\u548c\u5efa\u8bae\u503c\u4e3a 4096\uff0c\u5355\u4f4d\u4e3a\u884c\uff09\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plain",metastring:"text",children:"-- \u67e5\u8be2 batch_size\nmysql> show variables like '%batch_size%';\n+---------------+-------+\n| Variable_name | Value |\n+---------------+-------+\n| batch_size    | 1024  |\n+---------------+-------+\n1 row in set (0.00 sec)\n\n-- \u8bbe\u7f6e batch_size\nmysql> set global batch_size = 4096;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6b63\u786e\u6027\u9a8c\u8bc1",children:"\u6b63\u786e\u6027\u9a8c\u8bc1"}),"\n",(0,i.jsx)(n.h3,{id:"\u6d4b\u8bd5-be-\u5347\u7ea7\u7684\u6b63\u786e\u6027-1",children:"\u6d4b\u8bd5 BE \u5347\u7ea7\u7684\u6b63\u786e\u6027"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u4efb\u610f\u9009\u62e9\u4e00\u4e2a BE \u8282\u70b9\uff0c\u90e8\u7f72\u6700\u65b0\u7684 starrocks_be \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u91cd\u542f\u8be5 BE \u8282\u70b9\uff0c\u901a\u8fc7 BE \u65e5\u5fd7 be.INFO \u67e5\u770b\u662f\u5426\u542f\u52a8\u6210\u529f\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u542f\u52a8\u5931\u8d25\uff0c\u53ef\u4ee5\u5148\u6392\u67e5\u539f\u56e0\u3002\u5982\u679c\u9519\u8bef\u4e0d\u53ef\u6062\u590d\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"DROP BACKEND"})," \u5220\u9664\u8be5 BE\u3001\u6e05\u7406\u6570\u636e\u540e\uff0c\u4f7f\u7528\u4e0a\u4e00\u4e2a\u7248\u672c\u7684 starrocks_be \u91cd\u65b0\u542f\u52a8 BE\u3002\u7136\u540e\u91cd\u65b0 ",(0,i.jsx)(n.code,{children:"ADD BACKEND"}),"\u3002\uff08",(0,i.jsx)(n.strong,{children:"\u8be5\u65b9\u6cd5\u4f1a\u5bfc\u81f4\u4e22\u5931\u4e00\u4e2a\u6570\u636e\u526f\u672c\uff0c\u8bf7\u52a1\u5fc5\u786e\u4fdd 3 \u526f\u672c\u5b8c\u6574\u7684\u60c5\u51b5\u4e0b\uff0c\u6267\u884c\u8fd9\u4e2a\u64cd\u4f5c\uff01\uff01\uff01"}),"\uff09"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6d4b\u8bd5-fe-\u5347\u7ea7\u7684\u6b63\u786e\u6027",children:"\u6d4b\u8bd5 FE \u5347\u7ea7\u7684\u6b63\u786e\u6027"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5355\u72ec\u4f7f\u7528\u65b0\u7248\u672c\u90e8\u7f72\u4e00\u4e2a\u6d4b\u8bd5\u7528\u7684 FE \u8fdb\u7a0b\uff08\u6bd4\u5982\u81ea\u5df1\u672c\u5730\u7684\u5f00\u53d1\u673a\uff09"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u4fee\u6539\u6d4b\u8bd5\u7528\u7684 FE \u7684\u914d\u7f6e\u6587\u4ef6 fe.conf\uff0c\u5c06 ",(0,i.jsx)(n.strong,{children:"\u6240\u6709\u7aef\u53e3\u8bbe\u7f6e\u4e3a\u4e0e\u7ebf\u4e0a\u4e0d\u540c"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5728 fe.conf \u6dfb\u52a0\u914d\u7f6e\uff1acluster_id = 123456"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5728 fe.conf \u6dfb\u52a0\u914d\u7f6e\uff1ametadata_failure_recovery = true"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u62f7\u8d1d\u7ebf\u4e0a\u73af\u5883 Master FE \u7684\u5143\u6570\u636e\u76ee\u5f55 meta \u5230\u6d4b\u8bd5\u73af\u5883"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5c06\u62f7\u8d1d\u5230\u6d4b\u8bd5\u73af\u5883\u4e2d\u7684 meta/image/VERSION \u6587\u4ef6\u4e2d\u7684 cluster_id \u4fee\u6539\u4e3a 123456\uff08\u5373\u4e0e\u7b2c 3 \u6b65\u4e2d\u76f8\u540c\uff09"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u8fd0\u884c ",(0,i.jsx)(n.code,{children:"sh bin/start_fe.sh"})," \u542f\u52a8 FE"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u901a\u8fc7 FE \u65e5\u5fd7 fe.log \u89c2\u5bdf\u662f\u5426\u542f\u52a8\u6210\u529f\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u542f\u52a8\u6210\u529f\uff0c\u8fd0\u884c ",(0,i.jsx)(n.code,{children:"sh bin/stop_fe.sh"})," \u505c\u6b62\u6d4b\u8bd5\u73af\u5883\u7684 FE \u8fdb\u7a0b\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4ee5\u4e0a 2-6 \u6b65\u7684\u76ee\u7684\u662f\u9632\u6b62\u6d4b\u8bd5\u73af\u5883\u7684 FE \u542f\u52a8\u540e\uff0c\u9519\u8bef\u8fde\u63a5\u5230\u7ebf\u4e0a\u73af\u5883\u4e2d\u3002"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u56e0\u4e3a FE \u5143\u6570\u636e\u5341\u5206\u5173\u952e\uff0c\u5347\u7ea7\u51fa\u73b0\u5f02\u5e38\u53ef\u80fd\u5bfc\u81f4\u6240\u6709\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u7279\u522b\u8c28\u614e\uff0c\u5c24\u5176\u662f\u5927\u7248\u672c\u7684\u5347\u7ea7\u3002"})})]})}const o=function(e={}){const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(a,e)})):a(e)}},11151:(e,n,s)=>{s.d(n,{Zo:()=>c,ah:()=>l});var i=s(67294);const r=i.createContext({});function l(e){const n=i.useContext(r);return i.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const d={};function c({components:e,children:n,disableParentContext:s}){let c;return c=s?"function"==typeof e?e({}):e||d:l(e),i.createElement(r.Provider,{value:c},n)}}}]);