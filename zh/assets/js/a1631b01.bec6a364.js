"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[11725],{7548:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>t,frontMatter:()=>d,metadata:()=>c,toc:()=>o});var s=r(85893),l=r(11151);const d={displayed_sidebar:"Chinese"},i="Broker Load",c={id:"loading/BrokerLoad",title:"Broker Load",description:"StarRocks\u652f\u6301\u4eceApache HDFS\u3001Amazon S3\u7b49\u5916\u90e8\u5b58\u50a8\u7cfb\u7edf\u5bfc\u5165\u6570\u636e\uff0c\u652f\u6301CSV\u3001ORCFile\u3001Parquet\u7b49\u6587\u4ef6\u683c\u5f0f\u3002\u6570\u636e\u91cf\u5728\u51e0\u5341GB\u5230\u4e0a\u767eGB \u7ea7\u522b\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.1/loading/BrokerLoad.md",sourceDirName:"loading",slug:"/loading/BrokerLoad",permalink:"/zh/docs/2.1/loading/BrokerLoad",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/docs.zh-cn/edit/main/loading/BrokerLoad.md",tags:[],version:"2.1",frontMatter:{displayed_sidebar:"Chinese"},sidebar:"Chinese",previous:{title:"StarRocks",permalink:"/zh/docs/2.1/introduction/StarRocks_intro"},next:{title:"\u4ecb\u7ecd",permalink:"/zh/docs/2.1/loading/DataX-starrocks-writer"}},a={},o=[{value:"\u540d\u8bcd\u89e3\u91ca",id:"\u540d\u8bcd\u89e3\u91ca",level:2},{value:"\u57fa\u672c\u539f\u7406",id:"\u57fa\u672c\u539f\u7406",level:2},{value:"\u652f\u6301\u7684\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf",id:"\u652f\u6301\u7684\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf",level:2},{value:"\u5bfc\u5165\u793a\u4f8b",id:"\u5bfc\u5165\u793a\u4f8b",level:2},{value:"Broker\u642d\u5efa",id:"broker\u642d\u5efa",level:3},{value:"\u521b\u5efa\u5bfc\u5165\u4efb\u52a1",id:"\u521b\u5efa\u5bfc\u5165\u4efb\u52a1",level:3},{value:"\u67e5\u770b\u5bfc\u5165\u4efb\u52a1\u72b6\u6001",id:"\u67e5\u770b\u5bfc\u5165\u4efb\u52a1\u72b6\u6001",level:3},{value:"\u53d6\u6d88\u5bfc\u5165\u4efb\u52a1",id:"\u53d6\u6d88\u5bfc\u5165\u4efb\u52a1",level:3},{value:"\u76f8\u5173\u914d\u7f6e",id:"\u76f8\u5173\u914d\u7f6e",level:2},{value:"\u5e76\u884c\u5ea6",id:"\u5e76\u884c\u5ea6",level:3},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2}];function h(n){const e=Object.assign({h1:"h1",p:"p",strong:"strong",hr:"hr",h2:"h2",ul:"ul",li:"li",img:"img",h3:"h3",a:"a",pre:"pre",code:"code",blockquote:"blockquote",ol:"ol",div:"div"},(0,l.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"broker-load",children:"Broker Load"}),"\n",(0,s.jsx)(e.p,{children:"StarRocks\u652f\u6301\u4eceApache HDFS\u3001Amazon S3\u7b49\u5916\u90e8\u5b58\u50a8\u7cfb\u7edf\u5bfc\u5165\u6570\u636e\uff0c\u652f\u6301CSV\u3001ORCFile\u3001Parquet\u7b49\u6587\u4ef6\u683c\u5f0f\u3002\u6570\u636e\u91cf\u5728\u51e0\u5341GB\u5230\u4e0a\u767eGB \u7ea7\u522b\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728Broker Load\u6a21\u5f0f\u4e0b\uff0c\u901a\u8fc7\u90e8\u7f72\u7684Broker\u7a0b\u5e8f\uff0cStarRocks\u53ef\u8bfb\u53d6\u5bf9\u5e94\u6570\u636e\u6e90\uff08\u5982HDFS, S3\uff09\u4e0a\u7684\u6570\u636e\uff0c\u5229\u7528\u81ea\u8eab\u7684\u8ba1\u7b97\u8d44\u6e90\u5bf9\u6570\u636e\u8fdb\u884c\u9884\u5904\u7406\u548c\u5bfc\u5165\u3002\u8fd9\u662f\u4e00\u79cd",(0,s.jsx)(e.strong,{children:"\u5f02\u6b65"}),"\u7684\u5bfc\u5165\u65b9\u5f0f\uff0c\u7528\u6237\u9700\u8981\u901a\u8fc7MySQL\u534f\u8bae\u521b\u5efa\u5bfc\u5165\uff0c\u5e76\u901a\u8fc7\u67e5\u770b\u5bfc\u5165\u547d\u4ee4\u68c0\u67e5\u5bfc\u5165\u7ed3\u679c\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u4e3b\u8981\u4ecb\u7ecdBroker\u5bfc\u5165\u7684\u57fa\u672c\u539f\u7406\u3001\u4f7f\u7528\u793a\u4f8b\u3001\u6700\u4f73\u5b9e\u8df5\uff0c\u53ca\u5e38\u89c1\u95ee\u9898\u3002"}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"\u540d\u8bcd\u89e3\u91ca",children:"\u540d\u8bcd\u89e3\u91ca"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Broker:  Broker \u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u65e0\u72b6\u6001\u8fdb\u7a0b\uff0c\u5c01\u88c5\u4e86\u6587\u4ef6\u7cfb\u7edf\u63a5\u53e3\uff0c\u4e3a StarRocks \u63d0\u4f9b\u8bfb\u53d6\u8fdc\u7aef\u5b58\u50a8\u7cfb\u7edf\u4e2d\u6587\u4ef6\u7684\u80fd\u529b\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Plan:  \u5bfc\u5165\u6267\u884c\u8ba1\u5212\uff0cBE\u4f1a\u6267\u884c\u5bfc\u5165\u6267\u884c\u8ba1\u5212\u5c06\u6570\u636e\u5bfc\u5165\u5230StarRocks\u7cfb\u7edf\u4e2d\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"\u57fa\u672c\u539f\u7406",children:"\u57fa\u672c\u539f\u7406"}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u6237\u5728\u63d0\u4ea4\u5bfc\u5165\u4efb\u52a1\u540e\uff0cFE \u4f1a\u751f\u6210\u5bf9\u5e94\u7684 Plan \u5e76\u6839\u636e\u76ee\u524d BE \u7684\u4e2a\u6570\u548c\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u5c06 Plan \u5206\u7ed9\u591a\u4e2a BE \u6267\u884c\uff0c\u6bcf\u4e2a BE \u6267\u884c\u4e00\u90e8\u5206\u5bfc\u5165\u4efb\u52a1\u3002BE \u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u901a\u8fc7 Broker \u62c9\u53d6\u6570\u636e\uff0c\u5728\u5bf9\u6570\u636e\u9884\u5904\u7406\u4e4b\u540e\u5c06\u6570\u636e\u5bfc\u5165\u7cfb\u7edf\u3002\u6240\u6709 BE \u5747\u5b8c\u6210\u5bfc\u5165\u540e\uff0c\u7531 FE \u6700\u7ec8\u5224\u65ad\u5bfc\u5165\u662f\u5426\u6210\u529f\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4e0b\u56fe\u5c55\u793a\u4e86 Broker Load \u7684\u4e3b\u8981\u6d41\u7a0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"brokerload",src:r(71418).Z+"",width:"1331",height:"1673"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"\u652f\u6301\u7684\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf",children:"\u652f\u6301\u7684\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Apache HDFS"}),"\n",(0,s.jsx)(e.li,{children:"Amazon S3"}),"\n",(0,s.jsx)(e.li,{children:"\u963f\u91cc\u4e91 OSS"}),"\n",(0,s.jsx)(e.li,{children:"\u817e\u8baf COS"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"\u5bfc\u5165\u793a\u4f8b",children:"\u5bfc\u5165\u793a\u4f8b"}),"\n",(0,s.jsx)(e.h3,{id:"broker\u642d\u5efa",children:"Broker\u642d\u5efa"}),"\n",(0,s.jsx)(e.p,{children:"Broker Load\u9700\u8981\u501f\u52a9Broker\u8fdb\u7a0b\u8bbf\u95ee\u8fdc\u7aef\u5b58\u50a8\uff0c\u56e0\u6b64\u4f7f\u7528Broker Load\u524d\u9700\u8981\u642d\u5efa\u597dBroker\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u53ef\u4ee5\u53c2\u8003\u624b\u52a8\u90e8\u7f72\uff08",(0,s.jsx)(e.a,{href:"/zh/docs/2.1/quick_start/Deploy",children:"\u90e8\u7f72Broker"}),"\uff09\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"\u521b\u5efa\u5bfc\u5165\u4efb\u52a1",children:"\u521b\u5efa\u5bfc\u5165\u4efb\u52a1"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u8bed\u6cd5\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-SQL",children:"LOAD LABEL db_name.label_name \n    (data_desc, ...)\nWITH BROKER broker_name broker_properties\n    [PROPERTIES (key1=value1, ... )]\n\ndata_desc:\n    DATA INFILE ('file_path', ...)\n    [NEGATIVE]\n    INTO TABLE tbl_name\n    [PARTITION (p1, p2)]\n    [COLUMNS TERMINATED BY column_separator ]\n    [FORMAT AS file_type]\n    [(col1, ...)]\n    [COLUMNS FROM PATH AS (colx, ...)]\n    [SET (k1=f1(xx), k2=f2(xx))]\n    [WHERE predicate]\n\nbroker_properties: \n    (key2=value2, ...)\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Apache HDFS\u5bfc\u5165\u793a\u4f8b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:'LOAD LABEL db1.label1\n(\n    DATA INFILE("hdfs://abc.com:8888/user/starRocks/test/ml/file1")\n    INTO TABLE tbl1\n    COLUMNS TERMINATED BY ","\n    (tmp_c1, tmp_c2)\n    SET\n    (\n        id=tmp_c2,\n        name=tmp_c1\n    ),\n\n    DATA INFILE("hdfs://abc.com:8888/user/starRocks/test/ml/file2")\n    INTO TABLE tbl2\n    COLUMNS TERMINATED BY ","\n    (col1, col2)\n    where col1 > 1\n)\nWITH BROKER \'broker\'\n(\n    "username" = "hdfs_username",\n    "password" = "hdfs_password"\n)\nPROPERTIES\n(\n    "timeout" = "3600"\n);\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u963f\u91cc\u4e91 OSS\u5bfc\u5165\u793a\u4f8b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-SQL",children:'LOAD LABEL example_db.label12\n(\n    DATA INFILE("oss://my_bucket/input/file.csv")\n    INTO TABLE `my_table`\n    (k1, k2, k3)\n)\nWITH BROKER my_broker\n(\n    "fs.oss.accessKeyId" = "xxxxxxxxxxxxxxxxxxxxxxxxxx",\n    "fs.oss.accessKeySecret" = "yyyyyyyyyyyyyyyyyyyy",\n    "fs.oss.endpoint" = "oss-cn-zhangjiakou-internal.aliyuncs.com"\n)\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u6267\u884c",(0,s.jsx)(e.code,{children:"HELP BROKER LOAD"}),"\u53ef\u67e5\u770b\u521b\u5efa\u5bfc\u5165\u4f5c\u4e1a\u7684\u8be6\u7ec6\u8bed\u6cd5\u3002\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u547d\u4ee4\u4e2d\u53c2\u6570\u7684\u610f\u4e49\u548c\u6ce8\u610f\u4e8b\u9879\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Label\uff1a"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5bfc\u5165\u4efb\u52a1\u7684\u6807\u8bc6\u3002\u6bcf\u4e2a\u5bfc\u5165\u4efb\u52a1\uff0c\u90fd\u6709",(0,s.jsx)(e.strong,{children:"\u4e00\u4e2a\u6570\u636e\u5e93"}),"\u5185\u90e8\u552f\u4e00\u7684Label\u3002Label\u662f\u7528\u6237\u5728\u5bfc\u5165\u547d\u4ee4\u4e2d\u81ea\u5b9a\u4e49\u7684\u540d\u79f0\u3002\u901a\u8fc7\u8fd9\u4e2aLabel\uff0c\u7528\u6237\u53ef\u4ee5\u67e5\u770b\u5bf9\u5e94\u5bfc\u5165\u4efb\u52a1\u7684\u6267\u884c\u60c5\u51b5\uff0c\u5e76\u4e14Label\u53ef\u4ee5\u7528\u6765\u9632\u6b62\u7528\u6237\u5bfc\u5165\u76f8\u540c\u7684\u6570\u636e\u3002\u5f53\u5bfc\u5165\u4efb\u52a1\u72b6\u6001\u4e3aFINISHED\u65f6\uff0c\u5bf9\u5e94\u7684Label\u5c31\u4e0d\u80fd\u518d\u6b21\u4f7f\u7528\u4e86\u3002\u5f53 Label \u5bf9\u5e94\u7684\u5bfc\u5165\u4efb\u52a1\u72b6\u6001\u4e3aCANCELLED\u65f6\uff0c",(0,s.jsx)(e.strong,{children:"\u53ef\u4ee5\u518d\u6b21\u4f7f\u7528"}),"\u8be5Label\u63d0\u4ea4\u5bfc\u5165\u4f5c\u4e1a\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6570\u636e\u63cf\u8ff0\u7c7b\u53c2\u6570\uff1a"})}),"\n",(0,s.jsx)(e.p,{children:"\u6570\u636e\u63cf\u8ff0\u7c7b\u53c2\u6570\uff0c\u4e3b\u8981\u6307\u7684\u662f\u8bed\u53e5\u4e2ddata_desc\u90e8\u5206\u7684\u53c2\u6570\u3002\u6bcf\u7ec4 data_desc\u8868\u8ff0\u4e86\u672c\u6b21\u5bfc\u5165\u6d89\u53ca\u5230\u7684\u6570\u636e\u6e90\u5730\u5740\uff0cETL \u51fd\u6570\uff0c\u76ee\u6807\u8868\u53ca\u5206\u533a\u7b49\u4fe1\u606f\u3002\u4e0b\u9762\u662f\u5bf9\u6570\u636e\u63cf\u8ff0\u7c7b\u90e8\u5206\u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u591a\u8868\u5bfc\u5165"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["Broker load\u652f\u6301\u4e00\u6b21\u5bfc\u5165\u4efb\u52a1\u6d89\u53ca\u591a\u5f20\u8868\uff0c\u6bcf\u4e2aBroker load\u5bfc\u5165\u4efb\u52a1\u53ef\u901a\u8fc7\u591a\u4e2adata_desc\u58f0\u660e\u591a\u5f20\u8868\u6765\u5b9e\u73b0\u591a\u8868\u5bfc\u5165\u3002\u6bcf\u4e2a\u5355\u72ec\u7684data-desc\u53ef\u4ee5\u6307\u5b9a\u5c5e\u4e8e",(0,s.jsx)(e.strong,{children:"\u8be5\u8868"}),"\u7684\u6570\u636e\u6e90\u5730\u5740\uff0c\u53ef\u4ee5\u7528\u591a\u4e2a file-path \u6765\u6307\u5b9a\u5bfc\u5165\u540c\u4e00\u4e2a\u8868\u7684\u591a\u4e2a\u6587\u4ef6\u3002Broker load \u4fdd\u8bc1\u4e86\u5355\u6b21\u5bfc\u5165\u7684\u591a\u5f20\u8868\u4e4b\u95f4\u539f\u5b50\u6027\u6210\u529f\u6216\u5931\u8d25\u3002"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"file_path"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6587\u4ef6\u8def\u5f84\u53ef\u4ee5\u6307\u5b9a\u5230\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u7528 * \u901a\u914d\u7b26\u6307\u5b9a\u67d0\u4e2a\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u3002\u4e2d\u95f4\u7684\u76ee\u5f55\u4e5f\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u5339\u914d\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u53ef\u4ee5\u4f7f\u7528\u7684\u901a\u914d\u7b26\u6709",(0,s.jsx)(e.code,{children:"? * [] {} ^"}),"\uff0c",(0,s.jsx)(e.a,{href:"https://hadoop.apache.org/docs/stable/api/org/apache/hadoop/fs/FileSystem.html#globStatus-org.apache.hadoop.fs.Path-",children:"\u901a\u914d\u7b26\u4f7f\u7528\u89c4\u5219\u53c2\u8003"}),"\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u4f8b\u5982\uff1a\n\u901a\u8fc7 ",(0,s.jsx)(e.code,{children:"hdfs://hdfs_host:hdfs_port/user/data/tablename/\\*/\\*"})," , \u53ef\u4ee5\u5339\u914dtablename\u4e0b\u6240\u6709\u5206\u533a\u5185\u7684\u6240\u6709\u6587\u4ef6\uff1b\n\u901a\u8fc7 ",(0,s.jsx)(e.code,{children:"hdfs://hdfs_host:hdfs_port/user/data/tablename/dt=202104\\*/\\*"})," , \u53ef\u4ee5\u5339\u914dtablename\u4e0b\u6240\u67094\u6708\u5206\u533a\u7684\u6240\u6709\u6587\u4ef6\uff1b"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"negative"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"data_desc\u4e2d\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u6570\u636e\u53d6\u53cd\u5bfc\u5165\u3002\u8fd9\u4e2a\u529f\u80fd\u9002\u7528\u7684\u573a\u666f\u662f\u5f53\u6570\u636e\u8868\u4e2d\u805a\u5408\u5217\u7684\u7c7b\u578b\u90fd\u4e3aSUM\u7c7b\u578b\u65f6\uff0c\u5982\u679c\u5e0c\u671b\u64a4\u9500\u67d0\u4e00\u6279\u5bfc\u5165\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7negative\u53c2\u6570\u5bfc\u5165\u540c\u4e00\u6279\u6570\u636e\uff0cStarRocks \u4f1a\u81ea\u52a8\u4e3a\u8fd9\u4e00\u6279\u6570\u636e\u5728\u805a\u5408\u5217\u4e0a\u6570\u636e\u53d6\u53cd\uff0c\u4ee5\u8fbe\u5230\u6d88\u9664\u540c\u4e00\u6279\u6570\u636e\u7684\u529f\u80fd\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"partition"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5728data_desc\u4e2d\u53ef\u4ee5\u6307\u5b9a\u5f85\u5bfc\u5165\u8868\u7684partition\u4fe1\u606f\u3002\u5982\u679c\u5f85\u5bfc\u5165\u6570\u636e\u4e0d\u5c5e\u4e8e\u6307\u5b9a\u7684partition\u5219\u4e0d\u4f1a\u88ab\u5bfc\u5165\u3002\u540c\u65f6\uff0c\u4e0d\u5728\u6307\u5b9aPartition\u4e2d\u7684\u6570\u636e\u4f1a\u88ab\u8ba4\u4e3a\u662f\u201c\u9519\u8bef\u6570\u636e\u201d\u3002\u5bf9\u4e8e\u4e0d\u60f3\u8981\u5bfc\u5165\u3001\u4e5f\u4e0d\u60f3\u8981\u8bb0\u5f55\u4e3a\u201c\u9519\u8bef\u6570\u636e\u201d\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u4ecb\u7ecd\u7684 ",(0,s.jsx)(e.strong,{children:"where predicate"})," \u6765\u8fc7\u6ee4\u3002"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"column separator"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u4e8e\u6307\u5b9a\u5bfc\u5165\u6587\u4ef6\u4e2d\u7684\u5217\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u4e3a \\t\u3002"}),"\n",(0,s.jsx)(e.p,{children:'\u5982\u679c\u662f\u4e0d\u53ef\u89c1\u5b57\u7b26\uff0c\u5219\u9700\u8981\u52a0\\x\u4f5c\u4e3a\u524d\u7f00\uff0c\u4f7f\u7528\u5341\u516d\u8fdb\u5236\u6765\u8868\u793a\u5206\u9694\u7b26\u3002\u5982hive\u6587\u4ef6\u7684\u5206\u9694\u7b26\\x01\uff0c\u6307\u5b9a\u4e3a"\\\\x01"\u3002'}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"file type"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u4e8e\u6307\u5b9a\u5bfc\u5165\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\uff1aparquet\u3001orc\u3001csv\uff0c\u9ed8\u8ba4\u4e3acsv\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["parquet\u7c7b\u578b\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6587\u4ef6\u540e\u7f00\u540d ",(0,s.jsx)(e.strong,{children:".parquet"})," \u6216\u8005 ",(0,s.jsx)(e.strong,{children:".parq"})," \u5224\u65ad\u3002"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"COLUMNS FROM PATH AS"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u63d0\u53d6\u6587\u4ef6\u8def\u5f84\u4e2d\u7684\u5206\u533a\u5b57\u6bb5\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4f8b: \u5bfc\u5165\u6587\u4ef6\u4e3a/path/col_name=col_value/dt=20210101/file1\uff0ccol_name/dt\u4e3a\u8868\u4e2d\u7684\u5217\uff0c\u5219\u8bbe\u7f6e\u5982\u4e0b\u8bed\u53e5\u53ef\u4ee5\u5c06col_value\u300120210101\u5206\u522b\u5bfc\u5165\u5230col_name\u3001dt\u5bf9\u5e94\u7684\u5217\u4e2d\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-SQL",children:"...\n(col1, col2)\nCOLUMNS FROM PATH AS (col_name, dt)\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"set column mapping"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["data_desc\u4e2d\u7684SET\u8bed\u53e5\u8d1f\u8d23\u8bbe\u7f6e\u5217",(0,s.jsx)(e.strong,{children:"\u51fd\u6570\u53d8\u6362"}),"\u3002\u8fd9\u91cc\u7684\u5217\u51fd\u6570\u53d8\u6362\u652f\u6301\u6240\u6709\u67e5\u8be2\u7684\u7b49\u503c\u8868\u8fbe\u5f0f\u53d8\u6362\u3002\u5982\u679c\u539f\u59cb\u6570\u636e\u7684\u5217\u548c\u8868\u4e2d\u7684\u5217\u4e0d\u4e00\u4e00\u5bf9\u5e94\uff0c\u5c31\u9700\u8981\u7528\u5230\u8fd9\u4e2a\u5c5e\u6027\u3002"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"where predicate"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"data_desc\u4e2d\u7684WHERE\u8bed\u53e5\u8d1f\u8d23\u8fc7\u6ee4\u5df2\u7ecf\u5b8c\u6210transform\u7684\u6570\u636e\u3002\u88ab\u8fc7\u6ee4\u7684\u6570\u636e\u4e0d\u4f1a\u8fdb\u5165\u5bb9\u5fcd\u7387\u7684\u7edf\u8ba1\u4e2d\u3002\u5982\u679c\u591a\u4e2adata-desc\u4e2d\u58f0\u660e\u4e86\u5173\u4e8e\u540c\u4e00\u5f20\u8868\u7684\u591a\u4e2a\u6761\u4ef6\uff0c\u5219\u4f1a\u4ee5AND\u8bed\u4e49\u5408\u5e76\u8fd9\u4e9b\u6761\u4ef6\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5bfc\u5165\u4f5c\u4e1a\u53c2\u6570\uff1a"})}),"\n",(0,s.jsx)(e.p,{children:"\u5bfc\u5165\u4f5c\u4e1a\u53c2\u6570\u662f\u6307Broker Load\u521b\u5efa\u5bfc\u5165\u8bed\u53e5\u4e2d\u5c5e\u4e8eopt_properties\u90e8\u5206\u7684\u53c2\u6570\u3002\u5bfc\u5165\u4f5c\u4e1a\u53c2\u6570\u662f\u4f5c\u7528\u4e8e\u6574\u4e2a\u5bfc\u5165\u4f5c\u4e1a\u7684\u3002\u4e0b\u9762\u662f\u5bf9\u5176\u4e2d\u90e8\u5206\u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"timeout"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5bfc\u5165\u4f5c\u4e1a\u7684\u8d85\u65f6\u65f6\u95f4(\u4ee5\u79d2\u4e3a\u5355\u4f4d)\u3002\u7528\u6237\u53ef\u4ee5\u5728opt_properties\u4e2d\u81ea\u884c\u8bbe\u7f6e\u6bcf\u4e2a\u5bfc\u5165\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u5bfc\u5165\u4efb\u52a1\u5728\u8bbe\u5b9a\u7684\u65f6\u9650\u5185\u672a\u5b8c\u6210\u5219\u4f1a\u88ab\u7cfb\u7edf\u53d6\u6d88\uff0c\u53d8\u6210 CANCELLED\u3002Broker Load\u7684\u9ed8\u8ba4\u5bfc\u5165\u8d85\u65f6\u65f6\u95f4\u4e3a4\u5c0f\u65f6\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u4e0d\u9700\u8981\u624b\u52a8\u8bbe\u7f6e\u5bfc\u5165\u4efb\u52a1\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u5f53\u5728\u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\u5185\u65e0\u6cd5\u5b8c\u6210\u5bfc\u5165\u65f6\uff0c\u53ef\u4ee5\u624b\u52a8\u8bbe\u7f6e\u4efb\u52a1\u7684\u8d85\u65f6\u65f6\u95f4\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u63a8\u8350\u8d85\u65f6\u65f6\u95f4\u7684\u8ba1\u7b97\u65b9\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"\u8d85\u65f6\u65f6\u95f4 >\uff08\uff08\u603b\u6587\u4ef6\u5927\u5c0f(MB) * \u5f85\u5bfc\u5165\u7684\u8868\u53ca\u76f8\u5173 Roll up \u8868\u7684\u4e2a\u6570\uff09 / (30 * \u5bfc\u5165\u5e76\u53d1\u6570\uff09\uff09"})}),"\n",(0,s.jsx)(e.p,{children:"\u5bfc\u5165\u5e76\u53d1\u6570\u89c1\u6587\u6863\u6700\u540e\u7684\u5bfc\u5165\u7cfb\u7edf\u914d\u7f6e\u8bf4\u660e\uff0c\u516c\u5f0f\u4e2d\u768430\u4e3a\u76ee\u524dBE\u5bfc\u5165\u7684\u5e73\u5747\u901f\u5ea6\uff1a30MB/s\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4f8b\u5982\u5bf9\u4e8e1GB\u7684\u5f85\u5bfc\u5165\u6570\u636e\u6587\u4ef6\uff0c\u5f85\u5bfc\u5165\u8868\u5305\u542b2\u4e2aRollup\u8868\uff0c\u5f53\u524d\u7684\u5bfc\u5165\u5e76\u53d1\u6570\u4e3a3\u3002\u5219 timeout \u7684\u6700\u5c0f\u503c\u4e3a (1 * 1024 * 3 ) / (10 * 3) = 102 \u79d2"}),"\n",(0,s.jsx)(e.p,{children:"\u7531\u4e8e\u6bcf\u4e2a StarRocks \u96c6\u7fa4\u7684\u673a\u5668\u73af\u5883\u4e0d\u540c\u4e14\u96c6\u7fa4\u5e76\u53d1\u7684\u67e5\u8be2\u4efb\u52a1\u4e5f\u4e0d\u540c\uff0c\u6240\u4ee5 StarRocks \u96c6\u7fa4\u7684\u6700\u6162\u5bfc\u5165\u901f\u5ea6\u9700\u8981\u7528\u6237\u81ea\u5df1\u6839\u636e\u5386\u53f2\u7684\u5bfc\u5165\u4efb\u52a1\u901f\u5ea6\u8fdb\u884c\u63a8\u6d4b\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"max_filter_ratio"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5bfc\u5165\u4efb\u52a1\u7684\u6700\u5927\u5bb9\u5fcd\u7387\uff0c\u9ed8\u8ba4\u4e3a0\u5bb9\u5fcd\uff0c\u53d6\u503c\u8303\u56f4\u662f0~1\u3002\u5f53\u5bfc\u5165\u7684\u9519\u8bef\u7387\u8d85\u8fc7\u8be5\u503c\uff0c\u5219\u5bfc\u5165\u5931\u8d25\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u7528\u6237\u5e0c\u671b\u5ffd\u7565\u9519\u8bef\u7684\u884c\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u8fd9\u4e2a\u53c2\u6570\u5927\u4e8e 0\uff0c\u6765\u4fdd\u8bc1\u5bfc\u5165\u53ef\u4ee5\u6210\u529f\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u8ba1\u7b97\u516c\u5f0f\u4e3a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"max_filter_ratio = (dpp.abnorm.ALL / (dpp.abnorm.ALL + dpp.norm.ALL ) )"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"dpp.abnorm.ALL"})," \u8868\u793a\u6570\u636e\u8d28\u91cf\u4e0d\u5408\u683c\u7684\u884c\u6570\uff0c\u5982\u7c7b\u578b\u4e0d\u5339\u914d\u3001\u5217\u6570\u4e0d\u5339\u914d\u3001\u957f\u5ea6\u4e0d\u5339\u914d\u7b49\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"dpp.norm.ALL"})," \u6307\u7684\u662f\u5bfc\u5165\u8fc7\u7a0b\u4e2d\u6b63\u786e\u6570\u636e\u7684\u6761\u6570\u3002\u53ef\u4ee5\u901a\u8fc7 SHOW LOAD \u547d\u4ee4\u67e5\u8be2\u5bfc\u5165\u4efb\u52a1\u7684\u6b63\u786e\u6570\u636e\u91cf\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u539f\u59cb\u6587\u4ef6\u7684\u884c\u6570 = dpp.abnorm.ALL + dpp.norm.ALL"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"load_mem_limit"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5bfc\u5165\u5185\u5b58\u9650\u5236\u3002\u5355\u4f4d\u662f\u300c\u5b57\u8282\u300d\u3002\u9ed8\u8ba4\u662f 2GB\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"strict_mode"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:'Broker Load\u5bfc\u5165\u53ef\u4ee5\u5f00\u542fstrict mode\u6a21\u5f0f\u3002\u5f00\u542f\u65b9\u5f0f\u4e3a properties ("strict_mode" = "true") \u3002\u9ed8\u8ba4strict mode\u4e3a\u5173\u95ed\u3002'}),"\n",(0,s.jsx)(e.p,{children:"strict mode \u6a21\u5f0f\u7684\u610f\u601d\u662f\u5bf9\u4e8e\u5bfc\u5165\u8fc7\u7a0b\u4e2d\u7684\u5217\u7c7b\u578b\u8f6c\u6362\u8fdb\u884c\u4e25\u683c\u8fc7\u6ee4\u3002\u4e25\u683c\u8fc7\u6ee4\u7684\u7b56\u7565\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u5bf9\u4e8e\u5217\u7c7b\u578b\u8f6c\u6362\u6765\u8bf4\uff0c\u5982\u679cstrict mode\u4e3atrue\uff0c\u5219\u9519\u8bef\u7684\u6570\u636e\u5c06\u88ab\u8fc7\u6ee4\u6389\u3002\u8fd9\u91cc\u7684\u9519\u8bef\u6570\u636e\u662f\u6307\uff1a\u539f\u59cb\u6570\u636e\u5e76\u4e0d\u4e3a\u7a7a\u503c\uff0c\u5728\u53c2\u4e0e\u5217\u7c7b\u578b\u8f6c\u6362\u540e\u7ed3\u679c\u4e3a\u7a7a\u503c\u7684\u8fd9\u4e00\u7c7b\u6570\u636e\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4f46\uff0c\u4e00\u4e9b\u573a\u666f\u9664\u5916\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5bf9\u4e8e\u5bfc\u5165\u7684\u67d0\u5217",(0,s.jsx)(e.strong,{children:"\u7531\u51fd\u6570\u53d8\u6362\u751f\u6210\u65f6"}),"\uff0cstrict mode\u5bf9\u5176\u4e0d\u4ea7\u751f\u5f71\u54cd\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5bf9\u4e8e\u5bfc\u5165\u7684\u67d0\u5217\u7c7b\u578b\u5305\u542b\u8303\u56f4\u9650\u5236\u7684\uff0c\u5982\u679c\u539f\u59cb\u6570\u636e\u80fd\u6b63\u5e38\u901a\u8fc7\u7c7b\u578b\u8f6c\u6362\uff0c",(0,s.jsx)(e.strong,{children:"\u4f46\u65e0\u6cd5\u901a\u8fc7\u8303\u56f4\u9650\u5236\u7684"}),"\uff0cstrict mode\u5bf9\u5176\u4e5f\u4e0d\u4ea7\u751f\u5f71\u54cd\u3002\u4f8b\u5982\uff1a\u5982\u679c\u7c7b\u578b\u662fdecimal(1,0)\uff0c\u539f\u59cb\u6570\u636e\u4e3a10\uff0c\u5219\u5c5e\u4e8e\u53ef\u4ee5\u901a\u8fc7\u7c7b\u578b\u8f6c\u6362\u4f46\u4e0d\u5728\u5217\u58f0\u660e\u7684\u8303\u56f4\u5185\u3002\u8fd9\u79cd\u6570\u636estrict mode\u5bf9\u5176\u4e0d\u4ea7\u751f\u5f71\u54cd\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u67e5\u770b\u5bfc\u5165\u4efb\u52a1\u72b6\u6001",children:"\u67e5\u770b\u5bfc\u5165\u4efb\u52a1\u72b6\u6001"}),"\n",(0,s.jsx)(e.p,{children:"Broker Load\u5bfc\u5165\u662f\u5f02\u6b65\u7684\uff0c\u7528\u6237\u53ef\u4ee5\u5728SHOW LOAD\u547d\u4ee4\u4e2d\u6307\u5b9aLabel\u6765\u67e5\u8be2\u5bf9\u5e94\u5bfc\u5165\u4f5c\u4e1a\u7684\u6267\u884c\u72b6\u6001\u3002\u5177\u4f53\u8bed\u6cd5\u53ef\u6267\u884cHELP SHOW LOAD\u67e5\u770b\u3002\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cSHOW LOAD\u547d\u4ee4\u53ea\u80fd\u67e5\u770b\u5f02\u6b65\u5bfc\u5165\u65b9\u5f0f\u7684LOAD\u4efb\u52a1\u3002\u540c\u6b65\u65b9\u5f0f\u7684LOAD\u4efb\u52a1\uff0c\u5982Stream Load\u4efb\u52a1\uff0c\u76ee\u524d\u65e0\u6cd5\u4f7f\u7528SHOW LOAD\u547d\u4ee4\u67e5\u770b\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-Plain",metastring:"Text",children:'mysql> show load where label = \'label1\'\\G\n*************************** 1. row ***************************\n         JobId: 76391\n         Label: label1\n         State: FINISHED\n      Progress: ETL:N/A; LOAD:100%\n          Type: BROKER\n       EtlInfo: unselected.rows=4; dpp.abnorm.ALL=15; dpp.norm.ALL=28133376\n      TaskInfo: cluster:N/A; timeout(s):10800; max_filter_ratio:5.0E-5\n      ErrorMsg: N/A\n    CreateTime: 2019-07-27 11:46:42\n  EtlStartTime: 2019-07-27 11:46:44\n EtlFinishTime: 2019-07-27 11:46:44\n LoadStartTime: 2019-07-27 11:46:44\nLoadFinishTime: 2019-07-27 11:50:16\n           URL: http://192.168.1.1:8040/api/_load_error_log?file=__shard_4/error_log_insert_stmt_4bb00753932c491a-a6da6e2725415317_4bb00753932c491a_a6da6e2725415317\n    JobDetails: {"Unfinished backends":{"9c3441027ff948a0-8287923329a2b6a7":[10002]},"ScannedRows":2390016,"TaskNumber":1,"All backends":{"9c3441027ff948a0-8287923329a2b6a7":[10002]},"FileNumber":1,"FileSize":1073741824}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0b\u9762\u4ecb\u7ecdSHOW LOAD\u547d\u4ee4\u8fd4\u56de\u7ed3\u679c\u96c6\u4e2d\u53c2\u6570\u7684\u610f\u4e49\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["JobId:  \u5bfc\u5165\u4efb\u52a1\u7684\u552f\u4e00ID\uff0c\u6bcf\u4e2a\u5bfc\u5165\u4efb\u52a1\u7684JobId\u90fd\u4e0d\u540c\uff0c\u7531\u7cfb\u7edf\u81ea\u52a8\u751f\u6210\u3002\u4e0eLabel\u4e0d\u540c\u7684\u662f\uff0cJobId",(0,s.jsx)(e.strong,{children:"\u6c38\u8fdc\u4e0d\u4f1a\u76f8\u540c"}),"\uff0c\u800cLabel\u5219\u53ef\u4ee5\u5728\u5bfc\u5165\u4efb\u52a1\u5931\u8d25\u540e\u88ab\u590d\u7528\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Label:  \u5bfc\u5165\u4efb\u52a1\u7684\u6807\u8bc6\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"State:  \u5bfc\u5165\u4efb\u52a1\u5f53\u524d\u6240\u5904\u7684\u9636\u6bb5\u3002\u5728Broker load\u5bfc\u5165\u8fc7\u7a0b\u4e2d\u4e3b\u8981\u4f1a\u51fa\u73b0PENDING\u548cLOADING\u8fd9\u4e24\u4e2a\u5bfc\u5165\u4e2d\u7684\u72b6\u6001\u3002\u5982\u679cBroker load\u5904\u4e8ePENDING\u72b6\u6001\uff0c\u5219\u8bf4\u660e\u5f53\u524d\u5bfc\u5165\u4efb\u52a1\u6b63\u5728\u7b49\u5f85\u88ab\u6267\u884c\uff1bLOADING\u72b6\u6001\u5219\u8868\u793a\u6b63\u5728\u6267\u884c\u4e2d\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5bfc\u5165\u4efb\u52a1\u7684\u6700\u7ec8\u9636\u6bb5\u6709\u4e24\u4e2a\uff1aCANCELLED\u548cFINISHED\u3002\u5f53\u4efb\u52a1\u5904\u4e8e\u8fd9\u4e24\u4e2a\u9636\u6bb5\u65f6\uff0c\u5bfc\u5165\u5b8c\u6210\u3002\u5176\u4e2dCANCELLED\u4e3a\u5bfc\u5165\u5931\u8d25\uff0cFINISHED\u4e3a\u5bfc\u5165\u6210\u529f\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Progress:  \u5bfc\u5165\u4efb\u52a1\u7684\u8fdb\u5ea6\u63cf\u8ff0\u3002\u5206\u4e3a\u4e24\u79cd\u8fdb\u5ea6\uff1aETL\u548cLOAD\uff0c\u5206\u522b\u5bf9\u5e94\u5bfc\u5165\u6d41\u7a0b\u7684\u4e24\u4e2a\u9636\u6bb5 ETL\u548cLOADING\u3002\u76ee\u524dBroker Load\u53ea\u6709LOADING\u9636\u6bb5\uff0c\u6240\u4ee5ETL\u56fa\u5b9a\u663e\u793a\u4e3a N/A\uff0c\u800cLOAD\u7684\u8fdb\u5ea6\u8303\u56f4\u4e3a\uff1a0~100%\u3002LOAD\u8fdb\u5ea6 = \u5f53\u524d\u5b8c\u6210\u5bfc\u5165\u7684\u8868\u4e2a\u6570 / \u672c\u6b21\u5bfc\u5165\u4efb\u52a1\u8bbe\u8ba1\u7684\u603b\u8868\u4e2a\u6570 * 100%"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u6240\u6709\u5bfc\u5165\u8868\u5747\u5b8c\u6210\u5bfc\u5165\uff0c\u6b64\u65f6 LOAD \u7684\u8fdb\u5ea6\u4e3a 99%\uff0c \u5bfc\u5165\u8fdb\u5165\u5230\u6700\u540e\u751f\u6548\u9636\u6bb5\uff0c\u6574\u4e2a\u5bfc\u5165\u5b8c\u6210\u540e\uff0cLOAD \u7684\u8fdb\u5ea6\u624d\u4f1a\u6539\u4e3a 100%\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u5bfc\u5165\u8fdb\u5ea6\u5e76\u4e0d\u662f\u7ebf\u6027\u7684\uff0c\u6240\u4ee5\u5982\u679c\u4e00\u6bb5\u65f6\u95f4\u5185\u8fdb\u5ea6\u6ca1\u6709\u53d8\u5316\uff0c\u5e76\u4e0d\u4ee3\u8868\u5bfc\u5165\u6ca1\u6709\u5728\u6267\u884c\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Type:  \u5bfc\u5165\u4efb\u52a1\u7684\u7c7b\u578b\u3002Broker Load \u7684 type \u53d6\u503c\u662f BROKER\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"EtlInfo:  \u4e3b\u8981\u663e\u793a\u4e86\u5bfc\u5165\u7684\u6570\u636e\u91cf\u6307\u6807 unselected.rows , dpp.norm.ALL \u548c dpp.abnorm.ALL\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u7b2c\u4e00\u4e2a\u6570\u503c\u5224\u65ad where \u6761\u4ef6\u8fc7\u6ee4\u4e86\u591a\u5c11\u884c\uff0c\u540e\u4e24\u4e2a\u6307\u6807\u9a8c\u8bc1\u5f53\u524d\u5bfc\u5165\u4efb\u52a1\u7684\u9519\u8bef\u7387\u662f\u5426\u8d85\u8fc7 max-filter-ratio\u3002\u4e09\u4e2a\u6307\u6807\u4e4b\u548c\u5c31\u662f\u539f\u59cb\u6570\u636e\u91cf\u7684\u603b\u884c\u6570\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"TaskInfo:  \u4e3b\u8981\u663e\u793a\u4e86\u5f53\u524d\u5bfc\u5165\u4efb\u52a1\u53c2\u6570\uff0c\u4e5f\u5c31\u662f\u521b\u5efa Broker Load \u5bfc\u5165\u4efb\u52a1\u65f6\u7528\u6237\u6307\u5b9a\u7684\u53c2\u6570\uff0c\u5305\u62ec\uff1acluster\uff0ctimeout \u548c max-filter-ratio\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["ErrorMsg:  \u5982\u679c\u5bfc\u5165\u4efb\u52a1\u72b6\u6001\u4e3aCANCELLED\uff0c\u4f1a\u663e\u793a\u5931\u8d25\u7684\u539f\u56e0\uff0c\u5305\u62ec\u4e24\u90e8\u5206\uff1a",(0,s.jsx)(e.strong,{children:"type"})," \u548c ",(0,s.jsx)(e.strong,{children:"msg"}),"\u3002\u5982\u679c\u5bfc\u5165\u4efb\u52a1\u6210\u529f\u5219\u663e\u793a N/A\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"type"}),"\u7684\u53d6\u503c\u610f\u4e49\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"USER-CANCEL: \u7528\u6237\u53d6\u6d88\u7684\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"ETL-RUN-FAIL:  \u5728ETL\u9636\u6bb5\u5931\u8d25\u7684\u5bfc\u5165\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"ETL-QUALITY-UNSATISFIED:  \u6570\u636e\u8d28\u91cf\u4e0d\u5408\u683c\uff0c\u4e5f\u5c31\u662f\u9519\u8bef\u6570\u636e\u7387\u8d85\u8fc7\u4e86 max-filter-ratio"}),"\n",(0,s.jsx)(e.li,{children:"LOAD-RUN-FAIL:  \u5728LOADING\u9636\u6bb5\u5931\u8d25\u7684\u5bfc\u5165\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"TIMEOUT:  \u5bfc\u5165\u4efb\u52a1\u6ca1\u5728\u8d85\u65f6\u65f6\u95f4\u5185\u5b8c\u6210"}),"\n",(0,s.jsx)(e.li,{children:"UNKNOWN:  \u672a\u77e5\u7684\u5bfc\u5165\u9519\u8bef"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"CreateTime/EtlStartTime/EtlFinishTime/LoadStartTime/LoadFinishTime:  \u8fd9\u51e0\u4e2a\u503c\u5206\u522b\u4ee3\u8868\u5bfc\u5165\u521b\u5efa\u7684\u65f6\u95f4\u3001ETL\u9636\u6bb5\u5f00\u59cb\u7684\u65f6\u95f4\u3001ETL\u9636\u6bb5\u5b8c\u6210\u7684\u65f6\u95f4\u3001Loading\u9636\u6bb5\u5f00\u59cb\u7684\u65f6\u95f4\u548c\u6574\u4e2a\u5bfc\u5165\u4efb\u52a1\u5b8c\u6210\u7684\u65f6\u95f4\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Broker Load \u5bfc\u5165\u7531\u4e8e\u6ca1\u6709 ETL \u9636\u6bb5\uff0c\u6240\u4ee5\u5176 EtlStartTime, EtlFinishTime, LoadStartTime \u88ab\u8bbe\u7f6e\u4e3a\u540c\u4e00\u4e2a\u503c\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u82e5\u5bfc\u5165\u4efb\u52a1\u957f\u65f6\u95f4\u505c\u7559\u5728 CreateTime\uff0c\u800c LoadStartTime \u4e3a N/A \uff0c\u5219\u8bf4\u660e\u76ee\u524d\u5bfc\u5165\u4efb\u52a1\u5806\u79ef\u4e25\u91cd\uff0c\u7528\u6237\u53ef\u51cf\u5c11\u5bfc\u5165\u63d0\u4ea4\u7684\u9891\u7387\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-Plain",metastring:"Text",children:"LoadFinishTime - CreateTime = \u6574\u4e2a\u5bfc\u5165\u4efb\u52a1\u6240\u6d88\u8017\u65f6\u95f4\n\nLoadFinishTime - LoadStartTime = \u6574\u4e2a Broker load \u5bfc\u5165\u4efb\u52a1\u6267\u884c\u65f6\u95f4 = \u6574\u4e2a\u5bfc\u5165\u4efb\u52a1\u6240\u6d88\u8017\u65f6\u95f4 - \u5bfc\u5165\u4efb\u52a1\u7b49\u5f85\u7684\u65f6\u95f4\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"URL:  \u5bfc\u5165\u4efb\u52a1\u7684\u9519\u8bef\u6570\u636e\u6837\u4f8b\uff0c\u8bbf\u95ee URL \u5730\u5740\u5373\u53ef\u83b7\u53d6\u672c\u6b21\u5bfc\u5165\u7684\u9519\u8bef\u6570\u636e\u6837\u4f8b\u3002\u5f53\u672c\u6b21\u5bfc\u5165\u4e0d\u5b58\u5728\u9519\u8bef\u6570\u636e\u65f6\uff0cURL\u5b57\u6bb5\u5219\u4e3aN/A\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"JobDetails:  \u663e\u793a\u4f5c\u4e1a\u7684\u8be6\u7ec6\u8fd0\u884c\u72b6\u6001\u3002\u5305\u62ec\u5bfc\u5165\u6587\u4ef6\u7684\u4e2a\u6570\u3001\u603b\u5927\u5c0f\uff08\u5b57\u8282\uff09\u3001\u5b50\u4efb\u52a1\u4e2a\u6570\u3001\u5df2\u5904\u7406\u7684\u539f\u59cb\u884c\u6570\uff0c\u8fd0\u884c\u5b50\u4efb\u52a1\u7684BE\u8282\u70b9 Id\uff0c\u672a\u5b8c\u6210\u7684BE\u8282\u70b9 Id\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-Json",children:'{"Unfinished backends":{"9c3441027ff948a0-8287923329a2b6a7":[10002]},"ScannedRows":2390016,"TaskNumber":1,"All backends":{"9c3441027ff948a0-8287923329a2b6a7":[10002]},"FileNumber":1,"FileSize":1073741824}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5176\u4e2d\u5df2\u5904\u7406\u7684\u539f\u59cb\u884c\u6570\uff0c\u6bcf 5 \u79d2\u66f4\u65b0\u4e00\u6b21\u3002\u8be5\u884c\u6570\u4ec5\u7528\u4e8e\u5c55\u793a\u5f53\u524d\u7684\u8fdb\u5ea6\uff0c\u4e0d\u4ee3\u8868\u6700\u7ec8\u5b9e\u9645\u7684\u5904\u7406\u884c\u6570\u3002\u5b9e\u9645\u5904\u7406\u884c\u6570\u4ee5 EtlInfo \u4e2d\u663e\u793a\u7684\u6570\u636e\u4e3a\u51c6\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u53d6\u6d88\u5bfc\u5165\u4efb\u52a1",children:"\u53d6\u6d88\u5bfc\u5165\u4efb\u52a1"}),"\n",(0,s.jsxs)(e.p,{children:["\u5f53 Broker Load \u4f5c\u4e1a\u72b6\u6001\u4e0d\u4e3a CANCELLED \u6216 FINISHED \u65f6\uff0c\u53ef\u4ee5\u88ab\u7528\u6237\u624b\u52a8\u53d6\u6d88\u3002\u53d6\u6d88\u65f6\u9700\u8981\u6307\u5b9a\u5f85\u53d6\u6d88\u5bfc\u5165\u4efb\u52a1\u7684 Label \u3002\u53ef\u6267\u884c ",(0,s.jsx)(e.code,{children:"HELP CANCEL LOAD"})," \u67e5\u770b\u53d6\u6d88\u5bfc\u5165\u547d\u4ee4\u7684\u8bed\u6cd5\u3002"]}),"\n",(0,s.jsx)(e.h2,{id:"\u76f8\u5173\u914d\u7f6e",children:"\u76f8\u5173\u914d\u7f6e"}),"\n",(0,s.jsx)(e.h3,{id:"\u5e76\u884c\u5ea6",children:"\u5e76\u884c\u5ea6"}),"\n",(0,s.jsx)(e.p,{children:"\u4e00\u4e2a\u4f5c\u4e1a\u53ef\u4ee5\u62c6\u6210\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u4efb\u52a1\uff0c\u4efb\u52a1\u4e4b\u95f4\u5e76\u884c\u6267\u884c\u3002\u62c6\u5206\u7531LOAD\u8bed\u53e5\u4e2d\u7684DataDescription\u6765\u51b3\u5b9a\u3002\u6bd4\u5982\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u591a\u4e2aDataDescription\u5bf9\u5e94\u5bfc\u5165\u591a\u4e2a\u4e0d\u540c\u7684\u8868\uff0c\u6bcf\u4e2a\u4f1a\u62c6\u6210\u4e00\u4e2a\u4efb\u52a1\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u591a\u4e2aDataDescription\u5bf9\u5e94\u5bfc\u5165\u540c\u4e00\u4e2a\u8868\u7684\u4e0d\u540c\u5206\u533a\uff0c\u6bcf\u4e2a\u4e5f\u4f1a\u62c6\u6210\u4e00\u4e2a\u4efb\u52a1\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u6bcf\u4e2a\u4efb\u52a1\u8fd8\u4f1a\u62c6\u5206\u6210\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5b9e\u4f8b\uff0c\u7136\u540e\u5c06\u8fd9\u4e9b\u5b9e\u4f8b\u5e73\u5747\u5206\u914d\u5230BE\u4e0a\u5e76\u884c\u6267\u884c\u3002\u5b9e\u4f8b\u7684\u62c6\u5206\u7531\u4ee5\u4e0bFE\u914d\u7f6e\u51b3\u5b9a\uff1a\n",(0,s.jsx)(e.code,{children:"min_bytes_per_broker_scanner"}),"\uff1a\u5355\u4e2a\u5b9e\u4f8b\u5904\u7406\u7684\u6700\u5c0f\u6570\u636e\u91cf\uff0c\u9ed8\u8ba464MB\u3002\n",(0,s.jsx)(e.code,{children:"max_broker_concurrency"}),"\uff1a\u5355\u4e2a\u4efb\u52a1\u6700\u5927\u5e76\u53d1\u5b9e\u4f8b\u6570\uff0c\u9ed8\u8ba4100\u4e2a\u3002\n",(0,s.jsx)(e.code,{children:"load_parallel_instance_num"}),"\uff1a\u5355\u4e2aBE\u4e0a\u5e76\u53d1\u5b9e\u4f8b\u6570\uff0c\u9ed8\u8ba41\u4e2a\u3002\n\u5b9e\u4f8b\u7684\u603b\u6570=min(\u5bfc\u5165\u6587\u4ef6\u603b\u5927\u5c0f/\u5355\u4e2a\u5b9e\u4f8b\u5904\u7406\u7684\u6700\u5c0f\u6570\u636e\u91cf\uff0c\u5355\u4e2a\u4efb\u52a1\u6700\u5927\u5e76\u53d1\u5b9e\u4f8b\u6570\uff0c\u5355\u4e2aBE\u4e0a\u5e76\u53d1\u5b9e\u4f8b\u6570 * BE\u6570)"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u4f5c\u4e1a\u53ea\u6709\u4e00\u4e2aDataDescription\uff0c\u53ea\u4f1a\u62c6\u5206\u6210\u4e00\u4e2a\u4efb\u52a1\u3002\u4efb\u52a1\u4f1a\u62c6\u6210\u4e0eBE\u6570\u76f8\u7b49\u7684\u5b9e\u4f8b\uff0c\u7136\u540e\u5206\u914d\u5230\u6240\u6709BE\u4e0a\u5e76\u884c\u6267\u884c\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Q\uff1a\u6570\u636e\u8d28\u91cf\u95ee\u9898\u62a5\u9519\uff1aETL_QUALITY_UNSATISFIED; msg",(0,s.jsx)(e.div,{})," not good enough to cancel"]}),"\n",(0,s.jsx)(e.p,{children:"A: \u53ef\u53c2\u8003\u7ae0\u8282\u5bfc\u5165\u603b\u89c8/\u5e38\u89c1\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Q\uff1a\u5bfc\u5165\u62a5\u9519\uff1afailed to send batch \u6216 TabletWriter add batch with unknown id"}),"\n",(0,s.jsx)(e.p,{children:"A\uff1a\u8bf7\u53c2\u7167\u7ae0\u8282\u5bfc\u5165\u603b\u89c8/\u901a\u7528\u7cfb\u7edf\u914d\u7f6e/BE\u914d\u7f6e\uff0c\u9002\u5f53\u4fee\u6539 query_timeout \u548c streaming_load_rpc_max_alive_time_sec\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Q\uff1a\u5bfc\u5165\u62a5\u9519\uff1aLOAD-RUN-FAIL; msg:OrcScannerAdapter::init_include_columns. col name = xxx not found"}),"\n",(0,s.jsx)(e.p,{children:"A\uff1a\u5982\u679c\u662fParquet\u6216\u8005ORC\u683c\u5f0f\u7684\u6570\u636e\uff0c\u9700\u8981\u4fdd\u6301\u6587\u4ef6\u5934\u7684\u5217\u540d\u4e0eStarRocks\u8868\u4e2d\u7684\u5217\u540d\u4e00\u81f4\uff0c\u5982 :"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"(tmp_c1,tmp_c2)\nSET\n(\n   id=tmp_c2,\n   name=tmp_c1\n)\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8868\u793a\u5c06Parquet\u6216ORC\u6587\u4ef6\u4e2d\u4ee5(tmp_c1, tmp_c2)\u4e3a\u5217\u540d\u7684\u5217\uff0c\u6620\u5c04\u5230StarRocks\u8868\u4e2d\u7684(id, name)\u5217\u3002\u5982\u679c\u6ca1\u6709\u8bbe\u7f6eset, \u5219\u4ee5column\u4e2d\u7684\u5217\u4f5c\u4e3a\u6620\u5c04\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a\u5982\u679c\u4f7f\u7528\u67d0\u4e9bHive\u7248\u672c\u76f4\u63a5\u751f\u6210\u7684ORC\u6587\u4ef6\uff0cORC\u6587\u4ef6\u4e2d\u7684\u8868\u5934\u5e76\u975eHive meta\u6570\u636e\uff0c\u800c\u662f",(0,s.jsx)(e.code,{children:"\uff08_col0, _col1, _col2, ...\uff09"}),", \u53ef\u80fd\u5bfc\u81f4Invalid Column Name\u9519\u8bef\uff0c\u90a3\u4e48\u5219\u9700\u8981\u4f7f\u7528set\u8fdb\u884c\u6620\u5c04\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Q\uff1a\u5176\u4ed6\u9519\u8bef\uff1a"}),"\n",(0,s.jsxs)(e.p,{children:["A\uff1a\u5176\u4ed6\u957f\u65f6\u95f4\u6ca1\u6709\u7ed3\u675f\u7b49\u95ee\u9898\uff0c\u53ef\u4ee5\u5230 BE \u7684 ",(0,s.jsx)(e.code,{children:"log/be.INFO"})," \u4e2d\uff0c\u641c\u7d22",(0,s.jsx)(e.code,{children:"kafka error"})," \uff0c\u4e86\u89e3\u5177\u4f53\u4e00\u4e9b\u4ec0\u4e48\u539f\u56e0\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Q\uff1a\u5982\u4f55\u914d\u7f6eHadoop HA"}),"\n",(0,s.jsx)(e.p,{children:"A\uff1a\u4ee5\u4e0b\u914d\u7f6e\u7528\u4e8e\u8bbf\u95ee\u4ee5 HA \u6a21\u5f0f\u90e8\u7f72\u7684 HDFS \u96c6\u7fa4\u3002"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"dfs.nameservices"}),'\uff1a\u6307\u5b9a hdfs \u670d\u52a1\u7684\u540d\u5b57\uff0c\u81ea\u5b9a\u4e49\uff0c\u5982\uff1a"dfs.nameservices" = "my_ha"\u3002']}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"dfs.ha.namenodes.xxx"}),"\uff1a\u81ea\u5b9a\u4e49 namenode \u7684\u540d\u5b57,\u591a\u4e2a\u540d\u5b57\u4ee5\u9017\u53f7\u5206\u9694\u3002\u5176\u4e2d xxx \u4e3a",(0,s.jsx)(e.code,{children:"dfs.nameservices"}),'\u4e2d\u81ea\u5b9a\u4e49\u7684\u540d\u5b57\uff0c\u5982\uff1a "dfs.ha.namenodes.my_ha" = "my_nn"\u3002']}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"dfs.namenode.rpc-address.xxx.nn"}),"\uff1a\u6307\u5b9a namenode \u7684rpc\u5730\u5740\u4fe1\u606f\u3002\u5176\u4e2d nn \u8868\u793a",(0,s.jsx)(e.code,{children:"dfs.ha.namenodes.xxx"}),'\u4e2d\u914d\u7f6e\u7684 namenode \u7684\u540d\u5b57\uff0c\u5982\uff1a"dfs.namenode.rpc-address.my_ha.my_nn" = "host',(0,s.jsx)(e.div,{}),'"\u3002']}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"dfs.client.failover.proxy.provider"}),"\uff1a\u6307\u5b9a client \u8fde\u63a5 namenode \u7684 provider\uff0c\u9ed8\u8ba4\u4e3a\uff1aorg.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u793a\u4f8b\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:'(\n    "dfs.nameservices" = "my-ha",\n    "dfs.ha.namenodes.my-ha" = "my-namenode1, my-namenode2",\n    "dfs.namenode.rpc-address.my-ha.my-namenode1" = "nn1-host:rpc_port",\n    "dfs.namenode.rpc-address.my-ha.my-namenode2" = "nn2-host:rpc_port",\n    "dfs.client.failover.proxy.provider" = "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"\n)\n\n'})}),"\n",(0,s.jsx)(e.p,{children:"HA \u6a21\u5f0f\u53ef\u4ee5\u548c\u524d\u9762\u4e24\u79cd\u8ba4\u8bc1\u65b9\u5f0f\u7ec4\u5408\uff0c\u8fdb\u884c\u96c6\u7fa4\u8bbf\u95ee\u3002\u5982\u901a\u8fc7\u7b80\u5355\u8ba4\u8bc1\u8bbf\u95ee HA HDFS\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:'(\n    "username"="user",\n    "password"="passwd",\n    "dfs.nameservices" = "my-ha",\n    "dfs.ha.namenodes.my-ha" = "my_namenode1, my_namenode2",\n    "dfs.namenode.rpc-address.my-ha.my-namenode1" = "nn1-host:rpc_port",\n    "dfs.namenode.rpc-address.my-ha.my-namenode2" = "nn2-host:rpc_port",\n    "dfs.client.failover.proxy.provider" = "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"\n)\n\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5173\u4e8eHDFS\u96c6\u7fa4\u7684\u914d\u7f6e\u53ef\u4ee5\u5199\u5165hdfs-site.xml\u6587\u4ef6\u4e2d\uff0c\u7528\u6237\u4f7f\u7528Broker\u8fdb\u7a0b\u8bfb\u53d6HDFS\u96c6\u7fa4\u7684\u4fe1\u606f\u65f6\uff0c\u53ea\u9700\u8981\u586b\u5199\u96c6\u7fa4\u7684\u6587\u4ef6\u8def\u5f84\u540d\u548c\u8ba4\u8bc1\u4fe1\u606f\u5373\u53ef\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Q\uff1a\u5982\u4f55\u914d\u7f6eHadoop ViewFS \uff08federation\uff09"}),"\n",(0,s.jsx)(e.p,{children:"A\uff1a\u9700\u8981\u5c06 ViewFs \u76f8\u5173\u7684\u914d\u7f6e core-site.xml \u548c hdfs-site.xml \u62f7\u8d1d\u5230 broker/conf \u76ee\u5f55\u4e2d\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u7684 FileSystem\uff0c\u9700\u8981\u5c06\u76f8\u5173\u7684 jar \u62f7\u8d1d\u5230 broker/lib \u76ee\u5f55\u4e2d\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Q\uff1a\u8bbf\u95eekerberos\u8ba4\u8bc1\u7684\u96c6\u7fa4\u65f6\uff0c\u62a5\u9519\uff1a",(0,s.jsx)(e.code,{children:"Can't get Kerberos realm"})]}),"\n",(0,s.jsxs)(e.p,{children:["A\uff1a\u9996\u5148\u68c0\u67e5\u662f\u4e0d\u662f\u6240\u6709\u7684broker\u6240\u5728\u673a\u5668\u662f\u5426\u90fd\u914d\u7f6e\u4e86",(0,s.jsx)(e.code,{children:"/etc/krb5.conf"}),"\u6587\u4ef6\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u914d\u7f6e\u4e86\u4ecd\u7136\u62a5\u9519\uff0c\u9700\u8981\u5728broker\u7684\u542f\u52a8\u811a\u672c\u4e2d\u7684",(0,s.jsx)(e.code,{children:"JAVA_OPTS"}),"\u53d8\u91cf\u6700\u540e\uff0c\u52a0\u4e0a",(0,s.jsx)(e.code,{children:"-Djava.security.krb5.conf:/etc/krb5.conf"}),"\u3002"]}),"\n"]}),"\n"]})]})}const t=function(n={}){const{wrapper:e}=Object.assign({},(0,l.ah)(),n.components);return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(h,n)})):h(n)}},71418:(n,e,r)=>{r.d(e,{Z:()=>s});const s=r.p+"assets/images/4.2.2-1-3f28545c160c67e87bc0d8e454d67dda.png"},11151:(n,e,r)=>{r.d(e,{Zo:()=>c,ah:()=>d});var s=r(67294);const l=s.createContext({});function d(n){const e=s.useContext(l);return s.useMemo((()=>"function"==typeof n?n(e):{...e,...n}),[e,n])}const i={};function c({components:n,children:e,disableParentContext:r}){let c;return c=r?"function"==typeof n?n({}):n||i:d(n),s.createElement(l.Provider,{value:c},e)}}}]);