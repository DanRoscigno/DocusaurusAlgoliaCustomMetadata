"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[18123],{14395:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});var c=s(85893),r=s(11151);const l={displayed_sidebar:"Chinese"},i="\u6570\u7ec4",t={id:"using_starrocks/Array",title:"\u6570\u7ec4",description:"\u80cc\u666f",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.0/using_starrocks/Array.md",sourceDirName:"using_starrocks",slug:"/using_starrocks/Array",permalink:"/zh/docs/2.0/using_starrocks/Array",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/docs.zh-cn/edit/main/using_starrocks/Array.md",tags:[],version:"2.0",frontMatter:{displayed_sidebar:"Chinese"},sidebar:"Chinese",previous:{title:"Spark StarRocks Connector",permalink:"/zh/docs/2.0/unloading/Spark_connector"},next:{title:"Colocate Join",permalink:"/zh/docs/2.0/using_starrocks/Colocation_join"}},a={},d=[{value:"\u80cc\u666f",id:"\u80cc\u666f",level:2},{value:"\u6570\u7ec4\u4f7f\u7528",id:"\u6570\u7ec4\u4f7f\u7528",level:2},{value:"\u6570\u7ec4\u5b9a\u4e49",id:"\u6570\u7ec4\u5b9a\u4e49",level:3},{value:"\u5728SQL\u4e2d\u6784\u9020\u6570\u7ec4",id:"\u5728sql\u4e2d\u6784\u9020\u6570\u7ec4",level:3},{value:"\u6570\u7ec4\u5bfc\u5165",id:"\u6570\u7ec4\u5bfc\u5165",level:3},{value:"\u6570\u7ec4\u5143\u7d20\u8bbf\u95ee",id:"\u6570\u7ec4\u5143\u7d20\u8bbf\u95ee",level:3}];function o(n){const e=Object.assign({h1:"h1",h2:"h2",p:"p",code:"code",h3:"h3",pre:"pre",ul:"ul",li:"li",strong:"strong"},(0,r.ah)(),n.components);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.h1,{id:"\u6570\u7ec4",children:"\u6570\u7ec4"}),"\n",(0,c.jsx)(e.h2,{id:"\u80cc\u666f",children:"\u80cc\u666f"}),"\n",(0,c.jsx)(e.p,{children:"\u6570\u7ec4\uff0c\u4f5c\u4e3a\u6570\u636e\u5e93\u7684\u4e00\u79cd\u6269\u5c55\u7c7b\u578b\uff0c\u5728 PG\u3001ClickHouse\u3001Snowflake \u7b49\u7cfb\u7edf\u4e2d\u90fd\u6709\u76f8\u5173\u7279\u6027\u652f\u6301\uff0c\u53ef\u4ee5\u5e7f\u6cdb\u7684\u5e94\u7528\u4e8eA/B Test\u5bf9\u6bd4\u3001\u7528\u6237\u6807\u7b7e\u5206\u6790\u3001\u4eba\u7fa4\u753b\u50cf\u7b49\u573a\u666f\u3002StarRocks \u5f53\u524d\u652f\u6301\u4e86 \u591a\u7ef4\u6570\u7ec4\u5d4c\u5957\u3001\u6570\u7ec4\u5207\u7247\u3001\u6bd4\u8f83\u3001\u8fc7\u6ee4\u7b49\u7279\u6027\u3002"}),"\n",(0,c.jsxs)(e.p,{children:["\u4e0b\u9762\u7b80\u8981\u4ecb\u7ecd\u4e00\u4e9b\u662f\u4f7f\u7528\u65b9\u5f0f\uff0c\u66f4\u8be6\u7ec6\u7684\u51fd\u6570\u8bed\u6cd5\u8bf7\u67e5\u770b ",(0,c.jsx)(e.code,{children:"\u53c2\u8003\u624b\u518c > \u51fd\u6570\u53c2\u8003 > \u6570\u7ec4\u51fd\u6570"}),"\u3002"]}),"\n",(0,c.jsx)("br",{}),"\n",(0,c.jsx)(e.h2,{id:"\u6570\u7ec4\u4f7f\u7528",children:"\u6570\u7ec4\u4f7f\u7528"}),"\n",(0,c.jsx)(e.h3,{id:"\u6570\u7ec4\u5b9a\u4e49",children:"\u6570\u7ec4\u5b9a\u4e49"}),"\n",(0,c.jsx)(e.p,{children:"\u4e0b\u9762\u662f\u5728StarRocks\u4e2d\u5b9a\u4e49\u6570\u7ec4\u5217\u7684\u4f8b\u5b50"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-SQL",children:"-- \u4e00\u7ef4\u6570\u7ec4\ncreate table t0(\n  c0 INT,\n  c1 ARRAY<INT>\n)\nduplicate key(c0)\ndistributed by hash(c0) buckets 3;  -- \u4ee5\u52063\u4e2a\u6876\u4e3a\u4f8b\u3002\n\n-- \u5b9a\u4e49\u5d4c\u5957\u6570\u7ec4\ncreate table t1(\n  c0 INT,\n  c1 ARRAY<ARRAY<VARCHAR(10)>>\n)\nduplicate key(c0)\ndistributed by hash(c0) buckets 3;\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u5982\u4e0a\uff0c\u6570\u7ec4\u5217\u7684\u5b9a\u4e49\u5f62\u5f0f\u4e3a ",(0,c.jsx)(e.code,{children:"ARRAY"}),"\uff0c\u5176\u4e2d TYPE \u662f\u6570\u7ec4\u5143\u7d20\u7c7b\u578b\uff0c\u9ed8\u8ba4 nullable\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u6307\u5b9a\u5143\u7d20\u7c7b\u578b\u4e3a NOT NULL\uff0c\u4f46\u662f\u53ef\u4ee5\u5b9a\u4e49\u6570\u7ec4\u672c\u8eab\u4e3a NOT NULL\u3002"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-SQL",children:"create table t2(\n  c0 INT,\n  c1 ARRAY<INT> NOT NULL\n)\nduplicate key(c0)\ndistributed by hash(c0) buckets 3;\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u6570\u7ec4\u7c7b\u578b\u6709\u4ee5\u4e0b\u9650\u5236"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"\u53ea\u80fd\u5728duplicate table\u4e2d\u5b9a\u4e49\u6570\u7ec4\u5217"}),"\n",(0,c.jsx)(e.li,{children:"\u6570\u7ec4\u5217\u4e0d\u80fd\u4f5c\u4e3akey\u5217(\u4ee5\u540e\u53ef\u80fd\u652f\u6301)"}),"\n",(0,c.jsx)(e.li,{children:"\u6570\u7ec4\u5217\u4e0d\u80fd\u4f5c\u4e3adistribution\u5217"}),"\n",(0,c.jsx)(e.li,{children:"\u6570\u7ec4\u5217\u4e0d\u80fd\u4f5c\u4e3apartition\u5217"}),"\n"]}),"\n",(0,c.jsx)("br",{}),"\n",(0,c.jsx)(e.h3,{id:"\u5728sql\u4e2d\u6784\u9020\u6570\u7ec4",children:"\u5728SQL\u4e2d\u6784\u9020\u6570\u7ec4"}),"\n",(0,c.jsx)(e.p,{children:'\u53ef\u4ee5\u5728SQL\u4e2d\u901a\u8fc7\u4e2d\u62ec\u53f7\uff08 "[" \u548c "]" \uff09\u6765\u6784\u9020\u6570\u7ec4\u5e38\u91cf\uff0c\u6bcf\u4e2a\u6570\u7ec4\u5143\u7d20\u901a\u8fc7\u9017\u53f7(",")\u5206\u5272'}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-SQL",children:'select [1, 2, 3] as numbers;\nselect ["apple", "orange", "pear"] as fruit;\nselect [true, false] as booleans;\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u5f53\u6570\u7ec4\u5143\u7d20\u5177\u6709\u4e0d\u540c\u7c7b\u578b\u65f6\uff0cStarRocks\u4f1a\u81ea\u52a8\u63a8\u5bfc\u51fa\u5408\u9002\u7684\u7c7b\u578b(supertype)"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-SQL",children:'select [1, 1.2] as floats;\nselect [12, "100"]; -- \u7ed3\u679c\u662f ["12", "100"]\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u53ef\u4ee5\u4f7f\u7528\u5c16\u62ec\u53f7(",(0,c.jsx)(e.code,{children:"<>"}),")\u663e\u793a\u58f0\u660e\u6570\u7ec4\u7c7b\u578b"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-SQL",children:'select ARRAY<float>[1, 2];\nselect ARRAY<INT>["12", "100"]; -- \u7ed3\u679c\u662f [12, 100]\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u5143\u7d20\u4e2d\u53ef\u4ee5\u5305\u542bNULL"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-SQL",children:"select [1, NULL];\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u5bf9\u4e8e\u7a7a\u6570\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528\u5c16\u62ec\u53f7\u663e\u793a\u58f0\u660e\u5176\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5199[]\uff0c\u6b64\u65f6StarRocks\u4f1a\u6839\u636e\u4e0a\u4e0b\u6587\u63a8\u65ad\u5176\u7c7b\u578b\uff0c\u5982\u679c\u65e0\u6cd5\u63a8\u65ad\u5219\u4f1a\u62a5\u9519\u3002"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-SQL",children:"select [];\nselect ARRAY<VARCHAR(10)>[];\nselect array_append([], 10);\n"})}),"\n",(0,c.jsx)("br",{}),"\n",(0,c.jsx)(e.h3,{id:"\u6570\u7ec4\u5bfc\u5165",children:"\u6570\u7ec4\u5bfc\u5165"}),"\n",(0,c.jsx)(e.p,{children:"\u76ee\u524d\u6709\u4e09\u79cd\u65b9\u5f0f\u5411StarRocks\u4e2d\u5199\u5165\u6570\u7ec4\u503c\uff0cinsert into \u9002\u5408\u5c0f\u89c4\u6a21\u6570\u636e\u6d4b\u8bd5\u3002\u540e\u9762\u4e24\u79cd\u9002\u5408\u5927\u89c4\u6a21\u6570\u636e\u5bfc\u5165\u3002"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"INSERT INTO"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-SQL",children:"create table t0(c0 INT, c1 ARRAY<INT>)duplicate key(c0);\nINSERT INTO t0 VALUES(1, [1,2,3]);\n"})}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"\u4eceORC/Parquet\u6587\u4ef6\u5bfc\u5165"})}),"\n",(0,c.jsxs)(e.p,{children:["StarRocks \u4e2d\u7684\u6570\u7ec4\u7c7b\u578b\uff0c\u4e0eORC/Parquet\u683c\u5f0f\u4e2d\u7684list\u7ed3\u6784\u76f8\u5bf9\u5e94\uff0c\u4e0d\u9700\u8981\u989d\u5916\u6307\u5b9a\uff0c\u5177\u4f53\u8bf7\u53c2\u8003StarRocks \u4f01\u4e1a\u6587\u6863\u4e2d ",(0,c.jsx)(e.code,{children:"broker load"})," \u5bfc\u5165\u76f8\u5173\u7ae0\u8282\u3002\u5f53\u524dORC\u7684list\u7ed3\u6784\u53ef\u4ee5\u76f4\u63a5\u5bfc\u5165\uff0cParquet\u683c\u5f0f\u6b63\u5728\u5f00\u53d1\u4e2d\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"\u4eceCSV\u6587\u4ef6\u5bfc\u5165"})}),"\n",(0,c.jsx)(e.p,{children:"CSV \u6587\u4ef6\u5bfc\u5165\u6570\u7ec4\uff0c\u9ed8\u8ba4\u91c7\u7528\u9017\u53f7\u5206\u9694\uff0c\u53ef\u4ee5\u7528 stream load / routine load \u5bfc\u5165CSV\u6587\u672c\u6587\u4ef6\u6216 Kafka \u4e2d\u7684 CSV \u683c\u5f0f\u6570\u636e\u3002"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)("br",{}),"\n",(0,c.jsx)(e.h3,{id:"\u6570\u7ec4\u5143\u7d20\u8bbf\u95ee",children:"\u6570\u7ec4\u5143\u7d20\u8bbf\u95ee"}),"\n",(0,c.jsxs)(e.p,{children:['\u4f7f\u7528\u4e2d\u62ec\u53f7\uff08 "[" \u548c "]" \uff09\u52a0\u4e0b\u6807\u5f62\u5f0f\u8bbf\u95ee\u6570\u7ec4\u4e2d\u67d0\u4e2a\u5143\u7d20\uff0c\u4e0b\u6807\u4ece ',(0,c.jsx)(e.code,{children:"1"})," \u5f00\u59cb"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-Plain",metastring:"Text",children:"mysql> select [1,2,3][1];\n\n+------------+\n| [1,2,3][1] |\n+------------+\n|          1 |\n+------------+\n1 row in set (0.00 sec)\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u5982\u679c\u4e0b\u6807\u4e3a0\uff0c\u6216\u8005\u4e3a\u8d1f\u6570\uff0c",(0,c.jsx)(e.strong,{children:"\u4e0d\u4f1a\u62a5\u9519\uff0c\u4f1a\u8fd4\u56deNULL"})]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-Plain",metastring:"Text",children:"mysql> select [1,2,3][0];\n\n+------------+\n| [1,2,3][0] |\n+------------+\n|       NULL |\n+------------+\n1 row in set (0.01 sec)\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u5982\u679c\u4e0b\u6807\u8d85\u8fc7\u6570\u7ec4\u5927\u5c0f\uff0c",(0,c.jsx)(e.strong,{children:"\u4e5f\u4f1a\u8fd4\u56deNULL"})]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-Plain",metastring:"Text",children:"mysql> select [1,2,3][4];\n\n+------------+\n| [1,2,3][4] |\n+------------+\n|       NULL |\n+------------+\n1 row in set (0.01 sec)\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u5bf9\u4e8e\u591a\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5",(0,c.jsx)(e.strong,{children:"\u9012\u5f52"}),"\u8bbf\u95ee\u5185\u90e8\u5143\u7d20"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-Plain",metastring:"Text",children:"mysql(ARRAY)> select [[1,2],[3,4]][2];\n\n+------------------+\n| [[1,2],[3,4]][2] |\n+------------------+\n| [3,4]            |\n+------------------+\n1 row in set (0.00 sec)\n\nmysql> select [[1,2],[3,4]][2][1];\n\n+---------------------+\n| [[1,2],[3,4]][2][1] |\n+---------------------+\n|                   3 |\n+---------------------+\n1 row in set (0.01 sec)\n"})})]})}const h=function(n={}){const{wrapper:e}=Object.assign({},(0,r.ah)(),n.components);return e?(0,c.jsx)(e,Object.assign({},n,{children:(0,c.jsx)(o,n)})):o(n)}},11151:(n,e,s)=>{s.d(e,{Zo:()=>t,ah:()=>l});var c=s(67294);const r=c.createContext({});function l(n){const e=c.useContext(r);return c.useMemo((()=>"function"==typeof n?n(e):{...e,...n}),[e,n])}const i={};function t({components:n,children:e,disableParentContext:s}){let t;return t=s?"function"==typeof n?n({}):n||i:l(n),c.createElement(r.Provider,{value:t},e)}}}]);