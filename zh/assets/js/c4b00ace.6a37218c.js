"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[95656],{7725:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>o});var t=n(85893),s=n(11151);const l={displayed_sidebar:"Chinese"},r="Bitmap \u7d22\u5f15",a={id:"table_design/Bitmap_index",title:"Bitmap \u7d22\u5f15",description:"StarRocks \u652f\u6301\u57fa\u4e8eBitmap\u7d22\u5f15\uff0c\u5bf9\u4e8e\u6709Filter\u7684\u67e5\u8be2\u6709\u660e\u663e\u7684\u52a0\u901f\u6548\u679c\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.0/table_design/Bitmap_index.md",sourceDirName:"table_design",slug:"/table_design/Bitmap_index",permalink:"/zh/docs/2.0/table_design/Bitmap_index",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/docs.zh-cn/edit/main/table_design/Bitmap_index.md",tags:[],version:"2.0",frontMatter:{displayed_sidebar:"Chinese"},sidebar:"Chinese",previous:{title:"\u4ecb\u7ecd",permalink:"/zh/docs/2.0/table_design/"},next:{title:"Bloomfilter \u7d22\u5f15",permalink:"/zh/docs/2.0/table_design/Bloomfilter_index"}},d={},o=[{value:"\u539f\u7406",id:"\u539f\u7406",level:2},{value:"<strong>1 \u4ec0\u4e48\u662fBitmap</strong>",id:"1-\u4ec0\u4e48\u662fbitmap",level:3},{value:"<strong>2 \u4ec0\u4e48\u662fBitmap\u7d22\u5f15</strong>",id:"2-\u4ec0\u4e48\u662fbitmap\u7d22\u5f15",level:3},{value:"\u9002\u7528\u573a\u666f",id:"\u9002\u7528\u573a\u666f",level:2},{value:"<strong>1 \u975e\u524d\u7f00\u8fc7\u6ee4</strong>",id:"1-\u975e\u524d\u7f00\u8fc7\u6ee4",level:3},{value:"<strong>2 \u591a\u5217\u8fc7\u6ee4Filter</strong>",id:"2-\u591a\u5217\u8fc7\u6ee4filter",level:3},{value:"\u5982\u4f55\u4f7f\u7528",id:"\u5982\u4f55\u4f7f\u7528",level:2},{value:"<strong>1 \u521b\u5efa\u7d22\u5f15</strong>",id:"1-\u521b\u5efa\u7d22\u5f15",level:3},{value:"<strong>2 \u67e5\u770b\u7d22\u5f15</strong>",id:"2-\u67e5\u770b\u7d22\u5f15",level:3},{value:"<strong>3 \u5220\u9664\u7d22\u5f15</strong>",id:"3-\u5220\u9664\u7d22\u5f15",level:3},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2}];function c(e){const i=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",strong:"strong",ul:"ul",li:"li",img:"img",pre:"pre",code:"code",ol:"ol",a:"a"},(0,s.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h1,{id:"bitmap-\u7d22\u5f15",children:"Bitmap \u7d22\u5f15"}),"\n",(0,t.jsx)(i.p,{children:"StarRocks \u652f\u6301\u57fa\u4e8eBitmap\u7d22\u5f15\uff0c\u5bf9\u4e8e\u6709Filter\u7684\u67e5\u8be2\u6709\u660e\u663e\u7684\u52a0\u901f\u6548\u679c\u3002"}),"\n",(0,t.jsx)(i.h2,{id:"\u539f\u7406",children:"\u539f\u7406"}),"\n",(0,t.jsx)(i.h3,{id:"1-\u4ec0\u4e48\u662fbitmap",children:(0,t.jsx)(i.strong,{children:"1 \u4ec0\u4e48\u662fBitmap"})}),"\n",(0,t.jsx)(i.p,{children:"Bitmap\u662f\u5143\u7d20\u4e3abit\u7684\uff0c \u53d6\u503c\u4e3a0\u30011\u4e24\u79cd\u60c5\u5f62\u7684, \u53ef\u5bf9\u67d0\u4e00\u4f4dbit\u8fdb\u884c\u7f6e\u4f4d(set)\u548c\u6e05\u96f6(clear)\u64cd\u4f5c\u7684\u6570\u7ec4\u3002Bitmap\u7684\u4f7f\u7528\u573a\u666f\u6709\uff1a"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"\u7528\u4e00\u4e2along\u578b\u8868\u793a32\u4f4d\u5b66\u751f\u7684\u6027\u522b\uff0c0\u8868\u793a\u5973\u751f\uff0c1\u8868\u793a\u7537\u751f\u3002"}),"\n",(0,t.jsx)(i.li,{children:"\u7528Bitmap\u8868\u793a\u4e00\u7ec4\u6570\u636e\u4e2d\u662f\u5426\u5b58\u5728null\u503c\uff0c0\u8868\u793a\u5143\u7d20\u4e0d\u4e3anull\uff0c1\u8868\u793a\u4e3anull\u3002"}),"\n",(0,t.jsx)(i.li,{children:"\u4e00\u7ec4\u6570\u636e\u7684\u53d6\u503c\u4e3a(Q1, Q2, Q3, Q4)\uff0c\u8868\u793a\u5b63\u5ea6\uff0c\u7528Bitmap\u8868\u793a\u8fd9\u7ec4\u6570\u636e\u4e2d\u53d6\u503c\u4e3aQ4\u7684\u5143\u7d20\uff0c1\u8868\u793a\u53d6\u503c\u4e3aQ4\u7684\u5143\u7d20, 0\u8868\u793a\u5176\u4ed6\u53d6\u503c\u7684\u5143\u7d20\u3002"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"2-\u4ec0\u4e48\u662fbitmap\u7d22\u5f15",children:(0,t.jsx)(i.strong,{children:"2 \u4ec0\u4e48\u662fBitmap\u7d22\u5f15"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Bitmap\u7d22\u5f15",src:n(79064).Z+"",width:"2486",height:"1000"})}),"\n",(0,t.jsx)(i.p,{children:"Bitmap\u53ea\u80fd\u8868\u793a\u53d6\u503c\u4e3a\u4e24\u79cd\u60c5\u5f62\u7684\u5217\u6570\u7ec4, \u5f53\u5217\u7684\u53d6\u503c\u4e3a\u591a\u79cd\u53d6\u503c\u60c5\u5f62\u679a\u4e3e\u7c7b\u578b\u65f6, \u4f8b\u5982\u5b63\u5ea6(Q1, Q2, Q3, Q4), \xa0\u7cfb\u7edf\u5e73\u53f0(Linux, Windows, FreeBSD, MacOS), \u5219\u65e0\u6cd5\u7528\u4e00\u4e2aBitmap\u7f16\u7801; \u6b64\u65f6\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u53d6\u503c\u5404\u81ea\u5efa\u7acb\u4e00\u4e2aBitmap\u7684\u6765\u8868\u793a\u8fd9\u7ec4\u6570\u636e; \u540c\u65f6\u4e3a\u5b9e\u9645\u679a\u4e3e\u53d6\u503c\u5efa\u7acb\u8bcd\u5178."}),"\n",(0,t.jsx)(i.p,{children:"\u5982\u4e0a\u56fe\u6240\u793a\uff0cPlatform\u5217\u67094\u884c\u6570\u636e\uff0c\u53ef\u80fd\u7684\u53d6\u503c\u6709Android\u3001Ios\u3002StarRocks\u4e2d\u4f1a\u9996\u5148\u9488\u5bf9Platform\u5217\u6784\u5efa\u4e00\u4e2a\u5b57\u5178\uff0c\u5c06Android\u548cIos\u6620\u5c04\u4e3aint\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5bf9Android\u548cIos\u5206\u522b\u6784\u5efaBitmap\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u5206\u522b\u5c06Android\u3001Ios \u7f16\u7801\u4e3a0\u548c1\uff0c\u56e0\u4e3aAndroid\u51fa\u73b0\u5728\u7b2c1\uff0c2\uff0c3\u884c\uff0c\u6240\u4ee5Bitmap\u662f0111\uff0c\u56e0\u4e3aIos\u51fa\u73b0\u5728\u7b2c4\u884c\uff0c\u6240\u4ee5Bitmap\u662f1000\u3002"}),"\n",(0,t.jsx)(i.p,{children:"\u5047\u5982\u6709\u4e00\u4e2a\u9488\u5bf9\u5305\u542b\u8be5Platform\u5217\u7684\u8868\u7684SQL\u67e5\u8be2\uff0cselect xxx from table where Platform = iOS\uff0cStarRocks\u4f1a\u9996\u5148\u67e5\u627e\u5b57\u5178\uff0c\u627e\u51faiOS\u5bf9\u4e8e\u7684\u7f16\u7801\u503c\u662f1\uff0c\u7136\u540e\u518d\u53bb\u67e5\u627e Bitmap Index\uff0c\u77e5\u90531\u5bf9\u5e94\u7684Bitmap\u662f1000\uff0c\u6211\u4eec\u5c31\u77e5\u9053\u53ea\u6709\u7b2c4\u884c\u6570\u636e\u7b26\u5408\u67e5\u8be2\u6761\u4ef6\uff0cStarRocks\u5c31\u4f1a\u53ea\u8bfb\u53d6\u7b2c4\u884c\u6570\u636e\uff0c\u4e0d\u4f1a\u8bfb\u53d6\u6240\u6709\u6570\u636e\u3002"}),"\n",(0,t.jsx)(i.h2,{id:"\u9002\u7528\u573a\u666f",children:"\u9002\u7528\u573a\u666f"}),"\n",(0,t.jsx)(i.h3,{id:"1-\u975e\u524d\u7f00\u8fc7\u6ee4",children:(0,t.jsx)(i.strong,{children:"1 \u975e\u524d\u7f00\u8fc7\u6ee4"})}),"\n",(0,t.jsx)(i.p,{children:"StarRocks\u5bf9\u4e8e\u5efa\u8868\u4e2d\u7684\u524d\u7f6e\u5217\u53ef\u4ee5\u901a\u8fc7shortkey\u7d22\u5f15\u5feb\u901f\u8fc7\u6ee4\uff0c\u4f46\u662f\u5bf9\u4e8e\u975e\u524d\u7f6e\u5217, \u65e0\u6cd5\u5229\u7528shortkey\u7d22\u5f15\u5feb\u901f\u8fc7\u6ee4\uff0c\u5982\u679c\u9700\u8981\u5bf9\u975e\u524d\u7f6e\u5217\u8fdb\u884c\u5feb\u901f\u8fc7\u6ee4\uff0c\u5c31\u53ef\u4ee5\u5bf9\u8fd9\u4e9b\u5217\u5efa\u7acbBitmap\u7d22\u5f15\u3002"}),"\n",(0,t.jsx)(i.h3,{id:"2-\u591a\u5217\u8fc7\u6ee4filter",children:(0,t.jsx)(i.strong,{children:"2 \u591a\u5217\u8fc7\u6ee4Filter"})}),"\n",(0,t.jsx)(i.p,{children:"\u7531\u4e8eBitmap\u53ef\u4ee5\u5feb\u901f\u7684\u8fdb\u884cbitwise\u8fd0\u7b97\u3002\u6240\u4ee5\u5728\u591a\u5217\u8fc7\u6ee4\u7684\u573a\u666f\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u8003\u8651\u5bf9\u6bcf\u5217\u5206\u522b\u5efa\u7acbBitmap\u7d22\u5f15\u3002"}),"\n",(0,t.jsx)(i.h2,{id:"\u5982\u4f55\u4f7f\u7528",children:"\u5982\u4f55\u4f7f\u7528"}),"\n",(0,t.jsx)(i.h3,{id:"1-\u521b\u5efa\u7d22\u5f15",children:(0,t.jsx)(i.strong,{children:"1 \u521b\u5efa\u7d22\u5f15"})}),"\n",(0,t.jsx)(i.p,{children:"\u5728 table1 \u4e0a\u4e3asite_id \u5217\u521b\u5efa Bitmap \u7d22\u5f15\uff1a"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-SQL",children:"CREATE INDEX index_name ON table1 (site_id) USING BITMAP COMMENT 'balabala';\n"})}),"\n",(0,t.jsx)(i.h3,{id:"2-\u67e5\u770b\u7d22\u5f15",children:(0,t.jsx)(i.strong,{children:"2 \u67e5\u770b\u7d22\u5f15"})}),"\n",(0,t.jsx)(i.p,{children:"\u5c55\u793a\u6307\u5b9a table_name \u7684\u4e0b\u7d22\u5f15\uff1a"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-SQL",children:"SHOW INDEX FROM example_db.table_name;\n"})}),"\n",(0,t.jsx)(i.h3,{id:"3-\u5220\u9664\u7d22\u5f15",children:(0,t.jsx)(i.strong,{children:"3 \u5220\u9664\u7d22\u5f15"})}),"\n",(0,t.jsx)(i.p,{children:"\u4e0b\u9762\u8bed\u53e5\u53ef\u4ee5\u4ece\u4e00\u4e2a\u8868\u4e2d\u5220\u9664\u6307\u5b9a\u540d\u79f0\u7684\u7d22\u5f15\uff1a"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-SQL",children:"DROP INDEX index_name ON [db_name.]table_name;\n"})}),"\n",(0,t.jsx)(i.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"\u5bf9\u4e8e\u660e\u7ec6\u6a21\u578b\uff0c\u6240\u6709\u5217\u90fd\u53ef\u4ee5\u5efaBitmap \u7d22\u5f15\uff1b\u5bf9\u4e8e\u805a\u5408\u6a21\u578b\uff0c\u53ea\u6709Key\u5217\u53ef\u4ee5\u5efaBitmap \u7d22\u5f15\u3002"}),"\n",(0,t.jsx)(i.li,{children:"Bitmap\u7d22\u5f15, \u5e94\u8be5\u5728\u53d6\u503c\u4e3a\u679a\u4e3e\u578b, \u53d6\u503c\u5927\u91cf\u91cd\u590d, \u8f83\u4f4e\u57fa\u6570, \u5e76\u4e14\u7528\u4f5c\u7b49\u503c\u6761\u4ef6\u67e5\u8be2\u6216\u8005\u53ef\u8f6c\u5316\u4e3a\u7b49\u503c\u6761\u4ef6\u67e5\u8be2\u7684\u5217\u4e0a\u521b\u5efa."}),"\n",(0,t.jsx)(i.li,{children:"\u4e0d\u652f\u6301\u5bf9Float\u3001Double\u3001Decimal \u7c7b\u578b\u7684\u5217\u5efaBitmap \u7d22\u5f15\u3002"}),"\n",(0,t.jsxs)(i.li,{children:["\u5982\u679c\u8981\u67e5\u770b\u67d0\u4e2a\u67e5\u8be2\u662f\u5426\u547d\u4e2d\u4e86Bitmap\u7d22\u5f15\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u7684",(0,t.jsx)(i.a,{href:"https://docs.starrocks.com/zh-cn/main/administration/Query_planning#profile%E5%88%86%E6%9E%90",children:"Profile"}),"\u4fe1\u606f\u67e5\u770b\u3002"]}),"\n"]})]})}const h=function(e={}){const{wrapper:i}=Object.assign({},(0,s.ah)(),e.components);return i?(0,t.jsx)(i,Object.assign({},e,{children:(0,t.jsx)(c,e)})):c(e)}},79064:(e,i,n)=>{n.d(i,{Z:()=>t});const t=n.p+"assets/images/3.6.1-1-1c641752a39d82ec7ff8d7a384db15f4.png"},11151:(e,i,n)=>{n.d(i,{Zo:()=>a,ah:()=>l});var t=n(67294);const s=t.createContext({});function l(e){const i=t.useContext(s);return t.useMemo((()=>"function"==typeof e?e(i):{...i,...e}),[i,e])}const r={};function a({components:e,children:i,disableParentContext:n}){let a;return a=n?"function"==typeof e?e({}):e||r:l(e),t.createElement(s.Provider,{value:a},i)}}}]);