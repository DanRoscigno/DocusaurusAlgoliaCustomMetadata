"use strict";(self.webpackChunkstarrocks=self.webpackChunkstarrocks||[]).push([[92002],{65287:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var s=i(85893),t=i(11151);const a={displayed_sidebar:"Chinese"},r="\u8ba4\u8bc1\u65b9\u5f0f",l={id:"administration/Authentication",title:"\u8ba4\u8bc1\u65b9\u5f0f",description:"\u9664\u201c\u7528\u6237\u540d+\u5bc6\u7801\u201d\u8ba4\u8bc1\u65b9\u5f0f\u5916\uff0cStarRocks\u8fd8\u652f\u6301LDAP\u7528\u6237\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.1/administration/Authentication.md",sourceDirName:"administration",slug:"/administration/Authentication",permalink:"/zh/docs/2.1/administration/Authentication",draft:!1,unlisted:!1,editUrl:"https://github.com/StarRocks/docs.zh-cn/edit/main/administration/Authentication.md",tags:[],version:"2.1",frontMatter:{displayed_sidebar:"Chinese"},sidebar:"Chinese",next:{title:"\u5907\u4efd\u4e0e\u6062\u590d",permalink:"/zh/docs/2.1/administration/Backup_and_restore"}},c={},d=[{value:"LDAP\u8ba4\u8bc1",id:"ldap\u8ba4\u8bc1",level:2}];function o(n){const e=Object.assign({h1:"h1",p:"p",h2:"h2",ul:"ul",li:"li",code:"code",pre:"pre",strong:"strong"},(0,t.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"\u8ba4\u8bc1\u65b9\u5f0f",children:"\u8ba4\u8bc1\u65b9\u5f0f"}),"\n",(0,s.jsx)(e.p,{children:"\u9664\u201c\u7528\u6237\u540d+\u5bc6\u7801\u201d\u8ba4\u8bc1\u65b9\u5f0f\u5916\uff0cStarRocks\u8fd8\u652f\u6301LDAP\u7528\u6237\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"ldap\u8ba4\u8bc1",children:"LDAP\u8ba4\u8bc1"}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528LDAP\u8ba4\u8bc1\u65f6\uff0c\u9996\u5148\u9700\u8981\u5c06LDAP\u670d\u52a1\u4fe1\u606f\u914d\u7f6e\u5230 FE \u8282\u70b9\u7684\u914d\u7f6e\u4e2d\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"authentication_ldap_simple_server_host\uff1a\u6307\u5b9a\u670d\u52a1IP\u3002"}),"\n",(0,s.jsx)(e.li,{children:"authentication_ldap_simple_server_port\uff1a\u6307\u5b9a\u670d\u52a1\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a389\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u521b\u5efa\u7528\u6237\u65f6\u901a\u8fc7",(0,s.jsx)(e.code,{children:"IDENTIFIED WITH authentication_ldap_simple AS 'xxx'"})," \u6307\u5b9a\u8be5\u7528\u6237\u7684\u8ba4\u8bc1\u65b9\u5f0f\u4e3aLDAP\u8ba4\u8bc1\u3002xxx\u4e3a\u7528\u6237\u5728LDAP\u4e2d\u7684DN(Distinguished Name)"]}),"\n",(0,s.jsx)(e.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE USER zhangsan IDENTIFIED WITH authentication_ldap_simple AS 'uid=zhansan,ou=company,dc=example,dc=com'\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u540c\u65f6\uff0c\u521b\u5efa\u7528\u6237\u65f6\u4e5f\u53ef\u4ee5\u4e0d\u6307\u5b9a\u7528\u6237\u5728LDAP\u4e2d\u7684DN"}),"\n",(0,s.jsx)(e.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE USER zhangsan IDENTIFIED WITH authentication_ldap_simple\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0d\u6307\u5b9aDN\u7684\u7528\u6237\uff0c\u767b\u5f55\u65f6StarRocks\u4f1a\u53bbLDAP\u7cfb\u7edf\u4e2d\u68c0\u7d22\u8be5\u7528\u6237\uff0c\u5982\u679c\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u5339\u914d\u7ed3\u679c\uff0c\u5219\u8ba4\u8bc1\u6210\u529f\u679c\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5728FE\u4e2d\u6dfb\u52a0\u989d\u5916\u7684\u914d\u7f6e\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"authentication_ldap_simple_bind_base_dn\uff1a\u7528\u6237\u7684base DN\uff0c\u6307\u5b9a\u7528\u6237\u7684\u68c0\u7d22\u8303\u56f4\u3002"}),"\n",(0,s.jsx)(e.li,{children:"authentication_ldap_simple_user_search_attr\uff1aLDAP\u5bf9\u8c61\u4e2d\u6807\u8bc6\u7528\u6237\u7684\u5c5e\u6027\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3auid\u3002"}),"\n",(0,s.jsx)(e.li,{children:"authentication_ldap_simple_bind_root_dn\uff1a\u68c0\u7d22\u7528\u6237\u65f6\uff0c\u4f7f\u7528\u7684\u7ba1\u7406\u5458\u8d26\u53f7DN\u3002"}),"\n",(0,s.jsx)(e.li,{children:"authentication_ldap_simple_bind_root_pwd\uff1a\u68c0\u7d22\u7528\u6237\u65f6\uff0c\u4f7f\u7528\u7684\u7ba1\u7406\u5458\u8d26\u53f7\u5bc6\u7801\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"LDAP\u8ba4\u8bc1\u9700\u8981\u5ba2\u6237\u7aef\u4f20\u9012\u660e\u6587\u5bc6\u7801\u7ed9StarRocks\u3002\u4e09\u79cd\u5178\u578b\u5ba2\u6237\u7aef\u914d\u7f6e\u660e\u6587\u5bc6\u7801\u4f20\u9012\u7684\u65b9\u5f0f\u5982\u4e0b\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"mysql \u547d\u4ee4\u884c"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6267\u884c\u65f6\u6dfb\u52a0 --default-auth mysql_clear_password --enable-cleartext-plugin \u9009\u9879\uff0c\u4f8b\u5982\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"mysql -uzhangsan -P9030 -h127.0.0.1 -p --default-auth mysql_clear_password --enable-cleartext-plugin\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"JDBC"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7531\u4e8eJDBC\u9ed8\u8ba4\u7684MysqlClearPasswordPlugin\u9700\u8981\u4f7f\u7528SSL\u4f20\u8f93\uff0c\u6240\u4ee5\u9700\u8981\u81ea\u5b9a\u4e49plugin\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public class MysqlClearPasswordPluginWithoutSSL extends MysqlClearPasswordPlugin {\r\n    @Override  \r\n    public boolean requiresConfidentiality() {\r\n        return false;\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u83b7\u53d6\u8fde\u63a5\u65f6\uff0c\u5c06\u81ea\u5b9a\u4e49\u7684plugin\u914d\u7f6e\u5230\u5c5e\u6027\u4e2d\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'...\r\nProperties properties = new Properties();// replace xxx.xxx.xxx to your pacakage name\r\nproperties.put("authenticationPlugins", "xxx.xxx.xxx.MysqlClearPasswordPluginWithoutSSL");\r\nproperties.put("defaultAuthenticationPlugin", "xxx.xxx.xxx.MysqlClearPasswordPluginWithoutSSL");\r\nproperties.put("disabledAuthenticationPlugins", "com.mysql.jdbc.authentication.MysqlNativePasswordPlugin");DriverManager.getConnection(url, properties);\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"ODBC"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5728ODBC\u7684DSN\u4e2d\u6dfb\u52a0\u914d\u7f6e\uff1adefault_auth=mysql_clear_password\u548cENABLE_CLEARTEXT_PLUGIN=1\uff0c\u5e76\u914d\u4e0a\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002"})]})}const h=function(n={}){const{wrapper:e}=Object.assign({},(0,t.ah)(),n.components);return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(o,n)})):o(n)}},11151:(n,e,i)=>{i.d(e,{Zo:()=>l,ah:()=>a});var s=i(67294);const t=s.createContext({});function a(n){const e=s.useContext(t);return s.useMemo((()=>"function"==typeof n?n(e):{...e,...n}),[e,n])}const r={};function l({components:n,children:e,disableParentContext:i}){let l;return l=i?"function"==typeof n?n({}):n||r:a(n),s.createElement(t.Provider,{value:l},e)}}}]);