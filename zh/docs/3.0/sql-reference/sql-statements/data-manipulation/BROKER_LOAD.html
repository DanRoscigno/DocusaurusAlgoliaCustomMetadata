<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.0 docs-doc-page docs-doc-id-sql-reference/sql-statements/data-manipulation/BROKER_LOAD" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-beta.0">
<title data-rh="true">BROKER LOAD | StarRocks</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/zh/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/zh/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="3.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.0"><meta data-rh="true" name="docsearch:version" content="3.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.0"><meta data-rh="true" property="og:title" content="BROKER LOAD | StarRocks"><meta data-rh="true" name="description" content="功能"><meta data-rh="true" property="og:description" content="功能"><link data-rh="true" rel="icon" href="/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ER08SJMRY1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="StarRocks" href="/zh/opensearch.xml"><link rel="stylesheet" href="/zh/assets/css/styles.83b858a3.css">
<script src="/zh/assets/js/runtime~main.c14eeca4.js" defer="defer"></script>
<script src="/zh/assets/js/main.71e2ed45.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.starrocks.io/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/zh/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">StarRocks</b></a><a class="navbar__item navbar__link" href="/zh/docs/3.0/administration/Authentication">Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/docs/3.0/administration/Authentication">3.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/examples/introduction">Next</a></li><li><a class="dropdown__link" href="/zh/docs/sql-reference/sql-statements/data-manipulation/BROKER_LOAD">Latest-3.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD">3.0</a></li><li><a class="dropdown__link" href="/zh/docs/2.5/sql-reference/sql-statements/data-manipulation/BROKER_LOAD">Stable-2.5</a></li><li><a class="dropdown__link" href="/zh/docs/2.3/sql-reference/sql-statements/data-manipulation/BROKER_LOAD">2.3</a></li><li><a class="dropdown__link" href="/zh/docs/2.2/sql-reference/sql-statements/data-manipulation/BROKER_LOAD">2.2</a></li><li><a class="dropdown__link" href="/zh/docs/2.1/sql-reference/sql-statements/data-manipulation/BROKER_LOAD">2.1</a></li><li><a class="dropdown__link" href="/zh/docs/2.0/administration/Build_in_docker">2.0</a></li><li><a class="dropdown__link" href="/zh/docs/1.19/development/Build_in_docker">1.19</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">English</a></li><li><a href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/StarRocks/starrocks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/administration/Authentication">administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/benchmarking/SSB_Benchmarking">benchmarking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/data_source/External_table">data_source</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/deployment/deploy_broker">deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/developers/How_to_Contribute">developers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/ecosystem_release/flink_connector">ecosystem_release</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/faq/Deploy_faq">faq</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/integrations/BI_integrations/FineBI">integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/introduction/Architecture">introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/loading/BrokerLoad">loading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/docs/3.0/quick_start">quick_start</a><button aria-label="Expand sidebar category &#x27;quick_start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/reference/Error_code">reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/release_notes/release-2.2">release_notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh/docs/3.0/sql-reference/sql-functions/How_to_Write_Functions_Documentation">sql-reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-functions/How_to_Write_Functions_Documentation">sql-functions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/Administration/ADD_SQLBLACKLIST">sql-statements</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/Administration/ADD_SQLBLACKLIST">Administration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/SQL_command_template">SQL statement template</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/Utility/DESCRIBE">Utility</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/account-management/ALTER_USER">account-management</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/all-commands">All commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/auto_increment">AUTO_INCREMENT</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-definition/ALTER_DATABASE">data-definition</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/ALTER_LOAD">data-manipulation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/ALTER_LOAD">ALTER LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/BROKER_LOAD">BROKER LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/CANCEL_EXPORT">CANCEL EXPORT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/CANCEL_LOAD">CANCEL LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/CANCEL_REFRESH_MATERIALIZED_VIEW">CANCEL REFRESH MATERIALIZED VIEW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/CREATE_ROUTINE_LOAD">CREATE ROUTINE LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/DELETE">DELETE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/DROP_TASK">DROP TASK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/EXPORT">EXPORT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/GROUP_BY">GROUP BY</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/PAUSE_ROUTINE_LOAD">PAUSE ROUTINE LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/REFRESH_MATERIALIZED_VIEW">REFRESH MATERIALIZED VIEW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/RESUME_ROUTINE_LOAD">RESUME ROUTINE LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SELECT">SELECT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_ALTER">SHOW ALTER TABLE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_ALTER_MATERIALIZED_VIEW">SHOW ALTER MATERIALIZED VIEW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_BACKUP">SHOW BACKUP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_CATALOGS">SHOW CATALOGS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_CREATE_CATALOG">SHOW CREATE CATALOG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_CREATE_DATABASE">SHOW CREATE DATABASE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_CREATE_MATERIALIZED_VIEW">SHOW CREATE MATERIALIZED VIEW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_CREATE_TABLE">SHOW CREATE TABLE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_CREATE_VIEW">SHOW CREATE VIEW</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_DATA">SHOW DATA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_DATABASES">SHOW DATABASES</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_DELETE">SHOW DELETE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_DYNAMIC_PARTITION_TABLES">SHOW DYNAMIC PARTITION TABLES</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_EXPORT">SHOW EXPORT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_LOAD">SHOW LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_MATERIALIZED_VIEW">SHOW MATERIALIZED VIEWS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_PARTITIONS">SHOW PARTITIONS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_REPOSITORIES">SHOW REPOSITORIES</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_RESTORE">SHOW RESTORE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_ROUTINE_LOAD">SHOW ROUTINE LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_ROUTINE_LOAD_TASK">SHOW ROUTINE LOAD TASK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_SNAPSHOT">SHOW SNAPSHOT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_TABLES">SHOW TABLES</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_TABLET">SHOW TABLET</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_TRANSACTION">SHOW TRANSACTION</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SPARK_LOAD">SPARK LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/STOP_ROUTINE_LOAD">STOP ROUTINE LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/STREAM_LOAD">STREAM LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SUBMIT_TASK">SUBMIT TASK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/UPDATE">UPDATE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/alter-routine-load">ALTER ROUTINE LOAD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/insert">INSERT</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/data-types/Array">data-types</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/3.0/sql-reference/sql-statements/keywords">关键字</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/docs/3.0/table_design">介绍</a><button aria-label="Expand sidebar category &#x27;介绍&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/unloading/Export">unloading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/3.0/using_starrocks/Bitmap_index">using_starrocks</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">sql-reference</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">sql-statements</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">data-manipulation</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">BROKER LOAD</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：3.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>BROKER LOAD</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="功能">功能<a href="#功能" class="hash-link" aria-label="功能的直接链接" title="功能的直接链接">​</a></h2>
<p>Broker Load 是一种基于 MySQL 协议的异步导入方式。您提交导入作业以后，StarRocks 会异步地执行导入作业。您需要通过 <a href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_LOAD">SHOW LOAD</a> 语句或者 curl 命令来查看导入作业的结果。有关 Broker Load 的背景信息、前提条件、基本原理、支持的数据文件格式和外部存储系统、以及如何执行单表导入 (Single-Table Load) 和多表导入 (Multi-Table Load) 操作等，请参见<a href="/zh/docs/3.0/loading/BrokerLoad">从 HDFS 或外部云存储系统导入数据</a>。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>Broker Load 操作需要目标表的 INSERT 权限。如果您的用户账号没有 INSERT 权限，请参考 <a href="/zh/docs/3.0/sql-reference/sql-statements/account-management/GRANT">GRANT</a> 给用户赋权。</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法">语法<a href="#语法" class="hash-link" aria-label="语法的直接链接" title="语法的直接链接">​</a></h2>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">database_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">label_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_desc</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data_desc </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StorageCredentialParams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">PROPERTIES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    opt_properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意在 StarRocks 中，部分文字是 SQL 语言的保留关键字，不能直接用于 SQL 语句。如果想在 SQL 语句中使用这些保留关键字，必须用反引号 (`) 包含起来。参见<a href="/zh/docs/3.0/sql-reference/sql-statements/keywords">关键字</a>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参数说明">参数说明<a href="#参数说明" class="hash-link" aria-label="参数说明的直接链接" title="参数说明的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="database_name-和-label_name">database_name 和 label_name<a href="#database_name-和-label_name" class="hash-link" aria-label="database_name 和 label_name的直接链接" title="database_name 和 label_name的直接链接">​</a></h3>
<p><code>label_name</code> 指定导入作业的标签。</p>
<p><code>database_name</code> 为可选，指定目标 StarRocks 表所在的数据库。</p>
<p>每个导入作业都对应一个在该数据库内唯一的标签。通过标签，可以查看对应导入作业的执行情况，并防止导入相同的数据。导入作业的状态为 <strong>FINISHED</strong> 时，其标签不可再复用给其他导入作业。导入作业的状态为 <strong>CANCELLED</strong> 时，其标签可以复用给其他导入作业，但通常都是用来重试同一个导入作业（即使用同一个标签导入相同的数据）以实现数据“精确一次 (Exactly-Once)”语义。</p>
<p>有关标签的命名规范，请参见<a href="/zh/docs/3.0/reference/System_limit">系统限制</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data_desc">data_desc<a href="#data_desc" class="hash-link" aria-label="data_desc的直接链接" title="data_desc的直接链接">​</a></h3>
<p>用于描述一批次待导入的数据。每个 <code>data_desc</code> 声明了本批次待导入数据所属的数据源地址、ETL 函数、StarRocks 表和分区等信息。</p>
<p>Broker Load 支持一次导入多个数据文件。在一个导入作业中，您可以使用多个 <code>data_desc</code> 来声明导入多个数据文件，也可以使用一个 <code>data_desc</code> 来声明导入一个路径下的所有数据文件。Broker Load 还支持保证单次导入事务的原子性，即单次导入的多个数据文件都成功或者都失败，而不会出现部分导入成功、部分导入失败的情况。</p>
<p><code>data_desc</code> 语法如下：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;file_path&gt;&quot;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;file_path&gt;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NEGATIVE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">table_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">partition1_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">partition2_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">TEMPORARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">temporary_partition1_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">temporary_partition2_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;column_separator&gt;&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">ROWS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;row_separator&gt;&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">FORMAT </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;CSV | Parquet | ORC&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fomat_type_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">column_list</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> PATH </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">partition_field_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">partition_field_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">k1</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">f1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">k2</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">f2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> predicate</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>data_desc</code> 中的必选参数如下：</p>
<ul>
<li>
<p><code>file_path</code></p>
<p>用于指定源数据文件所在的路径。</p>
<p>您可以指定导入一个 具体的数据文件。例如，通过指定 <code>&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/data/tablename/20210411&quot;</code> 可以匹配 HDFS 服务器上 <code>/user/data/tablename</code> 目录下名为 <code>20210411</code> 的数据文件。</p>
<p>您也可以用通配符指定导入某个路径下所有的数据文件。Broker Load 支持如下通配符：<code>?</code>、<code>*</code>、<code>[]</code>、<code>{}</code> 和 <code>^</code>。具体请参见<a href="https://hadoop.apache.org/docs/stable/api/org/apache/hadoop/fs/FileSystem.html#globStatus-org.apache.hadoop.fs.Path-" target="_blank" rel="noopener noreferrer">通配符使用规则参考</a>。例如， 通过指定 <code>&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/data/tablename/*/*&quot;</code> 路径可以匹配 HDFS 服务器上 <code>/user/data/tablename</code> 目录下所有分区内的数据文件，通过 <code>&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/data/tablename/dt=202104*/*&quot;</code> 路径可以匹配 HDFS 服务器上 <code>/user/data/tablename</code> 目录下所有 <code>202104</code> 分区内的数据文件。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>中间的目录也可以使用通配符匹配。</p>
</blockquote>
<p>以 HDFS 数据源为例，文件路径中的 <code>hdfs_host</code> 和 <code>hdfs_port</code> 参数说明如下：</p>
<ul>
<li>
<p><code>hdfs_host</code>：HDFS 集群中 NameNode 所在主机的 IP 地址。</p>
</li>
<li>
<p><code>hdfs_port</code>：HDFS 集群中 NameNode 所在主机的 FS 端口。默认端口号为 <code>9000</code>。</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong></p>
<ul>
<li>Broker Load 支持通过 S3 或 S3A 协议访问 AWS S3，因此从 AWS S3 导入数据时，您在文件路径中传入的目标文件的 S3 URI 可以使用 <code>s3://</code> 或 <code>s3a://</code> 作为前缀。</li>
<li>由于 Broker Load 只支持通过 gs 协议访问 Google GCS，因此当从 Google GCS 导入数据时，必须确保文 件路径传入的目标文件的 GCS URI 使用 <code>gs://</code> 为前缀。</li>
<li>从 Blob Storage 导入数据时，需要使用 wasb 或 wasbs 作为文件协议访问目标数据：<!-- -->
<ul>
<li>如果您的存储账号支持通过 HTTP 协议进行访问，请使用 wasb 文件协议，文件路径格式为 <code>wasb://&lt;container&gt;@&lt;storage_account&gt;.blob.core.windows.net/&lt;path&gt;/&lt;file_name&gt;/*</code>。</li>
<li>如果您的存储账号支持通过 HTTPS 协议进行访问，请使用 wasbs 文件协议，文件路径格式为 <code>wasbs://&lt;container&gt;@&lt;storage_account&gt;.blob.core.windows.net/&lt;path&gt;/&lt;file_name&gt;/*</code>。</li>
</ul>
</li>
<li>从 Azure Data Lake Storage Gen1 导入数据时，需要使用 adl 作为文件协议访问目标数据，文件路径格式为 <code>adl://&lt;data_lake_storage_gen1_name&gt;.azuredatalakestore.net/&lt;path&gt;/&lt;file_name&gt;</code>。</li>
<li>从 Data Lake Storage Gen2 导入数据时，需要使用 abfs 或 abfss 作为文件协议访问目标数据：<!-- -->
<ul>
<li>如果您的存储账号支持通过 HTTP 协议进行访问，请使用 abfs 文件协议，文件路径格式为 <code>abfs://&lt;container&gt;@&lt;storage_account&gt;.dfs.core.windows.net/&lt;file_name&gt;</code>。</li>
<li>如果您的存储账号支持通过 HTTPS 协议进行访问，请使用 abfss 文件协议，文件路径格式为 <code>abfss://&lt;container&gt;@&lt;storage_account&gt;.dfs.core.windows.net/&lt;file_name&gt;</code>。</li>
</ul>
</li>
</ul>
</blockquote>
</li>
<li>
<p><code>INTO TABLE</code></p>
<p>用于指定目标 StarRocks 表的名称。</p>
</li>
</ul>
<p><code>data_desc</code> 中的可选参数如下：</p>
<ul>
<li>
<p><code>NEGATIVE</code></p>
<p>用于撤销某一批已经成功导入的数据。如果想要撤销某一批已经成功导入的数据，可以通过指定 <code>NEGATIVE</code> 关键字来导入同一批数据。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>该参数仅适用于目 标 StarRocks 表使用聚合模型、并且所有 Value 列的聚合函数均为 <code>sum</code> 的情况。</p>
</blockquote>
</li>
<li>
<p><code>PARTITION</code></p>
<p>指定要把数据导入哪些分区。如果不指定该参数，则默认导入到 StarRocks 表所在的所有分区中。</p>
</li>
<li>
<p><code>TEMPORARY_PARTITION</code></p>
<p>指定要把数据导入哪些<a href="/zh/docs/3.0/table_design/Temporary_partition">临时分区</a>。</p>
</li>
<li>
<p><code>COLUMNS TERMINATED BY</code></p>
<p>用于指定源数据文件中的列分隔符。如果不指定该参数，则默认列分隔符为 <code>\t</code>，即 Tab。必须确保这里指定的列分隔符与源数据文件中的列分隔符一致；否则，导入作业会因数据质量错误而失败，作业状态 (<code>State</code>) 会显示为 <code>CANCELLED</code>。</p>
<p>需要注意的是，Broker Load 通过 MySQL 协议提交导入请求，除了 StarRocks 会做转义处理以外，MySQL 协议也会做转义处理。因此，如果列分隔符是 Tab 等不可见字符，则需要在列分隔字符前面多加一个反斜线 (\)。例如，如果列分隔符是 <code>\t</code>，这里必须输入 <code>\\t</code>；如果列分隔符是 <code>\n</code>，这里必须输入 <code>\\n</code>。Apache Hive™ 文件的列分隔符为 <code>\x01</code>，因此，如果源数据文件是 Hive 文件，这里必须传入 <code>\\x01</code>。</p>
<blockquote>
<p><strong>说明</strong></p>
<ul>
<li>StarRocks 支持设置长度最大不超过 50 个字节的 UTF-8 编码字符串作为列分隔符，包括常见的逗号 (,)、Tab 和 Pipe (|)。</li>
<li>空值 (null) 用 <code>\N</code> 表示。比如，数据文件一共有三列，其中某行数据的第一列、第三列数据分别为 <code>a</code> 和 <code>b</code>，第二列没有数据，则第二列需要用 <code>\N</code> 来表示空值，写作 <code>a,\N,b</code>，而不是 <code>a,,b</code>。<code>a,,b</code> 表示第二列是一个空字符串。</li>
</ul>
</blockquote>
</li>
<li>
<p><code>ROWS TERMINATED BY</code></p>
<p>用于指定源数据文件中的行分隔符。如果不指定该参数，则默认行分隔符为 <code>\n</code>，即换行符。必须确保这里指定的行分隔符与源数据文件中的行分隔符一致；否则，导入作业会因数据质量错误而失败，作业状态 (<code>State</code>) 会显示为 <code>CANCELLED</code>。该参数从 2.5.4 版本开始支持。</p>
<p>其他注意事项和使用条件与上文通过 <code>COLUMNS TERMINATED BY</code> 指定列分隔符相同。</p>
</li>
<li>
<p><code>FORMAT AS</code></p>
<p>用于指定源数据文件的格式。取值包括 <code>CSV</code>、<code>Parquet</code> 和 <code>ORC</code>。如果不指定该参数，则默认通过 <code>file_path</code> 参数中指定的文件扩展名（<strong>.csv</strong>、<strong>.parquet</strong>、和 <strong>.orc</strong>）来判断文件格式。</p>
</li>
<li>
<p><code>format_type_options</code></p>
<p><code>FORMAT AS</code> 设置为 <code>CSV</code> 时用于指定 CSV 格式选项。语法如下：</p>
<div class="language-JSON language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key = value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key = value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>说明</strong></p>
<p><code>format_type_options</code> 在 3.0 及以后版本支持。</p>
</blockquote>
<p>选项说明见下表。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>skip_header</td><td>用于指定跳过 CSV 文件最开头的几行数据。取值类型：INTEGER。默认值：<code>0</code>。<br>在某些 CSV 文件里，最开头的几行数据会用来定义列名、列类型等元数据信息。通过设置该参数，可以使 StarRocks 在导入数据时忽略 CSV 文件的前面几行。例如，如果设置该参数为 <code>1</code>，则 StarRocks 会在导入数据时忽略 CSV 文件的第一行。<br>这里的行所使用的分隔符须与您在导入语句中所设定的行分隔符一致。</td></tr><tr><td>trim_space</td><td>用于指定是否去除 CSV 文件中列分隔符前后的空格。取值类型：BOOLEAN。默认值：<code>false</code>。<br>有些数据库在导出数据为 CSV 文件时，会在列分隔符的前后添加一些空格。根据位置的不同，这些空格可以称为“前导空格”或者“尾随空格”。通过设置该参数，可以使 StarRocks 在导入数据时删除这些不必要的空格。<br>需要注意的是，StarRocks 不会去除被 <code>enclose</code> 指定字符括起来的字段内的空格（包括字段的前导空格和尾随空格）。例如，列分隔符是竖线 (<code class="language-text">|</code>)，<code>enclose</code> 指定的字符是双引号 (<code>&quot;</code>)：<br><code class="language-text">|&quot;Love StarRocks&quot;|</code> <br><code class="language-text">|&quot; Love StarRocks &quot;|</code> <br><code class="language-text">| &quot;Love StarRocks&quot; |</code> <br>如果设置 <code>trim_space</code> 为 <code>true</code>，则 StarRocks 处理后的结果数据如下：<br><code class="language-text">|&quot;Love StarRocks&quot;|</code> <br><code class="language-text">|&quot; Love StarRocks &quot;|</code> <br><code class="language-text">|&quot;Love StarRocks&quot;|</code></td></tr><tr><td>enclose</td><td>根据 <a href="https://www.rfc-editor.org/rfc/rfc4180" target="_blank" rel="noopener noreferrer">RFC4180</a>，用于指定把 CSV 文件中的字段括起来的字符。取值类型：单字节字符。默认值：<code>NONE</code>。最常用 <code>enclose</code> 字符为单引号 (<code>&#x27;</code>) 或双引号 (<code>&quot;</code>)。<br>被 <code>enclose</code> 指定字符括起来的字段内的所有特殊字符（包括行分隔符、列分隔符等）均看做是普通符号。比 RFC4180 标准更进一步的是，StarRocks 提供的 <code>enclose</code> 属性支持设置任意单个字节的字符。<br>如果一个字段内包含了 <code>enclose</code> 指定字符，则可以使用同样的字符对 <code>enclose</code> 指定字符进行转义。例如，在设置了<code>enclose</code> 为双引号 (<code>&quot;</code>) 时，字段值 <code>a &quot;quoted&quot; c</code> 在 CSV 文件中应该写作 <code>&quot;a &quot;&quot;quoted&quot;&quot; c&quot;</code>。</td></tr><tr><td>escape</td><td>指定用于转义的字符。用来转义各种特殊字符，比如行分隔符、列分隔符、转义符、<code>enclose</code> 指定字符等，使 StarRocks 把这些特殊字符当做普通字符而解析成字段值的一部分。取值类型：单字节字符。默认值：<code>NONE</code>。最常用的 <code>escape</code> 字符为斜杠 (<code>\</code>)，在 SQL 语句中应该写作双斜杠 (<code>\\</code>)。<br><strong>说明</strong><br><code>escape</code> 指定字符同时作用于 <code>enclose</code> 指定字符的内部和外部。<br>以下为两个示例：<ul><li>当设置 <code>enclose</code> 为双引号 (<code>&quot;</code>) 、<code>escape</code> 为斜杠 (<code>\</code>) 时，StarRocks 会把 <code>&quot;say \&quot;Hello world\&quot;&quot;</code> 解析成一个字段值 <code>say &quot;Hello world&quot;</code>。</li><li>假设列分隔符为逗号 (<code>,</code>) ，当设置 <code>escape</code> 为斜杠 (<code>\</code>) ，StarRocks 会把 <code>a, b\, c</code> 解析成 <code>a</code> 和 <code>b, c</code> 两个字段值。</li></ul></td></tr></tbody></table>
</li>
<li>
<p><code>column_list</code></p>
<p>用于指定源数据文件和 StarRocks 表之间的列对应关系。语法如下：<code>(&lt;column_name&gt;[, &lt;column_name&gt; ...])</code>。<code>column_list</code> 中声明的列与 StarRocks 表中的列按名称一一对应。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>如果源数据文件的列和 StarRocks 表中的列按顺序一一对应，则不需要指定 <code>column_list</code> 参数。</p>
</blockquote>
<p>如果要跳过源数据文件中的某一列，只需要在 <code>column_list</code> 参数中将该列命名为 StarRocks 表中不存在的列名即可。具体请参见<a href="/zh/docs/3.0/loading/Etl_in_loading">导入过程中实现数据转换</a>。</p>
</li>
<li>
<p><code>COLUMNS FROM PATH AS</code></p>
<p>用于从指定的文件路径中提取一个或多个分区字段的信息。该参数仅当指定的文件路径中存在分区字段时有效。</p>
<p>例如，源数据文件所在的路径为 <code>/path/col_name=col_value/file1</code>，其中 <code>col_name</code> 可以对应到 StarRocks 表中的列。这时候，您可以设置参数为 <code>col_name</code>。导入时，StarRocks 会将 <code>col_value</code> 落入 <code>col_name</code> 对应的列中。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>该参数只有在从 HDFS 导入数据时可用。</p>
</blockquote>
</li>
<li>
<p><code>SET</code></p>
<p>用于将源数据文件的某一列按照指定的函数进行转化，然后将转化后的结果落入 StarRocks 表中。语法如下：<code>column_name = expression</code>。以下为两个示例：</p>
<ul>
<li>StarRocks 表中有三列，按顺序依次为 <code>col1</code>、<code>col2</code> 和 <code>col3</code>；源数据文件中有四列，前两列按顺序依次对应 StarRocks 表中的 <code>col1</code>、<code>col2</code> 列，后两列之和对应 StarRocks 表中的 <code>col3</code> 列。这种情况下，需要通过 <code>column_list</code> 参数声明 <code>(col1,col2,tmp_col3,tmp_col4)</code>，并使用 SET 子句指定 <code>SET (col3=tmp_col3+tmp_col4)</code> 来实现数据转换。</li>
<li>StarRocks 表中有三列，按顺序依次为 <code>year</code>、<code>month</code> 和 <code>day</code>；源数据文件中只有一个包含时间数据的列，格式为 <code>yyyy-mm-dd hh:mm:ss</code>。这种情况下，需要通过 <code>column_list</code> 参数声明 <code>(tmp_time)</code>、并使用 SET 子句指定 <code>SET (year = year(tmp_time), month=month(tmp_time), day=day(tmp_time))</code> 来实现数据转换。</li>
</ul>
</li>
<li>
<p><code>WHERE</code></p>
<p>用于指定过滤条件，对做完转换的数据进行过滤。只有符合 WHERE 子句中指定的过滤条件的数据才会导入到 StarRocks 表中。</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="with-broker">WITH BROKER<a href="#with-broker" class="hash-link" aria-label="WITH BROKER的直接链接" title="WITH BROKER的直接链接">​</a></h3>
<p>在 v2.4 及以前版本，您需要在导入语句中通过 <code>WITH BROKER &quot;&lt;broker_name&gt;&quot;</code> 来指定使用哪个 Broker。自 v2.5 起，您不再需要指定 <code>broker_name</code>，但继续保留 <code>WITH BROKER</code> 关键字。参见<a href="/zh/docs/3.0/loading/BrokerLoad#%E8%83%8C%E6%99%AF%E4%BF%A1%E6%81%AF">从 HDFS 或外部云存储系统导入数据 &gt; 背景信息</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storagecredentialparams">StorageCredentialParams<a href="#storagecredentialparams" class="hash-link" aria-label="StorageCredentialParams的直接链接" title="StorageCredentialParams的直接链接">​</a></h3>
<p>StarRocks 访问存储系统的认证配置。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hdfs">HDFS<a href="#hdfs" class="hash-link" aria-label="HDFS的直接链接" title="HDFS的直接链接">​</a></h4>
<p>社区版 HDFS 支持简单认证和 Kerberos 认证两种认证方式（Broker Load 默认使用简单认证），并且支持 NameNode 节点的 HA 配置。如果存储系统为社区版 HDFS，您可以按如下指定认证方式和 HA 配置：</p>
<ul>
<li>
<p>认证方式</p>
<ul>
<li>
<p>如果使用简单认证，请按如下配置 <code>StorageCredentialParams</code>：</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;hadoop.security.authentication&quot; = &quot;simple&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;username&quot; = &quot;&lt;hdfs_username&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;password&quot; = &quot;&lt;hdfs_password&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td>hadoop.security.authentication</td><td>指定认证方式。取值范围：<code>simple</code> 和 <code>kerberos</code>。默认值：<code>simple</code>。<code>simple</code> 表示简单认证，即无认证。<code>kerberos</code> 表示 Kerberos 认证。</td></tr><tr><td>username</td><td>用于访问 HDFS 集群中 NameNode 节点的用户名。</td></tr><tr><td>password</td><td>用于访问 HDFS 集群中 NameNode 节点的密码。</td></tr></tbody></table>
</li>
<li>
<p>如果使用 Kerberos 认证，请按如下配置 <code>StorageCredentialParams</code>：</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;hadoop.security.authentication&quot; = &quot;kerberos&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;kerberos_principal&quot; = &quot;nn/zelda1@ZELDA.COM&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;kerberos_keytab&quot; = &quot;/keytab/hive.keytab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;kerberos_keytab_content&quot; = &quot;YWFhYWFh&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td>hadoop.security.authentication</td><td>指定认证方式。取值范围：<code>simple</code> 和 <code>kerberos</code>。默认值：<code>simple</code>。<code>simple</code> 表示简单认证，即无认证。<code>kerberos</code> 表示 Kerberos 认证。</td></tr><tr><td>kerberos_principal</td><td>用于指定 Kerberos 的用户或服务 (Principal)。每个 Principal 在 HDFS 集群内唯一，由如下三部分组成：<ul><li><code>username</code> 或 <code>servicename</code>：HDFS 集群中用户或服务的名称。</li><li><code>instance</code>：HDFS 集群要认证的节点所在服务器的名称，用来保证用户或服务全局唯一。比如，HDFS 集群中有多个 DataNode 节点，各节点需要各自独立认证。</li><li><code>realm</code>：域，必须全大写。</li></ul>举例：<code>nn/zelda1@ZELDA.COM</code>。</td></tr><tr><td>kerberos_keytab</td><td>用于指定 Kerberos 的 Key Table（简称为“keytab”）文件的路径。</td></tr><tr><td>kerberos_keytab_content</td><td>用于指定 Kerberos 中 keytab 文件的内容经过 Base64 编码之后的内容。该参数跟 <code>kerberos_keytab</code> 参数二选一配置。</td></tr></tbody></table>
<p>需要注意的是，在多 Kerberos 用户的场景下，您需要确保至少部署了一组独立的 <a href="/zh/docs/3.0/deployment/deploy_broker">Broker</a>  ，并且在导入语句中通过 <code>WITH BROKER &quot;&lt;broker_name&gt;&quot;</code> 来指定使用哪组 Broker。另外还需要打开 Broker 进程的启动脚本文件 <strong>start_broker.sh</strong>，在文件 42 行附近修改如下信息让 Broker 进程读取 <strong>krb5.conf</strong> 文件信息：</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_OPTS=&quot;-Dlog4j2.formatMsgNoLookups=true -Xmx1024m -Dfile.encoding=UTF-8 -Djava.security.krb5.conf=/etc/krb5.conf&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>说明</strong></p>
<ul>
<li><strong>/etc/krb5.conf</strong> 文件路径根据实际情况进行修改，Broker 需要有权限读取该文件。部署多个 Broker 时，每个 Broker 节点均需要修改如上信息，然后重启各 Broker 节点使配置生效。</li>
<li>您可以通过 <a href="/zh/docs/3.0/sql-reference/sql-statements/Administration/SHOW_BROKER">SHOW BROKER</a> 语句来查看 StarRocks 集群中已经部署的 Broker。</li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li>
<p>HA 配置</p>
<p>可以为 HDFS 集群中的 NameNode 节点配置 HA 机制，从而确保发生 NameNode 节点切换时，StarRocks 能够自动识别新切换到的 NameNode 节点，包括如下几种场景：</p>
<ul>
<li>
<p>在单 HDFS 集群、并且配置了单 Kerberos 用户的场景下，可以采用有 Broker 的导入，也可以采用无 Broker 的导入。</p>
<ul>
<li>
<p>如果采用有 Broker 的导入，您需要确保至少部署了一组独立的 <a href="/zh/docs/3.0/deployment/deploy_broker">Broker</a>，并将 <code>hdfs-site.xml</code> 文件放在 HDFS 集群对应的 Broker 节点的 <code>{deploy}/conf</code> 目录下。Broker 进程重启时，会将 <code>{deploy}/conf</code> 目录添加到 <code>CLASSPATH</code> 环境变量，使 Broker 能够读取 HDFS 集群中各节点的信息。</p>
</li>
<li>
<p>如果采用无 Broker 的导入，您需要将 <code>hdfs-site.xml</code> 文件放在每个 FE 节点和每个 BE 节点的 <code>{deploy}/conf</code> 目录下。</p>
</li>
</ul>
</li>
<li>
<p>在单 HDFS 集群、并且配置了多 Kerberos 用户的场景下，只支持有 Broker 的导入。您需要确保至少部署了一组独立的 <a href="/zh/docs/3.0/deployment/deploy_broker">Broker</a>，并将 <code>hdfs-site.xml</code> 文件放在 HDFS 集群对应的 Broker 节点的 <code>{deploy}/conf</code> 目录下。Broker 进程重启时，会将 <code>{deploy}/conf</code> 目录添加到 <code>CLASSPATH</code> 环境变量，使 Broker 能够读取 HDFS 集群中各节点的信息。</p>
</li>
<li>
<p>在多 HDFS 集群场景下（不管是单 Kerberos 用户、还是多 Kerberos 用户），只支持有 Broker 的导入。您需要确保至少部署了一组独立的 <a href="/zh/docs/3.0/deployment/deploy_broker">Broker</a>，并且采取如下方法之一来配置 Broker 读取 HDFS 集群中各节点的信息：</p>
<ul>
<li>
<p>将 <code>hdfs-site.xml</code> 文件放在每个 HDFS 集群对应的 Broker 节点的 <code>{deploy}/conf</code> 目录下。Broker 进程重启时，会将 <code>{deploy}/conf</code> 目录添加到 <code>CLASSPATH</code> 环境变量，使 Broker 能够读取 HDFS 集群中各节点的信息。</p>
</li>
<li>
<p>在创建 Broker Load 作业时增加如下 HA 配置：</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;dfs.nameservices&quot; = &quot;ha_cluster&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;dfs.ha.namenodes.ha_cluster&quot; = &quot;ha_n1,ha_n2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;dfs.namenode.rpc-address.ha_cluster.ha_n1&quot; = &quot;&lt;hdfs_host&gt;:&lt;hdfs_port&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;dfs.namenode.rpc-address.ha_cluster.ha_n2&quot; = &quot;&lt;hdfs_host&gt;:&lt;hdfs_port&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;dfs.client.failover.proxy.provider&quot; = &quot;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>上述配置中的参数说明如下表所述：</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td>dfs.nameservices</td><td>自定义 HDFS 集群的名称。</td></tr><tr><td>dfs.ha.namenodes.XXX</td><td>自定义 NameNode 的名称，多个名称以逗号 (,) 分隔，双引号内不允许出现空格。  <br>其中 <code>xxx</code> 为 <code>dfs.nameservices</code> 中自定义的HDFS 服务的名称。</td></tr><tr><td>dfs.namenode.rpc-address.XXX.NN</td><td>指定 NameNode 的 RPC 地址信息。  <br>其中 <code>NN</code> 表示 <code>dfs.ha.namenodes.XXX</code> 中自定义 NameNode 的名称。</td></tr><tr><td>dfs.client.failover.proxy.provider</td><td>指定客户端连接的 NameNode 的提供者，默认为 <code>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</code>。</td></tr></tbody></table>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>说明</strong></p>
<p>您可以通过 <a href="/zh/docs/3.0/sql-reference/sql-statements/Administration/SHOW_BROKER">SHOW BROKER</a> 语句来查看 StarRocks 集群中已经部署的 Broker。</p>
</blockquote>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aws-s3">AWS S3<a href="#aws-s3" class="hash-link" aria-label="AWS S3的直接链接" title="AWS S3的直接链接">​</a></h4>
<p>如果存储系统为 AWS S3，请按如下配置 <code>StorageCredentialParams</code>：</p>
<ul>
<li>
<p>基于 Instance Profile 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;aws.s3.use_instance_profile&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.region&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;aws_s3_region&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>基于 Assumed Role 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;aws.s3.use_instance_profile&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.iam_role_arn&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;iam_role_arn&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.region&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;aws_s3_region&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>基于 IAM User 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;aws.s3.use_instance_profile&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.access_key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;iam_user_access_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.secret_key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;iam_user_secret_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.region&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;aws_s3_region&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th>参数</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>aws.s3.use_instance_profile</td><td>是</td><td>指定是否开启 Instance Profile 和 Assumed Role 两种鉴权方式。取值范围：<code>true</code> 和 <code>false</code>。默认值：<code>false</code>。</td></tr><tr><td>aws.s3.iam_role_arn</td><td>否</td><td>有权限访问 AWS S3 Bucket 的 IAM Role 的 ARN。采用 Assumed Role 鉴权方式访问 AWS S3 时，必须指定此参数。</td></tr><tr><td>aws.s3.region</td><td>是</td><td>AWS S3 Bucket 所在的地域。示例：<code>us-west-1</code>。</td></tr><tr><td>aws.s3.access_key</td><td>否</td><td>IAM User 的 Access Key。采用 IAM User 鉴权方式访问 AWS S3 时，必须指定此参数。</td></tr><tr><td>aws.s3.secret_key</td><td>否</td><td>IAM User 的 Secret Key。采用 IAM User 鉴权方式访问 AWS S3 时，必须指定此参数。</td></tr></tbody></table>
<p>有关如何选择用于访问 AWS S3 的鉴权方式、以及如何在 AWS IAM 控制台配置访问控制策略，参见<a href="/zh/docs/3.0/integrations/authenticate_to_aws_resources#%E8%AE%BF%E9%97%AE-aws-s3-%E7%9A%84%E8%AE%A4%E8%AF%81%E5%8F%82%E6%95%B0">访问 AWS S3 的认证参数</a>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="google-gcs">Google GCS<a href="#google-gcs" class="hash-link" aria-label="Google GCS的直接链接" title="Google GCS的直接链接">​</a></h4>
<p>如果存储系统为 Google GCS，请按如下配置 <code>StorageCredentialParams</code>：</p>
<ul>
<li>
<p>基于 VM 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;gcp.gcs.use_compute_engine_service_account&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>默认值</strong></th><th><strong>取值样例</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>gcp.gcs.use_compute_engine_service_account</td><td>false</td><td>true</td><td>是否直接使用 Compute Engine 上面绑定的 Service Account。</td></tr></tbody></table>
</li>
<li>
<p>基于 Service Account 号进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;gcp.gcs.service_account_email&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;google_service_account_email&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;gcp.gcs.service_account_private_key_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;google_service_private_key_id&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;gcp.gcs.service_account_private_key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;google_service_private_key&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>默认值</strong></th><th><strong>取值样例</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>gcp.gcs.service_account_email</td><td>&quot;&quot;</td><td>&quot;<a href="mailto:user@hello.iam.gserviceaccount.com" target="_blank" rel="noopener noreferrer">user@hello.iam.gserviceaccount.com</a>&quot;</td><td>创建 Service Account 时生成的 JSON 文件中的 Email。</td></tr><tr><td>gcp.gcs.service_account_private_key_id</td><td>&quot;&quot;</td><td>&quot;61d257bd8479547cb3e04f0b9b6b9ca07af3b7ea&quot;</td><td>创建 Service Account 时生成的 JSON 文件中的 Private Key ID。</td></tr><tr><td>gcp.gcs.service_account_private_key</td><td>&quot;&quot;</td><td>&quot;-----BEGIN PRIVATE KEY----xxxx-----END PRIVATE KEY-----\n&quot;</td><td>创建 Service Account 时生成的 JSON 文件中的 Private Key。</td></tr></tbody></table>
</li>
<li>
<p>基于 Impersonation 进行认证和鉴权</p>
<ul>
<li>
<p>使用 VM 实例模拟 Service Account</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;gcp.gcs.use_compute_engine_service_account&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;gcp.gcs.impersonation_service_account&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;assumed_google_service_account_email&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>默认值</strong></th><th><strong>取值样例</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>gcp.gcs.use_compute_engine_service_account</td><td>false</td><td>true</td><td>是否直接使用 Compute Engine 上面绑定的 Service Account。</td></tr><tr><td>gcp.gcs.impersonation_service_account</td><td>&quot;&quot;</td><td>&quot;hello&quot;</td><td>需要模拟的目标 Service Account。</td></tr></tbody></table>
</li>
<li>
<p>使用一个 Service Account（即“Meta Service Account”）模拟另一个 Service Account（即“Data Service Account”）</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;gcp.gcs.service_account_email&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;google_service_account_email&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;gcp.gcs.service_account_private_key_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;meta_google_service_account_email&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;gcp.gcs.service_account_private_key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;meta_google_service_account_email&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;gcp.gcs.impersonation_service_account&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;data_google_service_account_email&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>默认值</strong></th><th><strong>取值样例</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>gcp.gcs.service_account_email</td><td>&quot;&quot;</td><td>&quot;<a href="mailto:user@hello.iam.gserviceaccount.com" target="_blank" rel="noopener noreferrer">user@hello.iam.gserviceaccount.com</a>&quot;</td><td>创建 Meta Service Account 时生成的 JSON 文件中的 Email。</td></tr><tr><td>gcp.gcs.service_account_private_key_id</td><td>&quot;&quot;</td><td>&quot;61d257bd8479547cb3e04f0b9b6b9ca07af3b7ea&quot;</td><td>创建 Meta Service Account 时生成的 JSON 文件中的 Private Key ID。</td></tr><tr><td>gcp.gcs.service_account_private_key</td><td>&quot;&quot;</td><td>&quot;-----BEGIN PRIVATE KEY----xxxx-----END PRIVATE KEY-----\n&quot;</td><td>创建 Meta Service Account 时生成的 JSON 文件中的 Private Key。</td></tr><tr><td>gcp.gcs.impersonation_service_account</td><td>&quot;&quot;</td><td>&quot;hello&quot;</td><td>需要模拟的目标 Data Service Account。</td></tr></tbody></table>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="阿里云-oss">阿里云 OSS<a href="#阿里云-oss" class="hash-link" aria-label="阿里云 OSS的直接链接" title="阿里云 OSS的直接链接">​</a></h4>
<p>如果存储系统为阿里云 OSS，请按如下配置 <code>StorageCredentialParams</code>：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;fs.oss.accessKeyId&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;oss_access_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;fs.oss.accessKeySecret&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;oss_secret_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;fs.oss.endpoint&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;oss_endpoint&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td>fs.oss.accessKeyId</td><td>访问阿里云 OSS 存储空间的 AccessKey ID，用于标识用户。</td></tr><tr><td>fs.oss.accessKeySecret</td><td>访问阿里云 OSS 存储空间的 AccessKey Secret，是用于加密签名字符串和 OSS 用来验证签名字符串的密钥。</td></tr><tr><td>fs.oss.endpoint</td><td>访问阿里云 OSS 存储空间的连接地址。</td></tr></tbody></table>
<p>请参见阿里云官方文档<a href="https://help.aliyun.com/document_detail/31950.html" target="_blank" rel="noopener noreferrer">用户签名验证</a>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="腾讯云-cos">腾讯云 COS<a href="#腾讯云-cos" class="hash-link" aria-label="腾讯云 COS的直接链接" title="腾讯云 COS的直接链接">​</a></h4>
<p>如果存储系统为腾讯云 COS，请按如下配置 <code>StorageCredentialParams</code>：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;fs.cosn.userinfo.secretId&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;cos_access_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;fs.cosn.userinfo.secretKey&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;cos_secret_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;fs.cosn.bucket.endpoint_suffix&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;cos_endpoint&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td>fs.cosn.userinfo.secretId</td><td>访问腾讯云 COS 存储空间的 SecretId，用于标识 API 调用者的身份。</td></tr><tr><td>fs.cosn.userinfo.secretKey</td><td>访问腾讯云 COS 存储空间的 SecretKey，是用于加密签名字符串和服务端验证签名字符串的密钥。</td></tr><tr><td>fs.cosn.bucket.endpoint_suffix</td><td>访问腾讯云 COS 存储空间的连接地址。</td></tr></tbody></table>
<p>请参见腾讯云官方文档<a href="https://cloud.tencent.com/document/product/436/68282" target="_blank" rel="noopener noreferrer">使用永久密钥访问 COS</a>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="华为云-obs">华为云 OBS<a href="#华为云-obs" class="hash-link" aria-label="华为云 OBS的直接链接" title="华为云 OBS的直接链接">​</a></h4>
<p>如果存储系统为华为云 OBS，请按如下配置 <code>StorageCredentialParams</code>：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;fs.obs.access.key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;obs_access_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;fs.obs.secret.key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;obs_secret_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;fs.obs.endpoint&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;obs_endpoint&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td>fs.obs.access.key</td><td>访问华为云 OBS 存储空间的 Access Key ID，与私有访问密钥关联的唯一标识符。</td></tr><tr><td>fs.obs.secret.key</td><td>访问华为云 OBS 存储空间的 Secret Access Key，对请求进行加密签名，可标识发送方，并防止请求被修改。</td></tr><tr><td>fs.obs.endpoint</td><td>访问华为云 OBS 存储空间的连接地址。</td></tr></tbody></table>
<p>请参见华为云官方文档<a href="https://support.huaweicloud.com/perms-cfg-obs/obs_40_0007.html" target="_blank" rel="noopener noreferrer">通过永久访问密钥访问 OBS</a>。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>使用 Broker Load 从华为云 OBS 导入数据时，需要先下载<a href="https://github.com/huaweicloud/obsa-hdfs/releases/download/v45/hadoop-huaweicloud-2.8.3-hw-45.jar" target="_blank" rel="noopener noreferrer">依赖库</a>添加到 <strong>$BROKER_HOME/lib/</strong> 路径下并重启 Broker。</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="其他兼容-s3-协议的对象存储">其他兼容 S3 协议的对象存储<a href="#其他兼容-s3-协议的对象存储" class="hash-link" aria-label="其他兼容 S3 协议的对象存储的直接链接" title="其他兼容 S3 协议的对象存储的直接链接">​</a></h4>
<p>如果存储系统为其他兼容 S3 协议的对象存储（如 MinIO），请按如下配置 <code>StorageCredentialParams</code>：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;aws.s3.enable_ssl&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{true | false}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.enable_path_style_access&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{true | false}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.endpoint&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;s3_endpoint&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.access_key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;iam_user_access_key&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;aws.s3.secret_key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;iam_user_secret_key&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th>参数</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>aws.s3.enable_ssl</td><td>是</td><td>是否开启 SSL 连接。取值范围：<code>true</code> 和 <code>false</code>。默认值：<code>true</code>。</td></tr><tr><td>aws.s3.enable_path_style_access</td><td>是</td><td>是否开启路径类型 URL 访问 (Path-Style URL Access)。取值范围：<code>true</code> 和 <code>false</code>。默认值：<code>false</code>。</td></tr><tr><td>aws.s3.endpoint</td><td>是</td><td>用于访问兼容 S3 协议的对象存储的 Endpoint。</td></tr><tr><td>aws.s3.access_key</td><td>是</td><td>IAM User 的 Access Key。</td></tr><tr><td>aws.s3.secret_key</td><td>是</td><td>IAM User 的 Secret Key。</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="microsoft-azure-storage">Microsoft Azure Storage<a href="#microsoft-azure-storage" class="hash-link" aria-label="Microsoft Azure Storage的直接链接" title="Microsoft Azure Storage的直接链接">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="azure-blob-storage">Azure Blob Storage<a href="#azure-blob-storage" class="hash-link" aria-label="Azure Blob Storage的直接链接" title="Azure Blob Storage的直接链接">​</a></h5>
<p>如果存储系统为 Blob Storage，请按如下配置 <code>StorageCredentialParams</code>：</p>
<ul>
<li>
<p>基于 Shared Key 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;azure.blob.storage_account&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blob_storage_account_name&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.blob.shared_key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blob_storage_account_shared_key&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>是否必须</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>azure.blob.storage_account</td><td>是</td><td>Blob Storage 账号的用户名。</td></tr><tr><td>azure.blob.shared_key</td><td>是</td><td>Blob Storage 账号的 Shared Key。</td></tr></tbody></table>
</li>
<li>
<p>基于 SAS Token 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;azure.blob.account_name&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blob_storage_account_name&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.blob.container_name&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blob_container_name&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.blob.sas_token&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;blob_storage_account_SAS_token&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>是否必须</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>azure.blob.account_name</td><td>是</td><td>Blob Storage 账号的用户名。</td></tr><tr><td>azure.blob.container_name</td><td>是</td><td>用于存储数据的 Blob 容器的名称。</td></tr><tr><td>azure.blob.sas_token</td><td>是</td><td>用于访问 Blob Storage 账号的 SAS Token。</td></tr></tbody></table>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="azure-data-lake-storage-gen1">Azure Data Lake Storage Gen1<a href="#azure-data-lake-storage-gen1" class="hash-link" aria-label="Azure Data Lake Storage Gen1的直接链接" title="Azure Data Lake Storage Gen1的直接链接">​</a></h5>
<p>如果存储系统为 Data Lake Storage Gen1，请按如下配置 <code>StorageCredentialParams</code>：</p>
<ul>
<li>
<p>基于 Managed Service Identity 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;azure.adls1.use_managed_service_identity&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>是否必须</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>azure.adls1.use_managed_service_identity</td><td>是</td><td>指定是否开启 Managed Service Identity 鉴权方式。设置为 <code>true</code>。</td></tr></tbody></table>
</li>
<li>
<p>基于 Service Principal 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;azure.adls1.oauth2_client_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;application_client_id&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.adls1.oauth2_credential&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;application_client_credential&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.adls1.oauth2_endpoint&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;OAuth_2.0_authorization_endpoint_v2&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>是否必须</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>azure.adls1.oauth2_client_id</td><td>是</td><td>Service Principal 的 Client (Application) ID。</td></tr><tr><td>azure.adls1.oauth2_credential</td><td>是</td><td>新建 Client (Application) Secret。</td></tr><tr><td>azure.adls1.oauth2_endpoint</td><td>是</td><td>Service Principal 或 Application 的 OAuth 2.0 Token Endpoint (v1)。</td></tr></tbody></table>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="azure-data-lake-storage-gen2">Azure Data Lake Storage Gen2<a href="#azure-data-lake-storage-gen2" class="hash-link" aria-label="Azure Data Lake Storage Gen2的直接链接" title="Azure Data Lake Storage Gen2的直接链接">​</a></h5>
<p>如果存储系统为 Data Lake Storage Gen2，请按如下配置 <code>StorageCredentialParams</code>：</p>
<ul>
<li>
<p>基于 Managed Identity 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;azure.adls2.oauth2_use_managed_identity&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.adls2.oauth2_tenant_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;service_principal_tenant_id&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.adls2.oauth2_client_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;service_client_id&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>是否必须</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>azure.adls2.oauth2_use_managed_identity</td><td>是</td><td>指定是否开启 Managed Identity 鉴权方式。设置为 <code>true</code>。</td></tr><tr><td>azure.adls2.oauth2_tenant_id</td><td>是</td><td>数据所属的 Tenant 的 ID。</td></tr><tr><td>azure.adls2.oauth2_client_id</td><td>是</td><td>Managed Identity 的 Client (Application) ID。</td></tr></tbody></table>
</li>
<li>
<p>基于 Shared Key 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;azure.adls2.storage_account&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;storage_account_name&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.adls2.shared_key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;shared_key&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>是否必须</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>azure.adls2.storage_account</td><td>是</td><td>Data Lake Storage Gen2 账号的用户名。</td></tr><tr><td>azure.adls2.shared_key</td><td>是</td><td>Data Lake Storage Gen2 账号的 Shared Key。</td></tr></tbody></table>
</li>
<li>
<p>基于 Service Principal 进行认证和鉴权</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;azure.adls2.oauth2_client_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;service_client_id&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.adls2.oauth2_client_secret&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;service_principal_client_secret&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;azure.adls2.oauth2_client_endpoint&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;service_principal_client_endpoint&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>StorageCredentialParams</code> 包含如下参数。</p>
<table><thead><tr><th><strong>参数</strong></th><th><strong>是否必须</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>azure.adls2.oauth2_client_id</td><td>是</td><td>Service Principal 的 Client (Application) ID。</td></tr><tr><td>azure.adls2.oauth2_client_secret</td><td>是</td><td>新建 Client (Application) Secret。</td></tr><tr><td>azure.adls2.oauth2_client_endpoint</td><td>是</td><td>Service Principal 或 Application 的 OAuth 2.0 Token Endpoint (v1)。</td></tr></tbody></table>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="opt_properties">opt_properties<a href="#opt_properties" class="hash-link" aria-label="opt_properties的直接链接" title="opt_properties的直接链接">​</a></h3>
<p>用于指定一些导入相关的可选参数，指定的参数设置作用于整个导入作业。语法如下：</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES (&quot;&lt;key1&gt;&quot; = &quot;&lt;value1&gt;&quot;[, &quot;&lt;key2&gt;&quot; = &quot;&lt;value2&gt;&quot; ...])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明如下：</p>
<ul>
<li>
<p><code>timeout</code></p>
<p>导入作业的超时时间。单位：秒。默认超时时间为 4 小时。建议超时时间小于 6 小时。如果导入作业在设定的时限内未完成，会自动取消，变成 <strong>CANCELLED</strong> 状态。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>通常情况下，您不需要手动设置导入作业的超时时间。只有当导入作业无法在默认的超时时间内完成时，才推荐您手动设置导入作业的超时时间。</p>
</blockquote>
<p>推荐超时时间大于下面公式的计算值：</p>
<p><strong>超时时间 &gt; (源数据文件的总大小 x 源数据文件及相关物化视图的个数)/(平均导入速度 x 导入并发数)</strong></p>
<blockquote>
<p><strong>说明</strong></p>
<ul>
<li>
<p>“平均导入速度”是指目前 StarRocks 集群的平均导入速度。由于每个 StarRocks 集群的机器环境不同、且集群允许的并发查询任务数也不同，因此，StarRocks 集群的平均导入速度需要根据历史导入速度进行推测。</p>
</li>
<li>
<p>“导入并发数”可以通过 <code>max_broker_concurrency</code> 参数设置，具体请参见“从 HDFS 或外部云存储系统导入数据”文档中的“<a href="/zh/docs/3.0/loading/BrokerLoad#%E4%BD%9C%E4%B8%9A%E6%8B%86%E5%88%86%E4%B8%8E%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8C">作业拆分与并行执行</a>”章节。</p>
</li>
</ul>
</blockquote>
<p>例如，要导入一个 1 GB 的数据文件，该数据文件包含 2 个物化视图，当前 StarRocks 集群的平均导入速度为 10 MB/s，导入并发数为 3。在这种情况下，根据公式计算出来时长为 102 秒：</p>
<p><strong>(1 x 1024 x 3)/(10 x 3) = 102（秒）</strong></p>
<p>因此，导入作业的超时时间应该大于 102 秒。</p>
</li>
<li>
<p><code>max_filter_ratio</code></p>
<p>导入作业的最大容忍率，即导入作业能够容忍的因数据质量不合格而过滤掉的数据行所占的最大比例。取值范围：<code>0</code>~<code>1</code>。默认值：<code>0</code> 。</p>
<ul>
<li>如果设置最大容忍率为 <code>0</code>，则 StarRocks 在导入过程中不会忽略错误的数据行。当导入的数据行中有错误时，导入作业会失败，从而保证数据的正确性。</li>
<li>如果设置最大容忍率大于 <code>0</code>，则 StarRocks 在导入过程中会忽略错误的数据行。这样，即使导入的数据行中有错误，导入作业也能成功。<!-- -->
<blockquote>
<p><strong>说明</strong></p>
<p>这里因数据质量不合格而过滤掉的数据行，不包括通过 WHERE 子句过滤掉的数据行。</p>
</blockquote>
</li>
</ul>
<p>如果因为设置最大容忍率为 <code>0</code> 而导致作业失败，可以通过 <a href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/SHOW_LOAD">SHOW LOAD</a> 语句来查看导入作业的结果信息。然后，判断错误的数据行是否可以被过滤掉。如果可以被过滤掉，则可以根据结果信息中的 <code>dpp.abnorm.ALL</code> 和 <code>dpp.norm.ALL</code> 来计算导入作业的最大容忍率，然后调整后重新提交导入作业。计算公式如下：</p>
<p><strong><code>max_filter_ratio</code> = [<code>dpp.abnorm.ALL</code>/(<code>dpp.abnorm.ALL</code> + <code>dpp.norm.ALL</code>)]</strong></p>
<p><code>dpp.abnorm.ALL</code> 和 <code>dpp.norm.ALL</code> 的总和就等于待导入的总行数。</p>
</li>
<li>
<p><code>load_mem_limit</code></p>
<p>导入作业的内存限制，最大不超过 BE 的内存限制。单位：字节。默认内存限制为 2 GB。</p>
</li>
<li>
<p><code>strict_mode</code></p>
<p>是否开启严格模式。取值范围：<code>true</code> 和 <code>false</code>。默认值：<code>false</code>。<code>true</code> 表示开启，<code>false</code> 表 示关闭。<br>关于该模式的介绍，参见<a href="/zh/docs/3.0/loading/load_concept/strict_mode">严格模式</a>。</p>
</li>
<li>
<p><code>timezone</code></p>
<p>指定导入作业所使用的时区。默认为 <code>Asia/Shanghai</code> 时区。该参数会影响所有导入涉及的、跟时区设置有关的函数所返回的结果。受时区影响的函数有 strftime、alignment_timestamp 和 from_unixtime 等，具体请参见<a href="/zh/docs/3.0/administration/timezone">设置时区</a>。导入参数 <code>timezone</code> 设置的时区对应“<a href="/zh/docs/3.0/administration/timezone">设置时区</a>”中所述的会话级时区。</p>
</li>
<li>
<p><code>priority</code></p>
<p>指定导入作业的优先级。取值范围：<code>LOWEST</code>、<code>LOW</code>、<code>NORMAL</code>、<code>HIGH</code> 和 <code>HIGHEST</code>。默认值：<code>NORMAL</code>。Broker Load 通过 <a href="/zh/docs/3.0/administration/Configuration#fe-%E9%85%8D%E7%BD%AE%E9%A1%B9">FE 配置项</a> <code>max_broker_load_job_concurrency</code> 指定 StarRocks 集群中可以并行执行的 Broker Load 作业的最大数量。如果某一时间段内提交的 Broker Load 作业总数超过最大数量，则超出的作业会按照优先级在队列中排队等待调度。</p>
<p>已经创建成功的导入作业，如果处于 <strong>QUEUEING</strong> 状态或者 <strong>LOADING</strong> 状态，那么您可以使用 <a href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/ALTER_LOAD">ALTER LOAD</a> 语句修改该作业的优先级。</p>
<p>StarRocks 自 v2.5 版本起支持为导入作业设置 <code>priority</code> 参数。</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="列映射">列映射<a href="#列映射" class="hash-link" aria-label="列映射的直接链接" title="列映射的直接链接">​</a></h2>
<p>如果源数据文件中的列与目标表中的列按顺序一一对应，您不需要指定列映射和转换关系。</p>
<p>如果源数据文件  中的列与目标表中的列不能按顺序一一对应，包括数量或顺序不一致，则必须通过 <code>COLUMNS</code> 参数来指定列映射和转换关系。一般包括如下两种场景：</p>
<ul>
<li>
<p><strong>列数量一致、但是顺序不一致，并且数据不需要通过函数计算、可以直接落入目标表中对应的列。</strong> 这种场景下，您需要在 <code>COLUMNS</code> 参数中按照源数据文件中的列顺序、使用目标表中对应的列名来配置列映射和转换关系。</p>
<p>例如，目标表中有三列，按顺序依次为 <code>col1</code>、<code>col2</code> 和 <code>col3</code>；源数据文件中也有三列，按顺序依次对应目标表中的 <code>col3</code>、<code>col2</code> 和 <code>col1</code>。这种情况下，需要指定 <code>COLUMNS(col3, col2, col1)</code>。</p>
</li>
<li>
<p><strong>列数量、顺序都不一致，并且某些列的数据需要通过函数计算以后才能落入目标表中对应的列。</strong> 这种场景下，您不仅需要在 <code>COLUMNS</code> 参数中按照源数据文件中的列顺序、使用目标表中对应的列名来配置列映射关系，还需要指定参与数据计算的函数。以下为两个示例：</p>
<ul>
<li>目标表中有三列，按顺序依次为 <code>col1</code>、<code>col2</code> 和 <code>col3</code> ；源数据文件中有四列，前三列按顺序依次对应目标表中的 <code>col1</code>、<code>col2</code> 和 <code>col3</code>，第四列在目标表中无对应的列。这种情况下，需要指定 <code>COLUMNS(col1, col2, col3, temp)</code>，其中，最后一列可随意指定一个名称（如 <code>temp</code>）用于占位即可。</li>
<li>目标表中有三列，按顺序依次为 <code>year</code>、<code>month</code> 和 <code>day</code>。源数据文件中只有一个包含时间数据的列，格式为 <code>yyyy-mm-dd hh:mm:ss</code>。这种情况下，可以指定 <code>COLUMNS (col, year = year(col), month=month(col), day=day(col))</code>。其中，<code>col</code> 是源数据文件中所包含的列的临时命名，<code>year = year(col)</code>、<code>month=month(col)</code> 和 <code>day=day(col)</code> 用于指定从 <code>col</code> 列提取对应的数据并落入目标表中对应的列，如 <code>year = year(col)</code> 表示通过 <code>year</code> 函数提取源数据文件中 <code>col</code> 列的 <code>yyyy</code> 部分的数据并落入目标表中的 <code>year</code> 列。</li>
</ul>
</li>
</ul>
<p>有关操作示例，参见<a href="#%E8%AE%BE%E7%BD%AE%E5%88%97%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB">设置列映射关系</a>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例">示例<a href="#示例" class="hash-link" aria-label="示例的直接链接" title="示例的直接链接">​</a></h2>
<p>本文以 HDFS 数据源为例，介绍各种导入配置。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="导入-csv-格式的数据">导入 CSV 格式的数据<a href="#导入-csv-格式的数据" class="hash-link" aria-label="导入 CSV 格式的数据的直接链接" title="导入 CSV 格式的数据的直接链接">​</a></h3>
<p>本小节以 CSV 格式的数据为例，重点阐述在创建导入作业的时候，如何运用各种参数配置来满足不同业务场景下的各种导入要求。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置超时时间">设置超时时间<a href="#设置超时时间" class="hash-link" aria-label="设置超时时间的直接链接" title="设置超时时间的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table1</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example1.csv</code> 也包含三列，按顺序一一对应 <code>table1</code> 中的三列。</p>
<p>如果要把 <code>example1.csv</code> 中所有的数据都导入到 <code>table1</code> 中，并且要求超时时间最大不超过 3600 秒，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example1.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;timeout&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置最大容错率">设置最大容错率<a href="#设置最大容错率" class="hash-link" aria-label="设置最大容错率的直接链接" title="设置最大容错率的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table2</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example2.csv</code> 也包含三列，按顺序一一对应 <code>table2</code> 中的三列。</p>
<p>如果要把 <code>example2.csv</code> 中所有的数据都导入到 <code>table2</code> 中，并且要求容错率最大不超过 <code>0.1</code>，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example2.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_filter_ratio&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="导入指定路径下所有数据文件">导入指定路径下所有数据文件<a href="#导入指定路径下所有数据文件" class="hash-link" aria-label="导入指定路径下所有数据文件的直接链接" title="导入指定路径下所有数据文件的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table3</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>HDFS 集群的 <code>/user/starrocks/data/input/</code> 路径下所有数据文件也包含三列，按顺序一一对应 <code>table3</code> 中的三列，并且列分隔符为 Hive 文件的默认列分隔符 <code>\x01</code>。</p>
<p>如果要把 <code>hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/</code> 路径下所有数据文件的数据都导入到 <code>table3</code> 中，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/*&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\\x01&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置-namenode-ha-机制">设置 NameNode HA 机制<a href="#设置-namenode-ha-机制" class="hash-link" aria-label="设置 NameNode HA 机制的直接链接" title="设置 NameNode HA 机制的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table4</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example4.csv</code> 也包含三列，按顺序一一对应 <code>table4</code> 中的三列。</p>
<p>如果要把 <code>example4.csv</code> 中所有的数据都导入到 <code>table4</code> 中，并且要求使用 NameNode HA 机制，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example4.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.nameservices&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_ha&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.ha.namenodes.my_ha&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_namenode1, my_namenode2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.namenode.rpc-address.my_ha.my_namenode1&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nn1_host:rpc_port&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.namenode.rpc-address.my_ha.my_namenode2&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nn2_host:rpc_port&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.client.failover.proxy.provider&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置-kerberos-认证方式">设置 Kerberos 认证方式<a href="#设置-kerberos-认证方式" class="hash-link" aria-label="设置 Kerberos 认证方式的直接链接" title="设置 Kerberos 认证方式的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table5</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example5.csv</code> 也包含三列，按顺序一一对应 <code>table5</code> 中的三列。</p>
<p>如果要把 <code>example5.csv</code> 中所有的数据都导入到 <code>table5</code> 中，并且要求使用 Kerberos 认证方式、提供 keytab 文件的路径，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example5.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\t&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;hadoop.security.authentication&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kerberos&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kerberos_principal&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;starrocks@YOUR.COM&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kerberos_keytab&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/home/starRocks/starRocks.keytab&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="撤销已导入的数据">撤销已导入的数据<a href="#撤销已导入的数据" class="hash-link" aria-label="撤销已导入的数据的直接链接" title="撤销已导入的数据的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table6</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example6.csv</code> 也包含三列，按顺序一一对应 <code>table6</code> 中的三列。</p>
<p>并且，您已经通过 Broker Load 把 <code>example6.csv</code> 中所有的数据都导入到了 <code>table6</code> 中。</p>
<p>如果您想撤销已导入的数据，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example6.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NEGATIVE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\t&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;hadoop.security.authentication&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kerberos&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kerberos_principal&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;starrocks@YOUR.COM&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kerberos_keytab&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/home/starRocks/starRocks.keytab&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置目标分区">设置目标分区<a href="#设置目标分区" class="hash-link" aria-label="设置目标分区的直接链接" title="设置目标分区的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table7</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example7.csv</code> 也包含三列，按顺序一一对应 <code>table7</code> 中的 三列。</p>
<p>如果要把 <code>example7.csv</code> 中所有的数据都导入到 <code>table7</code> 所在的分区 <code>p1</code> 和 <code>p2</code>，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example7.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置列映射关系">设置列映射关系<a href="#设置列映射关系" class="hash-link" aria-label="设置列映射关系的直接链接" title="设置列映射关系的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table8</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example8.csv</code> 也包含三列，按顺序依次对应 <code>table8</code> 中 <code>col2</code>、<code>col1</code>、<code>col3</code>。</p>
<p>如果要把 <code>example8.csv</code> 中所有的数据都导入到 <code>table8</code> 中，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example8.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>说明</strong></p>
<p>上述示例中，因为 <code>example8.csv</code> 和 <code>table8</code> 所包含的列不能按顺序依次对应，因此需要通过 <code>column_list</code> 参数来设置 <code>example8.csv</code> 和 <code>table8</code> 之间的列映射关系。</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置筛选条件">设置筛选条件<a href="#设置筛选条件" class="hash-link" aria-label="设置筛选条件的直接链接" title="设置筛选条件的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table9</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example9.csv</code> 也包含三列，按顺序一一对应 <code>table9</code> 中的三列。</p>
<p>如果只想把 <code>example9.csv</code> 中第一列的值大于 <code>20180601</code> 的数据行导入到 <code>table9</code> 中，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example9.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> col1 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20180601</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>说明</strong></p>
<p>上述示例中，虽然 <code>example9.csv</code> 和 <code>table9</code> 所包含的列数目相同、并且按顺序一一对应，但是因为需要通过 WHERE 子句指定基于列的过滤条件，因此需要通过 <code>column_list</code> 参数对 <code>example9.csv</code> 中的列进行临时命名。</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="导入数据到含有-hll-类型列的表">导入数据到含有 HLL 类型列的表<a href="#导入数据到含有-hll-类型列的表" class="hash-link" aria-label="导入数据到含有 HLL 类型列的表的直接链接" title="导入数据到含有 HLL 类型列的表的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table10</code> 包含四列，按顺序依次为 <code>id</code>、<code>col1</code>、<code>col2</code>、<code>col3</code>，其中 <code>col1</code> 和 <code>col2</code> 是 HLL 类型的列。</p>
<p>数据文件 <code>example10.csv</code> 包含三列，第一列对应 <code>table10</code> 中的 <code>id</code> 列；第二列和第三列分别对应 <code>table10</code> 中 HLL 类型的列 <code>col1</code> 和 <code>col2</code>，可以通过函数转换成 HLL 类型的数据并分别落入 <code>col1</code>、<code>col2</code> 列。</p>
<p>如果要把 <code>example10.csv</code> 中所有的数据都导入到 <code>table10</code> 中，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example10.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> temp1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> temp2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        col1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hll_hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">temp1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        col2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hll_hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">temp2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        col3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> empty_hll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>说明</strong></p>
<p>上述示例中，通过 <code>column_list</code> 参数，把 <code>example10.csv</code> 中的三列按顺序依次临时命名为 <code>id</code>、<code>temp1</code>、<code>temp2</code>，然后使用函数指定数据转换规则，包括：</p>
<ul>
<li>
<p>使用 <code>hll_hash</code> 函数把 <code>example10.csv</code> 中的 <code>temp1</code>、<code>temp2</code> 列转换成 HLL 类型的数据，并分别落入 <code>table10</code>中的 <code>col1</code>、<code>col2</code> 列。</p>
</li>
<li>
<p>使用 <code>hll_empty</code> 函数给导入的数据行在 <code>table10</code> 中的第四列补充默认值。</p>
</li>
</ul>
</blockquote>
<p>有关 <code>hll_hash</code> 函数和 <code>hll_empty</code> 函数的用法，请参见 <a href="/zh/docs/3.0/sql-reference/sql-functions/aggregate-functions/hll_hash">hll_hash</a>和<a href="/zh/docs/3.0/sql-reference/sql-functions/aggregate-functions/hll_empty">hll_empty</a>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="提取文件路径中的分区字段">提取文件路径中的分区字段<a href="#提取文件路径中的分区字段" class="hash-link" aria-label="提取文件路径中的分区字段的直接链接" title="提取文件路径中的分区字段的直接链接">​</a></h4>
<p>Broker Load 支持根据 StarRocks 表中定义的字段类型来解析待导入文件路径中的分区字段，类似 Apache Spark™ 中的分区发现 (Partition Discovery) 功能。</p>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table11</code> 包含五列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>、<code>city</code>、<code>utc_date</code>。</p>
<p>HDFS 集群的 <code>/user/starrocks/data/input/dir/city=beijing</code> 路径下包含如下数据文件：</p>
<ul>
<li>
<p><code>/user/starrocks/data/input/dir/city=beijing/utc_date=2019-06-26/0000.csv</code></p>
</li>
<li>
<p><code>/user/starrocks/data/input/dir/city=beijing/utc_date=2019-06-26/0001.csv</code></p>
</li>
</ul>
<p>这些数据文件都包含三列，按顺序分别对应 <code>table11</code> 中 <code>col1</code>、<code>col2</code>、<code>col3</code> 三列。</p>
<p>如果要把 <code>/user/starrocks/data/input/dir/city=beijing/utc_date=*/*</code> 路径下所有数据文件的数据都导入到 <code>table11</code> 中，并且要求提取路径中分区字段 <code>city</code> 和 <code>utc_date</code> 的信息落入 <code>table11</code> 中对应的 <code>city</code>、<code>utc_date</code> 列，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/dir/city=beijing/*/*&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FORMAT </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;csv&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> PATH </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">city</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> utc_date</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uniq_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> md5sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> city</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="提取文件路径中包含-3a-的时间分区字段">提取文件路径中包含 <code>%3A</code> 的时间分区字段<a href="#提取文件路径中包含-3a-的时间分区字段" class="hash-link" aria-label="提取文件路径中包含-3a-的时间分区字段的直接链接" title="提取文件路径中包含-3a-的时间分区字段的直接链接">​</a></h4>
<p>在 HDFS 的文件路径中，不允许有冒号 (:)，所有冒号 (:) 都会自动替换成 <code>%3A</code>。</p>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table12</code> 包含三列，按顺序依次为 <code>data_time</code>、<code>col1</code>、<code>col2</code>，表结构如下：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data_time </span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">col1        </span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">col2        </span><span class="token keyword" style="color:#00009f">INT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>HDFS 集群的 <code>/user/starrocks/data</code> 路径下有如下数据文件：</p>
<ul>
<li>
<p><code>/user/starrocks/data/data_time=2020-02-17 00%3A00%3A00/example12.csv</code></p>
</li>
<li>
<p><code>/user/starrocks/data/data_time=2020-02-18 00%3A00%3A00/example12.csv</code></p>
</li>
</ul>
<p>如果要把 <code>example12.csv</code> 中所有的数据都导入到 <code>table12</code> 中，并且要求提取指定路径中分区字段 <code>data_time</code> 的信息落入到 <code>table12</code> 中的 <code>data_time</code> 列，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/*/example12.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FORMAT </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;csv&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">col2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> PATH </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> str_to_date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%Y-%m-%d %H%%3A%i%%3A%s&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>上述示例中，因为直接提取后的分区字段 <code>data_time</code> 是包含 <code>%3A</code> 的字符串（如 <code>2020-02-17 00%3A00%3A00</code>），因此需要再通过 <code>str_to_date</code> 函数把字符串转换为 DATETIME 类型的数据以后才能落入 <code>table8</code> 中的 <code>data_time</code> 列。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置-format_type_options">设置 <code>format_type_options</code><a href="#设置-format_type_options" class="hash-link" aria-label="设置-format_type_options的直接链接" title="设置-format_type_options的直接链接">​</a></h4>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table13</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example13.csv</code> 也包含三列，按顺序依次对应 <code>table13</code> 中 <code>col2</code>、<code>col1</code>、<code>col3</code>。</p>
<p>如果要把 <code>example13.csv</code> 中所有的数据都导入到 <code>table13</code> 中，并且希望跳过 <code>example13.csv</code> 中最开头的两行数据、去除列分隔符前后的空格、 指定 <code>enclose</code> 字符为斜杠 (<code>\</code>)、并且指定 <code>escape</code> 字符为斜杠 (<code>\</code>)，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/*/example13.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FORMAT </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;CSV&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        skip_header </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        trim_space </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">TRUE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enclose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">escape</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\\&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hdfs_username&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hdfs_password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;timeout&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="导入-parquet-格式的数据">导入 Parquet 格式的数据<a href="#导入-parquet-格式的数据" class="hash-link" aria-label="导入 Parquet 格式的数据的直接链接" title="导入 Parquet 格式的数据的直接链接">​</a></h3>
<p>本小节主要描述导入 Parquet 格式的数据时，需要关注的一些参数配置。</p>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table13</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example13.parquet</code> 也包含三列，按顺序一一对应 <code>table13</code> 中的三列。</p>
<p>如果要把 <code>example13.parquet</code> 中所有的数据都导入到 <code>table13</code> 中，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example13.parquet&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FORMAT </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;parquet&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>说明</strong></p>
<p>导入 Parquet 格式的数据时，默认通过文件扩展名 (<strong>.parquet</strong>) 判断数据文件的格式。如果文件名称中没有包含扩展名，则必须通过 <code>FORMAT AS</code> 参数指定数据文件格式为 <code>Parquet</code>。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="导入-orc-格式的数据">导入 ORC 格式的数据<a href="#导入-orc-格式的数据" class="hash-link" aria-label="导入 ORC 格式的数据的直接链接" title="导入 ORC 格式的数据的直接链接">​</a></h3>
<p>本小节主要描述导入 ORC 格式的数据时，需要关注的一些参数配置。</p>
<p>StarRocks 数据库 <code>test_db</code> 里的表 <code>table14</code> 包含三列，按顺序依次为 <code>col1</code>、<code>col2</code>、<code>col3</code>。</p>
<p>数据文件 <code>example14.orc</code> 也包含三列，按顺序一一对应 <code>table14</code> 中的三列。</p>
<p>如果要把 <code>example14.orc</code> 中所有的数据都导入到 <code>table14</code> 中，可以执行如下语句：</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL test_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://&lt;hdfs_host&gt;:&lt;hdfs_port&gt;/user/starrocks/data/input/example14.orc&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> table14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FORMAT </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;orc&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_username&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;hdfs_password&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>说明</strong></p>
<ul>
<li>
<p>导入 ORC 格式的数据时，默认通过文件扩展名 (<strong>.orc</strong>) 判断数据文件的格式。如果文件名称中没有包含扩展名，则必须通过 <code>FORMAT AS</code>   参数指定数据文件格式为 <code>ORC</code>。</p>
</li>
<li>
<p>StarRocks v2.3 及之前版本，当数据文件中包含 ARRAY 类型的列时，必须确保数据文件和 StarRocks 表中对应的列同名，并且不能写在 SET 子句里。</p>
</li>
</ul>
</blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/StarRocks/docs.zh-cn/edit/main/sql-reference/sql-statements/data-manipulation/BROKER_LOAD.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/ALTER_LOAD"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">ALTER LOAD</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/docs/3.0/sql-reference/sql-statements/data-manipulation/CANCEL_EXPORT"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">CANCEL EXPORT</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#功能" class="table-of-contents__link toc-highlight">功能</a></li><li><a href="#语法" class="table-of-contents__link toc-highlight">语法</a></li><li><a href="#参数说明" class="table-of-contents__link toc-highlight">参数说明</a><ul><li><a href="#database_name-和-label_name" class="table-of-contents__link toc-highlight">database_name 和 label_name</a></li><li><a href="#data_desc" class="table-of-contents__link toc-highlight">data_desc</a></li><li><a href="#with-broker" class="table-of-contents__link toc-highlight">WITH BROKER</a></li><li><a href="#storagecredentialparams" class="table-of-contents__link toc-highlight">StorageCredentialParams</a></li><li><a href="#opt_properties" class="table-of-contents__link toc-highlight">opt_properties</a></li></ul></li><li><a href="#列映射" class="table-of-contents__link toc-highlight">列映射</a></li><li><a href="#示例" class="table-of-contents__link toc-highlight">示例</a><ul><li><a href="#导入-csv-格式的数据" class="table-of-contents__link toc-highlight">导入 CSV 格式的数据</a></li><li><a href="#导入-parquet-格式的数据" class="table-of-contents__link toc-highlight">导入 Parquet 格式的数据</a></li><li><a href="#导入-orc-格式的数据" class="table-of-contents__link toc-highlight">导入 ORC 格式的数据</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/introduction/StarRocks_intro">Documentation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 StarRocks, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>