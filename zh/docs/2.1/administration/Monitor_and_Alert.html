<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2.1 docs-doc-page docs-doc-id-administration/Monitor_and_Alert" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-beta.0">
<title data-rh="true">监控报警 | StarRocks</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/zh/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/zh/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/zh/docs/2.1/administration/Monitor_and_Alert"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="2.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.1"><meta data-rh="true" name="docsearch:version" content="2.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.1"><meta data-rh="true" property="og:title" content="监控报警 | StarRocks"><meta data-rh="true" name="description" content="StarRocks提供两种监控报警的方案，第一种是使用内置的StarRocksManager，其自带的Agent从各个Host采集监控信息上报到Center Service然后做可视化展示，也提供了邮件和Webhook的方式发送报警通知。但是如果用户为了二次开发需求，需要自己搭建部署监控服务，也可以使用开源的Prometheus+Grafana的方案，StarRocks提供了兼容Prometheus的信息采集接口，可以通过直接链接BE/FE的HTTP端口来获取集群的监控信息。"><meta data-rh="true" property="og:description" content="StarRocks提供两种监控报警的方案，第一种是使用内置的StarRocksManager，其自带的Agent从各个Host采集监控信息上报到Center Service然后做可视化展示，也提供了邮件和Webhook的方式发送报警通知。但是如果用户为了二次开发需求，需要自己搭建部署监控服务，也可以使用开源的Prometheus+Grafana的方案，StarRocks提供了兼容Prometheus的信息采集接口，可以通过直接链接BE/FE的HTTP端口来获取集群的监控信息。"><link data-rh="true" rel="icon" href="/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/zh/docs/2.1/administration/Monitor_and_Alert"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/docs/2.1/administration/Monitor_and_Alert" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/zh/docs/2.1/administration/Monitor_and_Alert" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/docs/2.1/administration/Monitor_and_Alert" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ER08SJMRY1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="StarRocks" href="/zh/opensearch.xml"><link rel="stylesheet" href="/zh/assets/css/styles.83b858a3.css">
<script src="/zh/assets/js/runtime~main.c14eeca4.js" defer="defer"></script>
<script src="/zh/assets/js/main.71e2ed45.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.starrocks.io/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/zh/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">StarRocks</b></a><a class="navbar__item navbar__link" href="/zh/docs/2.1/administration/Authentication">Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/docs/2.1/administration/Authentication">2.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/examples/introduction">Next</a></li><li><a class="dropdown__link" href="/zh/docs/administration/Monitor_and_Alert">Latest-3.1</a></li><li><a class="dropdown__link" href="/zh/docs/3.0/administration/Monitor_and_Alert">3.0</a></li><li><a class="dropdown__link" href="/zh/docs/2.5/administration/Monitor_and_Alert">Stable-2.5</a></li><li><a class="dropdown__link" href="/zh/docs/2.3/administration/Monitor_and_Alert">2.3</a></li><li><a class="dropdown__link" href="/zh/docs/2.2/administration/Monitor_and_Alert">2.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/2.1/administration/Monitor_and_Alert">2.1</a></li><li><a class="dropdown__link" href="/zh/docs/2.0/administration/Build_in_docker">2.0</a></li><li><a class="dropdown__link" href="/zh/docs/1.19/development/Build_in_docker">1.19</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/docs/2.1/administration/Monitor_and_Alert" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">English</a></li><li><a href="/zh/docs/2.1/administration/Monitor_and_Alert" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/StarRocks/starrocks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh/docs/2.1/administration/Authentication">administration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Authentication">认证方式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Backup_and_restore">备份与恢复</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Blacklist">黑名单管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Build_in_docker">dev-env image 使用说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Cluster_administration">集群管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Configuration">参数配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Data_recovery">数据删除恢复</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Load_balance">负载均衡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Memory_management">内存管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Metadata_recovery">元数据恢复（此方法并不能根本解决问题，只是为了尽快恢复集群才需要如此操作，请联系官方人员协助）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/2.1/administration/Monitor_and_Alert">监控报警</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Profiling">性能优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Query_management">查询管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Query_planning">查询分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Replica">副本管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/Scale_up_down">扩容缩容</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/2.1/administration/User_privilege">用户权限</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/benchmarking/SSB_Benchmarking">benchmarking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/faq/Deploy_faq">faq</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/introduction/StarRocks_intro">introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/loading/BrokerLoad">loading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/docs/2.1/quick_start">quick_start</a><button aria-label="Expand sidebar category &#x27;quick_start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/reference/Error_code">reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/release_notes/release-1.19">release_notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/sql-reference/sql-functions/How_to_Write_Functions_Documentation">sql-reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/docs/2.1/table_design">介绍</a><button aria-label="Expand sidebar category &#x27;介绍&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/unloading/Export">unloading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/2.1/using_starrocks/Array">using_starrocks</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">administration</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">监控报警</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：2.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>监控报警</h1>
<p>StarRocks提供两种监控报警的方案，第一种是使用内置的StarRocksManager，其自带的Agent从各个Host采集监控信息上报到Center Service然后做可视化展示，也提供了邮件和Webhook的方式发送报警通知。但是如果用户为了二次开发需求，需要自己搭建部署监控服务，也可以使用开源的Prometheus+Grafana的方案，StarRocks提供了兼容Prometheus的信息采集接口，可以通过直接链接BE/FE的HTTP端口来获取集群的监控信息。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用starrocksmanager">使用StarRocksManager<a href="#使用starrocksmanager" class="hash-link" aria-label="使用StarRocksManager的直接链接" title="使用StarRocksManager的直接链接">​</a></h2>
<p>StarRocksManager的监控可以分成<strong>集群</strong>和<strong>节点</strong>两个维度，在集群页面可以看到下列监控项：</p>
<ul>
<li>集群性能监控<!-- -->
<ul>
<li>CPU使用率</li>
<li>内存使用</li>
<li>磁盘I/O使用率，磁盘使用量、磁盘空闲量</li>
<li>发包带宽、收包带宽，发包数、收包数</li>
</ul>
</li>
<li>集群查询监控<!-- -->
<ul>
<li>QPS</li>
<li>平均响应时间</li>
<li>50/75/90/95/99/999 分位响应时间</li>
</ul>
</li>
<li>数据导入量监控<!-- -->
<ul>
<li>发起导入次数</li>
<li>导入行数</li>
<li>导入数据量</li>
</ul>
</li>
<li>数据组合并（Compaction）监控<!-- -->
<ul>
<li>基线合并数据组速率</li>
<li>基线合并数据量</li>
<li>增量合并数据组速率</li>
<li>增量合并数据量</li>
</ul>
</li>
</ul>
<p>在节点页面可以看到所有BE/FE的机器列表和状态  等基础信息</p>
<p><img loading="lazy" alt="8.10.1-1" src="/zh/assets/images/8.10.1-1-2bf28282d70d487702dfd958fc785606.png" width="3024" height="1394" class="img_ev3q"></p>
<p>点击节点链接可以看到每一个节点的详细监控信息，可以在右侧的节点列表中选择多个节点同时展示，可以在上方的下拉框中选择各类指标</p>
<p><img loading="lazy" alt="8.10.1-2" src="/zh/assets/images/8.10.1-2-fda2e102210f7275b98b2327e032a877.png" width="2173" height="840" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="监控指标">监控指标<a href="#监控指标" class="hash-link" aria-label="监控指标的直接链接" title="监控指标的直接链接">​</a></h2>
<p>可供选择的指标有：</p>
<table><thead><tr><th>指标</th><th align="center">单位</th><th align="center">类型</th><th>含义</th></tr></thead><tbody><tr><td>be_broker_count</td><td align="center">个</td><td align="center">平均值</td><td>broker的数量</td></tr><tr><td>be_brpc_endpoint_count</td><td align="center">个</td><td align="center">平均值</td><td>Brpc中StubCache的数量</td></tr><tr><td>be_bytes_read_per_second</td><td align="center">bytes/s</td><td align="center">平均值</td><td>BE 读取速度</td></tr><tr><td>be_bytes_written_per_second</td><td align="center">bytes/s</td><td align="center">平均值</td><td>BE 写入速度</td></tr><tr><td>be_base_compaction_bytes_per_second</td><td align="center">bytes/s</td><td align="center">平均值</td><td>BE 的基线合并速率</td></tr><tr><td>be_cumulative_compaction_bytes_per_second</td><td align="center">bytes/s</td><td align="center">平均值</td><td>BE 的增量合并速率</td></tr><tr><td>be_base_compaction_rowsets_per_second</td><td align="center">rowsets/s</td><td align="center">平均值</td><td>BE的基线合并rowsets合并速率</td></tr><tr><td>be_cumulative_compaction_rowsets_per_second</td><td align="center">rowsets/s</td><td align="center">平均值</td><td>BE的增量合并rowsets合并速率</td></tr><tr><td>be_base_compaction_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE基线合并失败</td></tr><tr><td>be_clone_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE克隆失败</td></tr><tr><td>be_create_rollup_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 创建物化视图失败</td></tr><tr><td>be_create_tablet_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE创建tablet 失败</td></tr><tr><td>be_cumulative_compaction_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE增量合并失败</td></tr><tr><td>be_delete_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE删除失败</td></tr><tr><td>be_finish_task_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE task失败</td></tr><tr><td>be_publish_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 版本发布失败</td></tr><tr><td>be_report_tables_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 表上报失败</td></tr><tr><td>be_report_disk_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 磁盘上报失败</td></tr><tr><td>be_report_tablet_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 分片上报失败</td></tr><tr><td>be_report_task_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 任务上报失败</td></tr><tr><td>be_schema_change_failed</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 修改表结构失败</td></tr><tr><td>be_base_compaction_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 基线合并请求</td></tr><tr><td>be_clone_total_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 克隆请求</td></tr><tr><td>be_create_rollup_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 创建物化视图请求</td></tr><tr><td>be_create_tablet_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 创建分片请求</td></tr><tr><td>be_cumulative_compaction_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 增量合并请求</td></tr><tr><td>be_delete_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE 删除请求</td></tr><tr><td>be_finish_task_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE完成任务请求</td></tr><tr><td>be_publish_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE版本发布请求</td></tr><tr><td>be_report_tablets_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE分片上报请求</td></tr><tr><td>be_report_disk_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE磁盘上报请求</td></tr><tr><td>be_report_tablet_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE任务上报请求</td></tr><tr><td>be_report_task_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE任务上报请求</td></tr><tr><td>be_schema_change_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE表结构修改请求</td></tr><tr><td>be_storage_migrate_requests</td><td align="center">个/秒</td><td align="center">平均值</td><td>BE迁移请求</td></tr><tr><td>be_fragment_endpoint_count</td><td align="center">个</td><td align="center">平均值</td><td>BE DataStream数量</td></tr><tr><td>be_fragment_request_latency_avg</td><td align="center">ms</td><td align="center">平均值</td><td>fragment 请求响应时间</td></tr><tr><td>be_fragment_requests_per_second</td><td align="center">个/秒</td><td align="center">平均值</td><td>fragment 请求数</td></tr><tr><td>be_http_request_latency_avg</td><td align="center">ms</td><td align="center">平均值</td><td>HTTP请求响应时间</td></tr><tr><td>be_http_requests_per_second</td><td align="center">个/秒</td><td align="center">平均值</td><td>HTTP请求数</td></tr><tr><td>be_http_request_send_bytes_per_second</td><td align="center">bytes/s</td><td align="center">平均值</td><td>HTTP请求发送字节数</td></tr><tr><td>fe_connections_per_second</td><td align="center">connections/s</td><td align="center">平均值</td><td>FE的新增连接速率</td></tr><tr><td>fe_connection_total</td><td align="center">connections</td><td align="center">累计值</td><td>FE的总连接数量</td></tr><tr><td>fe_edit_log_read</td><td align="center">operations/s</td><td align="center">平均值</td><td>FE edit log 读取速率</td></tr><tr><td>fe_edit_log_size_bytes</td><td align="center">bytes/s</td><td align="center">平均值</td><td>FE edit log 大小</td></tr><tr><td>fe_edit_log_write</td><td align="center">bytes/s</td><td align="center">平均值</td><td>FE edit log 写入速率</td></tr><tr><td>fe_checkpoint_push_per_second</td><td align="center">operations/s</td><td align="center">平均值</td><td>FE checkpoint 数</td></tr><tr><td>fe_pending_hadoop_load_job</td><td align="center">个</td><td align="center">平均值</td><td>Pending的hadoop job数量</td></tr><tr><td>fe_committed_hadoop_load_job</td><td align="center">个</td><td align="center">平均值</td><td>提交的 hadoop job数量</td></tr><tr><td>fe_loading_hadoop_load_job</td><td align="center">个</td><td align="center">平均值</td><td>加载中的hadoop job数量</td></tr><tr><td>fe_finished_hadoop_load_job</td><td align="center">个</td><td align="center">平均值</td><td>完成的hadoop job 数量</td></tr><tr><td>fe_cancelled_hadoop_load_job</td><td align="center">个</td><td align="center">平均值</td><td>取消的hadoop job 数量</td></tr><tr><td>fe_pending_insert_load_job</td><td align="center">个</td><td align="center">平均值</td><td>Pending的insert job数量</td></tr><tr><td>fe_loading_insert_load_job</td><td align="center">个</td><td align="center">平均值</td><td>提交的 insert job数量</td></tr><tr><td>fe_committed_insert_load_job</td><td align="center">个</td><td align="center">平均值</td><td>加载中的insert job数量</td></tr><tr><td>fe_finished_insert_load_job</td><td align="center">个</td><td align="center">平均值</td><td>完成的insert job 数量</td></tr><tr><td>fe_cancelled_insert_load_job</td><td align="center">个</td><td align="center">平均值</td><td>取消的insert job 数量</td></tr><tr><td>fe_pending_broker_load_job</td><td align="center">个</td><td align="center">平均值</td><td>Pending的broker job数量</td></tr><tr><td>fe_loading_broker_load_job</td><td align="center">个</td><td align="center">平均值</td><td>提交的 broker job数量</td></tr><tr><td>fe_committed_broker_load_job</td><td align="center">个</td><td align="center">平均值</td><td>加载中的broker job数量</td></tr><tr><td>fe_finished_broker_load_job</td><td align="center">个</td><td align="center">平均值</td><td>完成的broker job 数量</td></tr><tr><td>fe_cancelled_broker_load_job</td><td align="center">个</td><td align="center">平均值</td><td>取消的broker job 数量</td></tr><tr><td>fe_pending_delete_load_job</td><td align="center">个</td><td align="center">平均值</td><td>Pending的delete job数量</td></tr><tr><td>fe_loading_delete_load_job</td><td align="center">个</td><td align="center">平均值</td><td>提交的 delete job数量</td></tr><tr><td>fe_committed_delete_load_job</td><td align="center">个</td><td align="center">平均值</td><td>加载中的delete job数量</td></tr><tr><td>fe_finished_delete_load_job</td><td align="center">个</td><td align="center">平均值</td><td>完成的delete job 数量</td></tr><tr><td>fe_cancelled_delete_load_job</td><td align="center">个</td><td align="center">平均值</td><td>取消的delete job 数量</td></tr><tr><td>fe_rollup_running_alter_job</td><td align="center">个</td><td align="center">平均值</td><td>rollup创建中的job 数量</td></tr><tr><td>fe_schema_change_running_job</td><td align="center">个</td><td align="center">平均值</td><td>表结构变更中的job数量</td></tr><tr><td>cpu_util</td><td align="center">百分比</td><td align="center">平均值</td><td>CPU 使用率</td></tr><tr><td>cpu_system</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_system 使用率</td></tr><tr><td>cpu_user</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_user 使用率</td></tr><tr><td>cpu_idle</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_idle 使用率</td></tr><tr><td>cpu_guest</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_guest 使用率</td></tr><tr><td>cpu_iowait</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_iowait 使用率</td></tr><tr><td>cpu_irq</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_irq 使用率</td></tr><tr><td>cpu_nice</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_nice 使用率</td></tr><tr><td>cpu_softirq</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_softirq 使用率</td></tr><tr><td>cpu_steal</td><td align="center">百分比</td><td align="center">平均值</td><td>cpu_steal 使用率</td></tr><tr><td>disk_free</td><td align="center">bytes</td><td align="center">平均值</td><td>空闲磁盘容量</td></tr><tr><td>disk_io_svctm</td><td align="center">Ms</td><td align="center">平均值</td><td>磁盘IO服务时间</td></tr><tr><td>disk_io_util</td><td align="center">百分比</td><td align="center">平均值</td><td>磁盘使用率</td></tr><tr><td>disk_used</td><td align="center">bytes</td><td align="center">平均值</td><td>已用磁盘容量</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="监控报警最佳实践">监控报警最佳实践<a href="#监控报警最佳实践" class="hash-link" aria-label="监控报警 最佳实践的直接链接" title="监控报警最佳实践的直接链接">​</a></h2>
<p>监控系统背景信息：</p>
<ol>
<li>监控是按照“每 15 秒”收集一些信息；</li>
<li>一些指标是“除以 15 秒”后的，得到的单位是「个/秒」；有些指标没有除，则还是 15 秒的 count；</li>
<li>P90、P99 等分位值，当前是算的 15 秒内的，然后按更大粒度（1 分钟、5 分钟等）时，只能按“一共出现多少次 大于多少值 的报警”，不能按“平均值为多少”来做指标，那个意义是有问题的。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="总体参考">总体参考<a href="#总体参考" class="hash-link" aria-label="总体参考的直接链接" title="总体参考的直接链接">​</a></h3>
<ol>
<li>监控的目的是要既能在异常时报警、又尽量避免正常状况下的报警；</li>
<li>不同集群的资源（比如内存、磁盘）、使用量都不一样，需要设置不一样的值；不过，这种 Gauge 值可能“百分比”是有普适性的；</li>
<li>对于失败次数等，都需要看对应的总量的变化，根据一定比例（比如针对 P90，P99，P999的量）来计算报警边界值；</li>
<li>一些 used/query 等，一般都可以按照 2 倍甚至更多些来作为增长上线预警值；或者比峰值再高一些些即可；</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="规则设置参考样例">规则设置参考样例<a href="#规则设置参考样例" class="hash-link" aria-label="规则设置参考样例的直接链接" title="规则设置参考样例的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="发生低频的告警">发生低频的告警<a href="#发生低频的告警" class="hash-link" aria-label="发生低频的告警的直接链接" title="发生低频的告警的直接链接">​</a></h4>
<p>直接设置有失败（次数大于等于 1 次）就报警，失败多的就更高级报警即可。</p>
<p>e.g. schema change 等，本来操作就少，“失败就报警”就可以了。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="未启动任务">未启动任务<a href="#未启动任务" class="hash-link" aria-label="未启动任务的直接链接" title="未启动任务的直接链接">​</a></h4>
<p>这种统计可能一段时间都是 0，但一旦有此类任务，后续 success 和 failed 都可能比较多。</p>
<p>则，可以暂时先设置 <code>failed &gt; 1</code>就报警，后续可以再修改。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="波动大小">波动大小<a href="#波动大小" class="hash-link" aria-label="波动大小的直接链接" title="波动大小的直接链接">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="波动较大的">波动较大的<a href="#波动较大的" class="hash-link" aria-label="波动较大的的直接链接" title="波动较大的的直接链接">​</a></h5>
<p>需要关注不同时间粒度的数据，因为粒度大的数据中的波峰波谷会被平均掉 （后续会让 Manager 增加 sum/min/max/average等指标聚合值）。一般需要看 15 天、3 天、12 小时、3 小时、1 小时的（不同时间范围的）。</p>
<p>并且监控间隔时间可能需要稍长一些（比如 3 分钟、5 分钟，甚至更长时间），以屏蔽波动引起的报警。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="波动较小的">波动较小的<a href="#波动较小的" class="hash-link" aria-label="波动较小的的直接链接" title="波动较小的的直接链接">​</a></h5>
<p>可以设置短一些的间隔时间，以更快地报警问题。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="有较高尖刺的">有较高尖刺的<a href="#有较高尖刺的" class="hash-link" aria-label="有较高尖刺的的直接链接" title="有较高尖刺的的直接链接">​</a></h5>
<p>要看尖刺是否需要报警，如果尖刺比较多，则可以适当放大间隔时间，平滑掉尖刺，如果尖 刺较少（一天没几个），可以报一些通知级别的报警也没太大问题。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="资源使用">资源使用<a href="#资源使用" class="hash-link" aria-label="资源使用的直接链接" title="资源使用的直接链接">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="资源使用很低的">资源使用很低的<a href="#资源使用很低的" class="hash-link" aria-label="资源使用很低的的直接链接" title="资源使用很低的的直接链接">​</a></h5>
<p>可以设置相对“资源使用高的”更严格一些值，比如 cpu 使用率低的（都不到 20%的），可能 <code>cpu_idle&lt;60%</code> 就可以报警了。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="资源使用很高的">资源使用很高的<a href="#资源使用很高的" class="hash-link" aria-label="资源使用很高的的直接链接" title="资源使用很高的的直接链接">​</a></h5>
<p>可以按照“预留一点资源”的方式设置报警，比如内存，可以设置为 <code>mem_avaliable&lt;=20%</code> 报警notice。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="注意事项">注意事项<a href="#注意事项" class="hash-link" aria-label="注意事项的直接链接" title="注意事项的直接链接">​</a></h3>
<p>一般会增加 FE/BE 一起监控，但还有些值只有 FE 或只有 BE。</p>
<p>可能有一些机器不是同构的，需要分几批。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="补充">补充<a href="#补充" class="hash-link" aria-label="补充的直接链接" title="补充的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="p99-分位计算规则">P99 分位计算规则<a href="#p99-分位计算规则" class="hash-link" aria-label="P99 分位计算规则的直接链接" title="P99 分位计算规则的直接链接">​</a></h4>
<p>节点会每 15 秒钟采集数据，并计算一个值，这个 99 分位就是这 15 秒钟内的 99 分  位。当 qps 不高时（比如 qps在 10 以下），这些分位其实就不是很准确率了。同时，1 分钟（共 4 次 15 秒）内的 4 个值，也不能简单的求聚合（不管是 sum 还是 average），都是没有意义的。</p>
<p>其他 P50、P90 等都一样。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="集群错误性监控">集群错误性监控<a href="#集群错误性监控" class="hash-link" aria-label="集群错误性监控的直接链接" title="集群错误性监控的直接链接">​</a></h4>
<blockquote>
<p>需要监控集群中一些非期望的错误项，以及时发现问题，并帮助更快速地解决问题，让集群正常服务。如果一些项虽不太重要（比如 SQL 语法错误等），但<strong>暂时无法从重要错误项中剥离</strong>的，也先一并进行监控，并在后期推动区分。</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用prometheusgrafana">使用Prometheus+Grafana<a href="#使用prometheusgrafana" class="hash-link" aria-label="使用Prometheus+Grafana的直接链接" title="使用Prometheus+Grafana的直接链接">​</a></h2>
<p>StarRocks可使用<a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a>作为监控数据存储方案，使用<a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a>作为可视化组件。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="组件">组件<a href="#组件" class="hash-link" aria-label="组件的直接链接" title="组件的直接链接">​</a></h3>
<blockquote>
<p>本文档仅提供基于Prometheus和Grafana实现的一种StarRocks可视化监控方案，原则上不维护和开发这些组件。更多详细的介绍和使用，请参考对应的官网文档。</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus">Prometheus<a href="#prometheus" class="hash-link" aria-label="Prometheus的直接链接" title="Prometheus的直接链接">​</a></h4>
<p>Prometheus 是一个拥有多维度数据模型的、灵活的查询语句的时序数据库。它可以通过 Pull 或 Push 采集被监控系统的监控项，存入自身的时序数据库中。并且通过丰富的多维数据查询语言，满足用户的不同需求。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="grafana">Grafana<a href="#grafana" class="hash-link" aria-label="Grafana的直接链接" title="Grafana的直接链接">​</a></h4>
<p>Grafana 是一个开源的 metric 分析及可视化系统。支持多种数据源，详情可参考官网文档。通过对应的查询语句，从数据源中获取展现数据。通过灵活可配置的 Dashboard，快速的将这些数据以图表的形式展示给用户。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="监控架构">监控架构<a href="#监控架构" class="hash-link" aria-label="监控架构的直接链接" title="监控架构的直接链接">​</a></h3>
<p><img loading="lazy" alt="8.10.2-1" src="/zh/assets/images/8.10.2-1-8b6c6ae1f9e30e37d254a3e336569531.png" width="1488" height="686" class="img_ev3q"></p>
<p>Prometheus通过Pull方式访问FE/BE的Metric接口，然后将监控数据存入时序数据库。</p>
<p>用户可以通过Grafana配置Prometheus为数据源，自定义绘制Dashboard。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署">部署<a href="#部署" class="hash-link" aria-label="部署的直接链接" title="部署的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus-1">Prometheus<a href="#prometheus-1" class="hash-link" aria-label="Prometheus的直接链接" title="Prometheus的直接链接">​</a></h4>
<p><strong>1.</strong> 从<a href="https://prometheus.io/download/" target="_blank" rel="noopener noreferrer">Prometheus官网</a>下载最新版本的Prometheus，以下步骤以prometheus-2.29.1.linux-amd64版本为例</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://github.com/prometheus/prometheus/releases/download/v2.29.1/prometheus-2.29.1.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -xf prometheus-2.29.1.linux-amd64.tar.gz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>2.</strong> vi prometheus.yml，添加StarRocks监控相关的配置</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># my global config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scrape_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     15s </span><span class="token comment" style="color:#999988;font-style:italic"># 全局的采集间隔，默认是 1m，这里设置为 15s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">evaluation_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 15s </span><span class="token comment" style="color:#999988;font-style:italic"># 全局的规则触发间隔，默认是 1m，这里设置 15s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">job_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;StarRocks_Cluster01&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 每一个集群称之为一个job，可以自定义名字作为StarRocks集群名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metrics_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/metrics&#x27;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 指定获取监控项目的Restful Api</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">static_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;fe_host1:http_port&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;fe_host3:http_port&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;fe_host3:http_port&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fe </span><span class="token comment" style="color:#999988;font-style:italic"># 这里配置了 fe 的 group，该 group 中包含了 3 个 Frontends</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;be_host1:webserver_port&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;be_host2:webserver_port&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;be_host3:webserver_port&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> be </span><span class="token comment" style="color:#999988;font-style:italic"># 这里配置了 be 的 group，该 group 中包含了 3 个 Backends</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">job_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;StarRocks_Cluster02&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 可以在Prometheus中监控多个StarRocks集群</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metrics_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/metrics&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">static_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;fe_host1:http_port&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;fe_host3:http_port&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;fe_host3:http_port&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;be_host1:webserver_port&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;be_host2:webserver_port&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;be_host3:webserver_port&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> be</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>3.</strong> 启动 Prometheus</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">nohup</span><span class="token plain"> ./prometheus </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --config.file</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;./prometheus.yml&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --web.listen-address</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;:9090&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --log.level</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;info&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>该命令将后台运行 Prometheus，并指定其 web 端口为 9090。启动后，即开始采集数据，并将数据存放在 ./data 目录中。</p>
<p><strong>4.</strong> 访问 Prometheus</p>
<p>Prometheus 可以通过 web 页面进行简单的访问。通过浏览器打开 9090 端口，即可访问 Prometheus 的页面。点  击导航栏中，<code>Status -&gt; Targets</code>，可以看到所有分组 Job 的监控主机节点。正常情况下，所有节点都应为 UP，表示数据采集正常。如果节点状态不为 UP，可以先访问 StarRocks 的 metrics (<code>http://fe_host:fe_http_port/metrics</code>或<code>http://be_host:be_http_port/metrics</code>)接口检查是否可以访问，或查询 Prometheus 相关文档尝试解决。</p>
<p><img loading="lazy" alt="8.10.2-6" src="/zh/assets/images/8.10.2-6-9c0e3d65c339da3cde5e0f890c072428.png" width="2120" height="1234" class="img_ev3q"></p>
<p>至此，一个简单的 Prometheus 已经搭建、配置完毕。更多高级使用方式，请参阅<a href="https://prometheus.io/docs/introduction/overview/" target="_blank" rel="noopener noreferrer">官方文档</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="grafana-1">Grafana<a href="#grafana-1" class="hash-link" aria-label="Grafana的直接链接" title="Grafana的直接链接">​</a></h4>
<p><strong>1.</strong> 从<a href="https://grafana.com/grafana/download" target="_blank" rel="noopener noreferrer">Grafana官网</a>下载最新版本的Grafana，以下以grafana-8.0.6.linux-amd64版本为例</p>
<div class="language-SHELL language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://dl.grafana.com/oss/release/grafana-8.0.6.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -zxf grafana-8.0.6.linux-amd64.tar.gz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复  制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>2.</strong> vi ./conf/defaults.ini 添加配置</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[paths]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data = ./data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logs = ./data/log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plugins = ./data/plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[server]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http_port = 8000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domain = localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>3.</strong> 启动Grafana</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./bin/grafana-server \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --config=&quot;./conf/defaults.ini&quot; &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard">Dashboard<a href="#dashboard" class="hash-link" aria-label="Dashboard的直接链接" title="Dashboard的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard配置">DashBoard配置<a href="#dashboard配置" class="hash-link" aria-label="DashBoard配置的直接链接" title="DashBoard配置的直接链接">​</a></h4>
<p>登录grafana，即上一步配置的地址<code>http://grafana_host:8000</code>，默认用户名/密码为admin/admin。</p>
<p><strong>1.</strong> 数据源配置</p>
<p>配置路径：<code>Configuration--&gt;Data sources--&gt;Add data source--&gt;Prometheus</code></p>
<p>Data Source配置简介</p>
<p><img loading="lazy" alt="8.10.2-2" src="/zh/assets/images/8.10.2-2-c085a77a8dcb9525052626cf9b6575b9.png" width="2188" height="1330" class="img_ev3q"></p>
<ul>
<li>Name: 数据源的名称，自定义，比如 starrocks_monitor</li>
<li>URL: Prometheus 的 web 地址，如 <code>http://prometheus_host:9090</code></li>
<li>Access: 选择 Server 方式，即通过 Grafana 进程所在服务器，访问 Prometheus。
其余选项默认即可。</li>
</ul>
<p>点击最下方 Save &amp; Test，如果显示 Data source is working，即表示数据源可用。</p>
<p><strong>2.</strong> 添加Dashboard</p>
<p><code>注：StarRocks-1.19.0版本及其之后的版本监控Metric name有调整，需要下载下面 StarRocks-1.19.0+版本DashBoard模版</code></p>
<p><a href="http://starrocks-thirdparty.oss-cn-zhangjiakou.aliyuncs.com/StarRocks-Overview.json" target="_blank" rel="noopener noreferrer">Dashboard模版下载</a></p>
<p><a href="http://starrocks-thirdparty.oss-cn-zhangjiakou.aliyuncs.com/StarRocks-Overview-19.json" target="_blank" rel="noopener noreferrer">StarRocks-1.19.0版本及其之后版本DashBoard模版下载</a></p>
<p>Dashboard模版会不定期更新。欢迎提供更优的Dashboard。</p>
<p>确认数据源可用后，点击左边导航栏的 + 号，开始添加 Dashboard。这里我们使用上文下载的 StarRocks 的 Dashboard 模板。点击 <code>左边的导航栏 + 号 -&gt; Import -&gt; Upload Json File</code>，将下载的 json 文件导入。
导入后，可以命名 Dashboard，默认是 StarRocks Overview。同时，需要选择数据源，这里选择之前创建的 starrocks_monitor。
点击 Import，即完成导入。之后，可以看到 StarRocks 的 Dashboard 展示。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard说明">Dashboard说明<a href="#dashboard说明" class="hash-link" aria-label="Dashboard说明的直接链接" title="Dashboard说明的直接链接">​</a></h4>
<p>这里我们简要介绍 StarRocks Dashboard。Dashboard 的内容可能会随版本升级，不断更新，请参考上文Dashboard模版。</p>
<p><strong>1.</strong> 顶栏</p>
<p><img loading="lazy" alt="8.10.2-3" src="/zh/assets/images/8.10.2-3-9d13eb065fd9e1e3e3c5070267e2d9d0.png" width="2416" height="208" class="img_ev3q"></p>
<p>左上角为 Dashboard 名称。
右上角显示当前监控时间范围，可以下拉选择不同的时间范围，还可以指定定时刷新页面间隔。
cluster_name: 即 Prometheus 配置文件中的各个 job_name，代表一个 StarRocks 集群。选择不同的 cluster，下方的图表将展示对应集群的监控信息。</p>
<ul>
<li>fe_master: 对应集群的 Master Frontend 节点。</li>
<li>fe_instance: 对应集群的所有 Frontend 节点。选择不同的 Frontend，下方的图表将展示对应 Frontend 的监控信息。</li>
<li>be_instance: 对应集群的所有 Backend 节点。选择不同的 Backend，下方的图表将展示对应 Backend 的监控信息。</li>
<li>interval: 有些图表展示了速率相关的监控项，这里可选择以多大间隔进行采样计算速率（注：15s 间隔可能导致一些图表无法显示**）。</li>
</ul>
<p><strong>2.</strong> Row</p>
<p><img loading="lazy" alt="8.10.2-4" src="/zh/assets/images/8.10.2-4-e50fa30069a442fa5acb24b1f8123490.png" width="914" height="230" class="img_ev3q"></p>
<p>Grafana 中，Row 的概念，即一组图表的集合。如上图中的 Overview、Cluster Overview 即两个不同的 Row。可以通过点击 Row，对 Row 进行折叠。当前 Dashboard 有如下 Rows（持续更新中）：</p>
<ul>
<li>Overview: 所有 StarRocks 集群的汇总展示。</li>
<li>Cluster Overview: 选定集群的汇总展示。</li>
<li>Query Statistic: 选定集群的查询相关监控。</li>
<li>Jobs: 导入任务相关监控。</li>
<li>Transaction: 事务相关监控。</li>
<li>FE JVM: 选定 Frontend 的 JVM 监控。</li>
<li>BE: 选定集群的 Backends 的汇总展示。</li>
<li>BE Task: 选定集群的 Backends 任务信息的展示。</li>
</ul>
<p><strong>3.</strong> 一个典型的图标分为以下几部分：</p>
<p><img loading="lazy" alt="8.10.2-5" src="/zh/assets/images/8.10.2-5-26f293402d666066a117b1ff3b60000d.png" width="1334" height="668" class="img_ev3q"></p>
<ul>
<li>鼠标悬停左上角的 i 图标，可以查看该图表的说明。</li>
<li>点击下方的图例，可以单独查看某一监控项。再次点击，则显示所有。</li>
<li>在图表中拖拽可以选定时间范围。</li>
<li>标题的 [] 中显示选定的集群名称。</li>
<li>一些数值对应左边的Y轴，一些对应右边的，可以通过图例末尾的 -right 区分。</li>
<li>点击图表名称-&gt;Edit，可以对图表进行编辑。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="其他">其他<a href="#其他" class="hash-link" aria-label="其他的直接链接" title="其他的直接链接">​</a></h3>
<p>如果仅仅需要将监控数据接入自有的Prometheus系统，可以通过下列接口访问：</p>
<ul>
<li>FE:  fe_host<div></div>/metrics</li>
<li>BE:  be_host<div></div>/metrics</li>
</ul>
<p>如果需要JSON格式可以访问：</p>
<ul>
<li>FE:  fe_host<div></div>/metrics?type=json</li>
<li>BE:  be_host<div></div>/metrics?type=json</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/StarRocks/docs.zh-cn/edit/main/administration/Monitor_and_Alert.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/docs/2.1/administration/Metadata_recovery"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">元数据恢复（此方法并不能根本解决问题，只是为了尽快恢复集群才需要如此操作，请联系官方人员协助）</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/docs/2.1/administration/Profiling"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">性能优化</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#使用starrocksmanager" class="table-of-contents__link toc-highlight">使用StarRocksManager</a></li><li><a href="#监控指标" class="table-of-contents__link toc-highlight">监控指标</a></li><li><a href="#监控报警最佳实践" class="table-of-contents__link toc-highlight">监控报警最佳实践</a><ul><li><a href="#总体参考" class="table-of-contents__link toc-highlight">总体参考</a></li><li><a href="#规则设置参考样例" class="table-of-contents__link toc-highlight">规则设置参考样例</a></li><li><a href="#注意事项" class="table-of-contents__link toc-highlight">注意事项</a></li><li><a href="#补充" class="table-of-contents__link toc-highlight">补充</a></li></ul></li><li><a href="#使用prometheusgrafana" class="table-of-contents__link toc-highlight">使用Prometheus+Grafana</a><ul><li><a href="#组件" class="table-of-contents__link toc-highlight">组件</a></li><li><a href="#监控架构" class="table-of-contents__link toc-highlight">监控架构</a></li><li><a href="#部署" class="table-of-contents__link toc-highlight">部署</a></li><li><a href="#dashboard" class="table-of-contents__link toc-highlight">Dashboard</a></li><li><a href="#其他" class="table-of-contents__link toc-highlight">其他</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/introduction/StarRocks_intro">Documentation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 StarRocks, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>