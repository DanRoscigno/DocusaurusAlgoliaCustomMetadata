<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2.1 docs-doc-page docs-doc-id-loading/BrokerLoad" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-beta.0">
<title data-rh="true">Broker Load | StarRocks</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/docs/2.1/loading/BrokerLoad"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.1"><meta data-rh="true" name="docsearch:version" content="2.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.1"><meta data-rh="true" property="og:title" content="Broker Load | StarRocks"><meta data-rh="true" name="description" content="StarRocks supports importing data from external storage systems such as Apache HDFS, Amazon S3, etc. The supported file formats are CSV, ORC File, Parquet, etc. The data volume is in the range of tens to hundreds of GB."><meta data-rh="true" property="og:description" content="StarRocks supports importing data from external storage systems such as Apache HDFS, Amazon S3, etc. The supported file formats are CSV, ORC File, Parquet, etc. The data volume is in the range of tens to hundreds of GB."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/docs/2.1/loading/BrokerLoad"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/docs/2.1/loading/BrokerLoad" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/zh/docs/2.1/loading/BrokerLoad" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/docs/2.1/loading/BrokerLoad" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ER08SJMRY1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="StarRocks" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.62f01ed5.css">
<script src="/assets/js/runtime~main.3ec76a3f.js" defer="defer"></script>
<script src="/assets/js/main.bda7b85e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.starrocks.io/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">StarRocks</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/2.1/administration/Authentication">Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/2.1/administration/Authentication">2.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/examples/introduction">Next</a></li><li><a class="dropdown__link" href="/docs/loading/BrokerLoad">Latest-3.1</a></li><li><a class="dropdown__link" href="/docs/3.0/loading/BrokerLoad">3.0</a></li><li><a class="dropdown__link" href="/docs/2.5/loading/BrokerLoad">Stable-2.5</a></li><li><a class="dropdown__link" href="/docs/2.3/loading/BrokerLoad">2.3</a></li><li><a class="dropdown__link" href="/docs/2.2/loading/BrokerLoad">2.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2.1/loading/BrokerLoad">2.1</a></li><li><a class="dropdown__link" href="/docs/2.0/loading/BrokerLoad">2.0</a></li><li><a class="dropdown__link" href="/docs/1.19/development/Build_in_docker">1.19</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/2.1/loading/BrokerLoad" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/zh/docs/2.1/loading/BrokerLoad" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/StarRocks/starrocks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/administration/Authentication">administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/benchmarking/SSB_Benchmarking">benchmarking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/faq/Deploy_faq">faq</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/introduction/StarRocks_intro">introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/2.1/loading/BrokerLoad">loading</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.1/loading/BrokerLoad">Broker Load</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/DataX-starrocks-writer">DataX writer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/Etl_in_loading">ETL When Loading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/Flink-connector-starrocks">Load data by using flink-connector-starrocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/Flink_cdc_load">Synchronize data from MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/InsertInto">Insert Into Loading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/Json_loading">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/Loading_intro">Data import</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/RoutineLoad">Routine Load</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/SparkLoad">Spark Load</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/loading/StreamLoad">Stream load</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/2.1/quick_start">quick_start</a><button aria-label="Expand sidebar category &#x27;quick_start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/reference/Error_code">reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/release_notes/release-1.19">release_notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/sql-reference/sql-functions/How_to_Write_Functions_Documentation">sql-reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/2.1/table_design">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/unloading/Export">unloading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/using_starrocks/Array">using_starrocks</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">loading</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Broker Load</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Broker Load</h1>
<p>StarRocks supports importing data from external storage systems such as Apache HDFS, Amazon S3, etc. The supported file formats are CSV, ORC File, Parquet, etc. The data volume is in the range of tens to hundreds of GB.</p>
<p>In broker load, StarRocks reads data from the corresponding data sources (e.g. HDFS, S3) through the deployed broker program, and uses its own computing resources to pre-process and import the data. This is an <strong>asynchronous</strong> import method that the user needs to create the import job via the MySQL protocol and view the import result by command.</p>
<p>This section introduces broker load basics, examples, best practices, and frequently asked questions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="terminology-explanation">Terminology Explanation<a href="#terminology-explanation" class="hash-link" aria-label="Direct link to Terminology Explanation" title="Direct link to Terminology Explanation">​</a></h2>
<ul>
<li>
<p>Broker: Broker is a standalone stateless process that encapsulates the file system interface and provides StarRocks with the ability to read files from remote storage systems.</p>
</li>
<li>
<p>Plan: Import execution plan. BE executes an import execution plan to import data into the StarRocks system.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fundamentals">Fundamentals<a href="#fundamentals" class="hash-link" aria-label="Direct link to Fundamentals" title="Direct link to Fundamentals">​</a></h2>
<p>After the user submits the import job, the FE generates and distributes the corresponding plan to multiple BEs based on the data volume. Each BE executes a part of the import job. Once all the BEs finish importing, the FE will determine whether the import is successful or not.</p>
<p>The following diagram shows the main flow of broker load.</p>
<p><img loading="lazy" alt="brokerload" src="/assets/images/4.2.2-1-3f28545c160c67e87bc0d8e454d67dda.png" width="1331" height="1673" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-remote-file-systems">Supported Remote File Systems<a href="#supported-remote-file-systems" class="hash-link" aria-label="Direct link to Supported Remote File Systems" title="Direct link to Supported Remote File Systems">​</a></h2>
<ul>
<li>Apache HDFS</li>
<li>Amazon S3</li>
<li>Alibaba Cloud OSS</li>
<li>Tencent COS</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="import-example">Import Example<a href="#import-example" class="hash-link" aria-label="Direct link to Import Example" title="Direct link to Import Example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="broker-build">Broker build<a href="#broker-build" class="hash-link" aria-label="Direct link to Broker build" title="Direct link to Broker build">​</a></h3>
<p>Broker Load needs a broker to access the remote storage, so a broker needs to be built first.</p>
<p>You can refer to the manual deployment (<a href="/docs/2.1/quick_start/Deploy">Deploy Broker</a>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-import-job">Create import job<a href="#create-import-job" class="hash-link" aria-label="Direct link to Create import job" title="Direct link to Create import job">​</a></h3>
<p><strong>Syntax:</strong></p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL db_name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label_name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_desc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER broker_name broker_properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key1</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data_desc:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;file_path&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NEGATIVE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> tbl_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> column_separator </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">FORMAT </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> file_type</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> PATH </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">colx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k1</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">f1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k2</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">f2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> predicate</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">broker_properties: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key2</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Example 1 import from Apache HDFS:</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL db1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://abc.com:8888/user/palo/test/ml/file1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> tbl1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tmp_c1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tmp_c2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tmp_c2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tmp_c1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://abc.com:8888/user/palo/test/ml/file2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> tbl2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> col1 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER </span><span class="token string" style="color:#e3116c">&#x27;broker&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hdfs_username&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hdfs_password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;timeout&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Example 2 import from Alibaba Cloud OSS:</strong></p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> LABEL example_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">DATA</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INFILE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;oss://my_bucket/input/file.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">my_table</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> BROKER my_broker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fs.oss.accessKeyId&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fs.oss.accessKeySecret&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;yyyyyyyyyyyyyyyyyyyy&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fs.oss.endpoint&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;oss-cn-zhangjiakou-internal.aliyuncs.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we introduce the parameters shown in the command.</p>
<p><strong>Label:</strong></p>
<p>The label of the import job. Each import job has <strong>a unique label inside the database</strong>. A label is a user-defined name in the import command. It allows the user to view the execution of the corresponding import job and it can be used to prevent the same data from being imported repeatedly. When the status of the import job is <code>FINISHED</code>, the corresponding label cannot be used again. When the status of the import job is <code>CANCELLED</code>, <strong>the Label can be used again</strong>.</p>
<p><strong>Data Description Parameters:</strong></p>
<p>Data description parameters refer to the parameters of the <code>data_desc</code> section in the statement. The <code>data_desc</code> statement declares the information including data source address, ETL function, target table, and partition involved in this import job. Detailed description of data description parameters are as follows:</p>
<ul>
<li>Multi-Table Import</li>
</ul>
<p>Broker load supports multiple tables involved in one import job, which can be achieved by declaring multiple tables with multiple <code>data_desc</code>. Each <code>data-desc</code> shows the address of a data source belonging to <strong>that table</strong>. Multiple file-paths can be declared for importing the same table. Broker load guarantees the atomicity of imports.</p>
<ul>
<li>file_path</li>
</ul>
<p>The file path can be specified to a single file or to all files in a directory using <code>*</code>. Intermediate directories can also be matched with wildcards.</p>
<p>The wildcards that can be used are <code>? * [] {} ^</code>, <a href="https://hadoop.apache.org/docs/stable/api/org/apache/hadoop/fs/FileSystem.html#globStatus-org.apache.hadoop.fs.Path-" target="_blank" rel="noopener noreferrer">wildcard usage rules reference</a>.</p>
<p>For example:
Users can match all files in all partitions under <code>tablename</code> by <code>hdfs://hdfs_host:hdfs_port/user/data/tablename/*/*</code> .
Users can match all files in all <code>April</code> partitions under <code>tablename</code>by <code>hdfs://hdfs_host:hdfs_port/user/data/tablename/dt=202104*/*</code>.</p>
<ul>
<li>negative</li>
</ul>
<p><code>Data_desc</code> also allows you to reverse the imported data. This function is applicable when the aggregated columns in the data table are all of the <code>SUM</code> type. If you want to undo a batch of imported data, you can import the same batch of data with the <code>negative</code> parameter. StarRocks will automatically invert the data on the aggregated columns, and yet remove the imported data.</p>
<ul>
<li>
<p>partition</p>
<p><code>data_desc</code> allows you to specify the partition of the table to where data is imported. If the data to be imported does not belong to the specified partition, it will not be imported and considered as &quot;wrong data&quot;. For data that you do not want to import nor to record as &quot;wrong data&quot;, you can use <code>where predicate</code> to filter it.</p>
</li>
<li>
<p>column separator</p>
</li>
</ul>
<p>Specify the column separator in the import file. The default is <code>t</code>.</p>
<p>If it is an invisible character, you need to add <code>x</code> as a prefix and use hexadecimal to represent the separator. For example, the separator <code>x01</code> of the hive file is specified as <code>\x01</code>.</p>
<ul>
<li>file type</li>
</ul>
<p>Specify the type of the imported file (e.g. parquet, orc, csv). The default is csv.</p>
<p>The parquet type can also be recognized by the file suffix <strong>.parquet</strong> or <strong>.parq</strong>.</p>
<ul>
<li>COLUMNS FROM PATH AS</li>
</ul>
<p>Extracts the partition fields in the file path.</p>
<p>Example: If the imported file is <code>/path/col_name=col_value/dt=20210101/file1</code>, and <code>col_name/dt</code> is a column in the table, set the following statement to import <code>col_value</code> and <code>20210101</code> into the columns <code>col_name</code> and <code>dt</code> respectively.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> col2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> PATH </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">col_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dt</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>set column mapping</li>
</ul>
<p>The <code>SET</code> statement in <code>data_desc</code> is responsible for setting a column’s <strong>conversion function</strong>, which supports all equivalent functions. This statement is needed if the columns of the original data do not correspond to the columns in the table.</p>
<ul>
<li>where predicate</li>
</ul>
<p>The <code>WHERE</code> statement in <code>data_desc</code> is responsible for filtering the data that has been transformed. The filtered data is not counted in the tolerance rate. If multiple conditions about the same table are declared in multiple <code>data-desc</code>, they are merged with <code>AND</code>.</p>
<p><strong>Import job parameters:</strong></p>
<p>Import job parameters are parameters that belong to the <code>opt_properties</code> section, and are applied to the entire import job. See the following for parameter details.</p>
<ul>
<li>timeout</li>
</ul>
<p>The timeout value (in seconds) for importing jobs. You can set the timeout value for each import in <code>opt_properties</code>. The import job will be <code>CANCELLED</code> if it is not completed within the set time limit. The default import timeout for broker load is 4 hours.</p>
<blockquote>
<p>Note: Normally, users do not need to set this parameter unless the import cannot be completed within the default time.</p>
</blockquote>
<p>The recommended timeout value is calculated as follows.</p>
<p><code>Timeout value &gt; ((Total file size (MB) * Number of tables to be imported and related Roll up tables) / (10 * Number of import concurrency))</code></p>
<p><code>number of import concurrency</code> is described in the import system configuration at the end of the document. <code>10</code> indicates the current default speed limit for BE import (i.e. 10MB/s).</p>
<p>For example, for a 1GB data to be imported to a table which contains 2 rollup tables, with an import concurrency of 3, the minimum value of timeout is (1 * 1024 * 3 ) / (10 * 3) = 102 seconds.</p>
<p>Since each StarRocks cluster has its unique machine environment and different concurrent query tasks, the slowest import speed of a StarRocks cluster needs to be speculated by the user based on the historical import job speed.</p>
<ul>
<li>max_filter_ratio</li>
</ul>
<p>The maximum fault tolerance rate of the import job with a default value of 0 and a range of 0 to 1. When the error rate of the import job exceeds this value, the job will fail.</p>
<p>Users can set this value greater than 0 to ensure data import despite erroneous rows.</p>
<p>The calculation formula is</p>
<p><code>max_filter_ratio = (dpp.abnorm.ALL / (dpp.abnorm.ALL + dpp.norm.ALL ) )</code></p>
<p><code>dpp.abnorm.ALL</code> is the number of rows with unqualified data quality, such as type mismatch, column mismatch, length mismatch, etc.</p>
<p><code>dpp.norm.ALL</code> is the number of rows with correct data during the import. Users can use the <code>SHOW LOAD</code> command to check the correct amount of data for the import job.</p>
<p>Number of rows in the original file = dpp.abnorm.ALL + dpp.norm.ALL</p>
<ul>
<li>exec_mem_limit</li>
</ul>
<p>Import memory limit (in bytes), with a default value of 2GB.</p>
<ul>
<li>strict_mode</li>
</ul>
<p>The <code>strict_mode</code> of broker load can be turned on by setting      &quot;strict_mode&quot; = &quot;true&quot;. The default is off.</p>
<p>Strict mode means to strictly filter column type conversion during import. The strict filtering policy is as follows.</p>
<p>1.For column type conversion, the wrong data will be filtered out under strict mode. Here the wrong data refers to data which is not null originally but turned into null after being converted.</p>
<p>However, this policy does not apply to the following scenarios     :</p>
<ol>
<li>For an imported column <strong>generated by a conversion function</strong>, strict mode has no effect on it.</li>
<li>An imported column containing a range restriction can be converted to a target type regardless of its range restriction. The strict mode will have no effect on it. For example, if the data type of the target column is <code>decimal(1,0)</code>, but the original data being imported is <code>10</code>, the import can satisfy the type conversion but not the range restriction. In this case, strict mode has no effect on the import.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="checking-import-job-status">Checking import job status<a href="#checking-import-job-status" class="hash-link" aria-label="Direct link to Checking import job status" title="Direct link to Checking import job status">​</a></h3>
<p>Broker load is asynchronous, and users can specify labels in the <code>SHOW LOAD</code> command to check execution status. It should be noted that the <code>SHOW LOAD</code> command can only be used to view load jobs being asynchronously imported. Synchronous load jobs, such as stream load, cannot be viewed with the <code>SHOW LOAD</code> command.</p>
<p>Example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">load</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> label </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;label1&#x27;</span><span class="token plain">\G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         JobId: </span><span class="token number" style="color:#36acaa">76391</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         Label: label1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         State: FINISHED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Progress: ETL:N</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">A</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">100</span><span class="token operator" style="color:#393A34">%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">Type</span><span class="token plain">: BROKER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       EtlInfo: unselected</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">rows</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> dpp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">abnorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> dpp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">norm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">28133376</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      TaskInfo: cluster:N</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">A</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">10800</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> max_filter_ratio:</span><span class="token number" style="color:#36acaa">5.0</span><span class="token plain">E</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ErrorMsg: N</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CreateTime: </span><span class="token number" style="color:#36acaa">2019</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">07</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">46</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EtlStartTime: </span><span class="token number" style="color:#36acaa">2019</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">07</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">46</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> EtlFinishTime: </span><span class="token number" style="color:#36acaa">2019</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">07</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">46</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> LoadStartTime: </span><span class="token number" style="color:#36acaa">2019</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">07</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">46</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LoadFinishTime: </span><span class="token number" style="color:#36acaa">2019</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">07</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">50</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           URL: http:</span><span class="token comment" style="color:#999988;font-style:italic">//192.168.1.1:8040/api/_load_error_log?file=__shard_4/error_log_insert_stmt_4bb00753932c491a-a6da6e2725415317_4bb00753932c491a_a6da6e2725415317</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JobDetails: {</span><span class="token string" style="color:#e3116c">&quot;Unfinished backends&quot;</span><span class="token plain">:{</span><span class="token string" style="color:#e3116c">&quot;9c3441027ff948a0-8287923329a2b6a7&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10002</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;ScannedRows&quot;</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">2390016</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;TaskNumber&quot;</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;All backends&quot;</span><span class="token plain">:{</span><span class="token string" style="color:#e3116c">&quot;9c3441027ff948a0-8287923329a2b6a7&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10002</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;FileNumber&quot;</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;FileSize&quot;</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">1073741824</span><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following describes the parameters returned by the <code>SHOW LOAD</code> command.</p>
<ul>
<li>JobId: The unique ID of the imported job. The JobId is different for each imported job and is automatically generated by the system. Unlike labels, JobId <strong>will never be the same</strong>, while labels can be reused after the import job fails.</li>
<li>Label: Identifier of the imported job.</li>
<li>State: The current state of the import job. The two main states of an import –-<code>PENDING</code> and <code>LOADING</code>-- occur during the broker load. <code>PENDING</code> indicates the import job is waiting to be executed, while <code>LOADING</code> indicates the job is being executed.</li>
<li>There are two final stages of an import job –<code>CANCELLED</code> and <code>FINISHED</code>; both indicate the import job is completed. <code>CANCELLED</code> indicates an import failure, while <code>FINISHED</code> indicates an import success.</li>
<li>Progress: The progress description of the import job. There are two types of progress –<code>ETL</code> and <code>LOAD</code>, both of which      correspond to the two phases of the import process. <code>ETL</code> is fixed to <code>N/A</code> since the broker load does not have this stage presently, while the progress range of <code>load</code> is 0~100%. <code>Load progress = (the number of tables currently completed import / the total number of tables designed for this import job) * 100%</code></li>
<li>The load progress will be 99% after all data have been imported and changed to 100% after the import takes effect.</li>
</ul>
<blockquote>
<p>Note: The import progress is not linear, so if the progress does not change for a period of time, it does not mean that the import is not executing.</p>
</blockquote>
<ul>
<li>Type: The type of the imported job. Type for broker load takes the value <code>BROKER</code>.</li>
<li>EtlInfo: Contains parameters of the imported data volume, such as <code>unselected.rows</code>, <code>dpp.norm.ALL</code> and <code>dpp.abnorm.ALL</code>. The first parameter can be used to determine how many rows are filtered by the <code>where</code> condition, and the last two parameters verify that the error rate of the current import job does not exceed      <code>max-filter-ratio</code>. The sum of the three parameters is the total number of rows in the original data volume.</li>
<li>TaskInfo: Mainly shows parameters of the current import job, that is, the parameters specified by the user when creating the Broker Load import job. Those include cluster, timeout and max-filter-ratio.</li>
<li>ErrorMsg: If the status of the import job is <code>CANCELLED</code>, the reason for failure is displayed by ErrorMsg. Each ErrorMsg includes type and msg. N/A is displayed if the import job is successful.</li>
</ul>
<p>The meaning of the values of <strong>type</strong> :</p>
<ul>
<li>
<p>USER-CANCEL: The job that is cancelled by the user.</p>
</li>
<li>
<p>ETL-RUN-FAIL: The job that failed in the ETL phase.</p>
</li>
<li>
<p>ETL-QUALITY-UNSATISFIED: Data quality failed, i.e. the error data rate exceeded max-filter-ratio.</p>
</li>
<li>
<p>LOAD-RUN-FAIL: The job that failed in the LOADING phase.</p>
</li>
<li>
<p>TIMEOUT: The job that failed to complete within the timeout period.</p>
</li>
<li>
<p>UNKNOWN: Unknown import error.</p>
</li>
<li>
<p>CreateTime/EtlStartTime/EtlFinishTime/LoadStartTime/LoadFinishTime: This value represents the import creation time, ETL phase start time, ETL phase completion time, Loading phase start time and the entire import job completion time.</p>
</li>
<li>
<p>Broker Load import has no ETL phase, so its <code>EtlStartTime</code>, <code>EtlFinishTime</code>, <code>LoadStartTime</code> are set to the same value.</p>
</li>
<li>
<p>If the import job stays at <code>CreateTime</code> for a long time and <code>LoadStartTime</code> is N/A, the import job is currently heavily stacked and the user should reduce the frequency of import commits.</p>
</li>
</ul>
<p><code>LoadFinishTime - CreateTime = time consumed by the entire import task</code></p>
<p><code>LoadFinishTime - LoadStartTime = execution time of the entire Broker load import job = time consumed by the entire import job - wait time of the import job</code>.</p>
<ul>
<li>URL: Sample error data for the import job, which can be obtained by accessing the URL address. When no error data exists for this import, the URL field is N/A.</li>
<li>JobDetails: Shows the detailed status of the job, including the number of imported files, the total size (bytes), the number of subtasks, the number of raw rows processed, the BE node Id of running subtasks, and the BE node id of incomplete jobs.</li>
</ul>
<p><code>{&quot;Unfinished backends&quot;:{&quot;9c3441027ff948a0-8287923329a2b6a7&quot;:[10002]},&quot;ScannedRows&quot;:2390016,&quot;TaskNumber&quot;:1,&quot;All backends&quot;:{&quot;9c3441027ff948a0-8287923329a2b6a7&quot;:[10002]},&quot;FileNumber&quot;:1,&quot;FileSize&quot;:1073741824}</code></p>
<p>The original number of rows processed is updated every 5 seconds. This number of rows is only used to show the current progress, and does not represent the actual number of rows processed in total. The total number of rows processed is displayed in EtlInfo.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cancel-import-job">Cancel import job<a href="#cancel-import-job" class="hash-link" aria-label="Direct link to Cancel import job" title="Direct link to Cancel import job">​</a></h3>
<p>When the status of the broker load job is not <code>CANCELLED</code> or <code>FINISHED</code>, it can be cancelled manually by the user. To cancel, specify the label of the import job.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-configuration">Related Configuration<a href="#related-configuration" class="hash-link" aria-label="Direct link to Related Configuration" title="Direct link to Related Configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parallelism">Parallelism<a href="#parallelism" class="hash-link" aria-label="Direct link to Parallelism" title="Direct link to Parallelism">​</a></h3>
<p>A job can be split into one or more subtasks, and the subtasks are executed in parallel. The splitting is determined by the DataDescription in the <code>LOAD</code> statement. For example,</p>
<ol>
<li>When multiple <code>DataDescriptions</code> correspond to the import of multiple different tables, each will be split into one subtask.</li>
<li>When multiple <code>DataDescriptions</code> correspond to the import of different partitions of the same table, each will also be split into one subtask.</li>
</ol>
<p>Each task is also split into one or more instances, which are then equally distributed to BEs for parallel execution. The splitting =is determined by the following FE configuration.
<code>min_bytes_per_broker_scanner</code>: The minimum amount of data to be processed by a single instance, with a default value of 64MB.
<code>max_broker_concurrency</code>: The maximum number of concurrent instances for a single job, with a default value of 100.
<code>load_parallel_instance_num</code>: The number of concurrent instances on a single BE, with a default value of 1.
<code>Total number of instances = min(total import file size / minimum amount of data handled by a single instance, maximum number of concurrent instances for a single job, number of concurrent instances on a single BE * number of BEs)</code></p>
<p>In general, a job has only one <code>DataDescription</code> and will be split into only one task. The task will be split into instances equal to the number of BEs and then assigned to those BEs for parallel execution.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="frequently-asked-questions">Frequently Asked Questions<a href="#frequently-asked-questions" class="hash-link" aria-label="Direct link to Frequently Asked Questions" title="Direct link to Frequently Asked Questions">​</a></h2>
<ul>
<li>
<p>Q: Error reported for data quality issue: <code>ETL_QUALITY_UNSATISFIED; msg:quality not good enough to cancel</code>.</p>
<p>A: Please refer to Import Overview/FAQ`.</p>
</li>
<li>
<p>Q: Import error: <code>failed to send batch</code> or <code>TabletWriter add batch with unknown id</code>.</p>
<p>A: Modify <code>query_timeout</code> and <code>streaming_load_rpc_max_alive_time_sec</code> appropriately. Please refer to Import Overview/Common System Configuration/BE Configuration      .</p>
</li>
<li>
<p>Q：Import error: <code>LOAD-RUN-FAIL; msg:Invalid Column Name:xxx</code></p>
</li>
</ul>
<p>A：If the data is in parquet or ORC format, keep the column name in the file header consistent with the one in the StarRocks table, for example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tmp_c1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tmp_c2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tmp_c2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tmp_c1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This means the column with (tmp_c1, tmp_c2) as column name in parquet or ORC file is mapped to (id, name) column in the StarRocks table. If <code>SET</code> is not declared, the columns are imported in order.</p>
<blockquote>
<p>Note: If you use ORC files generated directly from some versions of Hive, the table header in the ORC file is not Hive meta data but <code>(_col0, _col1, _col2, ...)</code>, which may lead to <code>Invalid Column Name error</code>. In that case, use <code>set</code> for mapping.</p>
</blockquote>
<ul>
<li>
<p>Q：Other errors.</p>
<p>A: For other issues such as jobs that take a long time to complete, you can go to <code>log/be.INFO</code> in BE and search for <code>kafka error</code> for specific reasons.</p>
</li>
<li>
<p>Q: How to configure Hadoop HA</p>
<p>A: The following configuration is used to access an HDFS cluster deployed in HA mode.</p>
<p><code>dfs.nameservices</code>: Customized name of the HDFS service, e.g. <code>dfs.nameservices</code> = <code>my_ha</code>.</p>
<p><code>dfs.ha.namenodes.xxx</code>: Customized name of the namenode as the <code>xxx</code>, multiple names can be separated by commas, e.g. &quot;dfs.ha.namenodes.my_ha&quot; = &quot;my_nn&quot;.</p>
</li>
</ul>
<p><code>dfs.namenode.rpc-address.xxx.nn</code>: The rpc address for the namenode where nn indicates the name of the configured namenode in <code>dfs.ha.namenodes.xxx</code>. e.g. &quot;dfs.namenode.rpc-address.my_ha.my_nn&quot; = &quot;host</p><div></div>&quot;.<p></p>
<p><code>dfs.client.failover.proxy.provider</code>: The provider of the client to connect to the namenode with a default value of <code>org.apache.hadoop.hdfs.server.namenode.ha. ConfiguredFailoverProxyProvider</code>.</p>
<p>For example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token string" style="color:#e3116c">&quot;dfs.nameservices&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-ha&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token string" style="color:#e3116c">&quot;dfs.ha.namenodes.my-ha&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-namenode1, my-namenode2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token string" style="color:#e3116c">&quot;dfs.namenode.rpc-address.my-ha.my-namenode1&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nn1-host:rpc_port&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token string" style="color:#e3116c">&quot;dfs.namenode.rpc-address.my-ha.my-namenode2&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nn2-host:rpc_port&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token string" style="color:#e3116c">&quot;dfs.client.failover.proxy.provider&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>HA mode can be combined with the previous two authentication methods for cluster access. For example, accessing HA HDFS through simple authentication:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;passwd&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.nameservices&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-ha&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.ha.namenodes.my-ha&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_namenode1, my_namenode2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.namenode.rpc-address.my-ha.my-namenode1&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nn1-host:rpc_port&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.namenode.rpc-address.my-ha.my-namenode2&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;nn2-host:rpc_port&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dfs.client.failover.proxy.provider&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>HDFS cluster configuration can be written in the <code>hdfs-site.xml file</code>. When using the Broker process to read information of an HDFS cluster, fill in the file path name and authentication information of the cluster.</p>
<ul>
<li>
<p>Q: How to configure Hadoop ViewFS (federation)</p>
<p>A: Copy the ViewFS related configuration <code>core-site.xml</code> and <code>hdfs-site.xml</code> to <code>broker/conf</code>.</p>
</li>
</ul>
<p>If there is a custom FileSystem, copy the relevant jar to      <code>broker/lib</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/StarRocks/starrocks/edit/main/docs/loading/BrokerLoad.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2.1/introduction/StarRocks_intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">StarRocks</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2.1/loading/DataX-starrocks-writer"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DataX writer</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#terminology-explanation" class="table-of-contents__link toc-highlight">Terminology Explanation</a></li><li><a href="#fundamentals" class="table-of-contents__link toc-highlight">Fundamentals</a></li><li><a href="#supported-remote-file-systems" class="table-of-contents__link toc-highlight">Supported Remote File Systems</a></li><li><a href="#import-example" class="table-of-contents__link toc-highlight">Import Example</a><ul><li><a href="#broker-build" class="table-of-contents__link toc-highlight">Broker build</a></li><li><a href="#create-import-job" class="table-of-contents__link toc-highlight">Create import job</a></li><li><a href="#checking-import-job-status" class="table-of-contents__link toc-highlight">Checking import job status</a></li><li><a href="#cancel-import-job" class="table-of-contents__link toc-highlight">Cancel import job</a></li></ul></li><li><a href="#related-configuration" class="table-of-contents__link toc-highlight">Related Configuration</a><ul><li><a href="#parallelism" class="table-of-contents__link toc-highlight">Parallelism</a></li></ul></li><li><a href="#frequently-asked-questions" class="table-of-contents__link toc-highlight">Frequently Asked Questions</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/StarRocks_intro">Documentation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 StarRocks, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>