<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2.1 docs-doc-page docs-doc-id-table_design/Data_model" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-beta.0">
<title data-rh="true">Data Models | StarRocks</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/docs/2.1/table_design/Data_model"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.1"><meta data-rh="true" name="docsearch:version" content="2.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.1"><meta data-rh="true" property="og:title" content="Data Models | StarRocks"><meta data-rh="true" name="description" content="According to the mapping relationship between ingested data and actual stored data, StarRocks provides corresponding data models for different types of tables. Here we reference the concept of primary key (in the relational model), and use the value of the key column as the sort key. Compared with the traditional primary key,StarRocks’s sort key has these features:"><meta data-rh="true" property="og:description" content="According to the mapping relationship between ingested data and actual stored data, StarRocks provides corresponding data models for different types of tables. Here we reference the concept of primary key (in the relational model), and use the value of the key column as the sort key. Compared with the traditional primary key,StarRocks’s sort key has these features:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/docs/2.1/table_design/Data_model"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/docs/2.1/table_design/Data_model" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/zh/docs/2.1/table_design/Data_model" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/docs/2.1/table_design/Data_model" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ER08SJMRY1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="StarRocks" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.62f01ed5.css">
<script src="/assets/js/runtime~main.3ec76a3f.js" defer="defer"></script>
<script src="/assets/js/main.bda7b85e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.starrocks.io/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">StarRocks</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/2.1/administration/Authentication">Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/2.1/administration/Authentication">2.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/examples/introduction">Next</a></li><li><a class="dropdown__link" href="/docs/introduction/StarRocks_intro">Latest-3.1</a></li><li><a class="dropdown__link" href="/docs/3.0/administration/Authentication">3.0</a></li><li><a class="dropdown__link" href="/docs/2.5/administration/Authentication">Stable-2.5</a></li><li><a class="dropdown__link" href="/docs/2.3/table_design/Data_model">2.3</a></li><li><a class="dropdown__link" href="/docs/2.2/table_design/Data_model">2.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2.1/table_design/Data_model">2.1</a></li><li><a class="dropdown__link" href="/docs/2.0/table_design/Data_model">2.0</a></li><li><a class="dropdown__link" href="/docs/1.19/table_design/Data_model">1.19</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/2.1/table_design/Data_model" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/zh/docs/2.1/table_design/Data_model" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/StarRocks/starrocks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/administration/Authentication">administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/benchmarking/SSB_Benchmarking">benchmarking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/faq/Deploy_faq">faq</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/introduction/StarRocks_intro">introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/loading/BrokerLoad">loading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/2.1/quick_start">quick_start</a><button aria-label="Expand sidebar category &#x27;quick_start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/reference/Error_code">reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/release_notes/release-1.19">release_notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/sql-reference/sql-functions/How_to_Write_Functions_Documentation">sql-reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/2.1/table_design">Introduction</a><button aria-label="Collapse sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/table_design/Bitmap_index">Bitmap Indexing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/table_design/Bloomfilter_index">Bloom Filter Indexing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/table_design/Data_distribution">Data distribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.1/table_design/Data_model">Data Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/table_design/Materialized_view">Materialized View</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/table_design/Sort_key">Sort Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.1/table_design/StarRocks_table_design">Table Design</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/unloading/Export">unloading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.1/using_starrocks/Array">using_starrocks</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/2.1/table_design"><span itemprop="name">Introduction</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Data Models</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Data Models</h1>
<p>According to the mapping relationship between ingested data and actual stored data, StarRocks provides corresponding data models for different types of tables. Here we reference the concept of primary key (in the relational model), and use the value of the key column as the sort key. Compared with the traditional primary key,StarRocks’s sort key has these features:</p>
<ul>
<li>All key columns are sort keys, so the sort key mentioned later is essentially a key column.</li>
<li>Sort keys are repeatable and do not have to satisfy the uniqueness constraint.</li>
<li>Each column of the table is stored by cluster in the order of the sorted keys.</li>
<li>Sort keys use sparse indexes.</li>
</ul>
<p>There are three models that can be used to ingest multiple rows of data with duplicate primary keys and populate them to data tables:</p>
<ul>
<li>Duplicate model: There are rows of data with duplicate primary keys in the table. The stored data and ingested data rows correspond to each other, so that users can recall all historical data.</li>
<li>Aggregation model: There are no data rows with duplicate primary keys. In this case, those rows are merged into one row according to the aggregation function. Users can recall the aggregated results of all historical data, but not the data itself.</li>
<li>Update model: This is a special case of aggregation model. In this model, the primary key satisfies the uniqueness constraint, and the most recently ingested row replaces the other rows that have duplicate primary keys. This is equivalent to an aggregation model in which the aggregation function is <code>REPLACE</code>, and the <code>REPLACE</code> function returns the most recent data in the set.</li>
</ul>
<p>Note:</p>
<ul>
<li>In the table build statement, the definition of the sort key must appear before the definition of the value column.</li>
<li>The order of key columns appearing in the build statement determines the order of sort keys presented.</li>
<li>The shortkey index contains several prefix columns of the sort key.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="duplicate-model">Duplicate model<a href="#duplicate-model" class="hash-link" aria-label="Direct link to Duplicate model" title="Direct link to Duplicate model">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenarios-for-duplicate-model">Scenarios for duplicate model<a href="#scenarios-for-duplicate-model" class="hash-link" aria-label="Direct link to Scenarios for duplicate model" title="Direct link to Scenarios for duplicate model">​</a></h3>
<p>Duplicate model is the default model in StarRocks.</p>
<p>The suitable scenarios have the following characteristics:</p>
<ul>
<li>Need to retain the original data (e.g. logs, operational records, etc.) for analysis.</li>
<li>Be able to query flexibly and not limited to pre-defined analytical methods, which are difficult to accomplish by traditional pre-aggregation methods.</li>
<li>Infrequent data updates. The source of the imported data is usually log data or time-series data, which is mainly characterized by append write and the data itself will not change much after it is generated.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="principle-of-duplicate-model">Principle of duplicate model<a href="#principle-of-duplicate-model" class="hash-link" aria-label="Direct link to Principle of duplicate model" title="Direct link to Principle of duplicate model">​</a></h3>
<p>Users can specify the sort key of the table. If it’s not explicitly specified, StarRocks will set default columns as the sort key. When the sort key is set as a filter, StarRocks can quickly filter the data and reduce query latency.</p>
<p>Note: When importing two identical rows of data into a duplicate model table, StarRocks will consider them as two rows of data.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-duplicate-model">How to use duplicate model<a href="#how-to-use-duplicate-model" class="hash-link" aria-label="Direct link to How to use duplicate model" title="Direct link to How to use duplicate model">​</a></h3>
<p>The table adopts the duplicate model by default. The sort key uses shortkey index to filter the data quickly. Users can consider setting the frequently used key column as sort key. For example, if you frequently view data for a certain type of event in a certain time range, you can set <code>event time</code> and <code>event type</code> as sort keys.</p>
<p>The following is an example of creating a data table using the duplicate model.</p>
<ul>
<li>Where <code>DUPLICATE KEY(event_time, event_type)</code> indicates that the duplicate model is used, and the sort key is defined before the definitions of other columns.</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> detail </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> event_time </span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;datetime of event&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> event_type </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;type of event&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> user_id </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id of user&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> device_code </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;device of&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> channel </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DUPLICATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event_type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HASH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> BUCKETS </span><span class="token number" style="color:#36acaa">8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes-on-duplicate-model">Notes on duplicate model<a href="#notes-on-duplicate-model" class="hash-link" aria-label="Direct link to Notes on duplicate model" title="Direct link to Notes on duplicate model">​</a></h3>
<p>Make full use of the sort key by defining the frequently used columns up front to improve query speed. In the duplicate model, you can specify some of the key columns as sort keys, whereas in the aggregation model and update model, the sort keys can only be all key columns.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation-model">Aggregation model<a href="#aggregation-model" class="hash-link" aria-label="Direct link to Aggregation model" title="Direct link to Aggregation model">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenarios-for-aggregation-model">Scenarios for aggregation model<a href="#scenarios-for-aggregation-model" class="hash-link" aria-label="Direct link to Scenarios for aggregation model" title="Direct link to Scenarios for aggregation model">​</a></h3>
<p>Data statistics and aggregation are common concepts of data analysis. For example:</p>
<ul>
<li>Website or APP owners monitor data on total visits and visit duration</li>
<li>Advertising vendors gather data onad clicks, total number of displays, and consumption statistics for advertisers;</li>
<li>Marketing people analyze data on annual transactions and top products of each demographic category for a specific quarter or month.</li>
</ul>
<p>The suitable scenarios for  using aggregation model have the following characteristics:</p>
<ul>
<li>Queries need to be aggregated through <code>sum</code>, <code>count</code>, and/or <code>max</code>.</li>
<li>No need to recall the original data.</li>
<li>Historical data will not be updated frequently;new data will be appended.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="principle-of-aggregation-model">Principle of aggregation model<a href="#principle-of-aggregation-model" class="hash-link" aria-label="Direct link to Principle of aggregation model" title="Direct link to Principle of aggregation model">​</a></h3>
<p>StarRocks aggregates value columns by corresponding key columns, which reduces the amount of data for processing and increases query efficiency.</p>
<p>Take the following raw data as an example.</p>
<table><thead><tr><th align="center">Date</th><th align="center">Country</th><th align="center">PV</th></tr></thead><tbody><tr><td align="center">2020.05.01</td><td align="center">CHN</td><td align="center">1</td></tr><tr><td align="center">2020.05.01</td><td align="center">CHN</td><td align="center">2</td></tr><tr><td align="center">2020.05.01</td><td align="center">USA</td><td align="center">3</td></tr><tr><td align="center">2020.05.01</td><td align="center">USA</td><td align="center">4</td></tr></tbody></table>
<p>In the StarRocks aggregation model, the four rows of data are converted to two rows, which reduces the amount of data processed during the subsequent query.</p>
<table><thead><tr><th align="center">Date</th><th align="center">Country</th><th align="center">PV</th></tr></thead><tbody><tr><td align="center">2020.05.01</td><td align="center">CHN</td><td align="center">3</td></tr><tr><td align="center">2020.05.01</td><td align="center">USA</td><td align="center">7</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-aggregation-model">How to use aggregation model<a href="#how-to-use-aggregation-model" class="hash-link" aria-label="Direct link to How to use aggregation model" title="Direct link to How to use aggregation model">​</a></h3>
<p>When creating a table, the aggregation model is enabled by specifying the aggregation function for the value column. Users can use the <code>AGGREGATE KEY</code> to define the sort key.</p>
<p>The following is an example of creating a data table using the aggregation model.</p>
<ul>
<li><code>site_id</code>, <code>date</code> and <code>city_code</code> are sort keys;</li>
<li><code>pv</code> is the value column, using the aggregation function <code>SUM</code>.</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> example_db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">aggregate_tbl </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> site_id LARGEINT </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id of site&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">date</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;time of event&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> city_code </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;city_code of user&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pv </span><span class="token keyword" style="color:#00009f">BIGINT</span><span class="token plain"> SUM </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;total page views&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HASH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">site_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> BUCKETS </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes-on-aggregation-model">Notes on aggregation model<a href="#notes-on-aggregation-model" class="hash-link" aria-label="Direct link to Notes on aggregation model" title="Direct link to Notes on aggregation model">​</a></h3>
<p>The data in the aggregation table will be imported in batches several times, and each import is a new data version. There are three triggers for aggregation:</p>
<ul>
<li>When the data is imported, aggregation is performed before the data is spilled to disk.</li>
<li>After the data is spilled to disk, asynchronous aggregation of multiple versions is performed in the background ;</li>
<li>Multi-version multi-way aggregation is performed during the query.</li>
</ul>
<p>During the query, the value columns are aggregated first and then filtered, and the filtered columns are stored as key  columns.</p>
<p>Refer to &quot;Create Table Statement&quot; for the list of aggregation functions supported by the aggregation model.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-model">Update model<a href="#update-model" class="hash-link" aria-label="Direct link to Update model" title="Direct link to Update model">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenarios-for-update-model">Scenarios for update model<a href="#scenarios-for-update-model" class="hash-link" aria-label="Direct link to Scenarios for update model" title="Direct link to Scenarios for update model">​</a></h3>
<p>Update model is tailored to the scenarios where data gets constantly updated. For example, in an e-commerce scenario, the status of an order often changes, and the number of order updates can exceed hundreds of millions per day. Using the duplicate model to delete old data and insert new data can barely meet the frequent update requirements. The update model is designed for such scenarios. Its suitable scenarios has the following characteristics:</p>
<ul>
<li>There is a demand for constantly updating a large amount of data.</li>
<li>Real-time data analysis is required.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="principle-of-update-model">Principle of update model<a href="#principle-of-update-model" class="hash-link" aria-label="Direct link to Principle of update model" title="Direct link to Principle of update model">​</a></h3>
<p>In the update model, the sort key satisfies the uniqueness constraint and is the primary key.</p>
<p>The StarRocks internally assigns a version number to each batch of imported data. There may be more than one version of the same primary key. When querying, it returns the largest (latest) version of the data.</p>
<table><thead><tr><th align="center">ID</th><th align="center">value</th><th align="center">_version</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">100</td><td align="center">1</td></tr><tr><td align="center">1</td><td align="center">101</td><td align="center">2</td></tr><tr><td align="center">2</td><td align="center">100</td><td align="center">3</td></tr><tr><td align="center">2</td><td align="center">101</td><td align="center">4</td></tr><tr><td align="center">2</td><td align="center">102</td><td align="center">5</td></tr></tbody></table>
<p>As shown in the example above, <code>ID</code> is the primary key, <code>value</code> is the content, and<code>__version</code> is the internal version number. The data with <code>ID=1</code> has two import batches, version 1 and 2 respectively.  The data with <code>ID=2</code> has three import batches, version 3, 4 and 5 respectively. When querying, only the data of the latest version will return (as shown as follow):</p>
<table><thead><tr><th align="center">ID</th><th align="center">value</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">101</td></tr><tr><td align="center">2</td><td align="center">102</td></tr></tbody></table>
<p>Through this mechanism, StarRocks can support the analysis of frequently updated data.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-update-model">How to use update model<a href="#how-to-use-update-model" class="hash-link" aria-label="Direct link to How to use update model" title="Direct link to How to use update model">​</a></h3>
<p>In e-commerce scenarios, statistical analysis is often based on order status. Although the order status changes frequently, <code>create_time</code> and <code>order_id</code> do not change and therefore are often used as filter conditions in queries. Users set the <code>create_time</code> and <code>order_id</code> columns as primary keys(i.e., defined with the <code>UNIQUE KEY</code> keyword when creating a table), which meet the demand for order status updates and allow for quick filtering in queries.</p>
<p>The following is an example of creating a data table using the update model.</p>
<ul>
<li>Use <code>UNIQUE KEY</code>(<code>create_time</code>, <code>order_id</code>) as the primary key, where <code>create_time</code> and<code>order_id</code> are in the queue, and their definitions appear before the definitions of other columns;</li>
<li><code>order_state</code> and <code>total_price</code> are value columns, and their aggregation type is <code>REPLACE</code>.</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> detail </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> create_time </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;create time of an order&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> order_id </span><span class="token keyword" style="color:#00009f">BIGINT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id of an order&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> order_state </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;state of an order&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> total_price </span><span class="token keyword" style="color:#00009f">BIGINT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;price of an order&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">create_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> order_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HASH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">order_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> BUCKETS </span><span class="token number" style="color:#36acaa">8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes-on-update-model">Notes on update model<a href="#notes-on-update-model" class="hash-link" aria-label="Direct link to Notes on update model" title="Direct link to Notes on update model">​</a></h3>
<ul>
<li>When importing data, you need to complete all fields, i.e., <code>create_time</code>, <code>order_id</code>, <code>order_state</code> and <code>total_price</code> in the above example.</li>
<li>When reading data in an update model, multiple versions need to be merged during the query. Given the large number of versions the query performance will be degraded. Therefore, you should reduce the frequency of importing data to an update model. The import frequency should be designed to meet the business requirements for real-time performance.</li>
<li>When querying, filtering is usually performed after multiple versions are merged. To improve query performance, place the value columns that are often filtered but not modified on the primary key. During merging, all primary keys will be compared. For better performance, users should avoid defining too many primary keys. If a column is only occasionally present as a filter condition, it does not need to be placed in the primary key.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="primary-key-model">Primary key model<a href="#primary-key-model" class="hash-link" aria-label="Direct link to Primary key model" title="Direct link to Primary key model">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenarios">Scenarios<a href="#scenarios" class="hash-link" aria-label="Direct link to Scenarios" title="Direct link to Scenarios">​</a></h3>
<p>The primary key model has better support for real-time and frequent updates than the update model. You must specify unique primary keys for tables that use the primary key model. This way, rows in the tables can be updated and deleted based on the primary keys.
The primary key model is suitable for real-time data updates, especially for scenarios in which data needs to be synchronized from MySQL or other databases to StarRocks. The update model can also be used to update data but the adoption of the Merge On Read strategy significantly reduces query performance. The primary key model helps achieve row-level updates. You can use flink-connector-starrocks to synchronize MySQL data to StarRocks. For more information about how to use the connector, see <a href="https://docs.starrocks.com/en-us/main/loading/Flink-connector-starrocks" target="_blank" rel="noopener noreferrer">Use Flink connetor to synchronize MySQL data</a>.
Note that the StarRocks storage engine creates indexes for primary keys and loads the indexes to the memory during data importing. Therefore, the primary key model has high requirements for memory and is not suitable for scenarios in which a large number of primary keys are specified. Currently, the primary keys are stored in memory. To prevent memory from filling up due to memory abuse, the StarRocks storage engine imposes a limit on primary keys: The total length of primary key fields cannot exceed 127 bytes after encoding.
Applicable scenarios:</p>
<ul>
<li>The system has hot and cold data. Hot data generated in recent days is frequently modified and cold data generated long ago is rarely modified. A typical example is real-time synchronization of MySQL order tables to StarRocks. In this example, data is partitioned by day, orders created in recent days are frequently modified, and old orders are no longer updated after they are completed. In this case, only primary key indexes of new orders are loaded to the memory during data loading. Primary key indexes of old orders are not loaded and will not occupy memory space.</li>
</ul>
<p><img loading="lazy" alt="fig1" src="data:image/png;base64,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" width="304" height="483" class="img_ev3q"></p>
<blockquote>
<p>In the preceding figure, data is partitioned by day and data in the latest partitions are frequently modified.</p>
</blockquote>
<ul>
<li>The system has wide tables that contain hundreds to thousands of columns. Primary keys account for only a small portion of the entire data and the memory overhead is low. User status and user portrait tables are examples of such tables. Wide tables have a large number of columns but the total number of users is not large (tens of millions to hundreds of millions). The memory usage of primary key indexes is controllable.</li>
</ul>
<p><img loading="lazy" alt="fig1" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmwAAABSCAMAAADepHjjAAAAbFBMVEVHcEzGxsaBgYFxcXGIiIhvb2+np6eenp55eXmTk5OJiYmWlpZTU1MADQ2wOztyXV0AAACJLS0AAAAAAABlIiIADAwAAAAAAAD///8A////VVXW1tawsLDt7e0AdnYA7u4Ay8sApaUAPz/ORUU01xB2AAAAGHRSTlMA/OTs5fD34+Xr9O3v/fPoGueHKO3lIHIb9mmvAAAEHklEQVR42u2diVLbMBRFSRwFJ1h1KZTiAlrc///HSsoyvCQ1eCNxet50IDcL4zs6c/20UG5uetX3x/ujKm5FDSdXpZB5JmS5kB9djXQVIzqYT92BanRQ3vSE7dvvoyqfRc0b5ULKlZR3Qr0thZzNhFy+CLl+EzJ7bpJ5o7wMB2ryDm6BbSpDdZEOXqSDV2ADNpKNobo6ByQbsJFsDBU9G7ABG8kGbPRswIYDkg3Y6NkYKpIN2IDt0nu2h8cTlYkqBpNKyuJAqgapirEuakgHxVU7yAqSbSrJdpEb8S/cRrmNsvTBUDFBADZgI9mAbWrrbCQbsJFsDBU9G7ABG8kGbNPv2R7a1xOw4aBTsun29RPYcNCpZ9O2alkO2HDQMdmADdimkWxPp/77hYWo4WQupVLyvZmU+UhX0UfOGx2UBw7mF+ig1xiQbFPJBcVtFNhwwAQB2M6wzkayARvJxlD9j0sf1nvvdiTVDtiAbbxk89qYehdwBtiAbcSezeuYaKZyIeLCl8qmB5X3kT+3ST1nnXeJw/AI2HDQPdkSbFbXxlTaVaauw78gQtq5+M2El4N24bXKaWDDQfeezWvvjXZWhzhLsOnIVBC139w2gzZ1tfkSeAQ2HPTq2UKrZlPblpKt2ogAlo0ZFx6Hu2x8MhDpgA0HfZItBdhJ2HaPE2zhiaiBDQf9erZ/wRYgM3vYnE5tm9iI/3ZUxauoVlI1vbqUr67X8qN38qPL7lfRSpYtDH3gYHUeB6qF7ONAfQCb02FmsIctzBMOT33c/zmq4kWUkjJrI3OhZmshl0sh16/yJ82EbL6oVrLNJfdxoM7kYLQxmH+4g2Dfv56mDNxGcdB5ne3T+1Q+BRuw4aB7z/b5TdG0zAtsOOg+G2UjHtguL9mADQeD9WwH2FkPbDgYKdm2SyDv5gPAhoORerbdetsu5jawWWDDwTjJFs97bA53xKMf4XuQtU3rvL62wIaDgXq2BFu9STTtK1vXVToJErestgeMgA0HAyabT0eK4qmiCJ3TPh4/ittX2nMbxcGgPdsBbPGom4/Hdq3eBxuw4WDQZIvH1mKjZneI1cbv3yhPfZyoXFQxmMykLKUslJTZSFeBg84OTsNWmfhLMHFWoI3fHmszNcl2TgfqqpItLuI6u13Mdd5bl5403tq0KeqZjeKA34gHNvZGGSpmo8AGbCQbQ0XPBmw4INmAbXI9m2ldwIaDbsn2o339AjYcdOrZ+HNCwPZlyQZswPZlPRuwAdtEku3kH91YiRpOrqXMlHzvXMr1SFcxngOVT85B3soByUay0bMxVMxGgQ0HJBuwMRtlqHAAbMBGzwZsJBuw4YCeDdhINoaKng3YgI1kY6jo2T6G7dRG/K2o4eSiFDLPhCwX8qOrka6ij1w1OlDz63ZQ/gU8aAMnm2fkIAAAAABJRU5ErkJggg==" width="620" height="82" class="img_ev3q"></p>
<blockquote>
<p>In the preceding figure, the wide table has a moderate number of data rows and primary key indexes account for only a small portion of data in this table.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="principle">Principle<a href="#principle" class="hash-link" aria-label="Direct link to Principle" title="Direct link to Principle">​</a></h3>
<p>The primary key model is powered by the storage engine innovatively designed and developed by StarRocks. This model has different metadata organization, reading, and writing methods from the original table models.
Original table models use the Merge On Read strategy for easy and efficient writing. However, multiple versions must be merged online during data query. Merge operators make predicate push-down and indexing impossible, which severely undermines query performance. The primary key model imposes constraints on primary keys to ensure that only one record exists under the same primary key, which eliminates the need for Merge operations.
Implementation:</p>
<ul>
<li>
<p>When StarRocks receives an UPDATE request on a record, it first locates this record by using the primary key index, marks the record as deleted, and inserts a new record. This way, the UPDATE operation is rewritten to DELETE and INSERT operations.</p>
</li>
<li>
<p>When StarRocks receives a DELETE request on a record, it first locates the record by using the primary key index and marks the record as deleted. This does not affect predicate push-down and indexing during data query, ensuring efficient query execution.</p>
</li>
</ul>
<p>Compared with the update model, the primary key model significantly improves query performance with only a minor write performance loss and low memory usage.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-primary-key-model">Use primary key model<a href="#use-primary-key-model" class="hash-link" aria-label="Direct link to Use primary key model" title="Direct link to Use primary key model">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-table">Create a table<a href="#create-a-table" class="hash-link" aria-label="Direct link to Create a table" title="Direct link to Create a table">​</a></h4>
<p>To enable the primary key model, you can specify the first few columns in the PRIMARY KEY keyword when you create a table, similar to using other databases.
The following statement shows how to use the primary key model to create a table named &#x27;order&#x27; partitioned by day.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> orders </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dt </span><span class="token keyword" style="color:#00009f">date</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_id </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_id </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    merchant_id </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    good_id </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    good_name string </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    price </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cnt </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    revenue </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    state </span><span class="token keyword" style="color:#00009f">tinyint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> order_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> RANGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">dt</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> p20210820 </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2021-08-20&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2021-08-21&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> p20210821 </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2021-08-21&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2021-08-22&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> p20210929 </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2021-09-29&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2021-09-30&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> p20210930 </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2021-09-30&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2021-10-01&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HASH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">order_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> BUCKETS </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;replication_num&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following statement shows how to use the primary key model to create a table named &#x27;users&#x27;.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> users </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_id </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name string </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email string </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address string </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age </span><span class="token keyword" style="color:#00009f">tinyint</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sex </span><span class="token keyword" style="color:#00009f">tinyint</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    last_active </span><span class="token keyword" style="color:#00009f">datetime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    property0 </span><span class="token keyword" style="color:#00009f">tinyint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    property1 </span><span class="token keyword" style="color:#00009f">tinyint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    property2 </span><span class="token keyword" style="color:#00009f">tinyint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    property3 </span><span class="token keyword" style="color:#00009f">tinyint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HASH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> BUCKETS </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;replication_num&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note:</p>
<ul>
<li>The data types of primary key columns can only be boolean, tinyint, smallint, int, bigint, largeint, string/varchar, date, and datetime. You cannot enter null values for primary key columns.</li>
<li>Primary key columns must include the partition key and bucket key.</li>
<li>Unlike the update model, the primary key model allows you to create indexes such as bitmap indexes for non-primary key columns. Note that the indexes must be specified when you create a table.</li>
<li>The primary key model currently does not support rollup indexes and materialized views because the column values may be updated.</li>
<li>The ALTER TABLE statement cannot be used to change column types.  For the syntax and examples of ALTER TABLE，see xxx.</li>
<li>When you design a table, it&#x27;s always good practice to minimize the number and size of primary key columns to save memory. int, bigint, and other data types that take up less storage space are recommended. varchar is not recommended. We recommend that you estimate the memory usage in advance based on the number of rows and data types of primary key columns to prevent OOM. The following example shows how to estimate the memory usage.
a. The primary key of the table is <code>dt date (4byte), id bigint(8byte) = 12byte</code>.
b. The table contains 10 million rows of hot data stored in three copies.
c. The memory usage is calculated by using the following formula:
<code>(12+ 9(Fixed memory usage per row))×100million×3×1.5(Extra memory usage per hash table) = 945 MB</code></li>
<li>Currently, the primary key model only supports updating an entire row and does not support the update of specific columns in a row.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="insertupdatedelete">INSERT/UPDATE/DELETE<a href="#insertupdatedelete" class="hash-link" aria-label="Direct link to INSERT/UPDATE/DELETE" title="Direct link to INSERT/UPDATE/DELETE">​</a></h4>
<p>The INSERT, UPDATE, and DELETE operations can be implemented by loading tasks, such as stream load, broker load, and routine load. Spark load is not supported at present. SQL statements, such as INSERT, UPDATE, and DELETE will be supported in the upcoming versions.
Currently, StarRocks does not distinguish between INSERT and UPSERT. All operations are regarded as UPSERT by default, including data loading by using stream load and broker load.
To support both INSERT and UPSERT operations during data loading, StarRocks adds a special field __op to the syntax of stream load and broker load. This field is used to specify the operation type on a row. The value 0 indicates UPSERT and the value 1 indicates INSERT. You can add a column__op to store the operation type when you load data.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-stream-load-and-broker-load-to-import-data">Use stream load and broker load to import data<a href="#use-stream-load-and-broker-load-to-import-data" class="hash-link" aria-label="Direct link to Use stream load and broker load to import data" title="Direct link to Use stream load and broker load to import data">​</a></h4>
<p>The data loading procedure is similar for stream load and broker load. The loading procedure varies based on the operation type of the data file to be loaded:</p>
<ul>
<li>If the operation type is UPSERT, you do not need to add the <code>__op</code> column. You can set <code>__op</code> to upsert or leave it empty. StarRocks regards upsert as the default operation type. The following code is an example of the data to be imported to table t.</li>
</ul>
<div class="language-Plain_Text language-plain_text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain_text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0,aaaa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1,bbbb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2,\N</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4,dddd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Commands for data loading using a stream load:</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># The __op column is specified.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> --location-trusted -u root: -H </span><span class="token string" style="color:#e3116c">&quot;label:lineorder&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;column_separator:,&quot;</span><span class="token plain"> -T demo.csv http://localhost:8030/api/demo/demo/_stream_load</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The __op column is not specified.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> --location-trusted -u root: -H </span><span class="token string" style="color:#e3116c">&quot;label:lineorder&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;column_separator:,&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;columns:__op=&#x27;upsert&#x27;&quot;</span><span class="token plain"> -T demo.csv http://localhost:8030/api/demo/demo/_stream_load</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Commands for data loading using a broker load:</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># The __op column is specified.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">load label demo.demo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data infile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://localhost:9000/demo.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  into table t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">format</span><span class="token plain"> as </span><span class="token string" style="color:#e3116c">&quot;csv&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> with broker </span><span class="token string" style="color:#e3116c">&quot;broker1&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The __op column is not specified.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">load label demo.demo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data infile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://localhost:9000/demo.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  into table t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">format</span><span class="token plain"> as </span><span class="token string" style="color:#e3116c">&quot;csv&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__op</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;upsert&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> with broker </span><span class="token string" style="color:#e3116c">&quot;broker1&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If the operation type is DELETE, you do not need to add the <code>__op</code> column. You only need to set <code>__op</code> to delete. The following code is an example of the data to delete.</li>
</ul>
<div class="language-Plain_Text language-plain_text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain_text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Data to import</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1,bbbb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4,dddd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note:</p>
<p>Although the DELETE operation requires only the primary key, you must specify all the columns, same as data loading using UPSERT.
Command for data loading using a stream load:</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> --location-trusted -u root: -H </span><span class="token string" style="color:#e3116c">&quot;label:lineorder&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;column_separator:,&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;columns:__op=&#x27;delete&#x27;&quot;</span><span class="token plain"> -T demo.csv http://localhost:8030/api/demo/demo/_stream_load</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Command for data loading using a broker load:</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">load label demo.ttt3 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data infile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://localhost:9000/demo.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  into table t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">format</span><span class="token plain"> as </span><span class="token string" style="color:#e3116c">&quot;csv&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__op</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;delete&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> with broker </span><span class="token string" style="color:#e3116c">&quot;broker1&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If the operation type includes both UPDATE and DELETE,  you must specify <code>__op</code> to indicate the operation types. The following code is an example of the data to import.</li>
</ul>
<div class="language-Plain_Text language-plain_text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain_text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1,bbbb,1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4,dddd,1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5,eeee,0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6,ffff,0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note：</p>
<ul>
<li>Although the DELETE operation requires only the primary key, you must specify all the columns, same as data loading using UPSERT.</li>
<li>In the preceding code, rows 1 and 4 are to be deleted, and rows 5 and 6 are to be added.
Command for data loading using a stream load, in which the third column is the <code>__op</code> column.</li>
</ul>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> --location-trusted -u root: -H </span><span class="token string" style="color:#e3116c">&quot;label:lineorder&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;column_separator:,&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;columns:c1,c2,c3,pk=c1,col0=c2,__op=c3&quot;</span><span class="token plain"> -T demo.csv http://localhost:8030/api/demo/demo/_stream_load</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Command for data loading using a broker load, in which the third column is the <code>__op</code> column.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">load label demo.ttt3 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data infile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hdfs://localhost:9000/demo.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    into table t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">format</span><span class="token plain"> as </span><span class="token string" style="color:#e3116c">&quot;csv&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1, c2, c3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c1, col0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c2, </span><span class="token assign-left variable" style="color:#36acaa">__op</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">c3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> with broker </span><span class="token string" style="color:#e3116c">&quot;broker1&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-routine-load--to-import-data">Use routine load  to import data<a href="#use-routine-load--to-import-data" class="hash-link" aria-label="Direct link to Use routine load  to import data" title="Direct link to Use routine load  to import data">​</a></h4>
<p>In the statement for creating a data loading task using routine load, the <code>__op</code> column can be added at the end of the columns keyword. The value 0 indicates UPSERT and the value 1 indicates DELETE. The following code is an example of the data to import.</p>
<div class="language-Plain_Text language-plain_text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain_text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-23  2020-06-23 00:00:00 beijing haidian 1   -128    -32768  -2147483648    0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-23  2020-06-23 00:00:01 beijing haidian 0   -127    -32767  -2147483647    1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-23  2020-06-23 00:00:02 beijing haidian 1   -126    -32766  -2147483646    0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-23  2020-06-23 00:00:03 beijing haidian 0   -125    -32765  -2147483645    1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-06-23  2020-06-23 00:00:04 beijing haidian 1   -124    -32764  -2147483644    0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Statement for data loading using a routine load:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ROUTINE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LOAD</span><span class="token plain"> routine_load_basic_types_1631533306858 </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> primary_table_without_null </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">k2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">k3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">k4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">k5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">v2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">v3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">__op</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">COLUMNS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TERMINATED</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\t&#x27;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;desired_concurrent_number&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_error_number&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;1000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_batch_interval&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> KAFKA </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kafka_broker_list&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;172.26.92.141:9092&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kafka_topic&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;data-for-basic-types&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kafka_partitions&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0,1,2,3,4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;kafka_offsets&quot;</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;OFFSET_BEGINNING,OFFSET_BEGINNING,OFFSET_BEGINNING,OFFSET_BEGINNING,OFFSET_BEGINNING&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/StarRocks/starrocks/edit/main/docs/table_design/Data_model.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2.1/table_design/Data_distribution"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Data distribution</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2.1/table_design/Materialized_view"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Materialized View</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#duplicate-model" class="table-of-contents__link toc-highlight">Duplicate model</a><ul><li><a href="#scenarios-for-duplicate-model" class="table-of-contents__link toc-highlight">Scenarios for duplicate model</a></li><li><a href="#principle-of-duplicate-model" class="table-of-contents__link toc-highlight">Principle of duplicate model</a></li><li><a href="#how-to-use-duplicate-model" class="table-of-contents__link toc-highlight">How to use duplicate model</a></li><li><a href="#notes-on-duplicate-model" class="table-of-contents__link toc-highlight">Notes on duplicate model</a></li></ul></li><li><a href="#aggregation-model" class="table-of-contents__link toc-highlight">Aggregation model</a><ul><li><a href="#scenarios-for-aggregation-model" class="table-of-contents__link toc-highlight">Scenarios for aggregation model</a></li><li><a href="#principle-of-aggregation-model" class="table-of-contents__link toc-highlight">Principle of aggregation model</a></li><li><a href="#how-to-use-aggregation-model" class="table-of-contents__link toc-highlight">How to use aggregation model</a></li><li><a href="#notes-on-aggregation-model" class="table-of-contents__link toc-highlight">Notes on aggregation model</a></li></ul></li><li><a href="#update-model" class="table-of-contents__link toc-highlight">Update model</a><ul><li><a href="#scenarios-for-update-model" class="table-of-contents__link toc-highlight">Scenarios for update model</a></li><li><a href="#principle-of-update-model" class="table-of-contents__link toc-highlight">Principle of update model</a></li><li><a href="#how-to-use-update-model" class="table-of-contents__link toc-highlight">How to use update model</a></li><li><a href="#notes-on-update-model" class="table-of-contents__link toc-highlight">Notes on update model</a></li></ul></li><li><a href="#primary-key-model" class="table-of-contents__link toc-highlight">Primary key model</a><ul><li><a href="#scenarios" class="table-of-contents__link toc-highlight">Scenarios</a></li><li><a href="#principle" class="table-of-contents__link toc-highlight">Principle</a></li><li><a href="#use-primary-key-model" class="table-of-contents__link toc-highlight">Use primary key model</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/StarRocks_intro">Documentation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 StarRocks, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>