<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.1 docs-doc-page docs-doc-id-loading/Flink_cdc_load" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-beta.0">
<title data-rh="true">Realtime synchronization from MySQL | StarRocks</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/doc/docs/loading/Flink_cdc_load"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.1"><meta data-rh="true" name="docsearch:version" content="3.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.1"><meta data-rh="true" property="og:title" content="Realtime synchronization from MySQL | StarRocks"><meta data-rh="true" name="description" content="StarRocks supports real-time data synchronization from MySQL within seconds, delivering ultra-low latency real-time analytics at scale and enabling users to query real-time data as they happen."><meta data-rh="true" property="og:description" content="StarRocks supports real-time data synchronization from MySQL within seconds, delivering ultra-low latency real-time analytics at scale and enabling users to query real-time data as they happen."><link data-rh="true" rel="icon" href="/doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/doc/docs/loading/Flink_cdc_load"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/doc/docs/loading/Flink_cdc_load" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/doc/zh/docs/loading/Flink_cdc_load" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/doc/docs/loading/Flink_cdc_load" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ER08SJMRY1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="StarRocks" href="/doc/opensearch.xml"><link rel="stylesheet" href="/doc/assets/css/styles.910971bc.css">
<script src="/doc/assets/js/runtime~main.346c5410.js" defer="defer"></script>
<script src="/doc/assets/js/main.a5815ce3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.starrocks.io/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/doc/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">StarRocks</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/doc/docs/introduction/StarRocks_intro">Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/doc/docs/introduction/StarRocks_intro">latest-3.1</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/doc/docs/loading/Flink_cdc_load">latest-3.1</a></li><li><a class="dropdown__link" href="/doc/docs/3.0/loading/Flink_cdc_load">3.0</a></li><li><a class="dropdown__link" href="/doc/docs/2.5/loading/Flink_cdc_load">2.5</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/doc/docs/loading/Flink_cdc_load" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/doc/zh/docs/loading/Flink_cdc_load" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/StarRocks/starrocks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/docs/introduction/StarRocks_intro">StarRocks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/introduction-to-starrocks">Introduction to StarRocks</a><button aria-label="Expand sidebar category &#x27;Introduction to StarRocks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/quick_start">Quick Start</a><button aria-label="Expand sidebar category &#x27;Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/deployment/deployment_overview">Deployment</a><button aria-label="Expand sidebar category &#x27;Deployment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/table_design/StarRocks_table_design">Table Design</a><button aria-label="Expand sidebar category &#x27;Table Design&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/doc/docs/loading/Loading_intro">Data Loading</a><button aria-label="Collapse sidebar category &#x27;Data Loading&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/doc/docs/category/concepts">Concepts</a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/loading/StreamLoad">Load data from a local file system or a streaming data source using HTTP PUT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/loading/hdfs_load">Load data from HDFS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/loading/cloud_storage_load">Load data from cloud storage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/doc/docs/category/load-data-from-apache-kafka">Load data from Apache Kafka</a><button aria-label="Expand sidebar category &#x27;Load data from Apache Kafka&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/doc/docs/category/load-data-from-apache-spark">Load data from Apache Spark</a><button aria-label="Expand sidebar category &#x27;Load data from Apache Spark&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/loading/InsertInto">Load data using INSERT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/loading/Stream_Load_transaction_interface">Load data using Stream Load transaction interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc/docs/loading/Flink_cdc_load">Realtime synchronization from MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/loading/Flink-connector-starrocks">Continuously load data from Apache Flink®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/loading/Load_to_Primary_Key_tables">Change data through loading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/loading/Etl_in_loading">Transform data at loading</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/data-unloading">Data Unloading</a><button aria-label="Expand sidebar category &#x27;Data Unloading&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/query-data-lakes">Query Data Lakes</a><button aria-label="Expand sidebar category &#x27;Query Data Lakes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/query-acceleration">Query Acceleration</a><button aria-label="Expand sidebar category &#x27;Query Acceleration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/integrations">Integrations</a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/administration">Administration</a><button aria-label="Expand sidebar category &#x27;Administration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/faq">FAQ</a><button aria-label="Expand sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/benchmarks">Benchmarks</a><button aria-label="Expand sidebar category &#x27;Benchmarks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/developers">Developers</a><button aria-label="Expand sidebar category &#x27;Developers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/ecosystem-release-notes">Ecosystem Release Notes</a><button aria-label="Expand sidebar category &#x27;Ecosystem Release Notes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/doc/docs/loading/Loading_intro"><span itemprop="name">Data Loading</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Realtime synchronization from MySQL</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: latest-3.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Realtime synchronization from MySQL</h1>
<!-- -->
<!-- -->
<p>StarRocks supports real-time data synchronization from MySQL within seconds, delivering ultra-low latency real-time analytics at scale and enabling users to query real-time data as they happen.</p>
<p>This tutorial helps you learn how you can bring real-time analytics to your business and users. It demonstrates how to synchronize data from MySQL to StarRocks in real time by using the following tools: StarRocks Migration Tools (SMT), Flink, Flink CDC Connector, and flink-starrocks-connector.</p>
<blockquote>
<p><strong>NOTICE</strong></p>
<p>You can load data into StarRocks tables only as a user who has the INSERT privilege on those StarRocks tables. If you do not have the INSERT privilege, follow the instructions provided in <a href="/doc/docs/sql-reference/sql-statements/account-management/GRANT">GRANT</a> to grant the INSERT privilege to the user that you use to connect to your StarRocks cluster.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How it works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How it works" title="Direct link to How it works">​</a></h2>
<p>The following figure illustrates the entire synchronization process.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/4.9.2-bde39f3aa7c56cfb1c29cdeb7de03e0c.png" width="1354" height="326" class="img_ev3q"></p>
<p>Real-time synchronization from MySQL is implemented in two stages: synchronizing database &amp; table schema and synchronizing data. First, the SMT converts MySQL database &amp; table schema into table creation statements for StarRocks. Then, the Flink cluster runs Flink jobs to synchronize full and incremental MySQL data to StarRocks.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>The synchronization process guarantees exactly-once semantics.</p>
</blockquote>
<p><strong>Synchronization process</strong>:</p>
<ol>
<li>
<p>Synchronize database &amp; table schema.</p>
<p>The SMT reads the schema of the MySQL database &amp; table to be synchronized and generates SQL files for creating a destination database &amp; table in StarRocks. This operation is based on the MySQL and StarRocks information in SMT&#x27;s configuration file.</p>
</li>
<li>
<p>Synchronize data.</p>
<p>a. The Flink SQL client executes the data loading statement <code>INSERT INTO SELECT</code> to submit one or more Flink jobs to the Flink cluster.</p>
<p>b. The Flink cluster runs the Flink jobs to obtain data. The <a href="https://github.com/ververica/flink-cdc-connectors/blob/master/docs/content/quickstart/build-real-time-data-lake-tutorial.md" target="_blank" rel="noopener noreferrer">Flink CDC connector</a> first reads full historical data from the source database, then seamlessly switches to incremental reading, and sends the data to flink-starrocks-connector.</p>
<p>c. flink-starrocks-connector accumulates data in mini-batches, and synchronizes each batch of data to StarRocks.</p>
</li>
</ol>
<blockquote>
<p><strong>Note</strong></p>
<p>Only data manipulation language (DML) operations in MySQL can be synchronized to StarRocks. Data definition language (DDL) operations cannot be synchronized.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="scenarios">Scenarios<a href="#scenarios" class="hash-link" aria-label="Direct link to Scenarios" title="Direct link to Scenarios">​</a></h2>
<p>Real-time synchronization from MySQL has a broad range of use cases where data is constantly changed. Take a real-world use case &quot;real-time ranking of commodity sales&quot; as an example.</p>
<p>Flink calculates the real-time ranking of commodity sales based on the original order table in MySQL and synchronizes the ranking to StarRocks&#x27; Primary Key table in real time. Users can connect a visualization tool to StarRocks to view the ranking in real time to gain on-demand operational insights.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparations">Preparations<a href="#preparations" class="hash-link" aria-label="Direct link to Preparations" title="Direct link to Preparations">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="download-and-install-synchronization-tools">Download and install synchronization tools<a href="#download-and-install-synchronization-tools" class="hash-link" aria-label="Direct link to Download and install synchronization tools" title="Direct link to Download and install synchronization tools">​</a></h3>
<p>To synchronize data from MySQL, you need to install the following tools: SMT, Flink, Flink CDC connector, and flink-starrocks-connector.</p>
<ol>
<li>
<p>Download and install Flink, and start the Flink cluster. You can also perform this step by following the instructions in <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/docs/try-flink/local_installation/" target="_blank" rel="noopener noreferrer">Flink official documentation</a>.</p>
<p>a. Install Java 8 or Java 11 in your operating system before you run Flink. You can run the following command to check the installed Java version.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># View the Java version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    java -version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Java 8 is installed if the following output is returned.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    java version </span><span class="token string" style="color:#e3116c">&quot;1.8.0_301&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Java</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> SE Runtime Environment </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">build </span><span class="token number" style="color:#36acaa">1.8</span><span class="token plain">.0_301-b09</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Java HotSpot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64</span><span class="token plain">-Bit Server VM </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">build </span><span class="token number" style="color:#36acaa">25.301</span><span class="token plain">-b09, mixed mode</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>b. Download the <a href="https://flink.apache.org/downloads.html" target="_blank" rel="noopener noreferrer">Flink installation package</a> and decompress it. We recommend that you use  Flink 1.14 or later. The minimum allowed version is Flink 1.11. This topic uses Flink 1.14.5.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># Download Flink.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://archive.apache.org/dist/flink/flink-1.14.5/flink-1.14.5-bin-scala_2.11.tgz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># Decompress Flink.  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -xzf flink-1.14.5-bin-scala_2.11.tgz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># Go to the Flink directory.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token builtin class-name">cd</span><span class="token plain"> flink-1.14.5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>c. Start the Flink cluster.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># Start the Flink cluster.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ./bin/start-cluster.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The Flink cluster is started if the following output is returned.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Starting cluster.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Starting standalonesession daemon on host.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Starting taskexecutor daemon on host.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Download <a href="https://github.com/ververica/flink-cdc-connectors/releases" target="_blank" rel="noopener noreferrer">Flink CDC connector</a>. This topic uses MySQL as the data source and therefore, <code>flink-sql-connector-mysql-cdc-x.x.x.jar</code> is downloaded. The connector version must match the <a href="https://github.com/ververica/flink-cdc-connectors/releases" target="_blank" rel="noopener noreferrer">Flink</a> version. For detailed version mapping, see <a href="https://ververica.github.io/flink-cdc-connectors/release-2.2/content/about.html#supported-flink-versions" target="_blank" rel="noopener noreferrer">Supported Flink Versions</a>. This topic uses Flink 1.14.5 and you can download <code>flink-sql-connector-mysql-cdc-2.2.0.jar</code>.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://repo1.maven.org/maven2/com/ververica/flink-sql-connector-mysql-cdc/2.1.1/flink-sql-connector-mysql-cdc-2.2.0.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Download <a href="https://search.maven.org/artifact/com.starrocks/flink-connector-starrocks" target="_blank" rel="noopener noreferrer">flink-connector-starrocks</a>. The version must match the Flink version.</p>
<blockquote>
<p>The flink-connector-starrocks package <code>x.x.x_flink-y.yy _ z.zz.jar</code> contains three version numbers:</p>
<ul>
<li><code>x.x.x</code> is the version number of flink-connector-starrocks.</li>
<li><code>y.yy</code> is the supported Flink version.</li>
<li><code>z.zz</code> is the Scala version supported by Flink. If the Flink version is 1.14.x or earlier, you must download a package that has the Scala version.</li>
</ul>
<p>This topic uses Flink 1.14.5 and Scala 2.11. Therefore, you can download the following package: <code>1.2.3_flink-14_2.11.jar</code>.</p>
</blockquote>
</li>
<li>
<p>Move the JAR packages of Flink CDC connector (<code>flink-sql-connector-mysql-cdc-2.2.0.jar</code>) and flink-connector-starrocks (<code>1.2.3_flink-1.14_2.11.jar</code>) to the <code>lib</code> directory of Flink.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>If a Flink cluster is already running in your system, you must stop the Flink cluster and restart it to load and validate the JAR packages.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./bin/stop-cluster.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./bin/start-cluster.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</blockquote>
</li>
<li>
<p>Download and decompress the <a href="https://www.starrocks.io/download/community" target="_blank" rel="noopener noreferrer">SMT package</a> and place it in the <code>flink-1.14.5</code> directory. StarRocks provides SMT packages for Linux x86 and macos ARM64. You can choose one based on your operating system and CPU.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># for Linux x86</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://releases.starrocks.io/resources/smt.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># for macOS ARM64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://releases.starrocks.io/resources/smt_darwin_arm64.tar.gz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-mysql-binary-log">Enable MySQL binary log<a href="#enable-mysql-binary-log" class="hash-link" aria-label="Direct link to Enable MySQL binary log" title="Direct link to Enable MySQL binary log">​</a></h3>
<p>To synchronize data from MySQL in real time, the system needs to read data from MySQL binary log (binlog), parse the data, and then synchronize the data to StarRocks. Make sure that MySQL binary log is enabled.</p>
<ol>
<li>
<p>Edit the MySQL configuration file <code>my.cnf</code> (default path: <code>/etc/my.cnf</code>) to enable MySQL binary log.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Enable MySQL Binlog.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log_bin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Configure the save path for the Binlog.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log_bin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/mysql/mysql-bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Configure server_id.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># If server_id is not configured for MySQL 5.7.3 or later, the MySQL service cannot be used. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set the Binlog format to ROW. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">binlog_format </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ROW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The base name of the Binlog file. An identifier is appended to identify each Binlog file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log_bin_basename </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/mysql/mysql-bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The index file of Binlog files, which manages the directory of all Binlog files.  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log_bin_index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/var/lib/mysql/mysql-bin.index</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Run one of the following commands to restart MySQL for the modified configuration file to take effect.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Use service to restart MySQL.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> mysqld restart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use mysqld script to restart MySQL.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/etc/init.d/mysqld restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Connect to MySQL and check whether MySQL binary log is enabled.</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-- Connect to MySQL.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql -h xxx.xx.xxx.xx -P 3306 -u root -pxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Check whether MySQL binary log is enabled.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql&gt; SHOW VARIABLES LIKE &#x27;log_bin&#x27;; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Variable_name | Value |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| log_bin       | ON    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 row in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="synchronize-database--table-schema">Synchronize database &amp; table schema<a href="#synchronize-database--table-schema" class="hash-link" aria-label="Direct link to Synchronize database &amp; table schema" title="Direct link to Synchronize database &amp; table schema">​</a></h2>
<ol>
<li>
<p>Edit the SMT configuration file.
Go to the SMT <code>conf</code> directory and edit the configuration file <code>config_prod.conf</code>, such as MySQL connection information, the matching rules of the database &amp; table to be synchronized, and configuration information of flink-starrocks-connector.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> xxx.xx.xxx.xx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3306</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> user1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> xxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">other</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Number of BEs in StarRocks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">be_num </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># `decimal_v3` is supported since StarRocks-1.18.1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use_decimal_v3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># File to save the converted DDL SQL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ./result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">table-rule.1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pattern to match databases for setting properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ^demo.*$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pattern to match tables for setting properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ^.*$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### Flink sink configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### DO NOT set `connector`, `table-name`, `database-name`. They are auto-generated.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.jdbc-url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">jdbc:mysql://</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_host</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_query_port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.load-url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_host</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_http_port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.username</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">user2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.password</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.column_separator</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.row_delimiter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.buffer-flush.interval-ms</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">15000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p><code>[db]</code>: MySQL connection information.</p>
<ul>
<li><code>host</code>: IP address of the MySQL server.</li>
<li><code>port</code>: port number of the MySQL database, defaults to <code>3306</code></li>
<li><code>user</code>: username for accessing the MySQL database</li>
<li><code>password</code>: password of the username</li>
</ul>
</li>
<li>
<p><code>[table-rule]</code>: database &amp; table matching rules and the corresponding flink-connector-starrocks configuration.</p>
<ul>
<li>
<p><code>Database</code>, <code>table</code>: the names of the database &amp; table in MySQL. Regular expressions are supported.</p>
</li>
<li>
<p><code>flink.starrocks.*</code>: configuration information of flink-connector-starrocks. For more configurations and information, see <a href="/doc/docs/loading/Flink-connector-starrocks">flink-connector-starrocks</a>.</p>
</li>
</ul>
<blockquote>
<p>If you need to use different flink-connector-starrocks configurations for different tables. For example, if some tables are frequently updated and you need to accelerate data loading, see <a href="#use-different-flink-connector-starrocks-configurations-for-different-tables">Use different flink-connector-starrocks configurations for different tables</a>. If you need to load multiple tables obtained from MySQL sharding into the same StarRocks table, see <a href="#synchronize-multiple-tables-after-mysql-sharding-to-one-table-in-starrocks">Synchronize multiple tables after MySQL sharding to one table in StarRocks</a>.</p>
</blockquote>
</li>
<li>
<p><code>[other]</code>: other information</p>
<ul>
<li><code>be_num</code>: The number of BEs in your StarRocks cluster (This parameter will be used for setting a reasonable number of tablets in subsequent StarRocks table creation).</li>
<li><code>use_decimal_v3</code>: Whether to enable <a href="/doc/docs/sql-reference/sql-statements/data-types/DECIMAL">Decimal V3</a>. After Decimal V3 is enabled, MySQL decimal data will be converted into Decimal V3 data when data is synchronized to StarRocks.</li>
<li><code>output_dir</code>: The path to save the SQL files to be generated. The SQL files will be used to create a database &amp; table in StarRocks and submit a Flink job to the Flink cluster. The default path is <code>./result</code> and we recommend that you retain the default settings.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Run the SMT to read the database &amp; table schema in MySQL and generate SQL files in the <code>./result</code> directory based on the configuration file. The <code>starrocks-create.all.sql</code> file is used to create a database &amp; table in StarRocks and the <code>flink-create.all.sql</code> file is used to submit a Flink job to the Flink cluster.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Run the SMT.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./starrocks-migrate-tool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Go to the result directory and check the files in this directory.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink-create.1.sql    smt.tar.gz              starrocks-create.all.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink-create.all.sql  starrocks-create.1.sql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Run the following command to connect to StarRocks and execute the <code>starrocks-create.all.sql</code> file to create a database and table in StarRocks. We recommend that you use the default table creation statement in the SQL file to create a table of the <a href="/doc/docs/table_design/table_types/primary_key_table">Primary Key table</a>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>You can also modify the table creation statement based on your business needs and create a table that does not use the Primary Key table. However, the DELETE operation in the source MySQL database cannot be synchronized to the non-primary key table. Exercise caution when you create such a table.</p>
</blockquote>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -h </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_host</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -P </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_query_port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -u user2 -pxxxxxx </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> starrocks-create.all.sql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the data needs to be processed by Flink before it is written to the destination StarRocks table, the table schema will be different between the source and destination tables. In this case, you must modify the table creation statement. In this example, the destination table requires only the <code>product_id</code> and <code>product_name</code> columns and real-time ranking of commodity sales. You can use the following table creation statement.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE IF NOT EXISTS </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">demo</span><span class="token variable" style="color:#36acaa">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE IF NOT EXISTS </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">demo</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">orders</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_id</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> INT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> NOT NULL COMMENT </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_name</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> STRING NOT NULL COMMENT </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">sales_cnt</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> BIGINT NOT NULL COMMENT </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ENGINE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">olap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PRIMARY KEY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_id</span><span class="token variable" style="color:#36acaa">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DISTRIBUTED BY HASH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_id</span><span class="token variable" style="color:#36acaa">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;replication_num&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>NOTICE</strong></p>
<p>Since v2.5.7, StarRocks can automatically set the number of buckets (BUCKETS) when you create a table or add a partition. You no longer need to manually set the number of buckets. For detailed information, see <a href="/doc/docs/table_design/Data_distribution#determine-the-number-of-buckets">determine the number of buckets</a>.</p>
</blockquote>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="synchronize-data">Synchronize data<a href="#synchronize-data" class="hash-link" aria-label="Direct link to Synchronize data" title="Direct link to Synchronize data">​</a></h2>
<p>Run the Flink cluster and submit a Flink job to continuously synchronize full and incremental data from MySQL to StarRocks.</p>
<ol>
<li>
<p>Go to the Flink directory and run the following command to run the <code>flink-create.all.sql</code> file on your Flink SQL client.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/sql-client.sh -f flink-create.all.sql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This SQL file defines dynamic tables <code>source table</code> and <code>sink table</code>, query statement <code>INSERT INTO SELECT</code>, and specifies the connector, source database, and destination database. After this file is executed, a Flink job is submitted to the Flink cluster to start data synchronization.</p>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>Make sure that the Flink cluster has been started. You can start the Flink cluster by running <code>flink/bin/start-cluster.sh</code>.</li>
<li>If your Flink version is earlier than 1.13, you may not be able to directly run the SQL file <code>flink-create.all.sql</code>. You need to execute SQL statements one by one in this file in the command line interface (CLI) of the SQL client. You also need to escape the <code>\</code> character.</li>
</ul>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&#x27;sink.properties.column_separator&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\\x01&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;sink.properties.row_delimiter&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\\x02&#x27;</span><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</blockquote>
<p><strong>Process data during synchronization</strong>:</p>
<p>If you need to process data during synchronization, such as performing GROUP BY or JOIN on the data, you can modify the <code>flink-create.all.sql</code> file. The following example calculates real-time ranking of commodity sales by executing COUNT (*) and GROUP BY.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    $ ./bin/sql-client.sh -f flink-create.all.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    No default environment is specified.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Searching </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/home/disk1/flink-1.13.6/conf/sql-client-defaults.yaml&#x27;</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.not found.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Executing SQL from file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Flink SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> CREATE DATABASE IF NOT EXISTS </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">default_catalog</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">demo</span><span class="token variable" style="color:#36acaa">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Execute statement succeed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- Create a dynamic table </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable builtin class-name" style="color:#36acaa">source</span><span class="token variable" style="color:#36acaa"> table</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> based on the order table </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> MySQL.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Flink SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE IF NOT EXISTS </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">default_catalog</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">demo</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">orders_src</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">order_id</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> BIGINT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_id</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> INT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">order_date</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> TIMESTAMP NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">customer_name</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> STRING NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_name</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> STRING NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">price</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> DECIMAL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PRIMARY KEY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">order_id</span><span class="token variable" style="color:#36acaa">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NOT ENFORCED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> with </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;connector&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mysql-cdc&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;hostname&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;xxx.xx.xxx.xxx&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;port&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3306&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;password&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;database-name&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;demo&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;table-name&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;orders&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Execute statement succeed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- Create a dynamic table </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">sink table</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Flink SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE IF NOT EXISTS </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">default_catalog</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">demo</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">orders_sink</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_id</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> INT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_name</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> STRING NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">sales_cnt</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> BIGINT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PRIMARY KEY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">product_id</span><span class="token variable" style="color:#36acaa">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NOT ENFORCED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> with </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;sink.max-retries&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;10&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;jdbc-url&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;jdbc:mysql://&lt;fe_host&gt;:&lt;fe_query_port&gt;&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;password&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;sink.properties.strip_outer_array&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;true&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;sink.properties.format&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;json&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;load-url&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;fe_host&gt;:&lt;fe_http_port&gt;&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;sink.buffer-flush.interval-ms&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;15000&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;connector&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;starrocks&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;database-name&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;demo&#x27;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;table-name&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;orders&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Execute statement succeed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -- Implement real-time ranking of commodity sales, where </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">sink table</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> is dynamically updated to reflect data changes </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable builtin class-name" style="color:#36acaa">source</span><span class="token variable" style="color:#36acaa"> table</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Flink SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INSERT INTO </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">default_catalog</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">demo</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">orders_sink</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> product_id,product_name, count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> as cnt from </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">default_catalog</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">demo</span><span class="token variable" style="color:#36acaa">`</span><span class="token builtin class-name">.</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">orders_src</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> group by product_id,product_name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Submitting SQL update statement to the cluster</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> SQL update statement has been successfully submitted to the cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Job ID: 5ae005c4b3425d8bb13fe660260a35da</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you only need to synchronize only a portion of the data, such as data whose payment time is later than December 21, 2021, you can use the <code>WHERE</code> clause in <code>INSERT INTO SELECT</code> to set a filter condition, such as <code>WHERE pay_dt &gt; &#x27;2021-12-21&#x27;</code>. Data that does not meet this condition will not be synchronized to StarRocks.</p>
<p>If the following result is returned, the Flink job has been submitted for full and incremental synchronization.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Submitting </span><span class="token keyword" style="color:#00009f">SQL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> statement </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> the cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SQL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> statement has been successfully submitted </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> the cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Job ID: </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">ae005c4b3425d8bb13fe660260a35da</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>You can use the <a href="https://nightlies.apache.org/flink/flink-docs-master/docs/try-flink/flink-operations-playground/#flink-webui" target="_blank" rel="noopener noreferrer">Flink WebUI</a> or run the <code>bin/flink list -running</code> command on  your Flink SQL client to view Flink jobs that are running in the Flink cluster and the job IDs.</p>
<ul>
<li>
<p>Flink WebUI
<img loading="lazy" alt="img" src="/doc/assets/images/4.9.3-9e843337839f2cf335718301cd414239.png" width="1123" height="808" class="img_ev3q"></p>
</li>
<li>
<p><code>bin/flink list -running</code></p>
</li>
</ul>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    $ bin/flink list -running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ------------------ Running/Restarting Jobs -------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">13.10</span><span class="token plain">.2022 </span><span class="token number" style="color:#36acaa">15</span><span class="token plain">:03:54 </span><span class="token builtin class-name">:</span><span class="token plain"> 040a846f8b58e82eb99c8663424294d5 </span><span class="token builtin class-name">:</span><span class="token plain"> insert-into_default_catalog.lily.example_tbl1_sink </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">RUNNING</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --------------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Note</strong></p>
<p>If the job is abnormal, you can perform troubleshooting by using Flink WebUI or by viewing the log file in the <code>/log</code> directory of Flink 1.14.5.</p>
</blockquote>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-different-flink-connector-starrocks-configurations-for-different-tables">Use different flink-connector-starrocks configurations for different tables<a href="#use-different-flink-connector-starrocks-configurations-for-different-tables" class="hash-link" aria-label="Direct link to Use different flink-connector-starrocks configurations for different tables" title="Direct link to Use different flink-connector-starrocks configurations for different tables">​</a></h3>
<p>If some tables in the data source are frequently updated and you want to accelerate the loading speed of flink-connector-starrocks, you must set a separate flink-connector-starrocks configuration for each table in the SMT configuration file <code>config_prod.conf</code>.</p>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">table-rule.1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pattern to match databases for setting properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ^order.*$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pattern to match tables for setting properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ^.*$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### Flink sink configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### DO NOT set `connector`, `table-name`, `database-name`. They are auto-generated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.jdbc-url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">jdbc:mysql://</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_host</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_query_port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.load-url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_host</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_http_port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.username</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">user2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.password</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.column_separator</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.row_delimiter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.buffer-flush.interval-ms</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">15000</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">table-rule.2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pattern to match databases for setting properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ^order2.*$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pattern to match tables for setting properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ^.*$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### Flink sink configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### DO NOT set `connector`, `table-name`, `database-name`. They are auto-generated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.jdbc-url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">jdbc:mysql://</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_host</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_query_port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.load-url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_host</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">fe_http_port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.username</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">user2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.password</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.column_separator</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.row_delimiter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.buffer-flush.interval-ms</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronize-multiple-tables-after-mysql-sharding-to-one-table-in-starrocks">Synchronize multiple tables after MySQL sharding to one table in StarRocks<a href="#synchronize-multiple-tables-after-mysql-sharding-to-one-table-in-starrocks" class="hash-link" aria-label="Direct link to Synchronize multiple tables after MySQL sharding to one table in StarRocks" title="Direct link to Synchronize multiple tables after MySQL sharding to one table in StarRocks">​</a></h3>
<p>After sharding is performed, data in one MySQL table may be split into multiple tables or even distributed to multiple databases. All the tables have the same schema. In this case, you can set <code>[table-rule]</code> to synchronize these tables to one StarRocks table. For example, MySQL has two databases <code>edu_db_1</code> and <code>edu_db_2</code>, each of which has two tables <code>course_1 and course_2</code>, and the schema of all tables is the same. You can use the following <code>[table-rule]</code> configuration to synchronize all the tables to one StarRocks table.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>The name of the StarRocks table defaults to <code>course__auto_shard</code>. If you need to use a different name, you can modify it in the SQL files <code>starrocks-create.all.sql</code> and <code>flink-create.all.sql</code></p>
</blockquote>
<div class="language-Bash language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">table-rule.1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pattern to match databases for setting properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ^edu_db_</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">-9</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">*$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pattern to match tables for setting properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ^course_</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">-9</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">*$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### Flink sink configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### DO NOT set `connector`, `table-name`, `database-name`. They are auto-generated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.jdbc-url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jdbc: mysql://xxx.xxx.x.x:xxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.load-url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> xxx.xxx.x.x:xxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> user2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> xxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.column_separator </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.row_delimiter </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.buffer-flush.interval-ms </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="import-data-in-json-format">Import data in JSON format<a href="#import-data-in-json-format" class="hash-link" aria-label="Direct link to Import data in JSON format" title="Direct link to Import data in JSON format">​</a></h3>
<p>Data in the preceding example is imported in CSV format. If you are unable to choose a suitable delimiter, you need to replace the following parameters of <code>flink.starrocks.*</code> in <code>[table-rule]</code>.</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.format=csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.column_separator =\x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.row_delimiter =\x02</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Data is imported in JSON format after the following parameters are passed in.</p>
<div class="language-Plain language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.format=json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flink.starrocks.sink.properties.strip_outer_array=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Note</strong></p>
<p>This method slightly slows down the loading speed.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="execute-multiple-insert-into-statements-as-one-flink-job">Execute multiple INSERT INTO statements as one Flink job<a href="#execute-multiple-insert-into-statements-as-one-flink-job" class="hash-link" aria-label="Direct link to Execute multiple INSERT INTO statements as one Flink job" title="Direct link to Execute multiple INSERT INTO statements as one Flink job">​</a></h3>
<p>You can use the <a href="https://nightlies.apache.org/flink/flink-docs-master/docs/dev/table/sqlclient/#execute-a-set-of-sql-statements" target="_blank" rel="noopener noreferrer">STATEMENT SET</a> syntax in the <code>flink-create.all.sql</code> file to execute multiple INSERT INTO statements as one Flink job, which prevents multiple statements from taking up too many Flink job resources and improves the efficiency of executing multiple queries.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Flink supports the STATEMENT SET syntax from 1.13 onwards.</p>
</blockquote>
<ol>
<li>
<p>Open the <code>result/flink-create.all.sql</code> file.</p>
</li>
<li>
<p>Modify the SQL statements in the file. Move all the INSERT INTO statements to the end of the file. Place <code>EXECUTE STATEMENT SET BEGIN</code> before the first INSERT INTO statement and place <code>END;</code> after the last INSERT INTO statement.</p>
</li>
</ol>
<blockquote>
<p><strong>Note</strong></p>
<p>The positions of CREATE DATABASE and CREATE TABLE remain unchanged.</p>
</blockquote>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">EXECUTE</span><span class="token plain"> STATEMENT </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">BEGIN</span><span class="token comment" style="color:#999988;font-style:italic">-- one or more INSERT INTO statements</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a1 </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a2 </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">END</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/StarRocks/starrocks/edit/main/docs/loading/Flink_cdc_load.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doc/docs/loading/Stream_Load_transaction_interface"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Load data using Stream Load transaction interface</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doc/docs/loading/Flink-connector-starrocks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Continuously load data from Apache Flink®</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How it works</a></li><li><a href="#scenarios" class="table-of-contents__link toc-highlight">Scenarios</a></li><li><a href="#preparations" class="table-of-contents__link toc-highlight">Preparations</a><ul><li><a href="#download-and-install-synchronization-tools" class="table-of-contents__link toc-highlight">Download and install synchronization tools</a></li><li><a href="#enable-mysql-binary-log" class="table-of-contents__link toc-highlight">Enable MySQL binary log</a></li></ul></li><li><a href="#synchronize-database--table-schema" class="table-of-contents__link toc-highlight">Synchronize database &amp; table schema</a></li><li><a href="#synchronize-data" class="table-of-contents__link toc-highlight">Synchronize data</a></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#use-different-flink-connector-starrocks-configurations-for-different-tables" class="table-of-contents__link toc-highlight">Use different flink-connector-starrocks configurations for different tables</a></li><li><a href="#synchronize-multiple-tables-after-mysql-sharding-to-one-table-in-starrocks" class="table-of-contents__link toc-highlight">Synchronize multiple tables after MySQL sharding to one table in StarRocks</a></li><li><a href="#import-data-in-json-format" class="table-of-contents__link toc-highlight">Import data in JSON format</a></li><li><a href="#execute-multiple-insert-into-statements-as-one-flink-job" class="table-of-contents__link toc-highlight">Execute multiple INSERT INTO statements as one Flink job</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/doc/docs/introduction/StarRocks_intro">Documentation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 StarRocks, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>