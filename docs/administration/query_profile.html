<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.1 docs-doc-page docs-doc-id-administration/query_profile" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-beta.0">
<title data-rh="true">Analyze query profile | StarRocks</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/doc/docs/administration/query_profile"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.1"><meta data-rh="true" name="docsearch:version" content="3.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.1"><meta data-rh="true" property="og:title" content="Analyze query profile | StarRocks"><meta data-rh="true" name="description" content="This topic describes how to check the query profile. A query profile records the execution information of all worker nodes involved in a query. Query profiles help you quickly identify the bottlenecks that affect the query performance of your StarRocks cluster."><meta data-rh="true" property="og:description" content="This topic describes how to check the query profile. A query profile records the execution information of all worker nodes involved in a query. Query profiles help you quickly identify the bottlenecks that affect the query performance of your StarRocks cluster."><link data-rh="true" rel="icon" href="/doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/doc/docs/administration/query_profile"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/doc/docs/administration/query_profile" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/doc/zh/docs/administration/query_profile" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/doc/docs/administration/query_profile" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ER08SJMRY1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="StarRocks" href="/doc/opensearch.xml"><link rel="stylesheet" href="/doc/assets/css/styles.910971bc.css">
<script src="/doc/assets/js/runtime~main.9c549d19.js" defer="defer"></script>
<script src="/doc/assets/js/main.f0fc5ae1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.starrocks.io/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/doc/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc/img/logo.svg" alt="StarRocks Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">StarRocks</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/doc/docs/introduction/StarRocks_intro">Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/doc/docs/introduction/StarRocks_intro">Latest-3.1</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/doc/docs/administration/query_profile">Latest-3.1</a></li><li><a class="dropdown__link" href="/doc/docs/3.0/administration/query_profile">3.0</a></li><li><a class="dropdown__link" href="/doc/docs/2.5/administration/query_profile">Stable-2.5</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/doc/docs/administration/query_profile" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/doc/zh/docs/administration/query_profile" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/StarRocks/starrocks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/docs/introduction/StarRocks_intro">StarRocks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/introduction-to-starrocks">Introduction to StarRocks</a><button aria-label="Expand sidebar category &#x27;Introduction to StarRocks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/quick_start">Quick Start</a><button aria-label="Expand sidebar category &#x27;Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/deployment/deployment_overview">Deployment</a><button aria-label="Expand sidebar category &#x27;Deployment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/table_design/StarRocks_table_design">Table Design</a><button aria-label="Expand sidebar category &#x27;Table Design&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/loading/Loading_intro">Data Loading</a><button aria-label="Expand sidebar category &#x27;Data Loading&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/data-unloading">Data Unloading</a><button aria-label="Expand sidebar category &#x27;Data Unloading&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/query-data-lakes">Query Data Lakes</a><button aria-label="Expand sidebar category &#x27;Query Data Lakes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/query-acceleration">Query Acceleration</a><button aria-label="Expand sidebar category &#x27;Query Acceleration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/integrations">Integrations</a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/doc/docs/category/administration">Administration</a><button aria-label="Collapse sidebar category &#x27;Administration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/doc/docs/category/management">Management</a><button aria-label="Collapse sidebar category &#x27;Management&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/Scale_up_down">Scale in and out</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/Backup_and_restore">Back up and restore data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/Configuration">Parameter configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/Monitor_and_Alert">Monitor and Alerting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/audit_loader">Manage audit logs within StarRocks via Audit Loader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/enable_fqdn">Enable FQDN access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/timezone">Configure a time zone</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/information_schema">Information Schema</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/monitor_manage_big_queries">Monitor and manage big queries</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/doc/docs/category/resource-management">Resource management</a><button aria-label="Expand sidebar category &#x27;Resource management&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/Data_recovery">Data Recovery</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/doc/docs/administration/privilege_overview">User Privileges and Authentication</a><button aria-label="Expand sidebar category &#x27;User Privileges and Authentication&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/doc/docs/category/performance-tuning">Performance Tuning</a><button aria-label="Collapse sidebar category &#x27;Performance Tuning&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/Query_planning">Query analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc/docs/administration/query_profile">Analyze query profile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/administration/Profiling">Performance Optimization</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/faq">FAQ</a><button aria-label="Expand sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/benchmarks">Benchmarks</a><button aria-label="Expand sidebar category &#x27;Benchmarks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/developers">Developers</a><button aria-label="Expand sidebar category &#x27;Developers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/doc/docs/category/ecosystem-release-notes">Ecosystem Release Notes</a><button aria-label="Expand sidebar category &#x27;Ecosystem Release Notes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/doc/docs/category/administration"><span itemprop="name">Administration</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/doc/docs/category/management"><span itemprop="name">Management</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/doc/docs/category/performance-tuning"><span itemprop="name">Performance Tuning</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Analyze query profile</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Latest-3.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Analyze query profile</h1>
<p>This topic describes how to check the query profile. A query profile records the execution information of all worker nodes involved in a query. Query profiles help you quickly identify the bottlenecks that affect the query performance of your StarRocks cluster.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-query-profile">Enable query profile<a href="#enable-query-profile" class="hash-link" aria-label="Direct link to Enable query profile" title="Direct link to Enable query profile">​</a></h2>
<p>For StarRocks versions earlier than v2.5, you can enable query profile by setting the variable <code>is_report_success</code> to <code>true</code>:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> is_report_success </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For StarRocks v2.5 or later versions, you can enable query profile by setting the variable <code>enable_profile</code> to <code>true</code>:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-profile">Runtime Profile<a href="#runtime-profile" class="hash-link" aria-label="Direct link to Runtime Profile" title="Direct link to Runtime Profile">​</a></h3>
<p>From v3.1 onwards, StarRocks supports the runtime profile feature, empowering you to access query profiles even before the queries are completed.</p>
<p>To use this feature, you need to set the session variable <code>runtime_profile_report_interval</code> in addition to setting <code>enable_profile</code> to <code>true</code>. <code>runtime_profile_report_interval</code> (Unit: second, Default: <code>10</code>), which governs the profile report interval, is set by default to 10 seconds, meaning that whenever a query takes longer than 10 seconds, the runtime profile feature is automatically enabled.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> runtime_profile_report_interval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A runtime profile shows the same information as any query profile does. You can analyze it just like a regular query profile to gain valuable insights into the performance of the running query.</p>
<p>However, a runtime profile can be incomplete because some operators of the execution plan may depend on others. To easily distinguish the running operators from the finished ones, the running operators are marked with <code>Status: Running</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="access-query-profiles">Access query profiles<a href="#access-query-profiles" class="hash-link" aria-label="Direct link to Access query profiles" title="Direct link to Access query profiles">​</a></h2>
<blockquote>
<p><strong>NOTE</strong></p>
<p>If you are using the Enterprise Edition of StarRocks, you can use StarRocks Manager to access and visualize your query profiles.</p>
</blockquote>
<p>If you are using the Community Edition of StarRocks, follow these steps to access your query profiles:</p>
<ol>
<li>Enter <code>http://&lt;fe_ip&gt;:&lt;fe_http_port&gt;</code> in your browser.</li>
<li>On the page this is displayed, click <strong>queries</strong> on the top navigation pane.</li>
<li>In the <strong>Finished Queries</strong> list, choose the query you want to check and click the link in the <strong>Profile</strong> column.</li>
</ol>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-1-e14d11ad744041b7af92ed2ee2b98758.png" width="1280" height="558" class="img_ev3q"></p>
<p>The browser redirects you to a new page that contains the corresponding query profile.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-2-2801dbb3484feef652b8a1287838b0e0.png" width="1280" height="587" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="interpret-a-query-profile">Interpret a query profile<a href="#interpret-a-query-profile" class="hash-link" aria-label="Direct link to Interpret a query profile" title="Direct link to Interpret a query profile">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="structure-of-a-query-profile">Structure of a query profile<a href="#structure-of-a-query-profile" class="hash-link" aria-label="Direct link to Structure of a query profile" title="Direct link to Structure of a query profile">​</a></h3>
<p>Following is an example query profile:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Query:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Summary:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Planner:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Execution Profile </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">de16a85</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">761</span><span class="token plain">c</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token plain">ed</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">917</span><span class="token plain">d</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">00163</span><span class="token plain">e14d435:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Fragment </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Pipeline </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EXCHANGE_SINK </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan_node_id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LOCAL_MERGE_SOURCE </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan_node_id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Pipeline </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LOCAL_SORT_SINK </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan_node_id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AGGREGATE_BLOCKING_SOURCE </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan_node_id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Pipeline </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AGGREGATE_BLOCKING_SINK </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan_node_id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EXCHANGE_SOURCE </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan_node_id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Fragment </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Fragment </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A query profile consists of three sections:</p>
<ul>
<li>Fragment: the execution tree. One query can be divided into one or more fragments.</li>
<li>Pipeline: the execution chain. An execution chain does not have branches. A fragment can be split into several pipelines.</li>
<li>Operator: A pipeline consists of a number of operators.</li>
</ul>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-3-09c1e31d2bc385bc7bf1b59ce0309f8d.png" width="1280" height="484" class="img_ev3q"></p>
<p><em>A fragment consists of several pipelines.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-metrics">Key metrics<a href="#key-metrics" class="hash-link" aria-label="Direct link to Key metrics" title="Direct link to Key metrics">​</a></h3>
<p>A query profile encompasses a mass of metrics that show the details of the query execution. In most cases, you only need to observe the execution time of the operators and the size of the data that they processed. After finding the bottlenecks, you can solve them accordingly.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>Total</td><td>Total time consumed by the query, including the time spent in planning, executing, and profiling.</td></tr><tr><td>QueryCpuCost</td><td>Total CPU time cost of the query. CPU time costs are aggregated for concurrent processes. As a result, the value of this metric may be greater than the actual execution time of the query.</td></tr><tr><td>QueryMemCost</td><td>Total memory cost of the query.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="universal-metrics-for-operators">Universal metrics for operators<a href="#universal-metrics-for-operators" class="hash-link" aria-label="Direct link to Universal metrics for operators" title="Direct link to Universal metrics for operators">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>OperatorTotalTime</td><td>Total CPU time cost of the operator.</td></tr><tr><td>PushRowNum</td><td>Total row count of the data that the operator pushed.</td></tr><tr><td>PullRowNum</td><td>Total row count of the data that the operator pulled.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unique-metrics">Unique metrics<a href="#unique-metrics" class="hash-link" aria-label="Direct link to Unique metrics" title="Direct link to Unique metrics">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>IOTaskExecTime</td><td>Total execution time for all I/O tasks.</td></tr><tr><td>IOTaskWaitTime</td><td>Total wait time for all I/O tasks.</td></tr><tr><td>MorselsCount</td><td>Total number of I/O tasks.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scan-operator">Scan operator<a href="#scan-operator" class="hash-link" aria-label="Direct link to Scan operator" title="Direct link to Scan operator">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>Table</td><td>Table name.</td></tr><tr><td>ScanTime</td><td>Total scan time. Scans are performed in the asynchronous I/O thread pool.</td></tr><tr><td>TabletCount</td><td>Number of tablets.</td></tr><tr><td>PushdownPredicates</td><td>Number of the predicates that were pushed down.</td></tr><tr><td>BytesRead</td><td>Size of the data read by StarRocks.</td></tr><tr><td>CompressedBytesRead</td><td>Size of the compressed data read by StarRocks.</td></tr><tr><td>IOTime</td><td>Total I/O time.</td></tr><tr><td>BitmapIndexFilterRows</td><td>Row count of the data that were filtered out by Bitmap index.</td></tr><tr><td>BloomFilterFilterRows</td><td>Row count of the data that were filtered out by Bloomfilter.</td></tr><tr><td>SegmentRuntimeZoneMapFilterRows</td><td>Row count of the data that were filtered out by runtime Zone Map.</td></tr><tr><td>SegmentZoneMapFilterRows</td><td>Row count of the data that were filtered out by Zone Map.</td></tr><tr><td>ShortKeyFilterRows</td><td>Row count of the data that were filtered out by Short Key.</td></tr><tr><td>ZoneMapIndexFilterRows</td><td>Row count of the data that were filtered out by Zone Map index.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="exchange-operator">Exchange operator<a href="#exchange-operator" class="hash-link" aria-label="Direct link to Exchange operator" title="Direct link to Exchange operator">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>PartType</td><td>Data distribution type. Valid values: <code>UNPARTITIONED</code>, <code>RANDOM</code>, <code>HASH_PARTITIONED</code>, and <code>BUCKET_SHUFFLE_HASH_PARTITIONED</code>.</td></tr><tr><td>BytesSent</td><td>Size of the data that were sent.</td></tr><tr><td>OverallThroughput</td><td>Overall throughput.</td></tr><tr><td>NetworkTime</td><td>Data package transmission time (excluding the time of post-receiving processing). See FAQ below for more about how this metric is calculated and how it can hit an exception.</td></tr><tr><td>WaitTime</td><td>Time to wait because the queue at the sender side is full.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aggregate-operator">Aggregate operator<a href="#aggregate-operator" class="hash-link" aria-label="Direct link to Aggregate operator" title="Direct link to Aggregate operator">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>GroupingKeys</td><td>Name of the grouping keys (GROUP BY columns).</td></tr><tr><td>AggregateFunctions</td><td>Aggregate functions.</td></tr><tr><td>AggComputeTime</td><td>Compute time consumed by aggregate functions.</td></tr><tr><td>ExprComputeTime</td><td>Compute time consumed by the expression.</td></tr><tr><td>HashTableSize</td><td>Size of the hash table.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="join-operator">Join operator<a href="#join-operator" class="hash-link" aria-label="Direct link to Join operator" title="Direct link to Join operator">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>JoinPredicates</td><td>Predicates of the JOIN operation.</td></tr><tr><td>JoinType</td><td>The JOIN type.</td></tr><tr><td>BuildBuckets</td><td>Bucket number of the hash table.</td></tr><tr><td>BuildHashTableTime</td><td>Time used to build the hash table.</td></tr><tr><td>ProbeConjunctEvaluateTime</td><td>Time consumed by Probe Conjunct.</td></tr><tr><td>SearchHashTableTimer</td><td>Time used to search the hash table.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="window-function-operator">Window Function operator<a href="#window-function-operator" class="hash-link" aria-label="Direct link to Window Function operator" title="Direct link to Window Function operator">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>ComputeTime</td><td>Compute time consumed by the window function.</td></tr><tr><td>PartitionKeys</td><td>Name of the partitioning keys (PARTITION BY columns).</td></tr><tr><td>AggregateFunctions</td><td>Aggregate functions.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sort-operator">Sort operator<a href="#sort-operator" class="hash-link" aria-label="Direct link to Sort operator" title="Direct link to Sort operator">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>SortKeys</td><td>Name of the sort keys (ORDER BY columns).</td></tr><tr><td>SortType</td><td>Result sorting type: to list all results, or to list top n results.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tablefunction-operator">TableFunction operator<a href="#tablefunction-operator" class="hash-link" aria-label="Direct link to TableFunction operator" title="Direct link to TableFunction operator">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>TableFunctionExecTime</td><td>Compute time consumed by the table function.</td></tr><tr><td>TableFunctionExecCount</td><td>Number of times the table function is executed.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="project-operator">Project operator<a href="#project-operator" class="hash-link" aria-label="Direct link to Project operator" title="Direct link to Project operator">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>ExprComputeTime</td><td>Compute time consumed by the expression.</td></tr><tr><td>CommonSubExprComputeTime</td><td>Compute time consumed by the common sub-expression.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="localexchange-operator">LocalExchange operator<a href="#localexchange-operator" class="hash-link" aria-label="Direct link to LocalExchange operator" title="Direct link to LocalExchange operator">​</a></h4>
<table><thead><tr><th>metric</th><th>Description</th></tr></thead><tbody><tr><td>Type</td><td>Local Exchange type. Valid values: <code>Passthrough</code>, <code>Partition</code>, and <code>Broadcast</code>.</td></tr><tr><td>ShuffleNum</td><td>Number of shuffles. This metric is valid only when <code>Type</code> is <code>Partition</code>.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hive-connector">Hive Connector<a href="#hive-connector" class="hash-link" aria-label="Direct link to Hive Connector" title="Direct link to Hive Connector">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>ScanRanges</td><td>Number of tablets that are scanned.</td></tr><tr><td>ReaderInit</td><td>The initiation time of Reader.</td></tr><tr><td>ColumnReadTime</td><td>Time consumed by Reader to read and parse data.</td></tr><tr><td>ExprFilterTime</td><td>Time used to filter expressions.</td></tr><tr><td>RowsRead</td><td>Number of data rows that are read.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="input-stream">Input Stream<a href="#input-stream" class="hash-link" aria-label="Direct link to Input Stream" title="Direct link to Input Stream">​</a></h4>
<table><thead><tr><th>Metric</th><th>Description</th></tr></thead><tbody><tr><td>AppIOBytesRead</td><td>Size of the data read by I/O tasks from the application layer.</td></tr><tr><td>AppIOCounter</td><td>Number of I/O tasks from the application layer.</td></tr><tr><td>AppIOTime</td><td>Total time consumed by I/O tasks from the application layer to read data.</td></tr><tr><td>FSBytesRead</td><td>Size of the data read by the storage system.</td></tr><tr><td>FSIOCounter</td><td>Number of I/O tasks from the storage layer.</td></tr><tr><td>FSIOTime</td><td>Total time consumed by the storage layer to read data.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="time-consumed-by-operators">Time consumed by operators<a href="#time-consumed-by-operators" class="hash-link" aria-label="Direct link to Time consumed by operators" title="Direct link to Time consumed by operators">​</a></h3>
<ul>
<li>For the OlapScan and ConnectorScan operators, their time consumption is equivalent to <code>OperatorTotalTime + ScanTime</code>. Because the Scan operators perform I/O operations in the asynchronous I/O thread pool, ScanTime represents asynchronous I/O time.</li>
<li>The time consumption of the Exchange operator is equivalent to <code>OperatorTotalTime + NetworkTime</code>. Because the Exchange operator sends and receives data packages in the BRPC thread pool, NetworkTime represents the time consumed by network transmission.</li>
<li>For all other operators, their time cost is <code>OperatorTotalTime</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="metric-merging-and-minmax">Metric merging and MIN/MAX<a href="#metric-merging-and-minmax" class="hash-link" aria-label="Direct link to Metric merging and MIN/MAX" title="Direct link to Metric merging and MIN/MAX">​</a></h3>
<p>Pipeline engine is a parallel computing engine. Each fragment is distributed to multiple machines for parallel processing, and pipelines on each machine are executed in parallel as multiple concurrent instances. Therefore, while profiling, StarRocks merges same metrics, and records the minimum and maximum values of each metric among all the concurrent instances.</p>
<p>Different merging strategies are adopted for different types of metrics:</p>
<ul>
<li>Time metrics are averages. For example:<!-- -->
<ul>
<li><code>OperatorTotalTime</code> represents the average time cost of all the concurrent instances.</li>
<li><code>__MAX_OF_OperatorTotalTime</code> is the maximum time cost among all the concurrent instances.</li>
<li><code>__MIN_OF_OperatorTotalTime</code> is the minimum time cost among all the concurrent instances.</li>
</ul>
</li>
</ul>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> OperatorTotalTime: </span><span class="token number" style="color:#36acaa">2.192</span><span class="token plain">us</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> __MAX_OF_OperatorTotalTime: </span><span class="token number" style="color:#36acaa">2.502</span><span class="token plain">us</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> __MIN_OF_OperatorTotalTime: </span><span class="token number" style="color:#36acaa">1.882</span><span class="token plain">us</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>Non-time metrics are totaled. For example:</p>
<ul>
<li><code>PullChunkNum</code> represents the total number of all concurrent instances.</li>
<li><code>__MAX_OF_PullChunkNum</code> is the maximum value among all the concurrent instances.</li>
<li><code>__MIN_OF_PullChunkNum</code> is the minimum value among all the concurrent instances.</li>
</ul>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> PullChunkNum: </span><span class="token number" style="color:#36acaa">146.66</span><span class="token plain">K </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">146660</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> __MAX_OF_PullChunkNum: </span><span class="token number" style="color:#36acaa">24.45</span><span class="token plain">K </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">24450</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> __MIN_OF_PullChunkNum: </span><span class="token number" style="color:#36acaa">24.435</span><span class="token plain">K </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">24435</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Some special metrics, which do not have minimum and maximum values, have identical values among all the concurrent instances (for example, <code>DegreeOfParallelism</code>).</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sharp-difference-between-min-and-max">Sharp difference between MIN and MAX<a href="#sharp-difference-between-min-and-max" class="hash-link" aria-label="Direct link to Sharp difference between MIN and MAX" title="Direct link to Sharp difference between MIN and MAX">​</a></h4>
<p>Usually, a noticeable difference between MIN and MAX values indicates the data is skewed. It possibly happens during aggregate or JOIN operations.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> OperatorTotalTime: </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">m48s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> __MAX_OF_OperatorTotalTime: </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">m30s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> __MIN_OF_OperatorTotalTime: </span><span class="token number" style="color:#36acaa">279.170</span><span class="token plain">us</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="perform-text-based-profile-analysis">Perform text-based profile analysis<a href="#perform-text-based-profile-analysis" class="hash-link" aria-label="Direct link to Perform text-based profile analysis" title="Direct link to Perform text-based profile analysis">​</a></h2>
<p>From v3.1 onwards, StarRocks offers a more user-friendly text-based profile analysis feature. This feature allows you to efficiently identify bottlenecks and opportunities for query optimization.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="analyze-an-existing-query">Analyze an existing query<a href="#analyze-an-existing-query" class="hash-link" aria-label="Direct link to Analyze an existing query" title="Direct link to Analyze an existing query">​</a></h3>
<p>You can analyze the profile of an existing query via its <code>QueryID</code>, regardless of whether the query is running or completed.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="list-profiles">List profiles<a href="#list-profiles" class="hash-link" aria-label="Direct link to List profiles" title="Direct link to List profiles">​</a></h4>
<p>Execute the following SQL statement to list the existing profiles:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SHOW</span><span class="token plain"> PROFILELIST</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MySQL </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> profilelist</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------------+---------------------+-------+----------+--------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> QueryId                              </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> StartTime           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> State    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Statement                                                                                                                            </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------------+---------------------+-------+----------+--------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> b8289ffc</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3049</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token plain">ee</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">838</span><span class="token plain">f</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">00163</span><span class="token plain">e0a894b </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2023</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">08</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">59</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">86</span><span class="token plain">ms  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Finished </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> o_orderpriority</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> order_count\nFROM orders\nWHERE o_orderdate </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1993-07-01&#x27;</span><span class="token plain">\n    </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> o_orderdate </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> DAT </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> b5be2fa8</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3049</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token plain">ee</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">838</span><span class="token plain">f</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">00163</span><span class="token plain">e0a894b </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2023</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">08</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">59</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">67</span><span class="token plain">ms  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Finished </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">\nFROM </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\n    </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> l_orderkey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l_extendedprice </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> l_discount</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> revenue\n        </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> o_orderdate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> o_sh </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> b36ac9c6</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3049</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token plain">ee</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">838</span><span class="token plain">f</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">00163</span><span class="token plain">e0a894b </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2023</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">08</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">59</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">19</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">320</span><span class="token plain">ms </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Finished </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">\nFROM </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\n    </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> s_acctbal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p_partkey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p_mfgr\n        </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s_phone</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s_comment\n    F </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> b037b245</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3049</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token plain">ee</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">838</span><span class="token plain">f</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">00163</span><span class="token plain">e0a894b </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2023</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">08</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">59</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">14</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">175</span><span class="token plain">ms </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Finished </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> l_returnflag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> l_linestatus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l_quantity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> sum_qty\n    </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l_extendedprice</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> sum_base_price\n    </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">l_exten </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> a9543cf4</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3049</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token plain">ee</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">838</span><span class="token plain">f</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">00163</span><span class="token plain">e0a894b </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2023</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">08</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">59</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">02</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token plain">ms  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Finished </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> lineitem                                                                                                        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------------+---------------------+-------+----------+--------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">0.006</span><span class="token plain">s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MySQL </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> profilelist </span><span class="token keyword" style="color:#00009f">limit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------------+---------------------+------+----------+-------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> QueryId                              </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> StartTime           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> State    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Statement                                                                                                                           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------------+---------------------+------+----------+-------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> b8289ffc</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3049</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token plain">ee</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">838</span><span class="token plain">f</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">00163</span><span class="token plain">e0a894b </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2023</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">08</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">59</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">27</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">86</span><span class="token plain">ms </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Finished </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> o_orderpriority</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> order_count\nFROM orders\nWHERE o_orderdate </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1993-07-01&#x27;</span><span class="token plain">\n    </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> o_orderdate </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> DAT </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------------+---------------------+------+----------+-------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">Time</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">0.005</span><span class="token plain">s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This SQL statement allows you to easily obtain the <code>QueryId</code> associated with each query. The <code>QueryId</code> serves as a crucial identifier for further profile analysis and investigations.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="analyze-profile">Analyze profile<a href="#analyze-profile" class="hash-link" aria-label="Direct link to Analyze profile" title="Direct link to Analyze profile">​</a></h4>
<p>Once you have obtained the <code>QueryId</code>, you can perform a more detailed analysis on the specific query using the ANALYZE PROFILE statement. This SQL statement provides deeper insights and facilitates a comprehensive examination of the query&#x27;s performance characteristics and optimizations.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">ANALYZE</span><span class="token plain"> PROFILE </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;QueryId&gt;&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">plan_node_id</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By default, the analysis output presents only the most crucial metrics for each operator. However, you can specify the ID of one or more plan nodes to view the corresponding metrics. This feature allows for a more comprehensive examination of the query&#x27;s performance and facilitates targeted optimizations.</p>
<p>Example 1: Analyze the profile without specifying plan node ID:</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-16-f6f837a4527aaba513f5137e486d2987.png" width="2108" height="2652" class="img_ev3q"></p>
<p>Example 2: Analyze the profile and specify the ID of plan nodes:</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-17-b4ecdd10067724ab298c834d9a2a5a40.png" width="2120" height="4492" class="img_ev3q"></p>
<p>The ANALYZE PROFILE statement offers an enhanced approach to analyzing and comprehending the runtime profile. It distinguishes operators with different states, such as blocked, running, and finished. Moreover, this statement provides a comprehensive view of the entire progress as well as the progress of individual operators based on the processed row numbers, enabling a deeper understanding of query execution and performance. This feature further facilitates the profiling and optimization of queries in StarRocks.</p>
<p>Example 3: Analyze the runtime profile of a running query:</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-20-c7b11c8310b1ace98fb7f09e55a07881.png" width="1200" height="1280" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="analyze-a-simulated-query">Analyze a simulated query<a href="#analyze-a-simulated-query" class="hash-link" aria-label="Direct link to Analyze a simulated query" title="Direct link to Analyze a simulated query">​</a></h3>
<p>You can also simulate a given query and analyze its profile using the EXPLAIN ANALYZE statement.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">EXPLAIN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ANALYZE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">sql</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Currently, EXPLAIN ANALYZE supports two types of SQL statements: the query (SELECT) statement and the INSERT INTO statement. You can only simulate the INSERT INTO statement and analyze its profiles on StarRocks&#x27; native OLAP tables. Please note that when you analyze the profiles of an INSERT INTO statement, no data will actually be inserted. By default, the transaction is aborted, ensuring that no unintended changes are made to the data in the process of profile analysis.</p>
<p>Example 1: Analyze the profile of a given query:</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-18-1c02d89da50e7b4ebcdebdd5f50c1ab6.png" width="2132" height="2668" class="img_ev3q"></p>
<p>Example 1: Analyze the profile of an INSERT INTO operation:</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-19-e1a30178fe9c70891ee05ef3b4d1c106.png" width="2182" height="2024" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="visualize-a-query-profile">Visualize a query profile<a href="#visualize-a-query-profile" class="hash-link" aria-label="Direct link to Visualize a query profile" title="Direct link to Visualize a query profile">​</a></h2>
<p>If you are a user of StarRocks Enterprise Edition, you can visualize your query profiles via StarRocks Manager.</p>
<p>The <strong>Profile Overview</strong> page displays some summary metrics, including the total execution time <code>ExecutionWallTime</code>, I/O metrics, network transmission size, and the proportion of CPU and I/O time.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-4-05a9c1d183a4bb0e1ebb55d4af36a9c9.jpeg" width="1280" height="1024" class="img_ev3q"></p>
<p>By clicking the card of an operator (a node), you can view its detailed information in the right pane of the page. There are three tabs:</p>
<ul>
<li><strong>Node</strong>:  core metrics of this operator.</li>
<li><strong>Node Detail</strong>: all metrics of this operator.</li>
<li><strong>Pipeline</strong>: metrics of the pipeline to which the operator belongs. You do not need to pay much attention to this tab because it is related only to scheduling.</li>
</ul>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-5-62a26607af7276ffd59575827233c64b.jpeg" width="1280" height="1021" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="identify-bottlenecks">Identify bottlenecks<a href="#identify-bottlenecks" class="hash-link" aria-label="Direct link to Identify bottlenecks" title="Direct link to Identify bottlenecks">​</a></h3>
<p>The larger the proportion of time taken by an operator, the darker color its card becomes. This helps you easily identify bottlenecks of the query.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-6-e6cf446c63a6d6b05f6a5b24672f4f08.jpeg" width="1280" height="1234" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-whether-data-is-skewed">Check whether data is skewed<a href="#check-whether-data-is-skewed" class="hash-link" aria-label="Direct link to Check whether data is skewed" title="Direct link to Check whether data is skewed">​</a></h3>
<p>Click the card of the operator that takes a large proportion of time, and check its <code>MaxTime</code> and <code>MinTime</code>. A noticeable difference between <code>MaxTime</code> and <code>MinTime</code> usually indicates data is skewed.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-7-91b43c0803385284726d5d02a183b1ba.jpeg" width="1212" height="1280" class="img_ev3q"></p>
<p>Then, click the <strong>Node Detail</strong> tab, and check if any metric shows an exception. In this example, the metric <code>PushRowNum</code> of the Aggregate operator shows data skew.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-8-dbba1acaf5d13a1eaf6e3ff3f890047d.jpeg" width="1202" height="1280" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-whether-the-partitioning-or-bucketing-strategy-takes-effect">Check whether the partitioning or bucketing strategy takes effect<a href="#check-whether-the-partitioning-or-bucketing-strategy-takes-effect" class="hash-link" aria-label="Direct link to Check whether the partitioning or bucketing strategy takes effect" title="Direct link to Check whether the partitioning or bucketing strategy takes effect">​</a></h3>
<p>You can check whether the partitioning or bucketing strategy takes effect by viewing the corresponding query plan using <code>EXPLAIN &lt;sql_statement&gt;</code>.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-9-ae47456988da592eb07e35c41a3a9e0b.png" width="1280" height="529" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-whether-the-correct-materialized-view-is-used">Check whether the correct materialized view is used<a href="#check-whether-the-correct-materialized-view-is-used" class="hash-link" aria-label="Direct link to Check whether the correct materialized view is used" title="Direct link to Check whether the correct materialized view is used">​</a></h3>
<p>Click the corresponding Scan operator and check the <code>Rollup</code> field on the <strong>Node Detail</strong> tab.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-10-672e51dd8361c2336c4335b6dd717742.jpeg" width="1192" height="1280" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-whether-the-join-plan-is-proper-for-left-and-right-tables">Check whether the JOIN plan is proper for left and right tables<a href="#check-whether-the-join-plan-is-proper-for-left-and-right-tables" class="hash-link" aria-label="Direct link to Check whether the JOIN plan is proper for left and right tables" title="Direct link to Check whether the JOIN plan is proper for left and right tables">​</a></h3>
<p>Usually, StarRocks selects the smaller table as the right table of Join. An exception occurs if the query profile shows otherwise.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-11-660e1800ef20c038043562d5254a615d.jpeg" width="1280" height="1017" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-whether-the-distribution-type-of-join-is-correct">Check whether the distribution type of JOIN is correct<a href="#check-whether-the-distribution-type-of-join-is-correct" class="hash-link" aria-label="Direct link to Check whether the distribution type of JOIN is correct" title="Direct link to Check whether the distribution type of JOIN is correct">​</a></h3>
<p>Exchange operators are classified into three types in accordance with the data distribution type:</p>
<ul>
<li><code>UNPARTITIONED</code>: Broadcast. Data is made into several copies and distributed to multiple BEs.</li>
<li><code>RANDOM</code>: Round robin.</li>
<li><code>HASH_PARTITIONED</code> and <code>BUCKET_SHUFFLE_HASH_PARTITIONED</code>: Shuffle. The difference between <code>HASH_PARTITIONED</code> and <code>BUCKET_SHUFFLE_HASH_PARTITIONED</code> lies in the hash functions used to calculate the hash code.</li>
</ul>
<p>For Inner Join, the right table can be the <code>HASH_PARTITIONED</code> and <code>BUCKET_SHUFFLE_HASH_PARTITIONED</code> type or <code>UNPARTITIONED</code> type. Usually, <code>UNPARTITIONED</code> type is adopted only when there are less than 100K rows in the right table.</p>
<p>In the following example, the type of the Exchange operator is Broadcast, but the size of data transmitted by the operator greatly exceeds the threshold.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-12-887b10bec328f052654247631eb91d7b.jpeg" width="1280" height="883" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-whether-joinruntimefilter-takes-effect">Check whether JoinRuntimeFilter takes effect<a href="#check-whether-joinruntimefilter-takes-effect" class="hash-link" aria-label="Direct link to Check whether JoinRuntimeFilter takes effect" title="Direct link to Check whether JoinRuntimeFilter takes effect">​</a></h3>
<p>When the right child of Join is building a hash table, it creates a runtime filter. This runtime filter is sent to the left child tree, and is pushed down to the Scan operator if it is possible. You can check <code>JoinRuntimeFilter</code>-related metrics on the <strong>Node Detail</strong> tab of the Scan operator.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-13-aa0ef6fb70f696319b77c3a89e1a6115.jpeg" width="1280" height="857" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-the-time-cost-of-the-exchange-operator-abnormal">Why is the time cost of the Exchange operator abnormal?<a href="#why-is-the-time-cost-of-the-exchange-operator-abnormal" class="hash-link" aria-label="Direct link to Why is the time cost of the Exchange operator abnormal?" title="Direct link to Why is the time cost of the Exchange operator abnormal?">​</a></h3>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-14-8d5814e364bbbadba4c70b94143dcc8f.jpeg" width="1280" height="628" class="img_ev3q"></p>
<p>The time cost of an Exchange operator consists of two parts: CPU time and network time. Network time relies on the system clock. Network time is calculated as follows:</p>
<ol>
<li>The sender records a <code>send_timestamp</code> before calling the BRPC interface to send the package.</li>
<li>The receiver records a <code>receive_timestamp</code> after receiving the package from the BRPC interface (post-receiving processing time excluded).</li>
<li>After the processing is complete, the receiver sends a response and calculates the network latency. The package transmission latency is equivalent to <code>receive_timestamp</code> - <code>send_timestamp</code>.</li>
</ol>
<p>If system clocks across machines are inconsistent, the time cost of the Exchange operator hits an exception.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-the-total-time-cost-of-all-operators-significantly-less-than-the-query-execution-time">Why is the total time cost of all operators significantly less than the query execution time?<a href="#why-is-the-total-time-cost-of-all-operators-significantly-less-than-the-query-execution-time" class="hash-link" aria-label="Direct link to Why is the total time cost of all operators significantly less than the query execution time?" title="Direct link to Why is the total time cost of all operators significantly less than the query execution time?">​</a></h3>
<p>Possible cause: In high-concurrency scenarios, some pipeline drivers, despite being schedulable, may not be processed in time because they are queued. The waiting time is not recorded in operators&#x27; metrics, but in <code>PendingTime</code>, <code>ScheduleTime</code>, and <code>IOTaskWaitTime</code>.</p>
<p>Example:</p>
<p>From the profile, we can see that <code>ExecutionWallTime</code> is about 55 ms. However, the total time cost of all operators is less than 10 ms, which is significantly less than <code>ExecutionWallTime</code>.</p>
<p><img loading="lazy" alt="img" src="/doc/assets/images/profile-15-dbc29b74bacb4ae3bf671c697126db0c.jpeg" width="1280" height="1252" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/StarRocks/starrocks/edit/main/docs/administration/query_profile.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doc/docs/administration/Query_planning"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Query analysis</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doc/docs/administration/Profiling"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Performance Optimization</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#enable-query-profile" class="table-of-contents__link toc-highlight">Enable query profile</a><ul><li><a href="#runtime-profile" class="table-of-contents__link toc-highlight">Runtime Profile</a></li></ul></li><li><a href="#access-query-profiles" class="table-of-contents__link toc-highlight">Access query profiles</a></li><li><a href="#interpret-a-query-profile" class="table-of-contents__link toc-highlight">Interpret a query profile</a><ul><li><a href="#structure-of-a-query-profile" class="table-of-contents__link toc-highlight">Structure of a query profile</a></li><li><a href="#key-metrics" class="table-of-contents__link toc-highlight">Key metrics</a></li><li><a href="#time-consumed-by-operators" class="table-of-contents__link toc-highlight">Time consumed by operators</a></li><li><a href="#metric-merging-and-minmax" class="table-of-contents__link toc-highlight">Metric merging and MIN/MAX</a></li></ul></li><li><a href="#perform-text-based-profile-analysis" class="table-of-contents__link toc-highlight">Perform text-based profile analysis</a><ul><li><a href="#analyze-an-existing-query" class="table-of-contents__link toc-highlight">Analyze an existing query</a></li><li><a href="#analyze-a-simulated-query" class="table-of-contents__link toc-highlight">Analyze a simulated query</a></li></ul></li><li><a href="#visualize-a-query-profile" class="table-of-contents__link toc-highlight">Visualize a query profile</a><ul><li><a href="#identify-bottlenecks" class="table-of-contents__link toc-highlight">Identify bottlenecks</a></li><li><a href="#check-whether-data-is-skewed" class="table-of-contents__link toc-highlight">Check whether data is skewed</a></li><li><a href="#check-whether-the-partitioning-or-bucketing-strategy-takes-effect" class="table-of-contents__link toc-highlight">Check whether the partitioning or bucketing strategy takes effect</a></li><li><a href="#check-whether-the-correct-materialized-view-is-used" class="table-of-contents__link toc-highlight">Check whether the correct materialized view is used</a></li><li><a href="#check-whether-the-join-plan-is-proper-for-left-and-right-tables" class="table-of-contents__link toc-highlight">Check whether the JOIN plan is proper for left and right tables</a></li><li><a href="#check-whether-the-distribution-type-of-join-is-correct" class="table-of-contents__link toc-highlight">Check whether the distribution type of JOIN is correct</a></li><li><a href="#check-whether-joinruntimefilter-takes-effect" class="table-of-contents__link toc-highlight">Check whether JoinRuntimeFilter takes effect</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#why-is-the-time-cost-of-the-exchange-operator-abnormal" class="table-of-contents__link toc-highlight">Why is the time cost of the Exchange operator abnormal?</a></li><li><a href="#why-is-the-total-time-cost-of-all-operators-significantly-less-than-the-query-execution-time" class="table-of-contents__link toc-highlight">Why is the total time cost of all operators significantly less than the query execution time?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/doc/docs/introduction/StarRocks_intro">Documentation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 StarRocks, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>